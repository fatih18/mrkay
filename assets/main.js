!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("GlobeApi",[],e):"object"==typeof exports?exports.GlobeApi=e():t.GlobeApi=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=78)}([function(t,e,i){"use strict";(function(t){i.d(e,"d",function(){return Nt}),i.d(e,"z",function(){return mt}),i.d(e,"p",function(){return ut}),i.d(e,"A",function(){return Rt}),i.d(e,"g",function(){return dt}),i.d(e,"j",function(){return ct}),i.d(e,"r",function(){return pt}),i.d(e,"e",function(){return Ft}),i.d(e,"l",function(){return lt}),i.d(e,"k",function(){return yt}),i.d(e,"f",function(){return At}),i.d(e,"s",function(){return gt}),i.d(e,"u",function(){return Ct}),i.d(e,"D",function(){return Dt}),i.d(e,"C",function(){return Et}),i.d(e,"E",function(){return Pt}),i.d(e,"q",function(){return bt}),i.d(e,"a",function(){return Tt}),i.d(e,"b",function(){return vt}),i.d(e,"m",function(){return Lt}),i.d(e,"y",function(){return It}),i.d(e,"B",function(){return ht}),i.d(e,"i",function(){return ft});var r=i(8),s=i.n(r),o=i(12),n=i.n(o),a=i(2),h=i.n(a),l=i(3),u=i.n(l),d=i(24),c=i(35),f=i(73),p=i(75),F=i(27),y=i(46),A=i(47),g=i(71),C=i(22),b=i(48),T=i(49),v=i(50),L=i(51),S=i(52),x=i(53),O=i(70),R=i(74),m=i(72),D=i(54),E=i(18),P=i(10),_=i(1);i.d(e,"h",function(){return _.b}),i.d(e,"w",function(){return _.u}),i.d(e,"x",function(){return _.w});var I=i(17),B=i(55),G=i(56),w=i(57),M=i(58),U=i(59),k=i(4);i.d(e,"n",function(){return k.a}),i.d(e,"t",function(){return k.c}),i.d(e,"o",function(){return k.b});var V=i(19),j=i(60),N=i(11),z=i(21),Z=i(61),W=i(29),Y=i(76),H=i(23),X=i(77),K=i(37),q=i(62),J=i(34);i.d(e,"v",function(){return J.a});var Q=i(20),$=i(63),tt=i(9),et=i(64),it=i(65),rt=i(66),st=i(67),ot=i(68);function nt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function at(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nt(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nt(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var ht=[{symbolOffsetX:-1,symbolOffsetY:1,textOffsetX:1,textOffsetY:-1},{symbolOffsetX:-1,symbolOffsetY:-1,textOffsetX:1,textOffsetY:1},{symbolOffsetX:1,symbolOffsetY:1,textOffsetX:-1,textOffsetY:-1},{symbolOffsetX:1,symbolOffsetY:-1,textOffsetX:-1,textOffsetY:1},{symbolOffsetX:0,symbolOffsetY:0,textOffsetX:0,textOffsetY:0}],lt={ADDV:1,ADDSV:2,MOVEV:3,DELETEV:4,ROTATEO:5,SCALEOX:6,SCALEOY:7,MOVEO:8,ADDFRD:9,ROTATEOS:10,ROTATEOE:11,MOVEVH:12,MOVEVHL:13,MOVEZ:14},ut={WMS:1,XYZ_MERCATOR:2},dt={OGC_WFS:1,CAS:2,MVT_XYZ:3,CS_OBJECT_ARRAY:4},ct={POINT:"point",LINE:"line",POLYGON:"polygon",MODEL:"model",SHAPE:"shape",ARCAREA:"arcArea",OBJECT_3D:"object3D"},ft={POINT:"point",LINE:"line",POLYGON:"polygon",CORRIDOR:"corridor",CIRCLE:"circle",ORBIT:"orbit",TRACK:"track",ARCAREA:"arcArea",POLYARC:"polyArc",ELLIPSE:"ellipse",RECTANGLE:"rectangle"},pt={PERPENDICULAR_TRIANGLE:0,ISOSCELES_TRIANGLE:1,EQUILATERAL_TRIANGLE:2,RECTANGLE:3,PENTAGON:4,HEXAGON:5,OCTAGON:6,ELLIPSE:7,PLUS:8,TRISTAR:9,RECSTAR:10,PENTASTAR:11,SPEECH_BUBBLE:12,SHORT_RIGHT_ARROW:13,LONG_RIGHT_ARROW:14,LEFT_RIGHT_ARROW:15},Ft={URL:0,MARKER:1,NOICON:2,CIRCLE:3,MAP:4},yt={ADD_VERTEX:0,INSERT_VERTEX:1,DELETE_VERTEX:2,UPDATE_VERTEX:3,ROTATE_OBJ:4,MOVE_OBJ:5,SCALE_OBJX:6,SCALE_OBJY:7,MOVE_VERTEX:8},At={CTRL:17},gt={NOTSHOW:0,SHOW2D:1,SHOW3D:2},Ct={Z_MSL:0,Z_GROUND_PERVERTEX:1,Z_GROUND_FOLLOW:2},bt={initial:1,lowLod:2,drawSide:3,drawSideBorder:4},Tt={LEFT_TOP:0,RIGHT_TOP:1,LEFT_BOTTOM:2,RIGHT_BOTTOM:3,MID_TOP:4,MID_BOTTOM:5},vt={CS_OBJECT_ARRAY:0,DEFAULT:1},Lt={OBJECT_BUFFER:0,VECTOR_LAYER:1},St={25.5:5,24.5:10,23.5:15,22.5:25,21.5:50,20.5:103,19.5:210,18.5:350.03,17.5:846.99,16.5:1684.52,15.5:3302.32,14.5:6486.56,13.5:13166.91,12.5:26767.23,11.5:53399.55,10.5:104443.24,9.5:206805.34,8.5:417331.51,7.5:871831.2,6.5:1685097.1,5.5:3512354.53,4.5:7419797.23,3.5:13951018.56,3:2553e4},xt="inside",Ot="overlap",Rt={jpeg:{type:"image/jpeg"},png:{type:"image/png"}},mt={GLOBE_RASTER_LOD_PRIORITY:!0,GLOBE_PRIORITY_LEVEL_SPAN:3,GLOBE_GLOBAL_SCALE:1,GLOBE_SYMBOL_SIZE:32,GLOBE_SYMBOL_TEXT_SIZE:32,GLOBE_VERSION:"2.0.03",GLOBE_LOGO_SCALE:1,GLOBE_TEXT_SCALE:1,GLOBE_SYMBOL_SCALE:1,GLOBE_ROTATION_VALUE:.96,EDIT_ICONS_EXPAND:.08,RASTER_TIMEOUT_MS:5e3,RETRY_AT_RASTER_TIMEOUT:!0,RETRY_AT_LAYER_TIMEOUT:!0,MESH_TIMEOUT_MS:6e3,PROFILE_TIMEOUT_MS:15e3,LAYER_TIMEOUT:15e3,MODEL_TIMEOUT:3e4,DEFAULT_TIMEOUT:5e3,ICONMAP_TIMEOUT_MS:6e3,USEROBJ_ICON_TIMEOUT:5e3,RASTER_DEBUG:!1,MESH_DEBUG:!1,VECTOR_DEBUG:!1,CLICK_DISTANCE:10,SNAP_BOX_SIZE:15,SNAP_HEIGHT_BOX_SIZE:15,VECTORLAYER_BUILD_COUNTER_LIMIT:250,VECTORLAYER_GLOBE_LOD_LEVEL:11,MAX_VECTORLAYER_REQUEST_COUNT:6,MAX_RASTER_REQUEST_COUNT:6,FILL_VECTOR_REQUEST_LIST:!1,LAYER_CHECKMESH_INTERVAL_MS:2e3,LAYER_REDUCTION_INTERVAL_MS:3e3,MVT_CONTINUOUS_INTERVAL_MS:100,FONTDRAWER_DEAD_PACKET_LIMIT:1e3,MARKER_ICON_SIZE:64,DELAY_RASTER_CACHE_CAMMOVING_MS:1e3,DELAY_MESH_CACHE_CAMMOVING_MS:50,RASTER_TIME_LIMIT_MS:500,NAVIGATION_SPEED:1,DEFAULT_STATUSBAR_SIZE:17,DEFAULT_STATUSBAR_FONT_SIZE:12,STATUSBAR_FONTSIZE_LIMIT:8,EDIT_LINE_TYPED_ARRAY:1e6,SHAPE_DIVISION:36,LOGO_RIGHT_BLANK_SPACE:15,INTERNAL_MESH_N:5,GLOBE_MIN_CELL_LEVEL:19,GLOBE_VECTOR_CALC_Z_LEVEL:11,GLOBE_RADIUS_K:.001,GLOBE_RADIUS:0,GLOBE_Z_ABART:1,GLOBE_IMAGE_SIZE:256,FOGGED:!0,GLOBE_LIGHT_ONc:!1,GLOBE_PARENT_CELL_DEG:90,GLOBE_PARENT_CELL_LEVEL:1,GLOBE_START_DIST_Yatay:0,GLOBE_START_DIST_Dikey:0,GLOBE_MIN_TILTANGLE:.05,GLOBE_MAX_TILTANGLE:80,GLOBE_ATMOSPHERE_START:0,GLOBE_ATMOSPHERE_END:0,GLOBE_DEFAULT_TRESH_HOLD:350,GLOBE_MIN_DIST:0,GLOBE_MAX_DIST:0,GLOBE_MIN_FLY_DIST:0,MAX_REPEAT_CNT:100,FOV:50,SUN_LIGHT_NO:1,TILT_DRAG_SIZE:64,GLOBE_MOUSE_WHEEL_SPEED_SLOW:1,MAX_MESH_REQUEST:10,tr_loading:1,tr_load_OK:2,tr_load_OK_NoData:3,tr_load_NoInternet:4,DEBUG_MODE:!1,CELL_VERSION_DATE:new Date("2019-01-22T13:03:06.339Z"),RENDER_ICON_VLD:!0,GLOBE_CAMERA_GROUND_ERROR_DIST:2,PLUGIN_DEBUG:!1,RENDER_ICON_XYZ:!1,FBUILD_REQLOD:11,OBJ_CHECK_INTERVAL:1e3,APPLY_Z_COT_LOD:16,EXTRA_Z_COT_K:.1,EXTRA_DEG_K:1,FOLLOW_GROUND_STEP_LIMIT:50,MAX_WORKER_COUNT:5,SHOW_SCALEBAR:!0,SHOW_OVERVIEW_PANEL:!0,SHOW_COMPASS:!0,COMPASS_DEFAULT_SIZE:128,COMPASS_OFFSET_X:64,COMPASS_OFFSET_Y:64,OVERVIEW_OFFSET_X:16,OVERVIEW_OFFSET_Y:16,SCALEBAR_OFFSET_X:0,SCALEBAR_OFFSET_Y:8,REDUCTION_SYMBOL_BOX_SIZE:30,HINT_SHOW_MS:250,QUERY_BOX_SIZE:4,MAX_OPEN_RASTER_COUNT:2,GLOBE_FLYTO_NOTRH_DIV:10,GLOBE_FLYTO_TURN_DIV:600,GLOBE_LOCK_NORTH:!1,GLOBE_FLYTO_TILT3D2D:1.5,LANG:"tr",AUTO_MILITARY_MAP_SIZE:1024,AUTO_MILITARY_ICON_SIZE:64,GLOBE_MAX_DEAD_TEXTOVERLAY:2e3,WMS_OVERLAY_RASTER_INTERVAL_MS:500,NEXT_WMS_OVERLAY_ID:0,GLOBE_SUN_LIGHT_ON:!1,GLOBE_MOON_LIGHT_ON:!1,CAMERA_POS_CHANGED_INTERVAL_MS:2e3,MVT_CACHE_SIZE:200,XYZ_MERCATOR_CACHE_SIZE:400,MESH_CACHE_SIZE:1e3,MAX_TEXT_SIZE_FOR_USEROBJ:1024};mt.GLOBE_RADIUS=6378135*mt.GLOBE_RADIUS_K,mt.GLOBE_START_DIST_Yatay=1.1*mt.GLOBE_RADIUS+mt.GLOBE_RADIUS,mt.GLOBE_START_DIST_Dikey=1.5*mt.GLOBE_RADIUS+mt.GLOBE_RADIUS,mt.GLOBE_ATMOSPHERE_START=mt.GLOBE_RADIUS*(120/6378),mt.GLOBE_ATMOSPHERE_END=mt.GLOBE_RADIUS*(550/6378),mt.GLOBE_MIN_DIST=10*mt.GLOBE_RADIUS_K,mt.GLOBE_MAX_DIST=4*mt.GLOBE_RADIUS,mt.GLOBE_MIN_FLY_DIST=mt.GLOBE_RADIUS/8,mt.GLOBE_SYMBOL_SIZE_HALF=mt.GLOBE_SYMBOL_SIZE/2;var Dt=0,Et=1,Pt=3,_t=0,It=!1,Bt=new Float32Array([.004,.004,.1333,1]),Gt=new Float32Array([.7,.7,.9,1]),wt=new Float32Array([0*mt.GLOBE_RADIUS_K,4800*mt.GLOBE_RADIUS_K,1e4*mt.GLOBE_RADIUS_K,15e3*mt.GLOBE_RADIUS_K,2e4*mt.GLOBE_RADIUS_K,5e4*mt.GLOBE_RADIUS_K,1e5*mt.GLOBE_RADIUS_K,2e5*mt.GLOBE_RADIUS_K,5e5*mt.GLOBE_RADIUS_K,817e3*mt.GLOBE_RADIUS_K,2e6*mt.GLOBE_RADIUS_K,45e5*mt.GLOBE_RADIUS_K,6e6*mt.GLOBE_RADIUS_K,801e4*mt.GLOBE_RADIUS_K,952e4*mt.GLOBE_RADIUS_K,125e5*mt.GLOBE_RADIUS_K,15e6*mt.GLOBE_RADIUS_K,18e6*mt.GLOBE_RADIUS_K,21371e3*mt.GLOBE_RADIUS_K]),Mt=new Float32Array([.01,.09,.16,.2,.31,.35,.4,.5,.55,.6,.64,.68,.7,.745,.785,.815,.84,.855,.87]),Ut=new Float32Array([.4,.5,.57,.62,.68,.71,.73,.76,.8,.84,.845,.85,.9,.94,.95,.96,.97,.99,1.01]),kt=new Float32Array([1,1,1]),Vt={},jt=-1,Nt=function(){function e(t){h()(this,e),this.FastLastFoundCalcDepthZCell=null,this.showGrid=!1,this.allRasterDownloaded=!1,mt.GLOBE_MIN_CELL_LEVEL=t.globeMaxLodLevel<=22?t.globeMaxLodLevel:22,this.FRasters=[],this.FONRasterCount=0,this.FixRasterUrl(t.raster),this.XqPSu7(t),t.raster&&(this.FRasters.push(t.raster),this.FONRasterCount++),this.globedll=t.globedll,this.UserEvents=new G.a,this.Math=new p.a(this),this.Units=new F.a(this),this.Lang=new A.a,this.Coordinates=new y.a(this),this.httpJSON=new I.b(mt.MESH_TIMEOUT_MS,mt.MESH_DEBUG,"Mesh Timeout","Mesh Error"),this.httpArrBuff=new I.a(mt.RASTER_TIMEOUT_MS,mt.RASTER_DEBUG,"Raster Timeout","Raster Error"),this.stretchCanvas=document.createElement("canvas"),this.stretchCanvas.width=256,this.stretchCanvas.height=256,this.stretchCtx=this.stretchCanvas.getContext("2d"),this.stretchCanvas2=document.createElement("canvas"),this.stretchCanvas2.width=128,this.stretchCanvas2.height=128,this.stretchCtx2=this.stretchCanvas2.getContext("2d"),this.shapeCanvas=document.createElement("canvas"),this.shapeCanvas.width=64,this.shapeCanvas.height=64,this.shapeCtx=this.shapeCanvas.getContext("2d"),this.RENDERNOW=!1,this.Xq4HjLCounter=0,this.gl=t.canvas.getContext("webgl",{preserveDrawingBuffer:!0})||t.canvas.getContext("experimental-webgl",{preserveDrawingBuffer:!0}),this.ext=this.gl.getExtension("ANGLE_instanced_arrays"),this.IconMapVertCoordBuff=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.IconMapVertCoordBuff),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(z.b),this.gl.STATIC_DRAW),this.FRasterOverlays=[],this.TextureCoordsManager=new X.a(this.gl),this.FWMSOverlays=[],this.FUndoRedoEdit=new M.a(this,500),this.totalCell=0,this.totalCellold=0,this.showStatusBar=!0,this.statusbarCallback=null,this.statusbarCllbackParams={},this.showDebug=!0,this.statusBarFontSize=mt.DEFAULT_STATUSBAR_FONT_SIZE,this.Xxa833(t.canvas),this.api_UndoEdit=this.api_UndoEdit.bind(this),this.api_RedoEdit=this.api_RedoEdit.bind(this),this.api_CanUndoEdit=this.api_CanUndoEdit.bind(this),this.api_CanRedoEdit=this.api_CanRedoEdit.bind(this),this.X93FVY(),this.canvasCursor="default",this.CSWidgets=new B.a(this,this.parentNode),this.CSWidgets.XEmB0A(),this.CSWidgets.CreateVertexEditWidget(),this.StatusBarWid=this.CSWidgets.CreateStatusBarWidGet(this.parentData,this.statusBarFontSize+5),this.progresWidctx=this.CSWidgets.GetProgressBarCtx(),this.DebugWid=this.CSWidgets.CreateDebugWidget(),this.parentNode.append(this.StatusBarWid),this.parentNode.append(this.DebugWid),this.FGlobText=0,this.cursorIndex=-1,this.EditingHighlightInterval=null,this.globeInterval=null,this.globeCheckMeshForLayerInterval=null,this.MVTCellLayerInterval=null,this.mercator=new tt.a,this.MercatorTileCacher=new et.a,this.MVTCacher=new it.a,this.vectorLayerLoader=new rt.a(this),this.rasterLoader=new st.a(this),this.objZ=new j.a(this),this.whitetex=null,this.XFN8q6(),this.rasterize=new Y.a(this,this.gl),this.FRNum=4,this.FCNum=2,this.FCells=[[],[],[],[]],this.GLOBE_MAX_CELL_CREATE=600,this.FCellOrganizer=new g.a(this),this.FEmptyMesh=[];for(var i=mt.INTERNAL_MESH_N;i--;){this.FEmptyMesh[i]=new Float32Array(mt.INTERNAL_MESH_N);for(var r=mt.INTERNAL_MESH_N;r--;)this.FEmptyMesh[i][r]=_.B}this.FLayers=[],this.IconMap=[],this.MilIcon=H.a,this.MilIcon.SetParameters(this),this.SDFFont=new Z.a(this.gl),this.canvasLayer=document.createElement("canvas"),this.ctxLayer=this.canvasLayer.getContext("2d"),this.mPoly2Tri=new D.a,this.Shapes=new w.a(this.mPoly2Tri),this.GLU=new b.a(this.gl),this.NewNextFutureId=0,this.UserObjArr=[],this.XEAmIM(),this.FScrW=this.canvas.width,this.FScrH=this.canvas.height,this.sizeChangedForIcon=!0,this.sizeChangedForLabel=!0,this.sizeChangedForCircle=!0,this.XQD5Ik=this.XQD5Ik.bind(this),this.XrSiVN=this.XrSiVN.bind(this),this.checkReduction=!1,this.X0sUmz(),this.yGLOBE_DRAWING=!1,this.eyeArr=new Int8Array(3),this.realFogNk=0,this.realFogFk=0,this.reUseCellTextActive=!1,this.reUseCellTexture=[],this.LoadingTextureCellMain=null,this.FCamera=new f.a(this),this.FCameraCallBack=null,this.FFlyModeTo=new _.w(0,0,0),this.FFlyModeUp=new _.w(0,0,0),this.ea=new _.s(0,0,0,0),this.FEyePos=new _.w(0,0,0),this.FEyePos2=new _.w(0,0,0),this.FUpPos=new _.w(0,0,0),this.FEyePosUnit=new _.w(0,0,0),this.TempNewPoint=new _.C(0,0),this.FRealViewDist=0,this.FNearViewDist=0,this.FAltitute=0,this._tanq=0,this.Fp=new _.w(0,0,0),this.Fp2T=new _.w(0,0,0),this.Fu=new _.w(0,0,0),this.Fp2=new _.w(0,0,0),this.Fp2N=new _.w(0,0,0),this.Fp2TF=new _.w(0,0,0),this.Fp2NF=new _.w(0,0,0),this.Lastviewport=new Float32Array([this.FScrW,this.FScrH,this.FScrW,this.FScrH]),this.globeCanvasText=new v.a(this),this.scalebar=new L.a(this),this.compass=new S.a(this),this.overview=new x.a(this),this.LastWinX=0,this.LastWinY=0,this.LastWinW=0,this.LastWinH=0,this.projectionM=new Float32Array(16),this.lookAtMatrix=new Float32Array(16),this.isCellDivision=0,this.MaxCellCreatedToday=0,this.MaxCellCanBeCreated=100,this.LastmodelMatrix=new Float64Array(16),this.LastprojMatrix=new Float64Array(16),this.planeEqs=[new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(4)],this.TempocCcMat=new Float64Array(16),this.TempLevelFloat=new Float32Array(1),this.tempcur=new _.w(0,0,0),this.tempprev=new _.w(0,0,0),this.tempmid=new _.w(0,0,0),this.tempmid2=new _.w(0,0,0),this.tempmid3=new _.w(0,0,0),this.isCheckedMeshFunctions=!1,this.isCheckedGlobeValues=!1,this.isCheckMouseEventValues=null,this.FPrimRasterReqList=[],this.FUpperRasterReqList=[],this.FMeshReqList=[],this.FVectorReqList=[],this.FMeshReqListCount=0,this.FPrimRasterReqListCount=0,this.FVectorReqListCount=0,this.FLastReqCountPercent=0,this.FCurReqCountPercent=0,this.rasterChanged=!1,this.RasterServerUrl=t.rasterUrl,this.RasterUrlSaved=t.rasterUrl,this.meshCacher=new T.a,this.LoadingMeshCellCacheArr=[],this.FTempMeshCache=[],this.LoadingMeshCellMainThread=null,this.LoadingMeshCellMainArr=[],this.MeshServerUrl=t.meshUrl,this.CurrentMeshUrl=null,this.CurrentMeshIndex=0,this.Xue9Mj(),this.FTempMeshMain=[],this.Xi7QDM(),this.LoadingVector=!1,this.LoadingVectorMainArr=[],this.globeArray2.set([66,105,108],0),this.FDrawedCells=[],this.FTextCells=[],this.FDRAWED_MIN_CELL_RES_METERS=1e30,this.FDRAWED_MIN_CELL_MESH_DELTADEG=360,this.FDRAWED_MAX_LEVEL=0,this.FDRAWED_MAX_LEVEL_FLOAT=0,this.FMAX_DRAWED_CELL=50,this.FDrawedWorldRad=new _.E(0,0,0,0),this.FDrawedWorldDeg=new _.E(0,0,0,0),this.FDrawedWorldMerc=new _.E(0,0,0,0),this.FDrawedWorldMercOverview=new _.E(0,0,0,0),this.FontDrawer=new R.a(this),this.ModelDrawer=new m.a(this),this.ModelActive=!1,this.orthoLeft=0,this.orthoTop=0,this.FPSFrameCnt=0,this.FPSStartTime=new Date,this.LastFPS=50,this.DPSByteSize=0,this.TotalDownloadSize=0,this.LastDPS=0,this.globeArray2.set([105,351,105,109],3),this.MouseMode=Dt,this.YMouseMS=0,this.globeArray.set([80,105,114],0),this.DownEndTime=new Date,this.UpEndTime=new Date,this.MouseSt=new _.u(0,0),this.MouseEnd=new _.u(0,0),this.MouseStartForEditing=new _.u(0,0),this.MouseEndForEditing=new _.u(0,0),this.MouseEndForLayer=new _.u(0,0),this.MouseStartForLayer=new _.u(0,0),this.YMouseSt=new _.u(0,0),this.FOrbit=new _.F,this.FDistOrbit=0,this.MouseSt2=new _.u(0,0),this.FNewEye=new _.w(0,0,0),this.TNPoint=new _.C(0,0),this.Tempp2=new _.C(0,0),this.NullTCoor2=new _.C(0,0),this.mCircleIntersect=new _.d,this.FDeltaXOrbit=0,this.FDeltaYOrbit=0,this.Tempc1=new _.C(0,0),this.Tempc2=new _.C(0,0),this.TempNewOrbit=new _.w(0,0,0),this.TempFab_curr=new _.w(0,0,0),this.FLast_ab_next=new Float64Array(16),this.tempcross=new _.w(0,0,0),this.Fabnextfd=!1,this.Fab_temp2=new Float64Array(16),this.Fab_temp=new Float64Array(16),this.TEST_ab_quat=new Float64Array(16),this.Fab_last=new Float64Array(16),this.TempMatrix44=[new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(4)],this.Tempeo=new _.D,this.TEST_ea=new _.s(0,0,0,0),this.tempeye=new _.w(0,0,0),this.Tempstart=new _.w(0,0,0),this.TempLongLat=new _.u(0,0),this.Fab_tempX=new Float64Array(16),this.Fabnextfd2=!1,this.globeArray.set([105,82,101],3),this.tempmouse=new _.F,this.tempmouseGeo=new _.F,this.tempmouseForSeg11=new _.F,this.tempmouseForSeg12=new _.F,this.tempmouseForSeg21=new _.F,this.tempmouseForSeg22=new _.F,this.tempmouseForCenter=new _.F,this.tempmouseForScreenInfo=new _.F,this.FLastHintActive=!1,this.FShowHintFunc=null,this.FCancelHintFunc=null,this.FObjectHintTimer=null,this.FObjectHintInterval=this.FObjectHintInterval.bind(this),this.FObjectHintPoint=[],this.FObjectHintOK=new _.u(-1,-1),this.FObjHintP=new _.u(0,0),this.FObjHintPForMove=new _.u(0,0),this.showHintObj=void 0,this.clientX=void 0,this.clientY=void 0,this.XTDEA3=this.XTDEA3.bind(this),this.X4872A(),this.XTItbk=this.XTItbk.bind(this),this.XzHsth(),this.tempSph=new _.w(0,0,0),this.FIntersectCells=[],this.tempdir=new _.w(0,0,0),this.raytracer=new _.y,this.FLastEditingObj=null,this.FLastEditingCallback=null,this.FEditingObjDown=!1,this.FLastMouse=new _.F,this.P3DA=new _.w(0,0,0),this.P3DB=new _.w(0,0,0),this.XQfPcZ=this.XQfPcZ.bind(this),this.XCKJu9(),this.XHWZjC=this.XHWZjC.bind(this),this.XiIinp(),this.globeArray.set([105,115],6),this.keyCode=null,this.XWzfrR=this.XWzfrR.bind(this),this.X0xrs1=this.X0xrs1.bind(this),this.X391jZ(),this.LastMouseUpPnt=new _.u(0,0),this.MainMouseEnd=new _.u(0,0),this.XeUT9D=this.XeUT9D.bind(this),this.Xp6shV(),this.Xdwlvx=this.Xdwlvx.bind(this),this.XjyHpR(),this.StartOD=0,this.XMvpS5=this.XMvpS5.bind(this),this.XQDre8(),this.time1=0,this.touchCount=0,this.selectionoftwofingers=1,this.distance=0,this.TouchMode=_t,this.xCoord1=0,this.xCoord2=0,this.yCoord1=0,this.yCoord2=0,this.xFirstClick1=0,this.xFirstClick2=0,this.yFirstClick1=0,this.yFirstClick2=0,this.slope1=0,this.tana=0,this.clickCount=0,this.zoom=null,this.firstClickX=0,this.firstClickY=0,this.moveClickX=0,this.moveClickY=0,this.oneFingerMode=0,this.touchX=0,this.touchY=0,this.fingerCount=0,this.doubleValid=0,this.oneZoomMode=0,this.onTouchDownEvent=null,this.Xb09PX(),this.onTouchMoveEvent=null,this.X4F7ze(),this.onTouchUpEvent=null,this.Xq9dMR(),this.axyz=[],this.axyz.length=4,this.XY320e=this.XY320e.bind(this),this.XY320e(),this.XMXAPE(),this.XAKAso(),this.LLDeg=new _.u(0,0),this.URDeg=new _.u(0,0),this.Scale=.7,this.wireFrameMode=!1,this.modelWireFrameMode=!1,this.polyWireFrameMode=!1,this.tempwin=[],this.tempwin.length=3,this.CompassAzimutRadyan=0,this.GLOBE_REALVIEW_K=1,this.GLOBE_CENTER=new _.w(mt.GLOBE_RADIUS,0,0),this.FMAX_DRAWED_CELL=0,this.mPlanetPos=new $.a(this),this.sunp=new _.u(0,0),this.moonp=new _.u(0,0),this.Fp2LSun=new Float32Array([0,0,0]),this.Fp2LMoon=new Float32Array([0,0,0]),this.Xjo2sj=this.Xjo2sj.bind(this),this.XbNlj7=this.XbNlj7.bind(this),this.XYSIVs=this.XYSIVs.bind(this),this.Xwov3F=this.Xwov3F.bind(this),this.X9B9Jv=this.X9B9Jv.bind(this),this.SortForTextureDist=this.SortForTextureDist.bind(this),this.XwpkLl=this.XwpkLl.bind(this),this.XkJgaI=this.XkJgaI.bind(this),this.SortForTexture=this.SortForTexture.bind(this),this.currentWorkerCount=0,this.VLD_ICON_ARR=[0,0,1],this.ICON_COUNT=0,this.inc=!1,this.layerIconCount=0,this.layerLineCount=0,this.layerPolygonCount=0,this.parentsAtMinLOD=[],this.minLod=0,this.canvasForRaster=document.createElement("canvas"),this.canvasForRaster.width=mt.GLOBE_IMAGE_SIZE,this.canvasForRaster.height=mt.GLOBE_IMAGE_SIZE,this.ctxForRaster=this.canvasForRaster.getContext("2d"),this.canvasEmptyImage=document.createElement("canvas"),this.canvasEmptyImage.width=256,this.canvasEmptyImage.height=256,this.ctxEmptyImage=this.canvasEmptyImage.getContext("2d"),this.ctxEmptyImage.fillStyle="rgba(255,255,255,0)",this.ctxEmptyImage.fillRect(0,0,256,256),this.emptyImage=null,this.cameraPosChangedTime=null,this.cameraPosChangedCallback=null,this.CSPBF=new ot.a,console.log("CSPBF",this.CSPBF),this.DrawRender()}return u()(e,[{key:"DrawRender",value:function(){this.RENDERNOW=!0}},{key:"XqUi3k",value:function(){var t,e,i,r,s;for(this.FPrimRasterReqList.length=0,this.FUpperRasterReqList.length=0,this.FMeshReqList.length=0,this.FVectorReqList.length=0,this.FMeshReqListCount=0,this.FPrimRasterReqListCount=0,this.FVectorReqListCount=0,t=this.FRNum;t--;)for(r=this.FCNum;r--;)this.XQvUFJ(this.FCells[t][r]);mt.GLOBE_RASTER_LOD_PRIORITY&&(this.FillDrawedCellRasterRequests(),this.FillUpperParentsRequest(),this.FillDrawedCellOverviewRequests()),this.LoadingTextureCellMain||this.LoadingMeshCellMainThread||(this.FCurReqCountPercent||(this.FLastReqCountPercent=this.FMeshReqList.length+this.FPrimRasterReqList.length+this.FVectorReqListCount),this.FCurReqCountPercent=this.FMeshReqList.length+this.FPrimRasterReqList.length+this.FVectorReqListCount,this.FCurReqCountPercent>this.FLastReqCountPercent&&(this.FLastReqCountPercent=this.FCurReqCountPercent)),this.rasterLoader.CheckDownloads();var o=this.FPrimRasterReqList.length;if(o)for(o>1&&(mt.GLOBE_RASTER_LOD_PRIORITY||this.FPrimRasterReqList.sort(this.SortForTexture)),e=0;e<o&&!(this.rasterLoader.processCount>=mt.MAX_RASTER_REQUEST_COUNT);e++)this.rasterLoader.StartDownload(this.FPrimRasterReqList[e],this.FPrimRasterReqList[e].FCurrentRequestRasterID);var n=this.FMeshReqList.length;if(n){for(n>1&&this.FMeshReqList.sort(this.X9B9Jv),e=0;e<n;e++)i=this.FMeshReqList[e],(s=this.meshCacher.XI0d3W(i.FGeoCoding))?(this.FTempMeshCache[this.LoadingMeshCellCacheArr.length]=s,this.LoadingMeshCellCacheArr.push(i),i.FMeshRequested=!0,i.FRequestCount++):!this.LoadingMeshCellMainThread&&this.LoadingMeshCellMainArr.length<=mt.MAX_MESH_REQUEST&&(this.LoadingMeshCellMainArr.push(i),i.FMeshRequested=!0,i.FRequestCount++);this.LoadingMeshCellMainArr.length&&(this.LoadingMeshCellMainThread=this.XzyOdO,this.LoadingMeshCellMainThread()),this.LoadingMeshCellCacheArr.length&&this.LoadMeshCache()}if(this.FillVectorLayerReqList()){this.vectorLayerLoader.CheckDownloads();var a=this.FVectorReqList.length;if(a)for(a>1&&this.FVectorReqList.sort(this.XwpkLl),e=a;e--&&!(this.vectorLayerLoader.processCount>=mt.MAX_VECTORLAYER_REQUEST_COUNT);)this.vectorLayerLoader.StartDownload(this.FVectorReqList[e])}}},{key:"XHF2mi",value:function(t){for(var e=Object.keys(t),i=0,r=e.length;r--;)if("number"==typeof t[e[r]])i+=8;else if("string"==typeof t[e[r]])i+=2*t[e[r]].length;else if("boolean"==typeof t[e[r]])i+=4;else if("object"===n()(t[e[r]])&&t[e[r]]&&t[e[r]].constructor&&"Point3d"===t[e[r]].constructor.name)i+=24;else if("object"===n()(t[e[r]])){var s=Object.prototype.toString.call(t[e[r]]).split(" ");if("Array]"===s[1]){var o=Object.prototype.toString.call(t[e[r]][0]).split(" ");if("Array]"===o[1])for(var a=t[e[r]].length;a--;){if("Array]"===Object.prototype.toString.call(t[e[r]][a]).split(" ")[1])for(var h=t[e[r]][a].length;h--;)"Point3d"===t[e[r]][a][h].constructor.name?i+=16:"Point2d"===t[e[r]][a][h].constructor.name&&(i+=24)}else if("Float32Array]"===o[1])for(var l=t[e[r]].length;l--;)"TexCoords"===e[r]||"TexCoords2"===e[r]||"IntTexCoords"===e[r]||"IntVertices"===e[r]||"Vertices"===e[r]||"Vertices2"===e[r]?i+=2*t[e[r]][l].byteLength:i+=t[e[r]][l].byteLength;else"number"==typeof t[e[r]][0]?i+=8*t[e[r]].length:"Boolean]"===o[1]?i+=16:t[e[r]][0]&&"Point3d"===t[e[r]][0].constructor.name?i+=3*t[e[r]].length*8:t[e[r]][0]&&"Point2d"===t[e[r]][0].constructor.name&&(i+=2*t[e[r]].length*8)}else"Float32Array]"===s[1]?i+=t[e[r]].byteLength:"Float16Array]"===s[1]?i+=t[e[r]].byteLength:"Int16Array]"===s[1]?i+=t[e[r]].byteLength:"Int8Array]"===s[1]&&(i+=t[e[r]].byteLength)}return(this.FCellOrganizer.FDead.length+this.FCellOrganizer.Flive.length)*i/1024/1024}},{key:"XEAmIM",value:function(){var t,e;for(t=0;t<this.FRNum;t++)this.FCells[t].length=0;for(t=0;t<2;t++)for(e=0;e<this.FCNum;e++)this.FCells[t][e]=this.FCellOrganizer.XZfI4L(null,e,t,1,-1,t,e);for(this.CreatePoleCells(),t=0;t<this.FRNum;t++)for(e=0;e<this.FCNum;e++){var i=this.FCells[t][e];i.FRequestCount++,i.FMeshRequested=!0,i.XFTTPF(this.FEmptyMesh,!1,!1)}}},{key:"CreatePoleCells",value:function(){var t=this.FCells[0][0],e=this.FCells[0][1],i=this.FCells[1][0],r=this.FCells[1][1];this.FCells[2][0]=this.FCellOrganizer.CreatePoleCell(null,-90,t.FCellTGW.UR.x+(90-t.FDegreeH)/2,t.FDegreeW,90-t.FDegreeH,1,-1,-1,-1),this.FCells[2][1]=this.FCellOrganizer.CreatePoleCell(null,90,e.FCellTGW.UR.x+(90-e.FDegreeH)/2,e.FDegreeW,90-e.FDegreeH,1,-1,-1,-1),this.FCells[3][0]=this.FCellOrganizer.CreatePoleCell(null,-90,i.FCellTGW.UR.x+(-90-i.FDegreeH)/2,i.FDegreeW,90-i.FDegreeH,1,-1,-1,-1),this.FCells[3][1]=this.FCellOrganizer.CreatePoleCell(null,90,r.FCellTGW.UR.x+(-90-r.FDegreeH)/2,r.FDegreeW,90-r.FDegreeH,1,-1,-1,-1)}},{key:"XiNmwY",value:function(t){var e;if(t.FVisible&&t.FActive)for(e=4;e--;)t.FChilds[e]&&(t.FChilds[e].XHFJCE(),this.XiNmwY(t.FChilds[e]))}},{key:"XFN8q6",value:function(){this.ProgramGlobe=C.a.CreateProgramGlobe(this.gl),this.Program2D=C.a.CreateProgram2D(this.gl),this.Program3D=C.a.CreateProgram3D(this.gl),this.ProgramModel=C.a.CreateProgramModel(this.gl),this.Program2DForLayerIcon=C.a.CreateProgram2DForLayerIcon(this.gl),this.Program3DForLayer=C.a.CreateProgram3DForLayer(this.gl),this.Program2DForLayerLabels=C.a.CreateProgramForLayerLabels(this.gl),this.Program2DForLayerCircle=C.a.CreateProgram2DForLayerCircle(this.gl);var t=this.gl;t.useProgram(this.Program2DForLayerCircle),this.P2DvertexPosForLayerCircle=t.getAttribLocation(this.Program2DForLayerCircle,"vertexPos"),this.P2DoffsetLocForLayerCircle=t.getAttribLocation(this.Program2DForLayerCircle,"offset"),this.P2DFillColorLocForLayerCircle=t.getUniformLocation(this.Program2DForLayerCircle,"fillColor"),this.P2DBorderColorLocForLayerCircle=t.getUniformLocation(this.Program2DForLayerCircle,"borderColor"),this.P2DBorderWidthLocForLayerCircle=t.getUniformLocation(this.Program2DForLayerCircle,"borderWidth"),this.P2DRadiusLocForLayerCircle=t.getUniformLocation(this.Program2DForLayerCircle,"radius"),this.P2DOrtoValuesLocForLayerCircle=t.getUniformLocation(this.Program2DForLayerCircle,"orthoValues"),this.gl.enableVertexAttribArray(this.P2DvertexPosForLayerCircle),this.gl.enableVertexAttribArray(this.P2DoffsetLocForLayerCircle),t.useProgram(this.Program2DForLayerIcon),this.P2DvertexPosForLayerIcon=t.getAttribLocation(this.Program2DForLayerIcon,"vertexPos"),this.P2DoffsetLocForLayerIcon=t.getAttribLocation(this.Program2DForLayerIcon,"offset"),this.P2DtextCoordLocForLayerIcon=t.getAttribLocation(this.Program2DForLayerIcon,"aTextureCoord"),this.P2DprojectionMatrixLocForLayerIcon=t.getUniformLocation(this.Program2DForLayerIcon,"projectionMatrix"),this.P2DScaleLocForLayerIcon=t.getUniformLocation(this.Program2DForLayerIcon,"scale"),this.P2DRotationLocForLayerIcon=t.getUniformLocation(this.Program2DForLayerIcon,"fRotation"),this.P2DOpacityLocForLayerIcon=t.getUniformLocation(this.Program2DForLayerIcon,"opacity"),this.P2DOrtoValuesLocForLayerIcon=t.getUniformLocation(this.Program2DForLayerIcon,"orthoValues"),t.uniform1f(this.P2DRotationLocForLayerIcon,0),t.uniform2fv(this.P2DScaleLocForLayerIcon,[1,1]),t.uniform1f(this.P2DOpacityLocForLayerIcon,1),this.gl.enableVertexAttribArray(this.P2DvertexPosForLayerIcon),this.gl.enableVertexAttribArray(this.P2DoffsetLocForLayerIcon),t.useProgram(this.Program2DForLayerLabels),this.P2DvertexPosForLayerLabels=t.getAttribLocation(this.Program2DForLayerLabels,"vertexPos"),this.P2DHaloColorLocForLayerLabels=t.getUniformLocation(this.Program2DForLayerLabels,"haloColor"),this.P2DtextCoordLocForLayerLabels=t.getAttribLocation(this.Program2DForLayerLabels,"aTextureCoord"),this.P2DOpacityLocForLayerLabels=t.getUniformLocation(this.Program2DForLayerLabels,"v2"),this.P2DTranslationLocForLayerLabels=t.getUniformLocation(this.Program2DForLayerLabels,"translation"),this.P2DOrtoValuesLocForLayerLabels=t.getUniformLocation(this.Program2DForLayerLabels,"orthoValues"),this.P2DisHollowLocForLayerLabels=t.getUniformLocation(this.Program2DForLayerLabels,"isHalo"),this.P2DScaleLocForLayerLabels=t.getUniformLocation(this.Program2DForLayerLabels,"scale"),this.gl.enableVertexAttribArray(this.P2DvertexPosForLayerLabels),this.gl.enableVertexAttribArray(this.P2DtextCoordLocForLayerLabels),t.useProgram(this.Program3DForLayer),this.P3DvertexPosForLayer=t.getAttribLocation(this.Program3DForLayer,"vertexPos"),this.P3DnormalPosForLayer=t.getAttribLocation(this.Program3DForLayer,"vertexNormal"),this.P3DmodelViewMatrixLocForLayer=t.getUniformLocation(this.Program3DForLayer,"modelViewMatrix"),this.P3DprojectionMatrixLocForLayer=t.getUniformLocation(this.Program3DForLayer,"projectionMatrix"),this.P3DOpacityLocForLayer=t.getUniformLocation(this.Program3DForLayer,"v2"),this.P3DfogColorForLayer=t.getUniformLocation(this.Program3DForLayer,"u_fogColor"),this.P3DfogNearForLayer=t.getUniformLocation(this.Program3DForLayer,"fogNear"),this.P3DfogFarForLayer=t.getUniformLocation(this.Program3DForLayer,"fogFar"),this.P3DsetFogEnableForLayer=t.getUniformLocation(this.Program3DForLayer,"setFogEnable"),this.P3DTranslationLocForLayer=t.getUniformLocation(this.Program3DForLayer,"translation"),this.P3DisPointForLayer=t.getUniformLocation(this.Program3DForLayer,"isPoint"),t.uniform4fv(this.P3DfogColorForLayer,Gt),t.enableVertexAttribArray(this.P3DvertexPosForLayer),t.disable(t.DITHER),t.useProgram(this.Program2D),this.P2DvertexPos=t.getAttribLocation(this.Program2D,"vertexPos"),this.P2DtextCoordLoc=t.getAttribLocation(this.Program2D,"aTextureCoord"),this.P2DmodelViewMatrixLoc=t.getUniformLocation(this.Program2D,"modelViewMatrix"),this.P2DprojectionMatrixLoc=t.getUniformLocation(this.Program2D,"projectionMatrix"),this.P2DOpacityLoc=t.getUniformLocation(this.Program2D,"v"),t.enableVertexAttribArray(this.P2DvertexPos),t.enableVertexAttribArray(this.P2DtextCoordLoc),t.enable(t.BLEND),t.useProgram(this.Program3D),this.P3DvertexPos=t.getAttribLocation(this.Program3D,"vertexPos"),this.P3DnormalPos=t.getAttribLocation(this.Program3D,"vertexNormal"),this.P3DmodelViewMatrixLoc=t.getUniformLocation(this.Program3D,"modelViewMatrix"),this.P3DprojectionMatrixLoc=t.getUniformLocation(this.Program3D,"projectionMatrix"),this.P3DOpacityLoc=t.getUniformLocation(this.Program3D,"v2"),this.P3DPointSize=t.getUniformLocation(this.Program3D,"pointSize"),this.P3DisPoint=t.getUniformLocation(this.Program3D,"isPoint"),this.P3DfogColor=t.getUniformLocation(this.Program3D,"u_fogColor"),this.P3DfogNear=t.getUniformLocation(this.Program3D,"fogNear"),this.P3DfogFar=t.getUniformLocation(this.Program3D,"fogFar"),this.P3DsetFogEnable=t.getUniformLocation(this.Program3D,"setFogEnable"),t.uniform4fv(this.P3DfogColor,Gt),t.enableVertexAttribArray(this.P3DvertexPos),t.enableVertexAttribArray(this.PModeltextCoordLoc),t.disable(t.DITHER),t.useProgram(this.ProgramModel),this.PModelvertexPos=t.getAttribLocation(this.ProgramModel,"vertexPos"),this.PModelmodelViewMatrixLoc=t.getUniformLocation(this.ProgramModel,"modelViewMatrix"),this.PModelprojectionMatrixLoc=t.getUniformLocation(this.ProgramModel,"projectionMatrix"),this.PModeltextCoordLoc=t.getAttribLocation(this.ProgramModel,"aTextureCoord"),this.PModelColorLoc=t.getUniformLocation(this.ProgramModel,"color"),this.PModeltexturecontrol=t.getUniformLocation(this.ProgramModel,"texturecontrol"),this.PModelnormalPos=t.getAttribLocation(this.ProgramModel,"vertexNormal"),this.PModelambientColor=t.getUniformLocation(this.ProgramModel,"ambientColor"),this.PModelspecularColor=t.getUniformLocation(this.ProgramModel,"specularColor"),this.PModelmodelwireframe=t.getUniformLocation(this.ProgramModel,"modelwireframe"),this.PModelNS=t.getUniformLocation(this.ProgramModel,"nS"),this.PModelfogColor=t.getUniformLocation(this.ProgramModel,"u_fogColor"),this.PModelfogNear=t.getUniformLocation(this.ProgramModel,"fogNear"),this.PModelfogFar=t.getUniformLocation(this.ProgramModel,"fogFar"),this.PModelsetFogEnable=t.getUniformLocation(this.ProgramModel,"setFogEnable"),t.uniform4fv(this.PModelfogColor,Gt),t.enableVertexAttribArray(this.PModelvertexPos),t.enableVertexAttribArray(this.PModeltextCoordLoc),t.disable(t.DITHER),t.useProgram(this.ProgramGlobe),this.vertexPos=t.getAttribLocation(this.ProgramGlobe,"vertexPos"),this.modelViewMatrixLoc=t.getUniformLocation(this.ProgramGlobe,"modelViewMatrix"),this.projectionMatrixLoc=t.getUniformLocation(this.ProgramGlobe,"projectionMatrix"),this.texCoordLoc=t.getAttribLocation(this.ProgramGlobe,"aTextureCoord"),this.fogColor=t.getUniformLocation(this.ProgramGlobe,"u_fogColor"),this.fogNear=t.getUniformLocation(this.ProgramGlobe,"fogNear"),this.fogFar=t.getUniformLocation(this.ProgramGlobe,"fogFar"),this.setFogEnable=t.getUniformLocation(this.ProgramGlobe,"setFogEnable"),this.translationLoc=t.getUniformLocation(this.ProgramGlobe,"translation"),this.colorLoc=t.getUniformLocation(this.ProgramGlobe,"color"),this.opacityLoc=t.getUniformLocation(this.ProgramGlobe,"opacity"),this.normalPos=t.getAttribLocation(this.ProgramGlobe,"vertexNormal"),this.sunPosLoc=t.getUniformLocation(this.ProgramGlobe,"sunPos"),this.moonPosLoc=t.getUniformLocation(this.ProgramGlobe,"moonPos"),this.sunAmbientColorLoc=t.getUniformLocation(this.ProgramGlobe,"sunAmbientColor"),this.sunDiffuseColorLoc=t.getUniformLocation(this.ProgramGlobe,"sunDiffuseColor"),this.sunSpecularColorLoc=t.getUniformLocation(this.ProgramGlobe,"sunSpecularColor"),this.moonAmbientColorLoc=t.getUniformLocation(this.ProgramGlobe,"moonAmbientColor"),this.moonDiffuseColorLoc=t.getUniformLocation(this.ProgramGlobe,"moonDiffuseColor"),this.moonSpecularColorLoc=t.getUniformLocation(this.ProgramGlobe,"moonSpecularColor"),this.moonIllumLoc=t.getUniformLocation(this.ProgramGlobe,"moonIllum"),this.setSunEnable=t.getUniformLocation(this.ProgramGlobe,"setSunEnable"),this.setMoonEnable=t.getUniformLocation(this.ProgramGlobe,"setMoonEnable"),t.uniform1i(this.setSunEnable,0),t.uniform1i(this.setMoonEnable,0),t.uniform1f(this.opacityLoc,1),t.uniform4fv(this.fogColor,Gt),this.X9bxMg(1),t.enableVertexAttribArray(this.vertexPos),t.enableVertexAttribArray(this.texCoordLoc),t.disable(t.DITHER),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),this.CreateBaseOverviewTexture(!0,!0,!0),this.XBIAqc(!0,!0,!0),this.XAbjer(),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND)}},{key:"XQvUFJ",value:function(t){if(t.FVisible){var e,i;if(!t.isPole&&!mt.GLOBE_RASTER_LOD_PRIORITY){var r=t.FParent,s=t.FChildOrder,o=t.FTextures,n=t.FCellDist,a=t.FRealRadius,h=t.FActivationK,l=t.GetLastTextureRequest();-1!==l&&(r&&r.FTextures[l].FChildTextureInfoExists&&0===r.FTextures[l].FChildTextureList[s]?(o[l].FTextureRequested=!0,o[l].FTextName=null):r&&!r.FTextures[l].FTextureRequesting&&r.FTextures[l].FTextureRequested&&null===r.FTextures[l].FTextName?(o[l].FTextureRequested=!0,o[l].FTextName=null):(null===r||r.FTextures[l].FTextName)&&(null!==r&&r.FTextures[l].FChildTextureInfoExists&&1!==r.FTextures[l].FChildTextureList[s]||t.X5Ya6M(l)||this.XLLDVD(n-a*h,h*a)&&(t.FCurrentRequestRasterID=l,this.FPrimRasterReqList.push(t))))}if(t.FMeshRequested||this.LoadingMeshCellMainThread||null!==t.FParent&&t.FParent.FMeshParent!==t.FParent||this.FMeshReqList.push(t),this.FillVectorLayerReqList())for(e=t.FCellLayers.length;e--;)(i=t.FCellLayers[e]).FCityLayer._FActive&&!i.FRequested&&(this.FVectorReqList.push(i),this.FVectorReqListCount++);if(t.FActive)for(e=4;e--;)t.FChilds[e]&&this.XQvUFJ(t.FChilds[e])}}},{key:"FillVectorLayerReqList",value:function(){return!!mt.FILL_VECTOR_REQUEST_LIST||!(this.FCamera.IsScreenMoving()&&!this.FCamera.FFLYMODE)}},{key:"_FillDrawedCellRasterRequests",value:function(t,e){if(!t.isPole){if(t.FLevel>=this.FRasters[e].maxLodLevel){var i=t.GetParentAtLod(this.FRasters[e].maxLodLevel);if(!i||i.FTextures[e].FTextureRequested)return null;t=i}var r=t,s=r.FParent,o=r.FChildOrder,n=r.FTextures;if(s&&s.FTextures[e].FChildTextureInfoExists&&0===s.FTextures[e].FChildTextureList[o])n[e].FTextureRequested=!0,n[e].FTextName=null;else if(null===s||!s.FTextures[e].FChildTextureInfoExists||1===s.FTextures[e].FChildTextureList[o])return t.FCurrentRequestRasterID=e,t}return null}},{key:"FillDrawedCellRasterRequests",value:function(){for(var t=this.FDrawedCells.length,e=0;e<t;e++){var i=this.FDrawedCells[e],r=i.GetLastTextureRequest();if(-1!==r){var s=this._FillDrawedCellRasterRequests(i,r);s&&this.FPrimRasterReqList.push(s)}}this.FPrimRasterReqList.sort(this.SortForTextureDist)}},{key:"FillUpperParentsRequest",value:function(){var t;for(t=this.FDrawedCells.length;t--;){var e=this.FDrawedCells[t].FLevel-mt.GLOBE_PRIORITY_LEVEL_SPAN;e=e<1?1:e;var i=this.FDrawedCells[t].GetParentAtLod(e);if(-1===this.FUpperRasterReqList.indexOf(i)){var r=i.GetLastTextureRequest();if(-1!==r){var s=this._FillDrawedCellRasterRequests(i,r);s&&-1===this.FUpperRasterReqList.indexOf(s)&&this.FUpperRasterReqList.push(s)}}}for(this.FUpperRasterReqList.sort(this.SortForTextureDist),t=this.FUpperRasterReqList.length;t--;){var o=this.FPrimRasterReqList.indexOf(this.FUpperRasterReqList[t]);if(-1===o)this.FPrimRasterReqList.unshift(this.FUpperRasterReqList[t]);else{var n=this.FPrimRasterReqList.splice(o,1);this.FPrimRasterReqList.unshift(n[0])}}}},{key:"FillDrawedCellOverviewRequests",value:function(){if(mt.SHOW_OVERVIEW_PANEL)for(var t=this.overview,e=t.RasterID,i=t.OverviewReqLis,r=i.length,s=0;s<r;s++)if(i[s].FTextures[e]){var o=this.FPrimRasterReqList.indexOf(i[s]);if(-1===o)this.FPrimRasterReqList.unshift(i[s]);else{var n=this.FPrimRasterReqList.splice(o,1);this.FPrimRasterReqList.unshift(n[0])}}}},{key:"XLLDVD",value:function(t,e){return t<_.e||e*this._tanq/t*(1-this.FCamera.FTILT_ROT_DEGREE/150)>.5*mt.GLOBE_DEFAULT_TRESH_HOLD}},{key:"XzmkKK",value:function(){this.gl.uniform1f(this.fogNear,this.realFogNk),this.gl.uniform1f(this.fogFar,this.realFogFk)}},{key:"Xwm2mb",value:function(){this.gl.uniform1f(this.P3DfogNear,this.realFogNk),this.gl.uniform1f(this.P3DfogFar,this.realFogFk)}},{key:"XtsvUC",value:function(){this.gl.uniform1f(this.PModelfogNear,this.realFogNk),this.gl.uniform1f(this.PModelfogFar,this.realFogFk)}},{key:"Xq3c0V",value:function(){this.gl.uniform1f(this.P3DfogNearForLayer,this.realFogNk),this.gl.uniform1f(this.P3DfogFarForLayer,this.realFogFk)}},{key:"X9bxMg",value:function(t){this.gl.uniform1i(this.setFogEnable,t),this.gl.useProgram(this.Program3DForLayer),this.gl.uniform1i(this.P3DsetFogEnableForLayer,t),this.gl.useProgram(this.ProgramModelForLayer),this.gl.useProgram(this.Program3D),this.gl.uniform1i(this.P3DsetFogEnable,t),this.gl.useProgram(this.ProgramModel),this.gl.uniform1i(this.PModelsetFogEnable,t),this.gl.useProgram(this.ProgramGlobe)}},{key:"SetSunMoonEnable",value:function(t,e){this.gl.uniform1i(this.setSunEnable,t?1:0),this.gl.uniform1i(this.setMoonEnable,e?1:0),this.gl.useProgram(this.ProgramGlobe)}},{key:"XRHMsy",value:function(t,e){for(var i,r,s=t[0],o=wt.length-2;o--;){var n=wt[o];if(e>n){r=wt[o+1]-n,i=(e-n)*(t[o+1]-t[o])/r,s=t[o]+i;break}}return s}},{key:"XyFDuw",value:function(){mt.FOGGED&&(this.realFogNk=this.FRealViewDist*this.XRHMsy(Mt,this.FAltitute),this.realFogFk=this.FRealViewDist*this.XRHMsy(Ut,this.FAltitute),this.XzmkKK())}},{key:"Xcr3f9",value:function(){var t=this.gl;if(this.FAltitute>mt.GLOBE_ATMOSPHERE_END)t.clearColor(Bt[0],Bt[1],Bt[2],1);else if(this.FAltitute<mt.GLOBE_ATMOSPHERE_START)t.clearColor(Gt[0],Gt[1],Gt[2],1);else{var e=(this.FAltitute-mt.GLOBE_ATMOSPHERE_START)/(mt.GLOBE_ATMOSPHERE_END-mt.GLOBE_ATMOSPHERE_START);t.clearColor(Gt[0]*(1-e)+Bt[0]*e,Gt[1]*(1-e)+Bt[1]*e,Gt[2]*(1-e)+Bt[2]*e,1)}t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}},{key:"XEfOft",value:function(){this.ctx.clearRect(0,0,this.canvas2d.width,this.canvas2d.height)}},{key:"Draw",value:function(){if(!this.yGLOBE_DRAWING&&this.FScrW&&this.FScrH){this.yGLOBE_DRAWING=!0,this.layerPolygonCount=0,this.layerLineCount=0,this.layerIconCount=0;var t=0;for(this.FCamera.FFLYMODE=!1,this.FCameraCallBack&&(this.FCamera.X9VnrD(!1),this.FCameraCallBack.SetPosition()),this.Xt7F4L(),this.Xcr3f9(),this.XEfOft(),mt.GLOBE_LIGHT_ONc?(this.SetLightDirectional(),this.X9bxMg(0)):this.XyFDuw(),this.XTme9m(),this.FCamera.FFLYMODE?_.c.LookAt(this.eyeArr,this.FFlyModeTo,this.FFlyModeUp,this.lookAtMatrix):_.c.LookAt(this.eyeArr,this.Fp2,this.Fu,this.lookAtMatrix),this.GLU.curModel(this.lookAtMatrix),this.GLU.Translate(this.Fp2.x,this.Fp2.y,this.Fp2.z),this.GLU.setModelToGL(this.modelViewMatrixLoc),this.XsHvmY(),this.ModelDrawer.Clear(),this.FontDrawer.Clear(),this.XsVYnp(),this.XqUi3k(),this.gl.enable(this.gl.BLEND),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.GLU.pushModel(),mt.GLOBE_LIGHT_ONc&&this.gl.enableVertexAttribArray(this.normalPos),this.XCUoyh(),this.DrawProjText(),mt.GLOBE_LIGHT_ONc&&this.gl.disableVertexAttribArray(this.normalPos),this.GLU.popModel(),this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker&&((this.FCamera.InTurnOrRotate||4===this.MouseMode||this.MouseMode===Pt||2===this.MouseMode||3===this.FCamera.FCamMode||2===this.touchCount||3===this.touchCount||6===this.TouchMode||2===this.TouchMode)&&this.XGqwp9(this.MouseX,this.MouseY,!1,this.tempmouse),this.FLastEditingObj.eVal.setWalkerPoint(this.MouseX,this.MouseY,this.XLqkQr())),mt.SHOW_SCALEBAR&&!this.FCamera.FFLYMODE&&this.scalebar.FillDist(),this.FLayers.length&&(this.gl.useProgram(this.Program3DForLayer),mt.FOGGED&&this.Xq3c0V(),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.GLU.setProjToGL(this.P3DprojectionMatrixLocForLayer),this.GLU.setModelToGL(this.P3DmodelViewMatrixLocForLayer),this.XE2LF2()),t=0;t<this.UserObjArr.length;t++)this.UserObjArr[t].Draw3d();for(this.FLastEditingObj&&this.Draw3dEditObj(this.FLastEditingObj),this.ModelDrawer.Draw(),this.gl.disable(this.gl.DEPTH_TEST),this.FLayers.length&&this.XCMHxX(),this.gl.useProgram(this.Program2D),t=this.UserObjArr.length;t--;)this.UserObjArr[t].Draw2d();this.FLastEditingObj&&this.FLastEditingObj.draw2d(),this.FontDrawer.Draw(),this.FLastEditingObj&&U.a.DrawEditIcons(this.FLastEditingObj),this.gl.enable(this.gl.BLEND),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE),this.FPSFrameCnt++,this.XMExBl(),this.XMAmfL(),mt.SHOW_SCALEBAR&&this.scalebar.Draw(),mt.SHOW_OVERVIEW_PANEL&&this.overview.Draw(),this.globeCanvasText.XibHJT(),mt.SHOW_COMPASS&&this.compass.Draw(),this.gl.useProgram(this.ProgramGlobe),this.isCheckedGlobeValues||(this.isCheckedGlobeValues=!0,this.XZUwVU()),this.gl.finish(),this.yGLOBE_DRAWING=!1}}},{key:"api_Deneme2",value:function(t){mt.GLOBE_DEFAULT_TRESH_HOLD=t,this.DrawRender()}},{key:"SetLightDirectional",value:function(){mt.GLOBE_SUN_LIGHT_ON&&this.gl.uniform3fv(this.sunPosLoc,this.Fp2LSun),mt.GLOBE_MOON_LIGHT_ON&&(this.gl.uniform1f(this.moonIllumLoc,this.mPlanetPos.moonIllum.fraction),this.gl.uniform3fv(this.moonPosLoc,this.Fp2LMoon))}},{key:"Xt7F4L",value:function(){var t=this.FCamera;t.FArcBall.XCCjZL(this.ea),mt.RENDER_ICON_VLD&&(t.XZdm3v(this.FEyePos),t.X7EPyt(this.FEyePos2),t.XMix0q(this.FUpPos),t.FFLYMODE&&(this.FFlyModeTo=t.Xv8FQl(),this.FFlyModeUp=t.X1dDLB()),Object.assign(this.FEyePosUnit,this.FEyePos),this.FEyePosUnit.Normalize(),_.b.Rot3D_ToGeo(this.FEyePosUnit,this.ea,this.TempNewPoint,this.Tempstart,t.FCamLongLat),t.FCamZ=this.XyecYr(t.FCamLongLat,!1),this.FRealViewDist=t.Xdo3vg(),this.FNearViewDist=t.XbftG0(),this.FAltitute=t.XcttbF(),this._tanq=this.FScrH/_.b.DegreeToRadyan(mt.FOV),Object.assign(this.Fp,this.FEyePos),this.Fp2T.x=mt.GLOBE_RADIUS,this.Fp2T.y=0,this.Fp2T.z=0,Object.assign(this.Fu,this.FUpPos),_.b.Rotate3D(this.Fp,this.ea.x,-this.ea.y,this.ea.z,this.TempNewPoint),_.b.Rotate3D(this.Fp2T,this.ea.x,-this.ea.y,this.ea.z,this.TempNewPoint),_.b.Rotate3D(this.Fu,this.ea.x,-this.ea.y,this.ea.z,this.TempNewPoint),this.FCamera.FFLYMODE&&(_.b.Rotate3D(this.FFlyModeTo,this.ea.x,-this.ea.y,this.ea.z,this.TempNewPoint),_.b.Rotate3D(this.FFlyModeUp,this.ea.x,-this.ea.y,this.ea.z,this.TempNewPoint)),mt.GLOBE_SUN_LIGHT_ON&&(this.sunp.SetV(this.mPlanetPos.sun.lng,this.mPlanetPos.sun.lat),this.sunp.ConvertDegreeToRadyan(),_.b.GeoTo3DForLight(this.sunp.x,this.sunp.y,2*mt.GLOBE_RADIUS,this.Fp2LSun)),mt.GLOBE_MOON_LIGHT_ON&&(this.moonp.SetV(this.mPlanetPos.moon.lng,this.mPlanetPos.moon.lat),this.moonp.ConvertDegreeToRadyan(),_.b.GeoTo3DForLight(this.moonp.x,this.moonp.y,2*mt.GLOBE_RADIUS,this.Fp2LMoon)),this.Fp2.x=this.Fp2T.x-this.Fp.x,this.Fp2.y=this.Fp2T.y-this.Fp.y,this.Fp2.z=this.Fp2T.z-this.Fp.z,this.Fp2N.x=-this.Fp2.x,this.Fp2N.y=-this.Fp2.y,this.Fp2N.z=-this.Fp2.z,this.FAltitute>.01*mt.GLOBE_RADIUS?this.GLOBE_REALVIEW_K=1:this.GLOBE_REALVIEW_K=.45+this.FAltitute/(.01*mt.GLOBE_RADIUS)*.55,Object.assign(this.Fp2TF,this.Fp2T),Object.assign(this.Fp2NF,this.Fp2N))}},{key:"XsHvmY",value:function(){this.LastprojMatrix=this.GLU.curProjMat.slice(),this.LastmodelMatrix=this.GLU.curModelMat.slice()}},{key:"X4oOGC",value:function(t){var e,i;if(this.TempLevelFloat[0]=0,t.XlGTf1(this.Fp2TF,this.Fp2NF),t.FVisible=this.X4qJWI(t,t.FCellc,t.FRealRadius,t.FCellDist),this.isCellDivision<this.MaxCellCanBeCreated)if(t.FActive=t.FLevel<mt.GLOBE_MIN_CELL_LEVEL&&t.FVisible&&(t.FLevel<3||!t.isPole&&this.Active(t.FCellDist-t.FRealRadius*t.FActivationK,t.FActivationK*t.FRealRadius,this.TempLevelFloat))&&t.FMeshParent===t,t.FLevelFloat=this.TempLevelFloat[0],4!==this.MouseMode&&this.MouseMode!==Et&&!this.FCamera.XWOqNV()||t.XHtqRe()||(t.FActive=!1),t.FActive){var r=this.FCellOrganizer;for(e=0;e<4;e++){if(t.FChilds[e])t.FChilds[e].XDAVIg();else{if(this.isCellDivision++,t.isPole)switch(e){case 0:t.FChilds[e]=r.CreatePoleCell(t,t.FCenterLonDeg-t.FDegreeW/4,t.FCenterLatDeg-t.FDegreeH/4,t.FDegreeW/2,t.FDegreeH/2,t.FLevel+1,-1,-1,-1);break;case 1:t.FChilds[e]=r.CreatePoleCell(t,t.FCenterLonDeg+t.FDegreeW/4,t.FCenterLatDeg-t.FDegreeH/4,t.FDegreeW/2,t.FDegreeH/2,t.FLevel+1,-1,-1,-1);break;case 2:t.FChilds[e]=r.CreatePoleCell(t,t.FCenterLonDeg+t.FDegreeW/4,t.FCenterLatDeg+t.FDegreeH/4,t.FDegreeW/2,t.FDegreeH/2,t.FLevel+1,-1,-1,-1);break;case 3:t.FChilds[e]=r.CreatePoleCell(t,t.FCenterLonDeg-t.FDegreeW/4,t.FCenterLatDeg+t.FDegreeH/4,t.FDegreeW/2,t.FDegreeH/2,t.FLevel+1,-1,-1,-1)}else switch(e){case 0:t.FChilds[e]=r.XZfI4L(t,2*t.FTileX,2*t.FTileY+1,t.FLevel+1,e,0,0);break;case 1:t.FChilds[e]=r.XZfI4L(t,2*t.FTileX+1,2*t.FTileY+1,t.FLevel+1,e,0,0);break;case 2:t.FChilds[e]=r.XZfI4L(t,2*t.FTileX+1,2*t.FTileY,t.FLevel+1,e,0,0);break;case 3:t.FChilds[e]=r.XZfI4L(t,2*t.FTileX,2*t.FTileY,t.FLevel+1,e,0,0)}t.SetChildALLTexturesInfo(e,!0),t.X2pCsS(e),t.VectorRasterize.FParentTextID&&t.SetChildRasterizeTextureInfo(e,!0),t.FChilds[e].FLevel<=3&&(t.FChilds[e].FMeshRequested=!0,t.FChilds[e].FMeshParent=t.FChilds[e])}this.X4oOGC(t.FChilds[e])}t.FVisible=t.X7Dx1T()}else for(e=4;e--;)if(t.FChilds[e])for(t.FChilds[e].FVisible=!1,i=4;i--;)t.FChilds[e].FChilds[i]&&(t.FChilds[e].FChilds[i].FVisible=!1)}},{key:"XsVYnp",value:function(){var t,e;for(this.isCellDivision=0,_.b.CalcViewVolumePlanes(this.LastmodelMatrix,this.LastprojMatrix,this.TempocCcMat,this.planeEqs),t=this.FRNum;t--;)for(e=this.FCNum;e--;)this.X4oOGC(this.FCells[t][e]);var i=this.FCellOrganizer;if(i.X4rDIY(this.Fp2TF,this.Fp2NF),i.X2Pqs1(this.GLOBE_MAX_CELL_CREATE),this.isCellDivision>this.MaxCellCreatedToday&&(this.MaxCellCreatedToday=this.isCellDivision),this.isCellDivision){for(t=this.FRNum;t--;)for(e=this.FCNum;e--;)this.XiNmwY(this.FCells[t][e]);this.DrawRender()}}},{key:"XZL5Vw",value:function(t,e){t.XwGBJg(e);for(var i=4;i--;)t.FChilds[i]&&this.XZL5Vw(t.FChilds[i],e)}},{key:"XE2LF2",value:function(){for(var t=this.FRNum;t--;)for(var e=this.FCNum;e--;)this.XL2BWe(this.FCells[t][e]);if(this.MVTContinuousLODExist)for(var i=this.FDrawedCells.length,r=0;r<i;r++)this.FDrawedCells[r].DrawMVTContinuousLODLayers3d(this.Fp2TF,this.FDrawedCells[r].FLevel)}},{key:"SetLayerScaleVisDepth",value:function(t){for(var e=t.FCellLayers.length,i=0;i<e;i++)t.FCellLayers[i].FCityLayer._FActive&&t.FCellLayers[i].BuildTitleAndIconBuffers();if(t.FActive)for(var r=0;r<4;r++)t.FChilds[r]&&this.SetLayerScaleVisDepth(t.FChilds[r])}},{key:"SetLayerScale",value:function(){for(var t=this.FRNum;t--;)for(var e=this.FCNum;e--;)this.SetLayerScaleVisDepth(this.FCells[t][e])}},{key:"SetRasterizeLayer",value:function(){for(var t=this.FCellOrganizer.Flive.length,e=0;e<t;e++)this.FCellOrganizer.Flive[e].FCellLayers.length&&this.FCellOrganizer.Flive[e].SetCellRasterizeTextureForApi()}},{key:"RemoveRasterizeLayer",value:function(){for(var t=this.FCellOrganizer.Flive.length,e=0;e<t;e++)this.FCellOrganizer.Flive[e].RemoveRasterizeTexture()}},{key:"XCMHxX",value:function(){for(var t=this.FRNum;t--;)for(var e=this.FCNum;e--;)this.XhaFDI(this.FCells[t][e]);if(this.IsClusterLayerExist)if(this.isCellDivision<this.MaxCellCanBeCreated&&this.MouseMode!==Et&&6!==this.MouseMode&&4!==this.MouseMode){this.minLod=this.api_GetCurrentMinLOD(),this.parentsAtMinLOD=this.FindParentsAtMinLOD(this.minLod);var i=this.parentsAtMinLOD.length;for(o=0;o<i;o++)this.parentsAtMinLOD[o].DrawClusterLayers2d(this.minLod)}else{var r=this.parentsAtMinLOD.length;for(o=0;o<r;o++)this.parentsAtMinLOD[o].DrawClusterLayers2d(this.minLod)}if(this.MVTContinuousLODExist)for(var s=this.FDrawedCells.length,o=0;o<s;o++)this.FDrawedCells[o].DrawMVTContinuousLODLayers2d(this.FDrawedCells[o].FLevel)}},{key:"FindParentsAtMinLOD",value:function(t){for(var e=[],i=this.FDrawedCells.length,r=0;r<i;r++){var s=this.FDrawedCells[r].GetParentAtLod(t);s?-1===e.indexOf(s)&&e.push(s):alert("null parent")}return e}},{key:"XL2BWe",value:function(t){if(t.FVisible&&(t.XE2LF2(this.Fp2TF,this.FDRAWED_MAX_LEVEL,this.FDRAWED_MAX_LEVEL_FLOAT),t.FActive))for(var e=0;e<4;e++)t.FChilds[e]&&this.XL2BWe(t.FChilds[e])}},{key:"XhaFDI",value:function(t){if(t.FVisible&&(t.XCMHxX(this.FDRAWED_MAX_LEVEL),t.FActive))for(var e=0;e<4;e++)t.FChilds[e]&&this.XhaFDI(t.FChilds[e])}},{key:"X34ctD",value:function(t,e,i,r,s,o,n,a){if(t.FVisible){if(t.FActive)for(var h=4;h--;)this.X34ctD(t.FChilds[h],e,i,r,s,o,n,a);s?t.QueryObject(s,o,r,n,a):t.AskObject(e,i,r)}}},{key:"XeEOgv",value:function(t,e,i,r,s){for(var o=e.length,n=0;n<o;n+=2)if(_.b.CSSegmentIntersect(r.MouseLong,r.MouseLat,s.MouseLong,s.MouseLat,e[n],e[n+1],e[n+2],e[n+3]))return i.push({obj:t,owner:t.obj.userObj,ownerType:Lt.OBJECT_BUFFER}),!0;return!1}},{key:"QueryObjectBuffer",value:function(t,e,i){for(var r=this.UserObjArr.length,s=0;s<r;s++)if(this.UserObjArr[s].FActive)for(var o=this.UserObjArr[s].TotalObjArr,n=o.length,a=0;a<n;a++)if(o[a].FActive&&o[a].style.border&&this.FDRAWED_MAX_LEVEL>=o[a].startLod&&this.FDRAWED_MAX_LEVEL<=o[a].endLod){var h=o[a],l=h.coords,u=h._coords,d=h._coordsZ;if(this.ObjectIsNotInAskObjArr(t,o[a]))if(o[a].type===ct.SHAPE){var c=[u[0],u[1],u[u.length-2],u[u.length-1]];this.XeEOgv(o[a],c,t,e,i)||this.XeEOgv(o[a],o[a]._coords,t,e,i)}else if(o[a].type===ct.LINE)this.XeEOgv(o[a],l,t,e,i);else if(o[a].type===ct.POLYGON){var f=[l[0],l[1],l[l.length-2],l[l.length-1]];this.XeEOgv(o[a],f,t,e,i)||this.XeEOgv(o[a],o[a].coords,t,e,i)}else if(o[a].type===ct.ARCAREA){var p=[u[d.length],u[d.length+1],l[0],l[1],u[u.length-2],u[u.length-1]],F=[u[0],u[1],u[u.length-2],u[u.length-1]];this.XeEOgv(o[a],p,t,e,i)||this.XeEOgv(o[a],F,t,e,i)||this.XeEOgv(o[a],u,t,e,i)}}}},{key:"QueryObjectBufferInPoly",value:function(t){for(var e=this.UserObjArr.length,i=0;i<e;i++)if(this.UserObjArr[i].FActive)for(var r=this.UserObjArr[i].TotalObjArr,s=r.length,o=0;o<s;o++)if(r[o].FActive&&(r[o].style.filled||r[o].style.border)&&this.FDRAWED_MAX_LEVEL>=r[o].startLod&&this.FDRAWED_MAX_LEVEL<=r[o].endLod&&this.ObjectIsNotInAskObjArr(t,r[o])){var n=r[o].type;n===ct.POLYGON?_.b.CSPointInPolygon(this.tempmouseForCenter.MouseLong,this.tempmouseForCenter.MouseLat,r[o].coords)&&t.push({obj:r[o],owner:r[o].obj.userObj,ownerType:Lt.OBJECT_BUFFER}):n!==ct.SHAPE&&n!==ct.ARCAREA||_.b.CSPointInPolygon(this.tempmouseForCenter.MouseLong,this.tempmouseForCenter.MouseLat,r[o]._coords)&&t.push({obj:r[o],owner:r[o].obj.userObj,ownerType:Lt.OBJECT_BUFFER})}}},{key:"api_GetDrawedTilesXYZ",value:function(){for(var t=[],e=this.FDrawedCells.length,i=0;i<e;i++)-1!==this.FDrawedCells[i].FTileX&&-1!==this.FDrawedCells[i].FTileY&&t.push({level:this.FDrawedCells[i].FLevel,row:this.FDrawedCells[i].FTileX,column:this.FDrawedCells[i].FTileY});return t}},{key:"api_SetQueryBoxSize",value:function(t){mt.QUERY_BOX_SIZE=t/2}},{key:"api_GetQueryBoxSize",value:function(){return 2*mt.QUERY_BOX_SIZE}},{key:"api_QueryByScreen",value:function(t,e){var i=[];if(this.XGqwp9(t,e,!1,this.tempmouseForCenter),this.tempmouseForCenter.isValid){this.FontDrawer.AskObject(t,e,i);var r=this.api_GetQueryBoxSize();if(this.XGqwp9(t+r,e-r,!1,this.tempmouseForSeg11),this.XGqwp9(t-r,e+r,!1,this.tempmouseForSeg12),this.tempmouseForSeg11.isValid&&this.tempmouseForSeg12.isValid&&(this.tempmouseForSeg11.ConvertRadyanToDegree(),this.tempmouseForSeg12.ConvertRadyanToDegree(),this.QueryObjectBuffer(i,this.tempmouseForSeg11,this.tempmouseForSeg12)),this.XGqwp9(t-r,e-r,!1,this.tempmouseForSeg21),this.XGqwp9(t+r,e+r,!1,this.tempmouseForSeg22),this.tempmouseForSeg21.isValid&&this.tempmouseForSeg22.isValid&&(this.tempmouseForSeg21.ConvertRadyanToDegree(),this.tempmouseForSeg22.ConvertRadyanToDegree(),this.QueryObjectBuffer(i,this.tempmouseForSeg21,this.tempmouseForSeg22)),this.tempmouseForCenter.ConvertRadyanToDegree(),this.QueryObjectBufferInPoly(i),this.FLayers.length){if(this.MVTContinuousLODExist)for(var s=this.FDrawedCells.length,o=0;o<s;o++)this.FDrawedCells[o].AskMVTContinuousObject(t,e,i);for(r=this.FRNum;r--;)for(var n=this.FCNum;n--;)this.X34ctD(this.FCells[r][n],t,e,i)}}return i}},{key:"GetOverlaped",value:function(t){for(var e=[],i=this.UserObjArr.length,r=0;r<i;r++){var s=this.UserObjArr[r];if(s.FActive)for(var o=s.TotalObjArr.length,n=0;n<o;n++)if(s.TotalObjArr[n].FActive){var a=s.TotalObjArr[n].obj.Limit;t.CSIsCommonRegionT(a)&&e.push(s.TotalObjArr[n])}}return e}},{key:"GetCovered",value:function(t,e){var i,r=[0,0];for(i=e.length/2;i--;)r[0]+=e[2*i],r[1]+=e[2*i+1];r[0]/=e.length/2,r[1]/=e.length/2;var s=[];for(i=t.length;i--;){var o=!0,n=t[i];if(n.type===ct.ARCAREA){o=_.b.CSPointInPolygon(r[0],r[1],n._coords);var a=n._coords.slice(n._coords.length/2,n._coords.length);a.push(n.coords[0],n.coords[1]),o=_.b.CSPointInPolygon(r[0],r[1],a)}else o=n.type===ct.SHAPE?_.b.CSPointInPolygon(r[0],r[1],n._coords):n.type===ct.POLYGON&&_.b.CSPointInPolygon(r[0],r[1],n.coords);o&&s.push(t.splice(i,1)[0])}return s}},{key:"GetIntersected",value:function(t,e){var i=e.slice();this.closedGeo||i.push(i[0],i[1]);for(var r=[],s=!1,o=function(t){for(var r=0;r<e.length/2;r++){for(var s=t.length/2;s--;)if(s&&_.b.CSSegmentIntersect(i[2*r],i[2*r+1],i[2*(r+1)],i[2*(r+1)+1],t[2*s],t[2*s+1],t[2*(s+1)],t[2*(s+1)+1]))return!0;if(s&&_.b.CSSegmentIntersect(i[2*r],i[2*r+1],i[2*(r+1)],i[2*(r+1)+1],t[0],t[1],t[t.length-2],t[t.length-1]))return!0}return!1},n=t.length;n--;){var a=t[n];if(a.type===ct.ARCAREA){var h=a.coords,l=a._coords,u=a._coordsZ,d=[h[0],h[1],l[u.length],l[u.length+1],h[0],h[1],l[l.length-2],l[l.length-1]];s=o(l)&&o(d)}else if(a.type===ct.SHAPE){s=o(a._coords)}else{s=o(a.coords)}s&&r.push(a)}return r}},{key:"QueryEliminatedObj",value:function(t,e,i,r,s){var o,n,a,h,l,u=[];if(t===Ot){for(h=0;h<i.length;h++){if(n=!0,a=!0,(F=i[h].type)===ct.ARCAREA){var d=i[h].coords;_.b.CSPointInPolygon(d[0],d[1],r)&&(a=!1),o=i[h]._coords}else o=F===ct.SHAPE?i[h]._coords:i[h].coords;for(l=o.length/2;l--;)if(_.b.CSPointInPolygon(o[2*l],o[2*l+1],r)){n=!1;break}F===ct.ARCAREA&&n&&a?u.push(i.splice(h,1)[0]):n&&u.push(i.splice(h,1)[0])}if(void 0===e||void 0!==e&&e){var c=this.GetCovered(u,r);for(h=0;h<c.length;h++)i.push(c[h])}var f=u,p=this.GetIntersected(f,r);for(h=0;h<p.length;h++)i.push(p[h])}else if(t===xt){for(h=0;h<i.length;h++){var F;if(n=!1,a=!1,(F=i[h].type)===ct.ARCAREA){var y=i[h].coords;_.b.CSPointInPolygon(y[0],y[1],r)||(a=!0),o=i[h]._coords}else o=F===ct.SHAPE?i[h]._coords:i[h].coords;for(l=o.length/2;l--;)if(!_.b.CSPointInPolygon(o[2*l],o[2*l+1],r)){n=!0;break}F===ct.ARCAREA&&n&&a?u.push(i.splice(h,1)[0]):n&&u.push(i.splice(h,1)[0])}if(void 0===e||void 0!==e&&e){var A=this.GetCovered(u,r);for(h=0;h<A.length;h++)i.push(A[h])}}return i}},{key:"api_QueryByBBox",value:function(t,e,i){var r=t.ll,s=t.ur,o=[r.x,r.y,r.x,s.y,s.x,s.y,s.x,r.y];return this.api_QueryByGeometry(o,e,i)}},{key:"ClosedGeoControl",value:function(t){var e=t.length;Math.abs(t[0]-t[e-2])<_.H&&Math.abs(t[1]-t[e-1])<_.H&&(this.closedGeo=!0)}},{key:"api_QueryByGeometry",value:function(t,e,i){this.ClosedGeoControl(t);var r=new _.E(0,0,0,0);r.Clear(),r.ExpandByCoords(t);var s=0,o=this.GetOverlaped(r);o=this.QueryEliminatedObj(e,i,o,t,r);var n=[];if(this.FLayers.length){if(this.MVTContinuousLODExist){var a=this.FDrawedCells.length;for(s=0;s<a;s++)this.FDrawedCells[s].QueryMVTContinuousObject(r,e,n,t,i)}for(var h=this.FRNum;h--;)for(var l=this.FCNum;l--;)this.X34ctD(this.FCells[h][l],null,null,n,r,e,t,i)}var u=[];for(s=o.length;s--;){var d=o[s];u.push({obj:d,owner:d.obj.userObj,ownerType:Lt.OBJECT_BUFFER})}for(s=n.length;s--;)u.push(n[s]);return u}},{key:"XBpeRn",value:function(t,e){var i=[];if((i=this.api_QueryByScreen(t[0],t[1])).length){var r={};r.obj=i[0].obj,r.screenX=t[0],r.screenY=t[1],r.lng=t[2],r.lat=t[3],i[0].ownerType===Lt.OBJECT_BUFFER?i[0].obj.reportObj&&i[0].obj.reportObj(r,e):i[0].owner.reportObj&&i[0].owner.reportObj(r,e)}}},{key:"ObjectIsNotInAskObjArr",value:function(t,e){for(var i=t.length,r=0;r<i;r++)if(e===t[r].obj)return!1;return!0}},{key:"XCUoyh",value:function(){this.gl.uniform3fv(this.colorLoc,kt),mt.RENDER_ICON_VLD?this.XxRJD2():(this.inc=!this.inc,this.inc&&this.XxRJD2())}},{key:"XxRJD2",value:function(){var t,e;for(this.FDrawedCells.length=0,this.FDRAWED_MAX_LEVEL=0,this.FDRAWED_MAX_LEVEL_FLOAT=0,this.FDRAWED_MIN_CELL_RES_METERS=1e30,this.FDRAWED_MIN_CELL_MESH_DELTADEG=360,this.FDrawedWorldRad.Clear(),this.FDrawedWorldMerc.Clear(),t=this.FRNum;t--;)for(e=this.FCNum;e--;)this.XDdymZ(this.FCells[t][e]);this.isCellDivision<this.MaxCellCanBeCreated&&(this.FDrawedWorldDeg.SetTW(this.FDrawedWorldRad),this.FDrawedWorldDeg.RadyanToDegree(),this.FDrawedWorldMercOverview.SetTW(this.FDrawedWorldMerc));var i=this.FDrawedCells.length;i?i>this.FMAX_DRAWED_CELL&&(this.FMAX_DRAWED_CELL=i):this.XOsele(this.FCamera.FCamLongLat,1e-6)}},{key:"XTme9m",value:function(){this.LastWinX=0,this.LastWinY=0,this.LastWinW=this.FScrW,this.LastWinH=this.FScrH,this.gl.viewport(0,0,this.FScrW,this.FScrH),this.XrCgw2(_.b.DegreeToRadyan(mt.FOV),1*this.FScrW/this.FScrH,this.FNearViewDist,this.FRealViewDist),this.GLU.curProj(this.projectionM),this.GLU.setProjToGL(this.projectionMatrixLoc)}},{key:"XrCgw2",value:function(t,e,i,r){var s=Math.tan(t/2),o=1/(i-r),n=this.projectionM;n[0]=1/s/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1/s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+i)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*i*o,n[15]=0}},{key:"XSl9cT",value:function(t,e,i,r,s,o){var n=1/(t-e),a=1/(i-r),h=1/(s-o),l=this.GLU.curProjMat;l[0]=-2*n,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*a,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*h,l[11]=0,l[12]=(t+e)*n,l[13]=(r+i)*a,l[14]=(o+s)*h,l[15]=1,this.GLU.setProjToGL(this.P2DprojectionMatrixLoc)}},{key:"XZgyMf",value:function(){this.sizeChangedForIcon&&(this.gl.uniform2fv(this.P2DOrtoValuesLocForLayerIcon,[this.Lastviewport[2],this.Lastviewport[3]]),this.sizeChangedForIcon=!1)}},{key:"XSpiH9",value:function(){this.sizeChangedForLabel&&(this.gl.uniform2fv(this.P2DOrtoValuesLocForLayerLabels,[this.Lastviewport[2],this.Lastviewport[3]]),this.sizeChangedForLabel=!1)}},{key:"OrthoLyrCircle",value:function(){this.sizeChangedForCircle&&(this.gl.uniform2fv(this.P2DOrtoValuesLocForLayerCircle,[this.Lastviewport[2],this.Lastviewport[3]]),this.sizeChangedForCircle=!1)}},{key:"XDdymZ",value:function(t){var e,i=!1;if(t.FVisible){if(t.FActive)for(var r=0;r<4;r++)t.FChilds[r]&&(e=this.XDdymZ(t.FChilds[r]),i=i||e);return i||(t.Draw(this.GLU,this.Fp2TF),this.FDrawedCells.push(t),this.FDrawedWorldRad.ExpandV(t.FLLLonRad,t.FLLLatRad,t.FURLonRad,t.FURLatRad),t.isPole||this.FDrawedWorldMerc.ExpandTGW(t.mercatorRect),t.FLevel>this.FDRAWED_MAX_LEVEL?(this.FDRAWED_MAX_LEVEL=t.FLevel,this.FDRAWED_MAX_LEVEL_FLOAT=t.FLevelFloat):t.FLevel===this.FDRAWED_MAX_LEVEL&&t.FLevelFloat>this.FDRAWED_MAX_LEVEL_FLOAT&&(this.FDRAWED_MAX_LEVEL_FLOAT=t.FLevelFloat),t.FCellResMeters<this.FDRAWED_MIN_CELL_RES_METERS&&(this.FDRAWED_MIN_CELL_RES_METERS=t.FCellResMeters),t.FMeshDeltaDegW<this.FDRAWED_MIN_CELL_MESH_DELTADEG&&(this.FDRAWED_MIN_CELL_MESH_DELTADEG=t.FMeshDeltaDegW),i=!0),i}return!1}},{key:"X4qJWI",value:function(t,e,i,r){if(r-i>this.FRealViewDist*this.GLOBE_REALVIEW_K)return!1;if(r<1.6*i)return!0;var s,o,n=!0;for(s=5;s--;)if(_.b.DistanceFromPlane(this.planeEqs[s],e)<-i-_.z){n=!1;break}if(!n){for(s=8;s--;)if(this.XFllGC(t.FBox[s]))return!0;for(o=4;o--;){s=1;do{if(this.tempcur.SetVecSub(this.Fp2TF,t.Vertices2P[o][s]),this.XFllGC(this.tempcur))return!0;if(s>1){if(this.tempmid.SetMid(this.tempcur,this.tempprev),this.XFllGC(this.tempmid))return!0;if(this.tempmid2.SetMid(this.tempcur,this.tempmid),this.XFllGC(this.tempmid2))return!0;if(this.tempmid3.SetMid(this.tempprev,this.tempmid),this.XFllGC(this.tempmid3))return!0}Object.assign(this.tempprev,this.tempcur),s+=3}while(s<t.VertexCount2)}}return n}},{key:"Active",value:function(t,e,i){return t<_.e?(i[0]=1,!0):(i[0]=e*this._tanq/t*(1-this.FCamera.FTILT_ROT_DEGREE/150)/mt.GLOBE_DEFAULT_TRESH_HOLD,r=i[0]>1,i[0]>1&&(i[0]=1),i[0]=(i[0]-.44)*(1/.56),i[0]>1&&(i[0]=1),i[0]<0&&(i[0]=0),r);var r}},{key:"XFllGC",value:function(t){var e;for(e=5;e--;)if(_.b.DistanceFromPlane(this.planeEqs[e],t)<-_.z)return!1;return!0}},{key:"X5NgGy",value:function(){var t=new Date;t-this.FPSStartTime>1e3&&(this.LastFPS=(1e3*this.FPSFrameCnt/(t-this.FPSStartTime)).toFixed(0),this.FPSStartTime=t,this.FPSFrameCnt=0,this.LastDPS=this.DPSByteSize,this.DPSByteSize=0)}},{key:"XYSIVs",value:function(){this.X5NgGy(),this.XY320e(),!0===this.RENDERNOW&&(this.RENDERNOW=!1,this.Draw()),this.FontDrawer.inAnimation&&this.DrawRender(),this.ModelDrawer.inAnimation&&(this.ModelDrawer.inAnimation=!1,this.DrawRender())}},{key:"Xq4HjL",value:function(){this.globeInterval=setInterval(this.XYSIVs,20)}},{key:"XY320e",value:function(){this.parentData=this.parentNode.getBoundingClientRect(),this.canvas.width===parseInt(this.parentData.width)&&this.canvas.height===parseInt(this.parentData.height)||(this.canvas.width=this.parentData.width,this.canvas.height=this.parentData.height,this.canvas2d.width=this.parentData.width,this.canvas2d.height=this.parentData.height,this.scalebar.canvas.width=this.parentData.width,this.scalebar.canvas.height=this.parentData.height,this.scalebar.InitCtx(),this.FScrW=this.parentData.width,this.FScrH=this.parentData.height,this.StatusBarWid.style.width="".concat(this.parentData.width,"px"),this.StatusBarWid.style.height="".concat(this.statusBarFontSize+5,"px"),this.StatusBarWid.style.top="".concat(parseInt(this.parentData.height)-this.statusBarFontSize-5,"px"),this.Lastviewport[0]=0,this.Lastviewport[1]=0,this.Lastviewport[2]=this.FScrW,this.Lastviewport[3]=this.FScrH,this.CSWidgets.XDD5V3(this.parentData),this.CSWidgets.EditVertexWidgetResize(this.parentData),this.scalebar.Resize(),this.compass.Resize(),this.overview.Resize(),this.sizeChangedForIcon=!0,this.sizeChangedForLabel=!0,this.sizeChangedForCircle=!0,this.X0sUmz(),this.DrawRender())}},{key:"XMXAPE",value:function(){var t=this.StatusBarWid.style;t.zIndex=2,t.backgroundColor="rgb(126,126,180,0.4);",t.position="absolute",t.width="".concat(this.parentData.width,"px"),t.height="".concat(this.statusBarFontSize+5,"px"),t.top="".concat(parseInt(this.parentData.height)-this.statusBarFontSize-5,"px"),window.addEventListener("resize",this.XY320e)}},{key:"api_GlobeIsValid",value:function(){return!0}},{key:"api_FollowGroundMaxVertex",value:function(t){mt.FOLLOW_GROUND_STEP_LIMIT=t}},{key:"api_GlobeVersion",value:function(){return mt.GLOBE_VERSION}},{key:"XZ53cd",value:function(t,e,i){for(var r=0;r<4;r++)if(e.FChilds[r]){var s=e.FLLLonDeg,o=e.FLLLatDeg,n=e.FURLonDeg,a=e.FURLatDeg;i&&!i.CSIsCommonRegionV(s,o,n,a)||e.XZdhXU(t,r,!0)}}},{key:"api_GeoToMGRS",value:function(t){return c.a.forward(t)}},{key:"api_MGRSToGeo",value:function(t){return c.a.toPoint(t)}},{key:"AddNewTexture",value:function(t){t.AddNewTexture();for(var e=0;e<4;e++)t.FChilds[e]&&this.AddNewTexture(t.FChilds[e])}},{key:"FixRasterUrl",value:function(t){if(t&&t.type===ut.WMS){var e=t.url,i=t.lodDisplay;if(e)if(Array.isArray(e))for(var r=0;r<e.length;r++){-1===e[r].toUpperCase().search(/FORMAT=/g)&&(t.url[r]+="&FORMAT=image/jpeg")}else{-1===(e=e.toUpperCase()).search(/FORMAT=/g)&&(t.url+="&FORMAT=image/jpeg")}else if(i&&i.length)for(r=0;r<i.length;r++)for(var s=0;s<i[r].url.length;s++){-1===(e=i[r].url[s].toUpperCase()).search(/FORMAT=/g)&&(t.lodDisplay[r].url[s]+="&FORMAT=image/jpeg")}if(t.supportURL&&t.supportURL.url&&t.supportURL.url.length)for(r=0;r<t.supportURL.url.length;r++){-1===(e=t.supportURL.url[r].toUpperCase()).search(/FORMAT=/g)&&(t.supportURL.url[r]+="&FORMAT=image/jpeg")}}}},{key:"SwapCellTexture",value:function(t,e,i){var r=t.FTextures[e];t.FTextures[e]=t.FTextures[i],t.FTextures[i]=r;for(var s=0;s<4;s++)t.FChilds[s]&&this.SwapCellTexture(t.FChilds[s],e,i)}},{key:"api_SwapRaster",value:function(t,e){var i,r,s=this.FRasters[t]._index,o=this.FRasters[e]._index,n=this.FRasters[t];for(this.FRasters[t]=this.FRasters[e],this.FRasters[e]=n,this.FRasters[t]._index=s,this.FRasters[e]._index=o,i=0;i<this.FRNum;i++)for(r=0;r<this.FCNum;r++)this.SwapCellTexture(this.FCells[i][r],t,e);this.DrawRender()}},{key:"CreateLodDisplayArraysForRaster",value:function(t){var e,i;for(t._lodDisplayArr.length=mt.GLOBE_MIN_CELL_LEVEL,i=0;i<t.lodDisplay.length;i++){var r=t.lodDisplay[i],s={url:r.url};for(e=r.startLod;e<=r.endLod;e++)t._lodDisplayArr[e]=s}var o={url:[null]};for(e=mt.GLOBE_MIN_CELL_LEVEL;e--;)t._lodDisplayArr[e]||(t._lodDisplayArr[e]=o)}},{key:"api_SetMeshCacheSize",value:function(t){if(t<mt.MESH_CACHE_SIZE)for(var e=Object.keys(this.meshCacher.meshCacheObj),i=e.length-t,r=0;r<i;r++)this.meshCacher.meshCacheObj[e[r]]=null,delete this.meshCacher.meshCacheObj[e[r]];mt.MESH_CACHE_SIZE=t,this.DrawRender()}},{key:"api_SetMaxCell",value:function(t){if(t<this.GLOBE_MAX_CELL_CREATE)for(var e=this.GLOBE_MAX_CELL_CREATE-t,i=0;i<e;i++)this.FCellOrganizer.FDead.pop();else if(t>this.GLOBE_MAX_CELL_CREATE){var r=t-this.GLOBE_MAX_CELL_CREATE;for(i=0;i<r;i++)this.FCellOrganizer.FDead.push(new Cell(this))}this.GLOBE_MAX_CELL_CREATE=t,this.DrawRender()}},{key:"api_AddRaster",value:function(t){if(this.FixRasterUrl(t),t.bbox&&t.bbox.length&&(t._fLimitsDegree=new _.E(t.bbox[0],t.bbox[1],t.bbox[2],t.bbox[3])),void 0===t._FActive&&(t._FActive=!0),t._index=this.FRasters.length,t._uniqRasterId=++jt%2000000001,t._numIndex=0,t._supportURLIndex=0,t._idx=0,t._lodDisplayArr=[],Array.isArray(t.url)&&t.url.length)for(var e={url:t.url},i=0;i<=mt.GLOBE_MIN_CELL_LEVEL;i++)t._lodDisplayArr.push(e);else if("string"==typeof t.url){var r={url:[t.url]};for(i=0;i<=mt.GLOBE_MIN_CELL_LEVEL;i++)t._lodDisplayArr.push(r)}else this.CreateLodDisplayArraysForRaster(t);if(this.FRasters.push(t),t._FActive&&this.FONRasterCount++,this.FONRasterCount>mt.MAX_OPEN_RASTER_COUNT)for(var s=0;s<this.FRasters.length-1;s++)if(this.FRasters[s]._FActive){this.FRasters[s]._FActive=!1,this.FONRasterCount--;break}var o,n,a;for(o=0;o<this.FRNum;o++)for(n=0;n<this.FCNum;n++)for(this.AddNewTexture(this.FCells[o][n]),a=0;a<4;a++)this.FCells[o][n].FChilds[a]&&this.FCells[o][n].XZdhXU(this.FRasters.length-1,a,!0);this.DrawRender()}},{key:"CheckAddRaster",value:function(t,e){if(t.IsOverlayOverlap(e)){t.FCellRasterOverlays.push(this.TextureCoordsManager.CreateTextureCoords(this.gl,t,e));for(var i=0;i<4;i++)t.FChilds[i]&&this.CheckAddRaster(t.FChilds[i],e)}}},{key:"AddRasterOverlayToCells",value:function(t){var e,i;for(e=0;e<this.FRNum;e++)for(i=0;i<this.FCNum;i++)this.CheckAddRaster(this.FCells[e][i],t)}},{key:"RemoveRasterOverlayFromCells",value:function(t){var e,i;for(e=0;e<this.FRNum;e++)for(i=0;i<this.FCNum;i++)this.CheckDelRaster(this.FCells[e][i],t)}},{key:"CheckDelRaster",value:function(t,e){var i;if(t.IsOverlayOverlap(e)){var r=t.FCellRasterOverlays.length;for(i=0;i<r;i++)if(t.FCellRasterOverlays[i].FRaster===e){this.TextureCoordsManager.FreeTextureCoords(t.FCellRasterOverlays[i]),t.FCellRasterOverlays.splice(i,1);break}for(i=0;i<4;i++)t.FChilds[i]&&this.CheckDelRaster(t.FChilds[i],e)}}},{key:"DeleteRasterOverlay",value:function(t){var e=this.FRasterOverlays.indexOf(t);-1!==e&&(this.FRasterOverlays.splice(e,1),this.RemoveRasterOverlayFromCells(t),this.gl.deleteTexture(t.FProjText),t.FProjText=null,t=null),this.SortRasterOverlays()}},{key:"DrawProjText",value:function(){var t=this.FRasterOverlays.length;if(t){var e=this.FDrawedCells.length;this.gl.enable(this.gl.DEPTH_TEST);for(var i=0;i<t;i++)if(this.gl.bindTexture(this.gl.TEXTURE_2D,this.FRasterOverlays[i].FProjText),this.gl.uniform3fv(this.colorLoc,this.FRasterOverlays[i].FColor),this.gl.uniform1f(this.opacityLoc,this.FRasterOverlays[i].opacity),this.FRasterOverlays[i].FActive&&this.FRasterOverlays[i].FProjText)for(var r=0;r<e;r++)for(var s=this.FDrawedCells[r].FCellRasterOverlays.length,o=0;o<s;o++)if(this.FDrawedCells[r].FCellRasterOverlays[o].FRaster===this.FRasterOverlays[i]){this.FDrawedCells[r].DrawOverlays(this.Fp2T,o);break}this.gl.disable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.BLEND)}}},{key:"SortRasterOverlays",value:function(){for(var t,e=this.FRasterOverlays.length-1,i=0;i<e;i++)for(var r=0;r<e;r++)this.FRasterOverlays[r].zOrder>this.FRasterOverlays[r+1].zOrder&&(t=this.FRasterOverlays[r],this.FRasterOverlays[r]=this.FRasterOverlays[r+1],this.FRasterOverlays[r+1]=t)}},{key:"api_ChangeImageOverlayZOrder",value:function(t,e){for(var i=null,r=this.FRasterOverlays.length,s=0;s<r;s++)if(this.FRasterOverlays[s].id===t){i=this.FRasterOverlays[s];break}i&&(i.zOrder=e,this.SortRasterOverlays(),this.DrawRender())}},{key:"AddImageOverlay",value:function(t,e,i,r,s,o,n,a,h){var l=this,u=new Image;u.onload=function(){var e=new K.a(l);e.imgOk=!0,e.callback=h,e.zOrder=a,e.Create(u,!0,i,o,0),e.FColor[0]=r[0],e.FColor[1]=r[1],e.FColor[2]=r[2],e.opacity=s,e.id=t,l.FRasterOverlays.push(e),l.SortRasterOverlays(),window.URL.revokeObjectURL(u.src),e.callback&&e.callback(e.imgOk),l.DrawRender(),n&&l.api_DeleteImageOverlay(n)},u.onerror=function(){window.URL.revokeObjectURL(u.src),h&&h(!1),l.DrawRender()},u.crossOrigin="",u.src=e}},{key:"api_AddImageOverlay",value:function(t,e,i,r,s,o,n,a){var h=this,l=new Image;l.onload=function(){var e=new K.a(h);if(e.imgOk=!0,e.zOrder=n,e.callback=a,e.Create(l,!0,i,o,0),r){var u=k.c.StringToColor(r,s);e.FColor[0]=u[0],e.FColor[1]=u[1],e.FColor[2]=u[2],e.opacity=u[3]}else e.opacity=s;e.id=t,h.FRasterOverlays.push(e),h.SortRasterOverlays(),window.URL.revokeObjectURL(l.src),e.callback&&e.callback(e.imgOk),h.DrawRender()},l.onerror=function(){window.URL.revokeObjectURL(l.src),a&&a(!1),h.DrawRender()},l.crossOrigin="",l.src=e}},{key:"api_DeleteImageOverlay",value:function(t){var e=0;if(t){var i=null,r=this.FRasterOverlays.length;for(e=0;e<r;e++)if(this.FRasterOverlays[e].id===t){i=this.FRasterOverlays[e];break}i&&(this.DeleteRasterOverlay(i),i=null)}else for(e=this.FRasterOverlays.length;e--;)i=this.FRasterOverlays[e],this.DeleteRasterOverlay(i),i=null;this.DrawRender()}},{key:"api_SetImageOverlayColor",value:function(t,e,i){for(var r=null,s=this.FRasterOverlays.length,o=0;o<s;o++)if(this.FRasterOverlays[o].id===t){r=this.FRasterOverlays[o];break}if(r)if(e){var n=k.c.StringToColor(e,i);r.FColor[0]=n[0],r.FColor[1]=n[1],r.FColor[2]=n[2],r.opacity=n[3]}else r.opacity=i;this.DrawRender()}},{key:"api_ChangeImageOverlayURL",value:function(t,e){for(var i=this,r=null,s=this.FRasterOverlays.length,o=0;o<s;o++)if(this.FRasterOverlays[o].id===t){r=this.FRasterOverlays[o];break}if(r){var n=new Image;n.onload=function(){r.FProjText?(i.gl.bindTexture(i.gl.TEXTURE_2D,r.FProjText),i.gl.texImage2D(i.gl.TEXTURE_2D,0,i.gl.RGBA,i.gl.RGBA,i.gl.UNSIGNED_BYTE,n)):r.FProjText=i.XNPtRY(!1,!0,n),window.URL.revokeObjectURL(n.src),r.callback&&r.callback(!0),i.DrawRender()},n.onerror=function(){window.URL.revokeObjectURL(n.src),r.callback&&r.callback(!1),i.DrawRender()},n.crossOrigin="",n.src=e}}},{key:"api_GetImageOverlayBBOX",value:function(t,e){for(var i=this.FRasterOverlays.length,r=0;r<i;r++)if(this.FRasterOverlays[r].id===t){e.LL.x=this.FRasterOverlays[r].Fwrad.LL.x,e.LL.y=this.FRasterOverlays[r].Fwrad.LL.y,e.UR.x=this.FRasterOverlays[r].Fwrad.UR.x,e.UR.y=this.FRasterOverlays[r].Fwrad.UR.y,e.RadyanToDegree();break}}},{key:"api_ChangeWMSOverlayZOrder",value:function(t,e){var i,r=null,s=this.FWMSOverlays.length;for(i=0;i<s;i++)if(this.FWMSOverlays[i].id===t){r=this.FWMSOverlays[i];break}if(r){var o=r.FRasterId,n=null,a=this.FRasterOverlays.length;for(i=0;i<a;i++)if(this.FRasterOverlays[i].id===o){n=this.FRasterOverlays[i];break}n&&(r.zOrder=e,n.zOrder=e,this.SortRasterOverlays(),this.DrawRender())}}},{key:"api_AddWMSOverlay",value:function(t,e,i,r,s,o,n){s>2048&&(s=2048);var a=new q.a(this);if(a.imageSize=s,i){var h=k.c.StringToColor(i,r);a.FColor[0]=h[0],a.FColor[1]=h[1],a.FColor[2]=h[2],a.opacity=h[3]}else a.opacity=r;a.id=t,a.WMSUrl=e,a.callback=n,a.zOrder=o,a.FRefreshTimer=setInterval(a.IntervalFRefreshTimer,mt.WMS_OVERLAY_RASTER_INTERVAL_MS),this.FWMSOverlays.push(a),this.DrawRender()}},{key:"api_SetWMSOverlayColor",value:function(t,e,i){var r,s=null,o=this.FWMSOverlays.length;for(r=0;r<o;r++)if(this.FWMSOverlays[r].id===t){s=this.FWMSOverlays[r];break}if(s){var n=s.FRasterId,a=null,h=this.FRasterOverlays.length;for(r=0;r<h;r++)if(this.FRasterOverlays[r].id===n){a=this.FRasterOverlays[r];break}if(a)if(e){var l=k.c.StringToColor(e,i);a.FColor[0]=l[0],a.FColor[1]=l[1],a.FColor[2]=l[2],a.opacity=l[3],s.FColor[0]=l[0],s.FColor[1]=l[1],s.FColor[2]=l[2],s.opacity=l[3]}else a.opacity=i,s.opacity=i}this.DrawRender()}},{key:"api_DeleteWMSOverlay",value:function(t){var e,i=null,r=this.FWMSOverlays.length;for(e=0;e<r;e++)if(this.FWMSOverlays[e].id===t){i=this.FWMSOverlays[e];break}if(i){var s=i.FRasterId,o=null,n=this.FRasterOverlays.length;for(e=0;e<n;e++)if(this.FRasterOverlays[e].id===s){o=this.FRasterOverlays[e];break}o&&(this.DeleteRasterOverlay(o),o=null);var a=this.FWMSOverlays.indexOf(i);clearInterval(i.FRefreshTimer),i.FRefreshTimer=null,this.FWMSOverlays.splice(a,1),i=null}this.DrawRender()}},{key:"api_ChangeWMSOverlayURL",value:function(t,e){var i,r=this,s=null,o=this.FWMSOverlays.length;for(i=0;i<o;i++)if(this.FWMSOverlays[i].id===t){s=this.FWMSOverlays[i];break}if(s){var n=s.FRasterId,a=null,h=this.FRasterOverlays.length;for(i=0;i<h;i++)if(this.FRasterOverlays[i].id===n){a=this.FRasterOverlays[i];break}if(a){s.WMSUrl=e;var l=s.MakeWMSUrl(s.WMSUrl),u=new Image;u.onload=function(){a.FProjText?(r.gl.bindTexture(r.gl.TEXTURE_2D,a.FProjText),r.gl.texImage2D(r.gl.TEXTURE_2D,0,r.gl.RGBA,r.gl.RGBA,r.gl.UNSIGNED_BYTE,u)):a.FProjText=r.XNPtRY(!1,!0,u),window.URL.revokeObjectURL(u.src),a.callback&&a.callback(!0),r.DrawRender()},u.onerror=function(){window.URL.revokeObjectURL(u.src),a.callback&&a.callback(!1),r.DrawRender()},u.crossOrigin="",u.src=l}}}},{key:"DeleteRasterFromCell",value:function(t,e){t.DeleteRasterFromCell(e);for(var i=0;i<4;i++)t.FChilds[i]&&this.DeleteRasterFromCell(t.FChilds[i],e)}},{key:"DeleteItemsInRasterLoaderCache",value:function(t){for(var e=this.rasterLoader.cache.length;e--;)this.rasterLoader.cache[e].uniqRasterId===t&&(this.rasterLoader.cache[e].cell.FRequestCount--,this.rasterLoader.ClearImageSrc(this.rasterLoader.cache[e].image,this.rasterLoader.cache[e].supportImage),this.rasterLoader.cache.splice(e,1))}},{key:"api_DeleteRaster",value:function(t){this.DeleteItemsInRasterLoaderCache(this.FRasters[t]._uniqRasterId),this.FRasters[t]._FActive&&this.FONRasterCount--,this.FRasters.splice(t,1);for(var e=t;e<this.FRasters.length;e++)this.FRasters[e]._index=e;var i,r;for(i=0;i<this.FRNum;i++)for(r=0;r<this.FCNum;r++)this.DeleteRasterFromCell(this.FCells[i][r],t);this.DrawRender()}},{key:"api_SetRasterONOFF",value:function(t,e){this.FRasters[t]._FActive!==e&&(e?this.FONRasterCount<mt.MAX_OPEN_RASTER_COUNT&&(this.FRasters[t]._FActive=e,this.FONRasterCount++):(this.FRasters[t]._FActive=e,this.FONRasterCount--),this.DrawRender())}},{key:"api_GetRasterONOFF",value:function(t){return this.FRasters[t]._FActive}},{key:"api_SetMaxOpenRasterCount",value:function(t){if(mt.MAX_OPEN_RASTER_COUNT=t,this.FONRasterCount>t)for(var e=0;this.FONRasterCount>t;e++)this.FRasters[e]._FActive&&(this.FRasters[e]._FActive=!1,this.FONRasterCount--);this.DrawRender()}},{key:"api_RasterCount",value:function(){return this.FRasters.length}},{key:"api_GetRaster",value:function(t){return this.FRasters[t]}},{key:"api_SetRasterOpacity",value:function(t,e){this.FRasters[t].opacity=e,this.DrawRender()}},{key:"api_GetRasterOpacity",value:function(t){return this.FRasters[t].opacity}},{key:"DeleteRasterTextures",value:function(t,e){var i,r;for(i=0;i<this.FRNum;i++)for(r=0;r<this.FCNum;r++)this.FCells[i][r].XwI52T(t,e);for(i=0;i<this.FRNum;i++)for(r=0;r<this.FCNum;r++)this.XZ53cd(t,this.FCells[i][r],e)}},{key:"api_SetRasterService",value:function(t,e,i){this.DeleteItemsInRasterLoaderCache(this.FRasters[t]._uniqRasterId);var r=!1,s=null;if(i&&i.length&&(s=new _.E(i[0],i[1],i[2],i[3])),this.DeleteRasterTextures(t,s),this.FixRasterUrl(e),this.FRasters[t]._FActive&&(r=!0),e.bbox&&e.bbox.length&&(e._fLimitsDegree=new _.E(e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3])),e._index=t,e._uniqRasterId=++jt%2000000001,e._numIndex=0,e._supportURLIndex=0,e._lodDisplayArr=[],Array.isArray(e.url)&&e.url.length)for(var o={url:e.url},n=0;n<=mt.GLOBE_MIN_CELL_LEVEL;n++)e._lodDisplayArr.push(o);else if("string"==typeof e.url){var a={url:[e.url]};for(n=0;n<=mt.GLOBE_MIN_CELL_LEVEL;n++)e._lodDisplayArr.push(a)}else this.CreateLodDisplayArraysForRaster(e);e._idx=(this.FRasters[t]._idx+1)%1000001,this.FRasters[t]=e,this.FRasters[t]._FActive=r,this.DrawRender()}},{key:"api_SetRasterLodPriority",value:function(t){this.DrawRender()}},{key:"api_SetRasterTimeOut",value:function(t){mt.RASTER_TIMEOUT_MS=t,this.DrawRender()}},{key:"api_ReTryAtRasterTimeout",value:function(t,e){mt.RETRY_AT_RASTER_TIMEOUT=t,this.reTryRasterCallback=e,this.DrawRender()}},{key:"RasterTimeoutCallback",value:function(){this.reTryRasterCallback&&this.reTryRasterCallback()}},{key:"api_ReTryAtVectorLayerTimeout",value:function(t,e){mt.RETRY_AT_LAYER_TIMEOUT=t,this.reTryVectorLayerCallback=e,this.DrawRender()}},{key:"LayerTimeoutOrErrorCallback",value:function(){this.reTryVectorLayerCallback&&this.reTryVectorLayerCallback()}},{key:"api_SetVectorLayerTimeOut",value:function(t){mt.LAYER_TIMEOUT=t,this.DrawRender()}},{key:"api_LoadVectorLayerWhileScreenIsMoving",value:function(t){mt.FILL_VECTOR_REQUEST_LIST=t,this.DrawRender()}},{key:"api_RasterDebug",value:function(t){mt.RASTER_DEBUG=t,this.httpArrBuff=new I.a(mt.RASTER_TIMEOUT_MS,mt.RASTER_DEBUG,"Raster Timeout","Raster Error")}},{key:"api_MeshDebug",value:function(t){mt.MESH_DEBUG=t,this.httpJSON=new I.b(mt.MESH_TIMEOUT_MS,mt.MESH_DEBUG,"Mesh Timeout","Mesh Error")}},{key:"api_VectorDebug",value:function(t){mt.VECTOR_DEBUG=t}},{key:"api_ScrW",value:function(){return this.FScrW}},{key:"api_ScrH",value:function(){return this.FScrH}},{key:"api_FPS",value:function(){return this.LastFPS}},{key:"api_SetMouseEvents",value:function(t,e){for(var i=t.split(" "),r=i.length;r--;)i[r]&&this.UserEvents.SetEvent(i[r].toLowerCase(),e)}},{key:"api_GetMouseEvent",value:function(t){return this.UserEvents.GetEvent(t)}},{key:"api_ClearMouseEvents",value:function(){this.UserEvents.Clear()}},{key:"api_SetObjectHint",value:function(t,e){this.FShowHintFunc=t,this.FCancelHintFunc=e}},{key:"api_GetCurrentLOD",value:function(){return this.FDRAWED_MAX_LEVEL}},{key:"api_GetCurrentMinLOD",value:function(){for(var t=99,e=this.FDrawedCells.length;e--;)t>this.FDrawedCells[e].FLevel&&(t=this.FDrawedCells[e].FLevel);return t}},{key:"api_GetCurrentWorldLimit",value:function(){return{ur:{x:this.FDrawedWorldDeg.UR.y,y:this.FDrawedWorldDeg.UR.x},ll:{x:this.FDrawedWorldDeg.LL.y,y:this.FDrawedWorldDeg.LL.x}}}},{key:"api_GetScreenCenterAsDegree",value:function(){if(this.XGqwp9(this.FScrW/2,this.FScrH/2,!1,this.tempmouse),this.tempmouse.isValid){var t=this.XLqkQr();return{lng:t.MouseLong,lat:t.MouseLat}}return!1}},{key:"api_GetScreenAsDegree",value:function(t,e){if(this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid){var i=this.XLqkQr(),r=this.api_GetZClient(i.MouseLong,i.MouseLat);return{lng:i.MouseLong,lat:i.MouseLat,Z:r}}return!1}},{key:"api_GetMouseDeg",value:function(){if(this.tempmouse.isValid){var t=this.XLqkQr();return{lng:t.MouseLong,lat:t.MouseLat}}return{lng:null,lat:null}}},{key:"api_GetMousePos",value:function(){return{clientX:this.clientX,clientY:this.clientY,canvasX:this.clientX-this.parentData.left,canvasY:this.clientY-this.parentData.top}}},{key:"api_SetMouseWheelDirection",value:function(t){mt.GLOBE_REVERSE_MOUSE_WHEEL=t}},{key:"api_SetMouseWheelMode",value:function(t){this.zoomToMousePointer=!!t}},{key:"api_GetZClient",value:function(t,e){return this.TempLongLat.SetV(_.b.DegreeToRadyan(t),_.b.DegreeToRadyan(e)),this.X9yZlv(this.TempLongLat)}},{key:"api_SetFog",value:function(t){mt.FOGGED=t,t?this.X9bxMg(1):this.X9bxMg(0),this.DrawRender()}},{key:"api_SetSpaceColor",value:function(t){var e=k.c.StringToColor(t,1);Bt[0]=e[0],Bt[1]=e[1],Bt[2]=e[2],this.DrawRender()}},{key:"api_CalcSunMoon",value:function(t,e,i,r){var s;s=e?t:new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),mt.GLOBE_SUN_LIGHT_ON=i,mt.GLOBE_MOON_LIGHT_ON=r,this.mPlanetPos.CalcPathsAndTimes(t,e),this.mPlanetPos.CalcSunPositionByLatLngZero(s),this.mPlanetPos.CalcMoonPositionByLatLngZero(s),this.mPlanetPos.CalcMoonIllumination(s),mt.GLOBE_LIGHT_ONc=mt.GLOBE_SUN_LIGHT_ON||mt.GLOBE_MOON_LIGHT_ON,mt.GLOBE_LIGHT_ONc?(this.ReBuildAllMeshes(),mt.FOGGED&&this.X9bxMg(0)):mt.FOGGED&&this.X9bxMg(1),this.SetSunMoonEnable(mt.GLOBE_SUN_LIGHT_ON,mt.GLOBE_MOON_LIGHT_ON),this.DrawRender();var o=this.mPlanetPos,n=o.sun,a=o.moon,h=o.moonIllum,l=o.sunPath,u=o.moonPath,d=o.sunTimeCoords,c=o.moonTimeCoords;return{sun:at({},n,{sunPath:l,sunTimeCoords:d}),moon:at({},a,{moonPath:u,illumPercentage:100*h.fraction,phase:h.phase,phaseValue:h.phaseValue,moonTimeCoords:c})}}},{key:"api_SetExtraCot",value:function(t){t<0&&(t=0),t>1&&(t=1),mt.EXTRA_Z_COT_K=t,this.DrawRender()}},{key:"api_SetExtraDeg",value:function(t){mt.EXTRA_DEG_K=t,this.DrawRender()}},{key:"api_ShowGrid",value:function(t){this.showGrid=t,this.DrawRender()}},{key:"api_SetReductionMS",value:function(t){mt.LAYER_REDUCTION_INTERVAL_MS=t,this.globeReductionForLayerInterval&&(clearInterval(this.globeReductionForLayerInterval),this.globeReductionForLayerInterval=null,this.globeReductionForLayerInterval=setInterval(this.XrSiVN,mt.LAYER_REDUCTION_INTERVAL_MS))}},{key:"api_SetMilSymbol",value:function(t){this.MilIcon.SetMilSymbol(t)}},{key:"api_SetLayerReductionBoxSize",value:function(t){mt.REDUCTION_SYMBOL_BOX_SIZE=t,this.X0sUmz(),this.DrawRender()}},{key:"api_GetLayerReductionBoxSize",value:function(){return mt.REDUCTION_SYMBOL_BOX_SIZE}},{key:"CreateLayerStyle",value:function(t,e){t.titleRT=e.titleRT,t.titleRB=e.titleRB,t.titleLT=e.titleLT,t.titleLB=e.titleLB,t.titleCN=e.titleCN,e.fontFamily&&(t.fontFamily={},t.fontFamily.name=e.fontFamily.name,t.fontFamily.bold=e.fontFamily.bold,t.fontFamily.italic=e.fontFamily.italic,t.fontFamily.hollow=e.fontFamily.hollow,t.fontFamily.hollowWidth=e.fontFamily.hollowWidth),t.titleFont=at({},e.titleFont),t.symbolReduction=e.symbolReduction,t.iconType=e.iconType,t.milIcon=e.milIcon,t.lodDisplay=e.lodDisplay,t.active=e.active,e.icon&&(t.icon={},t.icon.name=e.icon.name,t.icon.mapName=e.icon.mapName,t.icon.iconColor=e.icon.iconColor,t.icon.borderColor=e.icon.borderColor,t.icon.fillColor=e.icon.fillColor,t.icon.borderWidth=e.icon.borderWidth,t.icon.radius=e.icon.radius,t.icon.sizeX=e.icon.sizeX,t.icon.sizeY=e.icon.sizeY,t.icon.rotDeg=e.icon.rotDeg),t.filter=e.filter,t.opacity=e.opacity,t.border=e.border,t.borderColor=e.borderColor,t.filled=e.filled,t.fillColor=e.fillColor,t.bottomFilled=e.bottomFilled,t.bottomFillColor=e.bottomFillColor,t.sideFilled=e.sideFilled,t.sideColor=e.sideColor,t.cullFace=e.cullFace,t.depthTest=e.depthTest,t.zMode=e.zMode}},{key:"api_GetLayerStyle",value:function(t){var e;if(Array.isArray(t.style)){e=[];for(var i=0;i<t.style.length;i++)e[i]={},this.CreateLayerStyle(e[i],t.style[i]),e[i].objectType=t.style[i].objectType,e[i].MVTXYZName=t.style[i].MVTXYZName,e[i].startLod=t.style[i].startLod,e[i].endLod=t.style[i].endLod}else e={},this.CreateLayerStyle(e,t.style);return e}},{key:"api_ShowStatusBar",value:function(t){this.showStatusBar=t,this.StatusBarWid.style.visibility=t?"visible":"hidden",this.scalebar.SetBottomOffset(t),this.DrawRender()}},{key:"api_SetStatusBarCallBack",value:function(t){this.statusbarCallback=t,this.DrawRender()}},{key:"api_ShowDebug",value:function(t){this.showDebug=t,this.DebugWid.style.visibility=t?"visible":"hidden"}},{key:"api_ShowCompass",value:function(t){mt.SHOW_COMPASS=t,this.DrawRender()}},{key:"api_SetCompass",value:function(t,e,i){this.compass.SetCompass(t,e,i),this.DrawRender()}},{key:"api_SetOverview",value:function(t,e,i){var r=0;this.showStatusBar&&(r=mt.DEFAULT_STATUSBAR_SIZE),this.overview.SetOverview(t,e,i,r),this.DrawRender()}},{key:"api_SetScaleBar",value:function(t,e){var i=0;this.showStatusBar&&(i=mt.DEFAULT_STATUSBAR_SIZE),this.scalebar.SetScaleBar(t,e,i),this.DrawRender()}},{key:"api_SetScalebarImage",value:function(t){var e=this,i=new Image;i.onload=function(){e.scalebar.SetImage(i),window.URL.revokeObjectURL(i.src),e.DrawRender()},i.crossOrigin="",i.src=t}},{key:"api_ShowOverview",value:function(t){mt.SHOW_OVERVIEW_PANEL=t,this.DrawRender()}},{key:"api_GetScaleBarPos",value:function(){var t=this.scalebar.GetPos();return t.x+=this.parentData.left,t.y+=this.parentData.top,t}},{key:"api_OnScaleBarClick",value:function(t){this.scalebar.SetWidget(t)}},{key:"api_ShowScaleBar",value:function(t){mt.SHOW_SCALEBAR=t,this.scalebar.ctx.clearRect(0,0,this.scalebar.canvas.width,this.scalebar.canvas.height),this.DrawRender()}},{key:"api_ZoomToLOD",value:function(t){if(void 0!==t){var e=this.FDRAWED_MAX_LEVEL+.5,i=this.api_GetScreenCenterAsDegree();i&&("string"==typeof t?("zoomin"===t?(e++,e=(e=this.PrevZoomLod===e?++e:e)>mt.GLOBE_MIN_CELL_LEVEL?mt.GLOBE_MIN_CELL_LEVEL+.5:e):"zoomout"===t&&(e--,e=(e=this.PrevZoomLod===e?--e:e)<3?3:e),this.api_FlyToPointDirect(i.lng,i.lat,this.api_GetZClient(i.lng,i.lat)+St[e])):"number"==typeof t&&(t>3&&t<mt.GLOBE_MIN_CELL_LEVEL+.5?e=Math.floor(t)+.5:t<=3?e=3:t>=mt.GLOBE_MIN_CELL_LEVEL&&(e=mt.GLOBE_MIN_CELL_LEVEL+.5),this.api_FlyToPointDirect(i.lng,i.lat,this.api_GetZClient(i.lng,i.lat)+St[e]))),this.PrevZoomLod=e}}},{key:"api_ZoomToPaperScale",value:function(t){this.XWWWVg()&&this.FCamera.SetFlyToPaperScale(_.b.RadyanToDegree(this.FOrbit.MouseLong),_.b.RadyanToDegree(this.FOrbit.MouseLat),t*mt.GLOBE_RADIUS_K)}},{key:"api_SetMouseCursor",value:function(t){this.canvasCursor=t}},{key:"api_SetWireFrameMode",value:function(t){this.wireFrameMode=t,this.DrawRender()}},{key:"api_SetModelWireFrameMode",value:function(t){this.modelWireFrameMode=t,this.DrawRender()}},{key:"api_SetGlobalSymbolAndTextScale",value:function(t,e){mt.GLOBE_SYMBOL_SCALE=t,mt.GLOBE_TEXT_SCALE=e,this.DrawRender()}},{key:"api_UseTextureBuffer",value:function(t){if(this.reUseCellTextActive=t,!1===t){for(var e=this.reUseCellTexture.length;e--;)this.gl.deleteTexture(this.reUseCellTexture[e]);this.reUseCellTexture.length=0}}},{key:"api_GetShapeTypes",value:function(){return this.Shapes.DisplayName.slice()}},{key:"api_GetShapeCount",value:function(){return Object.keys(pt).length}},{key:"api_GetShapeBitmap",value:function(t,e,i,r,s,o,n){if(this.shapeCtx.clearRect(0,0,this.shapeCanvas.width,this.shapeCanvas.height),this.shapeCtx.canvas.width=o>256?256:o,this.shapeCtx.canvas.height=n>256?256:n,this.shapeCtx.beginPath(),t===pt.ELLIPSE){var a=_.b.Min(this.shapeCtx.canvas.width,this.shapeCtx.canvas.height);this.shapeCtx.arc(this.shapeCtx.canvas.width/2,this.shapeCtx.canvas.height/2,3*a/8,0,2*Math.PI)}else{var h=this.Shapes.Definitions[t].vert.slice();h[0]=h[0]*this.shapeCtx.canvas.width*3/8+this.shapeCtx.canvas.width/2,h[1]=h[1]*this.shapeCtx.canvas.height*3/-8+this.shapeCtx.canvas.height/2,this.shapeCtx.moveTo(h[0],h[1]);for(var l=2;l<h.length;l+=2)h[l]=h[l]*this.shapeCtx.canvas.width*3/8+this.shapeCtx.canvas.width/2,h[l+1]=h[l+1]*this.shapeCtx.canvas.height*3/-8+this.shapeCtx.canvas.height/2,this.shapeCtx.lineTo(h[l],h[l+1]);this.shapeCtx.lineTo(h[0],h[1])}return this.shapeCtx.closePath(),s&&(this.shapeCtx.fillStyle=s,this.shapeCtx.fillRect(0,0,this.shapeCtx.canvas.width,this.shapeCtx.canvas.height)),i&&(this.shapeCtx.fillStyle=i,this.shapeCtx.fill()),r&&e&&(this.shapeCtx.lineWidth=r,this.shapeCtx.strokeStyle=e,this.shapeCtx.stroke()),this.shapeCanvas.toDataURL(Rt.png)}},{key:"api_FlyToRegion",value:function(t,e,i,r,s){this.FGlobText?(this.LLDeg.SetV(t,e),this.URDeg.SetV(i,r),s&&(this.Scale=s),this.FCamera.XKxC74(this.LLDeg,this.URDeg,this.Scale,null)):(this.savedFlyToRegion=[t,e,i,r,s],this.savedapiFlyToRegion=!0)}},{key:"api_FlyToPoint",value:function(t,e,i,r,s){this.FGlobText?(i<3&&(i=3),this.FCamera.X2Uggv(t,e,i*mt.GLOBE_RADIUS_K,r,s,null)):(this.savedFlyToPoint=[t,e,i*mt.GLOBE_RADIUS_K,r,s],this.savedapiFlyToPoint=!0)}},{key:"api_FlyToPointDirect",value:function(t,e,i,r,s){this.FCamera.SetDirectPosForNoAnimation(t,e,i*mt.GLOBE_RADIUS_K,r,s)}},{key:"api_FlyToRegionDirect",value:function(t,e,i,r,s){this.LLDeg.SetV(t,e),this.URDeg.SetV(i,r),this.FCamera.SetRegionDirectPosForNoAnimation(this.LLDeg,this.URDeg,s)}},{key:"api_SetContinuousRotation",value:function(t){mt.GLOBE_ROTATION_VALUE=t?1:.96}},{key:"api_NorthAngleDeg",value:function(){return _.b.RadyanToDegree(this.ea.x)<0?parseInt(_.b.RadyanToDegree(this.ea.x))-1:parseInt(_.b.RadyanToDegree(this.ea.x))+1}},{key:"api_TurnToNorth",value:function(t){"number"==typeof t?this.FCamera.TurnToNorthAngle(t):this.MouseMode===Dt&&this.FCamera.XE6H07(this.CompassAzimutRadyan)}},{key:"api_TurnToNorthDirect",value:function(t){this.FCamera.X99ZRj(t)}},{key:"api_SetNorthAngle",value:function(t){this.FCamera.SetNorthAngle(t)}},{key:"api_GoToPreviousPosition",value:function(){this.FCamera.FScreenLocPrevNext.goToPrevPos(),this.DrawRender()}},{key:"api_GoToNextPosition",value:function(){this.FCamera.FScreenLocPrevNext.goToNextPos(),this.DrawRender()}},{key:"api_IsPreviousPositionAvailable",value:function(){return this.FCamera.FScreenLocPrevNext.isPrevAvailable()}},{key:"api_IsNextPositionAvailable",value:function(){return this.FCamera.FScreenLocPrevNext.isNextAvailable()}},{key:"api_SetTiltAngle",value:function(t){this.FCamera.SetTilt3D2D(t,mt.GLOBE_FLYTO_TILT3D2D)}},{key:"api_OrbitDistance",value:function(){return parseFloat((1e3*this.X0hEl5()).toFixed(3))}},{key:"api_CamZ",value:function(){return parseFloat((this.FCamera.FCamZ/mt.GLOBE_RADIUS_K).toFixed(5))}},{key:"api_Altitude",value:function(){return parseFloat((this.FCamera.XcttbF()/mt.GLOBE_RADIUS_K).toFixed(3))}},{key:"api_SetNavigationSpeed",value:function(t){mt.NAVIGATION_SPEED=t<.1?.1:t>5?3:t}},{key:"api_GetNavigationSpeed",value:function(){return mt.NAVIGATION_SPEED}},{key:"api_CalcCameraGroundArea",value:function(t,e,i,r,s,o,n,a){var h,l,u=new _.w(0,0,0),d=new _.w(0,0,0),c=0,f=[],p=[],F=new _.w(0,0,0),y=new _.w(0,0,0),A=new _.w(0,0,0),g=new _.u(0,0),C=0,b=mt.GLOBE_RADIUS*(1/mt.GLOBE_RADIUS_K),T=new _.u(t.x,t.y);for(T.ConvertDegreeToRadyan(),h=b+(l=this.XyecYr(T,!0)),_.b.GeoTo3DP(T,b+e,u),d.SetVecSub(this.Fp2T,u),this.XdRX9i(d,2,_.b.DegreeToRadyan(i),_.b.DegreeToRadyan(r),t.x,t.y,s,o,f),c=0;c<=5;c++)f[c].SetVecAdd(f[c],this.Fp2T);for(this.NumInt=0,c=1;c<=4;c++){if(!(this.X0x7Gy(f[0],f[c],new _.w(0,0,0),h,y,A)&&f[c].Dist3D(y)<f[0].Dist3D(y)))return!1;C=this.XxDwZy(f[0],f[c],l,y,A),F=2===this.NumInt?f[0].Dist3D(y)<f[0].Dist3D(A)?y:A:y,_.b.CarToSpher2(F,g),g.ConvertRadyanToDegree(),p.push(new _.w(g.x,g.y,C))}if(4===p.length)return n.push(p[0].x),n.push(p[0].y),a.push(p[0].z),n.push(p[1].x),n.push(p[1].y),a.push(p[1].z),n.push(p[2].x),n.push(p[2].y),a.push(p[2].z),n.push(p[3].x),n.push(p[3].y),a.push(p[3].z),!0}},{key:"api_SetCameraPosChanged",value:function(t,e){this.cameraPosChangedTime=new Date,this.cameraPosChangedCallback=e,mt.CAMERA_POS_CHANGED_INTERVAL_MS=t}},{key:"CameraChanged",value:function(){if(this.cameraPosChangedCallback){var t=new Date;t-this.cameraPosChangedTime>=mt.CAMERA_POS_CHANGED_INTERVAL_MS&&(this.cameraPosChangedTime=t,this.cameraPosChangedCallback())}}},{key:"X0x7Gy",value:function(t,e,i,r,s,o){var n,a,h,l,u;return n=_.b.Sqr(e.x-t.x)+_.b.Sqr(e.y-t.y)+_.b.Sqr(e.z-t.z),(u=(a=2*((e.x-t.x)*(t.x-i.x)+(e.y-t.y)*(t.y-i.y)+(e.z-t.z)*(t.z-i.z)))*a-4*n*(h=_.b.Sqr(i.x)+_.b.Sqr(i.y)+_.b.Sqr(i.z)+_.b.Sqr(t.x)+_.b.Sqr(t.y)+_.b.Sqr(t.z)-2*(i.x*t.x+i.y*t.y+i.z*t.z)-_.b.Sqr(r)))<0?(this.NumInt=0,!1):_.b.CSZero(u)?(this.NumInt=1,l=-a/(2*n),s.x=t.x+l*(e.x-t.x),s.y=t.y+l*(e.y-t.y),s.z=t.z+l*(e.z-t.z),!0):u>0&&(this.NumInt=2,l=(-a+_.b.Sqrt(_.b.Sqr(a)-4*n*h))/(2*n),s.x=t.x+l*(e.x-t.x),s.y=t.y+l*(e.y-t.y),s.z=t.z+l*(e.z-t.z),l=(-a-_.b.Sqrt(_.b.Sqr(a)-4*n*h))/(2*n),o.x=t.x+l*(e.x-t.x),o.y=t.y+l*(e.y-t.y),o.z=t.z+l*(e.z-t.z),!0)}},{key:"XxDwZy",value:function(t,e,i,r,s){var o,n,a,h=new _.u(0,0),l=new _.w(0,0,0);for(o=0;o<=10&&(a=i,this.X0x7Gy(t,e,new _.w(0,0,0),mt.GLOBE_RADIUS*(1/mt.GLOBE_RADIUS_K)+i,r,s))&&(l=2===this.NumInt?t.Dist3D(r)<t.Dist3D(s)?r:s:r,_.b.CarToSpher2(l,h),n=this.XyecYr(h,!0),!(Math.abs(n-i)<mt.GLOBE_CAMERA_GROUND_ERROR_DIST));o++)i>n?i=n+(i-n)/2:i+=(n-i)/2;return a}},{key:"XNfF4j",value:function(t,e,i,r,s,o){var n=new _.w(0,0,0);return _.b.Rotate3DCenter(o,0,0,t),_.b.Rotate3DCenter(0,0,s,t),_.b.Rotate3DCenter(90+r,0,0,t),_.b.Rotate3DCenter(0,0,i,t),n.SetVecAdd(t,e),n}},{key:"XdRX9i",value:function(t,e,i,r,s,o,n,a,h){var l=new _.w(0,0,0);h[0]=this.XNfF4j(new _.w(0,0,0),t,s,o,n,a),_.b.GeoTo3D(-i/2,-r/2,e,l),h[1]=this.XNfF4j(l,t,s,o,n,a),_.b.GeoTo3D(-i/2,r/2,e,l),h[2]=this.XNfF4j(l,t,s,o,n,a),_.b.GeoTo3D(i/2,r/2,e,l),h[3]=this.XNfF4j(l,t,s,o,n,a),_.b.GeoTo3D(i/2,-r/2,e,l),h[4]=this.XNfF4j(l,t,s,o,n,a),_.b.GeoTo3D(0,0,e,l),h[5]=this.XNfF4j(l,t,s,o,n,a)}},{key:"api_GetCameraDist",value:function(){return this.FCamera.FDist/mt.GLOBE_RADIUS_K}},{key:"api_SetCameraPos",value:function(t,e,i,r,s,o){this.FCamera.XgSaWh(t,e,i,r,s,o)}},{key:"api_SetCameraCallBack",value:function(t){this.api_ShowStatusBar(!1),this.FCameraCallBack=t,this.DrawRender()}},{key:"api_LeaveCamera",value:function(t){this.api_ShowStatusBar(!0),this.FCameraCallBack&&t&&(this.FCameraCallBack.CamDist=t,this.FCameraCallBack.CamTiltAng=-90,this.FCameraCallBack.SetPosition()),delete this.FCameraCallBack,this.DrawRender()}},{key:"api_GetDirectPosNatural",value:function(){return this.FCamera.GetDirectPosNatural()}},{key:"api_SetDirectPosNatural",value:function(t){this.FCamera.SetDirectPosNatural(t)}},{key:"api_GetCurrentLookInfo",value:function(){var t,e,i;return this.XGqwp9(this.FScrW/2,this.FScrH/2,!1,this.tempmouseForScreenInfo),this.tempmouseForScreenInfo.ConvertRadyanToDegree(),t=this.tempmouseForScreenInfo.SpacePoint.Dist3D(this.FEyePos)/mt.GLOBE_RADIUS_K,e=this.FCamera.FTILT_ROT_DEGREE,i=_.b.RadyanToDegree(this.ea.x),{CenterLong:this.tempmouseForScreenInfo.MouseLong,CenterLat:this.tempmouseForScreenInfo.MouseLat,Distance:t,Tilt:e,NorthAng:i}}},{key:"api_ObjectCreator",value:function(t,e,i){var r={startLod:1,endLod:32,reportObj:function(t,e){}};e&&(r.isNew=!0);var s=this.api_GetScreenCenterAsDegree();switch(t){case ct.POINT:r.coords=[s.lng,s.lat],r.coordsZ=[0];break;case ct.LINE:e||i?(r.coords=[],r.coordsZ=[]):(r.coords=[s.lng-2,s.lat-2,s.lng+2,s.lat+2],r.coordsZ=[0,0]);break;case ct.POLYGON:e||i?(r.coords=[],r.coordsZ=[]):(r.coords=[s.lng-2,s.lat-2,s.lng,s.lat+2,s.lng+2,s.lat],r.coordsZ=[0,0,0]),r.heights=[],r.solid3D=!1,r.fixedHeights=!1;break;case ct.SHAPE:e?(r.proportional=!1,r.isEditCenter=!1,i&&(r.coords=[],r.coordsZ=[])):(r.coords=[s.lng,s.lat],r.coordsZ=[0]),r.heights=[],r.shapeType=pt.ELLIPSE,r.radius1=2e4,r.radius2=2e4,r.rotDeg=0,r.fixedTop=!1;break;case ct.ARCAREA:e?(r.isEditCenter=!1,i&&(r.coords=[],r.coordsZ=[])):(r.coords=[s.lng,s.lat],r.coordsZ=[0]),r.heights=[],r.radius1=4e4,r.radius2=2e4,r.startAng=0,r.endAng=90,r.stepAng=5,r.solid3D=!1,r.fixedTop=!1}return r}},{key:"api_EditCallbackCreator",value:function(){return{can_rotate:!0,can_move:!0,can_scale:!0,show_editwidget:!0,show_walker:!0,can_change:{vertex:!0,height:!0,Z:!0},next_height:0,vertex_color:{mainH:"#12CFE3",mainN:"#000000",sub:"#FF0000",Z:"#E789DE",height:"#ffffff"},vertex_size:{main:7,sub:6,Z:7,height:7},onHeightClick:null,onVertexClick:null,onFinish:function(t){return!0},onChanged:function(t,e,i){},onEndEdit:function(t,e){}}}},{key:"api_CreateObjectBuffer",value:function(t,e){return new O.a(this,t,e)}},{key:"api_AddObjectBuffer",value:function(t){this.UserObjArr.push(t)}},{key:"api_ObjectBufferCount",value:function(){return this.UserObjArr.length}},{key:"api_GetObjectBuffer",value:function(t){return this.UserObjArr[t]}},{key:"api_FindObjectBufferById",value:function(t){for(var e=this.UserObjArr.length;e--;)if(this.UserObjArr[e].id===t)return this.UserObjArr[e];return-1}},{key:"api_ExchangeObjectBuffer",value:function(t,e){var i=this.UserObjArr[t];this.UserObjArr[t]=this.UserObjArr[e],this.UserObjArr[e]=i}},{key:"api_DeleteObjectBufferById",value:function(t){for(var e=this.UserObjArr.length;e--;)if(this.UserObjArr[e].id===t)return this.UserObjArr[e].Clear(),this.UserObjArr.splice(e,1),!0;return!1}},{key:"api_DeleteObjectBufferByIndex",value:function(t){return!!this.UserObjArr[t]&&(this.UserObjArr[t].Clear(),this.UserObjArr.splice(t,1),!0)}},{key:"api_DeleteAllObjectBuffers",value:function(){for(var t=this.UserObjArr.length;t--;)this.UserObjArr[t].Clear();this.UserObjArr.length=0}},{key:"api_GetObjectLimit",value:function(t){var e=t.obj;if(e&&e.Limit){var i=e.Limit;return{ll:{x:i.LL.y,y:i.LL.x},ur:{x:i.UR.y,y:i.UR.x}}}if(t.coords.length){var r=new _.E(0,0,0,0);return r.Clear(),r.ExpandByCoords(e.coords),{ll:{x:r.LL.y,y:r.LL.x},ur:{x:r.UR.y,y:r.UR.x}}}return null}},{key:"GetProfileDistArr",value:function(t){var e=[];e[0]=[0].concat(t[0]);for(var i=1;i<t.length;i++){var r=t[i-1],s=t[i],o=this.Math.GeoDistGreatCircle(r[0],r[1],s[0],s[1]);e[i]=[e[i-1][0]+o].concat(t[i])}return e}},{key:"RemoveDuplicateP",value:function(t){for(var e=t.length;e--;)if(t[e])for(var i=t[e],r=e-1;r>0;r--){var s=t[r];i[0]===s[0]&&i[1]===s[1]&&t.splice(r,1)}}},{key:"CallProfileApi",value:function(t,e,i,r,s){var o=this;if(this.CurrentMeshUrl){var n=0;n=s||mt.PROFILE_TIMEOUT_MS;var a=new I.b(n,mt.MESH_DEBUG,"Timeout","Error"),h=e.length/2-1;return new Promise(function(s,n){if(t===h)s(o.GetProfileDistArr(r));else{var l="".concat(o.CurrentMeshUrl,"/csh.dll/FINDPROF?")+"P1X=".concat(e[2*t],"&P1Y=").concat(e[2*t+1],"&")+"P2X=".concat(e[2*(t+1)],"&P2Y=").concat(e[2*(t+1)+1],"&")+"R=".concat(mt.GLOBE_RADIUS/mt.GLOBE_RADIUS_K,"&LEVEL=").concat(i,"&FORMAT=JSON");a.SendReq(l).then(function(a){a.response?(o.RemoveDuplicateP(a.response),r=r.concat(a.response),s(o.CallProfileApi(t+1,e,i,r))):n(0)})}})}return null}},{key:"api_FindProfile",value:function(t,e,i){return this.CallProfileApi(0,t,e,[],i)}},{key:"api_VisibilityAnalysis",value:function(t,e){var i=this;if(this.CurrentMeshUrl){var r=k.c.StringToColorForCanvas(t.visColor,1),s=k.c.StringToColorForCanvas(t.invisColor,1),o="";t.observerHeight<.1&&(t.observerHeight=.1),t.receiverHeight<.1&&(t.receiverHeight=.1),t.scanRadius<100&&(t.scanRadius=100),t.scanSteps<.1&&(t.scanSteps=.1);for(var n=0;n<t.observerCoords.length;n++)o+="<o>"+t.observerCoords[n][0]+","+t.observerCoords[n][1]+"</o>";var a="<LOS><observers>"+o+"</observers><observerH>"+t.observerHeight+"</observerH><receiverH>"+t.receiverHeight+"</receiverH><scanRadius>"+t.scanRadius+"</scanRadius><scanSteps>"+t.scanSteps+"</scanSteps><imgSize>"+t.imageSize+"</imgSize><visibleColor>"+r[0]+","+r[1]+","+r[2]+"</visibleColor><invisibleColor>"+s[0]+","+s[1]+","+s[2]+"</invisibleColor></LOS>",h=new Promise(function(t){var r=new XMLHttpRequest,s=Object.keys(Vt);Vt[s.length+1]=r,r.reqId=s.length+1,r.open("POST","".concat(i.CurrentMeshUrl,"/csh.dll/VISANAL2?FORMAT=PNG"),!0),r.onload=function(){var e=r.getResponseHeader("Content-Type"),i=new Uint8Array(r.response),s=new Blob([i],{type:e}),o=(window.URL||window.webkitURL).createObjectURL(s);t(o),delete Vt[r.reqId]},r.onerror=function(){t(!1)},r.onabort=function(){t("abort")},r.ontimeout=function(){t(!1)},r.timeout=e||36e6,r.responseType="arraybuffer",r.send(a)}),l=new Promise(function(e){var i=t.observerCoords,r=t.scanRadius,s=new _.E(0,0,0,0);s.Clear();for(var o=0;o<i.length;o++){var n=_.b.FillEllipseGeo(i[o],r,r,0,64);s.ExpandByCoords(n)}e({ll:{x:s.LL.y,y:s.LL.x},ur:{x:s.UR.y,y:s.UR.x}})});return Promise.all([h,l]).then(function(e){e[0]?"abort"!==e[0]&&t.callback(e[0],e[1]):t.callback(null,null)}),Object.keys(Vt).length}return t.callback(null,null),null}},{key:"api_CancelVisibilityAnalysis",value:function(t){t&&(Vt[t].abort(),delete Vt[t])}},{key:"api_UndoEdit",value:function(){this.FUndoRedoEdit.Undo(this.FLastEditingObj),this.DrawRender()}},{key:"api_RedoEdit",value:function(){this.FUndoRedoEdit.Redo(this.FLastEditingObj),this.DrawRender()}},{key:"api_CanUndoEdit",value:function(){return this.FUndoRedoEdit.CanUndo()}},{key:"api_CanRedoEdit",value:function(){return this.FUndoRedoEdit.CanRedo()}},{key:"api_SetUndoBuffersChangedEvent",value:function(t){this.FUndoRedoEdit.changedCallback=t}},{key:"api_GetEditCallback",value:function(){return this.FLastEditingCallback}},{key:"api_EditCallbackChanged",value:function(){void 0===this.FLastEditingCallback.next_height&&isNaN(this.FLastEditingCallback.next_height)&&(this.FLastEditingCallback.next_height=0),this.FLastEditingObj&&this.FLastEditingObj.solid3D&&(this.FLastEditingObj.fixedHeights?(this.FLastEditingObj.eVal.setNextHeight(yt.ADD_VERTEX,this.FLastEditingObj.coordsZ.length-1),this.FLastEditingObj.eVal.buildEditGeometry()):(this.FLastEditingObj.eVal.setNextHeight(yt.ADD_VERTEX,this.FLastEditingObj.coordsZ.length-1),this.FLastEditingObj.eVal.setHeightToBuffer(this.FLastEditingObj.eVal.walkerGeo.MouseLong,this.FLastEditingObj.eVal.walkerGeo.MouseLat,0,this.FLastEditingObj.coordsZ.length-1))),this.DrawRender()}},{key:"api_GetEditingObj",value:function(){return this.FLastEditingObj}},{key:"api_StartEditObj",value:function(t,e,i,r){this.FLastEditingObj&&this.api_StopEditObj(!0,!1),i.show_editwidget&&(this.CSWidgets.editWidget.style.visibility="visible"),this.FLastEditingObj=t,this.FLastEditingObj.saveInfo(),this.FLastEditingCallback=i,this.FLastEditingObj.beginEdit(!0,r),this.FLastEditingCallback&&(this.FLastEditingCallback.onChanged?this.FLastEditingObj.onChanged=this.FLastEditingCallback.onChanged:this.FLastEditingObj.onChanged=function(){},this.FLastEditingCallback.onHeightClick&&(this.FLastEditingObj.onHeightClick=this.FLastEditingCallback.onHeightClick),this.FLastEditingCallback.onVertexClick&&(this.FLastEditingObj.onVertexClick=this.FLastEditingCallback.onVertexClick)),e&&(this.FLastEditingObj.isNew=!0),this.FLastEditingCallback.vertex_color||(this.FLastEditingCallback.vertex_color={}),this.FLastEditingCallback.vertex_size||(this.FLastEditingCallback.vertex_size={}),this.FLastEditingCallback.can_change||(this.FLastEditingCallback.can_change={});var s=this.FLastEditingObj.eVal,o=this.FLastEditingCallback.vertex_color;o.mainH?s.mainHColor=k.c.StringToColor(o.mainH,1):s.mainHColor=new Float32Array([.07058,.8078,.89,1]),o.mainN?s.mainNColor=k.c.StringToColor(o.mainN,1):s.mainNColor=new Float32Array([0,0,0,1]),o.height?s.heightColor=k.c.StringToColor(o.height,1):s.heightColor=new Float32Array([1,1,1,1]),o.sub?s.subColor=k.c.StringToColor(o.sub,1):s.subColor=new Float32Array([1,0,0,1]),o.Z?s.zColor=k.c.StringToColorForCanvas(o.Z,1):s.zColor=new Float32Array([231,137,222,1]);var n=this.FLastEditingCallback.vertex_size;if(n.main?s.mainSize=n.main:s.mainSize=7,n.height?s.heightSize=n.height:s.heightSize=7,n.sub?s.subSize=n.sub:s.subSize=6,n.Z?s.zSize=n.Z:s.zSize=7,this.FLastEditingObj.type===ct.POINT||this.FLastEditingObj.type===ct.MODEL||this.FLastEditingObj.type===ct.SHAPE||this.FLastEditingObj.type===ct.ARCAREA)if(this.FLastEditingObj.type===ct.SHAPE||this.FLastEditingObj.type===ct.ARCAREA){this.FLastEditingCallback&&(this.FLastEditingCallback.can_rotate&&(this.FLastEditingObj.eVal.editRotateTexture=this.FRotateTexture),this.FLastEditingCallback.can_scale&&(this.FLastEditingObj.eVal.editMoveTexture=this.FMoveTexture),this.FLastEditingCallback.can_move&&(this.FLastEditingObj.eVal.editTexture=this.FEditTexture)),this.XGqwp9(this.FScrW/2,this.FScrH/2,!1,this.tempmouse);var a=this.XLqkQr();this.FLastEditingObj.eVal.addCoord(a)}else{this.FLastEditingCallback&&this.FLastEditingCallback.can_move&&(this.FLastEditingObj.eVal.editTexture=this.FEditTexture),this.XGqwp9(this.FScrW/2,this.FScrH/2,!1,this.tempmouse);var h=this.XLqkQr();this.FLastEditingObj.eVal.addCoord(h)}else if(this.FLastEditingCallback&&(this.FLastEditingCallback.can_rotate&&(this.FLastEditingObj.eVal.editRotateTexture=this.FRotateTexture),this.FLastEditingCallback.can_scale&&(this.FLastEditingObj.eVal.editMoveTexture=this.FMoveTexture),this.FLastEditingCallback.can_move&&(this.FLastEditingObj.eVal.editTexture=this.FEditTexture)),Array.isArray(this.FLastEditingObj.coordsZ)&&Array.isArray(this.FLastEditingObj.coords)&&this.FLastEditingObj.coordsZ.length&&this.FLastEditingObj.coords.length)this.FLastEditingObj.solid3D&&(this.FLastEditingObj.fixedHeights?(this.FLastEditingCallback.next_height?this.FLastEditingObj.heights[0]=this.FLastEditingCallback.next_height:Array.isArray(this.FLastEditingObj.heights)&&"number"==typeof this.FLastEditingObj.heights[0]||(this.FLastEditingObj.heights[0]=0),this.FLastEditingObj.build()):this.FLastEditingCallback.next_height?this.FLastEditingObj.heights.push(this.FLastEditingCallback.next_height):this.FLastEditingObj.heights.push(0)),this.FLastEditingObj.eVal.addCoord(this.FLastEditingObj.coords[this.FLastEditingObj.coords.length-2],this.FLastEditingObj.coords[this.FLastEditingObj.coords.length-1],this.FLastEditingObj.coordsZ[this.FLastEditingObj.coordsZ.length-1]);else{this.XGqwp9(this.FScrW/2,this.FScrH/2,!1,this.tempmouse);var l=this.XLqkQr();this.FLastEditingObj.eVal.addCoord(l.MouseLong,l.MouseLat,0),this.FLastEditingObj.solid3D&&(this.FLastEditingObj.fixedHeights?this.FLastEditingCallback.next_height?this.FLastEditingObj.heights[0]=this.FLastEditingCallback.next_height:Array.isArray(this.FLastEditingObj.heights)&&"number"==typeof this.FLastEditingObj.heights[0]||(this.FLastEditingObj.heights[0]=0):this.FLastEditingCallback.next_height?this.FLastEditingObj.heights.push(this.FLastEditingCallback.next_height):this.FLastEditingObj.heights.push(0))}this.FUndoRedoEdit.XF471F(this.FLastEditingObj),this.X5qSkG(),this.DrawRender()}},{key:"api_StopEditObj",value:function(t,e){this.FLastEditingObj&&(this.FLastEditingObj.isNew&&t?(this.FUndoRedoEdit.XF471F(),this.FLastEditingObj.obj.userObj.DeleteObjByRef(this.FLastEditingObj),this.EndEditProcess(e)):e?(this.FLastEditingObj.isNew=!1,this.FLastEditingObj.endEdit(),this.FLastEditingObj.restoreInfo(),this.EndEditProcess(e)):this.FLastEditingCallback&&this.FLastEditingCallback.onFinish&&!1!==this.FLastEditingCallback.onFinish(this.FLastEditingObj)&&(this.FLastEditingObj.isNew=!1,this.FUndoRedoEdit.XF471F(),this.FLastEditingObj.endEdit(),this.EndEditProcess(e)),this.DrawRender())}},{key:"EndEditProcess",value:function(t){this.EditingHighlightInterval&&(clearInterval(this.EditingHighlightInterval),this.EditingHighlightInterval=null),this.FLastEditingCallback&&this.FLastEditingCallback.onEndEdit&&this.FLastEditingCallback.onEndEdit(this.FLastEditingObj,!t),this.FLastEditingObj.onChanged=null,this.FLastEditingObj=null,this.FLastEditingCallback=null,this.CSWidgets.editWidget.style.visibility="hidden",this.CSWidgets.editVertexWidget.style.visibility="hidden",this.CSWidgets.spanAppendYukseklik.style.visibility="hidden",this.CSWidgets.pYukseklik.style.visibility="hidden"}},{key:"api_CancelEditObj",value:function(){this.FLastEditingObj&&(this.FLastEditingObj.isNew?this.api_StopEditObj(!0,!0):this.api_StopEditObj(!1,!0))}},{key:"api_CreateModel",value:function(t,e,i,r,s,o,n,a,h,l,u,d,c){return i*=mt.GLOBE_RADIUS_K,r*=mt.GLOBE_RADIUS_K,s*=mt.GLOBE_RADIUS_K,{style:this.api_GetDefaultStyle(),type:ct.MODEL,Fid:c,coords:[t,e],coordsZ:h,startLod:l,endLod:u,sx:i,sy:r,sz:s,rotXY:o,rotZ:n,rotRoll:a,objUrl:d}}},{key:"api_SetDistanceUnit",value:function(t){this.Units.SetDistanceUnit(t)}},{key:"api_SetAreaUnit",value:function(t){this.Units.SetAreaUnit(t)}},{key:"api_SetAltitudeUnit",value:function(t){this.Units.SetAltitudeUnit(t)}},{key:"api_SetAngleUnit",value:function(t){this.Units.SetAngleUnit(t)}},{key:"api_SetVolumeUnit",value:function(t){this.Units.SetVolumeUnit(t)}},{key:"api_SetLang",value:function(t){mt.LANG=t.toLowerCase(),this.StatusBarWid=this.CSWidgets.CreateStatusBarWidGet(this.parentData,this.statusBarFontSize+5),this.CSWidgets.SetPopupValues(),this.objZ.SetLang(),this.DrawRender()}},{key:"api_GetFontStyle",value:function(){return E.a.createFontStyle()}},{key:"api_GetDefaultStyle",value:function(){return E.a.CreateStyle()}},{key:"api_GetDefaultStyleNoIcon",value:function(){return E.a.CreateStyleNoIcon()}},{key:"api_GetDefaultLayerStyle",value:function(){return P.a.CreateLayerStyle()}},{key:"api_GetDefaultClusterStyle",value:function(t){return P.a.CreateLayerClusterStyle(t)}},{key:"api_GetDefaultLayerStyleNoIcon",value:function(){return P.a.CreateLayerStyleNoIcon()}},{key:"api_GetRasterizeStyle",value:function(){return E.a.createRasterizeStyle()}},{key:"api_GetDefaultCompositeLayerStyle",value:function(){return P.a.CreateCompositeLayerStyle()}},{key:"api_CreateCompositeLayerStyle",value:function(t,e,i,r,s,o,n,a,h){var l=P.a.CreateCompositeLayerStyle();return l.fillColor=i,l.borderColor=r,l.filled=s,l.border=o,l.MVTXYZName=t,l.objectType=e,l.lineType.width=n,l.startLod=a,l.endLod=h,l}},{key:"api_SetLayerOpacity",value:function(t,e){for(var i=!1,r=this.api_LayerCount();r--;)if(this.FLayers[r]===t){i=!0;break}if(i){t.rasterize&&this.RemoveRasterizeLayer();var s=r;if(e>1?e=1:e<0&&(e=0),t.clusterStyle){t.style.opacity=e;for(var o=0;o<t.style.filter.length;o++)t.style.filter[o].style.opacity=e;P.a.PreCalcStyleInfo(t,t,this.gl,this),P.a.CreateLodDisplayArrays(t._style);for(r=0;r<t.clusterStyle.length;r++){t.clusterStyle[r].cluster.style.opacity=e;for(o=0;o<t.clusterStyle[r].cluster.style.filter.length;o++)t.clusterStyle[r].cluster.style.filter[o].style.opacity=e;P.a.PreCalcStyleInfo(t.clusterStyle[r].cluster,t._clusterStyle[r],this.gl,this)}}else{if(Array.isArray(t.style))for(var n=0;n<t.style.length;n++)t.style[n].opacity=e;else t.style.opacity=e;P.a.PreCalcStyleInfo(t,t,this.gl,this),P.a.CreateLodDisplayArrays(t._style)}for(var a=0;a<this.FRNum;a++)for(var h=0;h<this.FCNum;h++)this.SetLayerOpacity(this.FCells[a][h],t,s);t.rasterize&&this.SetRasterizeLayer()}this.DrawRender()}},{key:"SetLayerOpacity",value:function(t,e,i){for(var r=t.FCellLayers.length,s=0;s<r;s++)t.FCellLayers[s].FCityLayer===e&&(e.clusterStyle?(t.FCellLayers[s].Clear(),t.FCellLayers[s].FRequested=!1,t.FCellLayers[s].FStateReady=!1):t.FCellLayers[s].OpacityChanged());if(t.XHtqRe())for(var o=0;o<4;o++)this.SetLayerOpacity(t.FChilds[o],e,i)}},{key:"api_LAYER_TYPE_OGC_WFS",value:function(){return dt.OGC_WFS}},{key:"api_LAYER_TYPE_CS_OBJECT_ARRAY",value:function(){return dt.CS_OBJECT_ARRAY}},{key:"api_LAYER_TYPE_CAS_LAYER",value:function(){return dt.CAS}},{key:"api_LAYER_TYPE_MVT_XYZ",value:function(){return dt.MVT_XYZ}},{key:"api_LayerObjectToJSON",value:function(t){var e;return e=t.attribs?JSON.parse(JSON.stringify(t.attribs)):null,{type:t.type,Fid:t.Fid,attribs:e,coords:t.coords.slice(),coordsZ:t.coordsZ.slice()}}},{key:"api_GetTotalLayersAsJSON",value:function(){var t,e={rasters:[],vectorLayers:[]},i=this.FRasters.length;for(t=0;t<i;t++){var r={};r._index=this.FRasters[t]._index,r._FActive=this.FRasters[t]._FActive,this.FRasters[t].bbox&&this.FRasters[t].bbox.length?r.bbox=this.FRasters[t].bbox.slice():r.bbox=null,r.displayName=this.FRasters[t].displayName,this.FRasters[t].lodDisplay&&this.FRasters[t].lodDisplay.length&&(r.lodDisplay=this.FRasters[t].lodDisplay.slice()),this.FRasters[t].supportURL&&(r.supportURL=at({},this.FRasters[t].supportURL)),r.lowerLod=this.FRasters[t].lowerLod,r.maxLodLevel=this.FRasters[t].maxLodLevel,r.noDatatoEmptyImage=this.FRasters[t].noDatatoEmptyImage,r.opacity=this.FRasters[t].opacity,Array.isArray(this.FRasters[t].url)?r.url=this.FRasters[t].url.slice():r.url=this.FRasters[t].url,r.type=this.FRasters[t].type,e.rasters.push(r)}var s=this.FLayers.length;for(t=0;t<s;t++){var o={};o._FActive=this.FLayers[t]._FActive,this.FLayers[t].bbox&&this.FLayers[t].bbox.length&&(o.bbox=this.FLayers[t].bbox.slice()),o.layerType=this.FLayers[t].layerType,o.objectType=this.FLayers[t].objectType,o.displayName=this.FLayers[t].displayName,o.objectParams=at({},this.FLayers[t].objectParams),this.FLayers[t].filter&&this.FLayers[t].filter.length&&(o.filter=this.FLayers[t].filter.slice()),o.startLod=this.FLayers[t].startLod,o.endLod=this.FLayers[t].endLod,o.style=this.api_GetLayerStyle(this.FLayers[t]),o.reportObj=this.FLayers[t].reportObj,this.FLayers[t].wkbGeom&&(o.wkbGeom=this.FLayers[t].wkbGeom),this.FLayers[t].wfsLayerName&&(o.wfsLayerName=this.FLayers[t].wfsLayerName),this.FLayers[t].url&&(o.url=this.FLayers[t].url),this.FLayers[t].CASTable&&(o.CASTable=this.FLayers[t].CASTable),this.FLayers[t].MVTXYZName&&(o.MVTXYZName=this.FLayers[t].MVTXYZName),(this.FLayers[t].continuousLOD||!1===this.FLayers[t].continuousLOD)&&(o.continuousLOD=this.FLayers[t].continuousLOD),(this.FLayers[t].rasterize||!1===this.FLayers[t].rasterize)&&(o.rasterize=this.FLayers[t].rasterize),this.FLayers[t].data&&this.FLayers[t].data.length&&(o.data=this.FLayers[t].data.slice()),this.FLayers[t].clusterStyle&&this.FLayers[t].clusterStyle.length&&(o.clusterStyle=this.FLayers[t].clusterStyle.slice()),e.vectorLayers.push(o)}return e.rasters.length||(e.rasters=null),e.vectorLayers.length||(e.vectorLayers=null),e}},{key:"api_AddTotalLayers",value:function(t){var e;if(t.rasters){var i=t.rasters.length;for(e=0;e<i;e++)this.api_AddRaster(t.rasters[e])}if(t.vectorLayers){var r=t.vectorLayers.length;for(e=0;e<r;e++)this.api_XwGBJg(t.vectorLayers[e])}}},{key:"api_AddLayer",value:function(t){if(t.clusterStyle&&(this.IsClusterLayerExist=!0),t.continuousLOD&&t.layerType===dt.MVT_XYZ&&(this.MVTContinuousLODExist=!0),void 0===t._FActive&&(t._FActive=!0),null===t.filter||void 0===t.filter||""===t.filter||"string"==typeof t.filter||k.c.TestMacro(JSON.stringify(t.filter))?null===t.filter||void 0===t.filter||""===t.filter||Array.isArray(t.filter)||(t.filter=JSON.parse(t.filter)):t.filter=null,t.objectParams||k.c.TestMacro(JSON.stringify(t.objectParams))?t.objectParams.keys=Object.keys(t.objectParams):t.objectParams={},t.clusterStyle){t._clusterStyle=[],t._clusterStyle.length=t.clusterStyle.length;for(var e=0;e<t._clusterStyle.length;e++)t.clusterStyle[e].cluster.style.__hasFont=this.CheckHasFont(t.clusterStyle[e].cluster.style),t.clusterStyle[e].cluster.style.icon._mapIndex=this.Xq9tYT(t.clusterStyle[e].cluster.style.icon.mapName),t._clusterStyle[e]={_style:null},P.a.PreCalcStyleInfo(t.clusterStyle[e].cluster,t._clusterStyle[e],this.gl,this),t.clusterStyle[e].cluster.style.__hasFont&&(t.clusterStyle[e].cluster.style.fontFamily._fontIndex=this.SDFFont.Add(t.clusterStyle[e].cluster.style.fontFamily))}if(Array.isArray(t.style))for(e=0;e<t.style.length;e++)P.a.CheckStyle(t,t.style[e],!0),t.style[e].__hasFont=this.CheckHasFont(t.style[e]),t.style[e].iconType===Ft.MAP&&(t.style[e].icon._mapIndex=this.Xq9tYT(t.style[e].icon.mapName));else P.a.CheckStyle(t,t.style,!1),t.style.__hasFont=this.CheckHasFont(t.style),t.style.iconType===Ft.MAP&&(t.style.icon._mapIndex=this.Xq9tYT(t.style.icon.mapName));if(P.a.PreCalcStyleInfo(t,t,this.gl,this),P.a.CreateLodDisplayArrays(t._style),Array.isArray(t.style))for(e=0;e<t.style.length;e++)t.style[e].__hasFont&&(t.style[e].fontFamily._fontIndex=this.SDFFont.Add(t.style[e].fontFamily));else t.style.__hasFont&&(t.style.fontFamily._fontIndex=this.SDFFont.Add(t.style.fontFamily));if(t.bbox&&t.bbox.length&&(t._fLimitsRadyan=new _.E(_.b.DegreeToRadyan(t.bbox[0]),_.b.DegreeToRadyan(t.bbox[1]),_.b.DegreeToRadyan(t.bbox[2]),_.b.DegreeToRadyan(t.bbox[3]))),this.FLayers.push(t),t.data&&t.layerType===dt.CS_OBJECT_ARRAY&&(this.X5tRsl(t),t.clusterStyle&&t.objectType===ct.POINT?this.CreateCluster(t):this.XKJzUl(t),this.FilterforBBOX(t)),this.FLayers.length)if(this.globeCheckMeshForLayerInterval||(this.globeCheckMeshForLayerInterval=setInterval(this.XQD5Ik,mt.LAYER_CHECKMESH_INTERVAL_MS)),Array.isArray(t.style))for(e=0;e<t.style.length;e++)t.style[e].symbolReduction&&!this.globeReductionForLayerInterval&&(this.globeReductionForLayerInterval=setInterval(this.XrSiVN,mt.LAYER_REDUCTION_INTERVAL_MS));else t.style.symbolReduction&&!this.globeReductionForLayerInterval&&(this.globeReductionForLayerInterval=setInterval(this.XrSiVN,mt.LAYER_REDUCTION_INTERVAL_MS));t.rasterize&&this.RemoveRasterizeLayer();for(var i=this.FRNum;i--;)for(var r=this.FCNum;r--;)this.XZL5Vw(this.FCells[i][r],t);t.rasterize&&this.SetRasterizeLayer(),this.DrawRender()}},{key:"X5tRsl",value:function(t){if(t._objects=[],t.layerType===dt.CS_OBJECT_ARRAY&&Array.isArray(t.data)&&"object"===n()(t.data[0]))if(t.objectType===ct.OBJECT_3D){t._objects=[];for(var e=t.data.length,i=0;i<e;i++)t._objects[i]=[],W.a.Parse3D(t,t.data[i],t._objects[i])}else W.a.Parse2D(t,t._objects)}},{key:"CreateCluster",value:function(t){var e,i=[],r=t.clusterStyle.length;for(e=0;e<r;e++)i[e]=[];t._superClusterIndex=[];var s=t._objects.length;for(e=0;e<s;e++){var o=this.EvaluateFilterRule(t.clusterStyle,t._objects[e].attribs);-1!==o&&i[o].push(t._objects[e])}var n=i.length;for(e=0;e<n;e++)t._superClusterIndex.push(new J.a({radius:t.clusterStyle[e].cluster.radius,maxZoom:t.clusterStyle[e].cluster.maxLod})),t._superClusterIndex[t._superClusterIndex.length-1].load(i[e])}},{key:"EvaluateFilterRule",value:function(t,e){for(var i=t.length,r=0;r<i;r++)if(Q.a.GetResult(JSON.parse(JSON.stringify(t[r].rule)),e))return r;return-1}},{key:"api_SetLayerOn",value:function(t,e){for(var i=!1,r=this.api_LayerCount();r--;)if(this.FLayers[r]===t){i=!0;break}if(i){var s=t._FActive;if(e){t.rasterize&&!s&&this.RemoveRasterizeLayer(),t._FActive=!0,t.rasterize&&!s&&this.SetRasterizeLayer();for(r=this.FCellOrganizer.Flive.length;r--;)for(var o=this.FCellOrganizer.Flive[r].FCellLayers,n=o.length;n--;)o[n].FCityLayer===t&&o[n].Build()}else t.rasterize&&s&&this.RemoveRasterizeLayer(),t._FActive=!1,t.rasterize&&s&&this.SetRasterizeLayer()}this.checkReduction=!0,this.DrawRender()}},{key:"api_GetLayerOn",value:function(t){for(var e=!1,i=this.api_LayerCount();i--;)if(this.FLayers[i]===t){e=!0;break}return e?!!t._FActive:null}},{key:"api_SetLayerData",value:function(t,e){if(t.data=e,e){this.X5tRsl(t),this.MilIcon.CreateTextureAfterPromises(),t.clusterStyle&&t.objectType===ct.POINT?this.CreateCluster(t):this.XKJzUl(t);for(var i=this.FRNum;i--;)for(var r=this.FCNum;r--;)this.Xlh41g(this.FCells[i][r],t);this.DrawRender()}}},{key:"Xlh41g",value:function(t,e){for(var i=t.FCellLayers.length;i--;)t.FCellLayers[i].FCityLayer===e&&(t.FCellLayers[i].Clear(),t.FCellLayers[i].FRequested=!1,t.FCellLayers[i].FStateReady=!1);for(var r=4;r--;)t.FChilds[r]&&this.Xlh41g(t.FChilds[r],e)}},{key:"Xq9tYT",value:function(t){for(var e=this.IconMap,i=e.length;i--;)if(e[i].name===t)return i;return-1}},{key:"XKJzUl",value:function(t){switch(t.layerType){case dt.CS_OBJECT_ARRAY:switch(t.objectType){case ct.LINE:case ct.POLYGON:for(var e=[],i=t._objects.length,r=0;r<i;r++)e.push(t._objects[r].center.x),e.push(t._objects[r].center.y);t._kdIndex=new d.a(e,void 0,void 0,64,Float64Array,!0);break;case ct.POINT:case ct.SHAPE:case ct.ARCAREA:t._kdIndex=new d.a(t.data[0].coords,void 0,void 0,64,Float64Array,!0);break;case ct.OBJECT_3D:this.CheckShapeName(t)}}}},{key:"CheckShapeName",value:function(t){t._kdIndex=[];for(var e=t.data.length,i=0;i<e;i++)switch(t.data[i].shapeName){case ft.LINE:case ft.POLYGON:case ft.RECTANGLE:case ft.ORBIT:case ft.POLYARC:case ft.CORRIDOR:case ft.TRACK:for(var r=[],s=t._objects[i].length,o=0;o<s;o++)r.push(t._objects[i][o].center.x),r.push(t._objects[i][o].center.y);t._kdIndex[i]=new d.a(r,void 0,void 0,64,Float64Array,!0);break;case ft.POINT:case ft.ELLIPSE:case ft.CIRCLE:case ft.ARCAREA:t._kdIndex[i]=new d.a(t.data[i].coords,void 0,void 0,64,Float64Array,!0)}}},{key:"FilterforBBOX",value:function(t){var e=t.bbox;if(e){for(var i=t._kdIndex.range(e[0],e[1],e[2],e[3]),r=[],s=i.length;s--;)r.push(t._objects[i[s]]);switch(t._objects=r,t.layerType){case dt.CS_OBJECT_ARRAY:var o=[];for(s=0;s<r.length;s++)o.push(r[s].coords[0],r[s].coords[1]);t._kdIndex=new d.a(o,void 0,void 0,64,Float64Array,!0)}}}},{key:"CheckHasFont",value:function(t){return t.titleRT||t.titleCN||t.titleRB||t.titleLT||t.titleLB||t.iconType!==Ft.NOICON}},{key:"XO0dM5",value:function(t){var e=document.createElement("canvas").getContext("2d");return e.canvas.width=_.b.NearestPowOfUpperForImageLayer(t.width),e.canvas.height=_.b.NearestPowOfUpperForImageLayer(t.height),e.clearRect(0,0,this.ctxLayer.canvas.width,this.ctxLayer.canvas.height),e.drawImage(t,0,0),e.canvas}},{key:"api_AddCustomFont",value:function(t,e){this.SDFFont.AddCustomFont(t,e),this.DrawRender()}},{key:"api_AddIconMap",value:function(t,e,i){var r=this;this.IconMap.push({name:t,texture:-1,mapW:null,mapH:null,url:null,map:null});var s=new Image,o=this.gl;s.onload=function(){var e=r.XO0dM5(s),n=o.createTexture();if(o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.bindTexture(o.TEXTURE_2D,n),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),o.generateMipmap(o.TEXTURE_2D),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),i)r.mapJSON=new I.b(mt.ICONMAP_TIMEOUT_MS,!1,"IconMap Timeout","IconMap Error"),r.mapJSON.SendReq(i).then(function(i){for(var s=r.IconMap.length;s--;)if(r.IconMap[s].name===t){r.IconMap[s]={name:t,texture:n,map:i.response,mapW:e.width,mapH:e.height};break}delete r.mapJSON});else for(var a=r.IconMap.length;a--;)if(r.IconMap[a].name===t){r.IconMap[a]={name:t,texture:n,map:{},mapW:e.width,mapH:e.height},r.IconMap[a].map[t]={x:0,y:0,width:e.width,height:e.height};break}window.URL.revokeObjectURL(s.src),r.DrawRender()},s.crossOrigin="",s.src=e}},{key:"api_LayerCount",value:function(){return this.FLayers.length}},{key:"api_GetLayer",value:function(t){var e=n()(t);if("string"===e){for(var i=this.api_LayerCount();i--;)if(this.FLayers[i].displayName===t)return this.FLayers[i]}else if("number"===e)return this.FLayers[t];return null}},{key:"FindLayerCoords",value:function(t,e,i){for(var r=t.FCellLayers.length;r--;)if(t.FCellLayers[r].FCityLayer===e){var s=t.FCellLayers[r].objects;if(Array.isArray(e.style))for(var o=s.length;o--;)for(var n=s[o].length;n--;)for(var a=0;a<s[o][n].coords.length;a++)i.push(s[o][n].coords[a]);else for(o=s.length;o--;)for(a=0;a<s[o].coords.length;a++)i.push(s[o].coords[a])}for(n=4;n--;)t.FChilds[n]&&this.FindLayerCoords(t.FChilds[n],e,i)}},{key:"api_GetLayerLimitsOfLoadedObjects",value:function(t){for(var e=!1,i=this.api_LayerCount();i--;)if(this.FLayers[i]===t){e=!0;break}if(e){var r=[];if(t.layerType===dt.CS_OBJECT_ARRAY)if(t.objectType===ct.POINT||t.objectType===ct.SHAPE||t.objectType===ct.ARCAREA)for(var s=0;s<t.data.length;s++)for(var o=t.data[s].coords,n=0;n<o.length;n++)r.push(o[n]);else if(t.objectType===ct.OBJECT_3D)for(i=0;i<t.data.length;i++){o=t.data[i].coords;if(t.data[i].shapeName===ft.POINT||t.data[i].shapeName===ft.ELLIPSE||t.data[i].shapeName===ft.CIRCLE||t.data[i].shapeName===ft.ARCAREA)for(n=0;n<o.length;n++)r.push(o[n]);else for(s=0;s<o.length;s++)for(n=0;n<o[s].length;n++)if(Array.isArray(o[s][n]))for(var a=0;a<o[s][n].length;a++)r.push(o[s][n][a]);else r.push(o[s][n])}else for(i=0;i<t.data.length;i++)for(o=t.data[i].coords,s=0;s<o.length;s++)for(n=0;n<o[s].length;n++)if(Array.isArray(o[s][n]))for(a=0;a<o[s][n].length;a++)r.push(o[s][n][a]);else r.push(o[s][n]);else for(var h=this.FRNum;h--;)for(var l=this.FCNum;l--;)this.FindLayerCoords(this.FCells[h][l],t,r);if(r.length){var u=new _.E(0,0,0,0);return u.Clear(),u.ExpandByCoords(r),r.length=0,{ll:{x:u.LL.y,y:u.LL.x},ur:{x:u.UR.y,y:u.UR.x}}}}return null}},{key:"api_DeleteLayer",value:function(t){var e,i=!1,r=!1;for(e=this.api_LayerCount();e--;)if(this.FLayers[e]===t){i=!0;break}if(i){for(delete this.FLayers[e],this.FLayers.splice(e,1),t.rasterize&&this.RemoveRasterizeLayer(),e=this.FCellOrganizer.Flive.length;e--;)this.FCellOrganizer.Flive[e].XlksR8(t);t.rasterize&&this.SetRasterizeLayer(),this.DrawRender()}for(0===this.FLayers.length&&(clearInterval(this.globeCheckMeshForLayerInterval),this.globeCheckMeshForLayerInterval=null,clearInterval(this.globeReductionForLayerInterval),this.globeReductionForLayerInterval=null),i=!1,e=this.api_LayerCount();e--;)if(this.FLayers[e]){if(!i&&this.FLayers[e].clusterStyle&&(i=!0,r))break;if(!r&&this.FLayers[e].continuousLOD&&this.FLayers[e].layerType===dt.MVT_XYZ&&(r=!0,i))break}this.IsClusterLayerExist=i,this.MVTContinuousLODExist=r}},{key:"api_DeleteLayers",value:function(){for(var t=this.FLayers.length;t--;)this.api_XlksR8(this.FLayers[t]);clearInterval(this.globeCheckMeshForLayerInterval),this.globeCheckMeshForLayerInterval=null,clearInterval(this.globeReductionForLayerInterval),this.globeReductionForLayerInterval=null}},{key:"CheckLayerBuffers",value:function(t,e){if(!e.__hasFont){t.IconCoordBuff&&(this.gl.deleteBuffer(t.IconCoordBuff),t.IconCoordBuff=null);for(var i=0;i<5;i++)t.vertexBuffTitle&&t.vertexBuffTitle[i]&&(this.gl.deleteBuffer(t.vertexBuffTitle[i]),t.vertexBuffTitle[i]=null),t.textureCoordsBuffTitle&&t.textureCoordsBuffTitle[i]&&(this.gl.deleteBuffer(t.textureCoordsBuffTitle[i]),t.textureCoordsBuffTitle[i]=null)}}},{key:"X7djpe",value:function(t,e,i){for(var r=t.FCellLayers.length,s=0;s<r;s++)if(t.FCellLayers[s].FCityLayer===e)if(e.clusterStyle)t.FCellLayers[s].Clear(),t.FCellLayers[s].FRequested=!1,t.FCellLayers[s].FStateReady=!1;else{if(Array.isArray(t.FCellLayers[s].FCityLayer.style))for(var o=0;o<t.FCellLayers[s].FCityLayer.style.length;o++)this.CheckLayerBuffers(t.FCellLayers[s],t.FCellLayers[s].FCityLayer.style[o]);else this.CheckLayerBuffers(t.FCellLayers[s],t.FCellLayers[s].FCityLayer.style);t.FCellLayers[s].StyleChanged()}if(t.XHtqRe())for(var n=0;n<4;n++)this.X7djpe(t.FChilds[n],e,i)}},{key:"api_LayerStyleChanged",value:function(t){for(var e=!1,i=this.api_LayerCount();i--;)if(this.FLayers[i]===t){e=!0;break}if(e){var r,s,o=i;if(t.continuousLOD&&t.layerType===dt.MVT_XYZ&&(this.MVTContinuousLODExist=!0),Array.isArray(t.style))for(i=0;i<t.style.length;i++)t.style[i].__hasFont=this.CheckHasFont(t.style[i]),t.style[i].iconType===Ft.MAP&&(t.style[i].icon._mapIndex=this.Xq9tYT(t.style[i].icon.mapName)),t.style[i].__hasFont?t.style[i].fontFamily._fontIndex=this.SDFFont.Add(t.style[i].fontFamily):t.style[i].fontFamily._fontIndex>=0&&(t.style[i].fontFamily._fontIndex=-1);else t.style.__hasFont=this.CheckHasFont(t.style),t.style.iconType===Ft.MAP&&(t.style.icon._mapIndex=this.Xq9tYT(t.style.icon.mapName)),t.style.__hasFont?t.style.fontFamily._fontIndex=this.SDFFont.Add(t.style.fontFamily):t.style.fontFamily._fontIndex>=0&&(t.style.fontFamily._fontIndex=-1);if(P.a.PreCalcStyleInfo(t,t,this.gl,this),P.a.CreateLodDisplayArrays(t._style),t.clusterStyle){this.IsClusterLayerExist=!0,t._clusterStyle=[],t._clusterStyle.length=t.clusterStyle.length;for(i=0;i<t._clusterStyle.length;i++)t.clusterStyle[i].cluster.style.__hasFont=this.CheckHasFont(t.clusterStyle[i].cluster.style),t.clusterStyle[i].cluster.style.iconType===Ft.MAP&&(t.clusterStyle[i].cluster.style.icon._mapIndex=this.Xq9tYT(t.clusterStyle[i].cluster.style.icon.mapName)),t._clusterStyle[i]={_style:null},P.a.PreCalcStyleInfo(t.clusterStyle[i].cluster,t._clusterStyle[i],this.gl,this),t.clusterStyle[i].cluster.style.__hasFont?t.clusterStyle[i].cluster.style.fontFamily._fontIndex=this.SDFFont.Add(t.clusterStyle[i].cluster.style.fontFamily):t.clusterStyle[i].cluster.style.fontFamily._fontIndex>=0&&(t.clusterStyle[i].cluster.style.fontFamily._fontIndex=-1);this.CreateCluster(t)}for(t.rasterize&&this.RemoveRasterizeLayer(),r=0;r<this.FRNum;r++)for(s=0;s<this.FCNum;s++)this.X7djpe(this.FCells[r][s],t,o);t.rasterize&&this.SetRasterizeLayer()}this.DrawRender()}},{key:"api_SetLayerRuleVisibility",value:function(t,e,i){if(e){var r=t._style.filter;if(r)for(var s=0;s<r.length;s++)if(r[s].name===e)return t.style.filter[s].style.active=i,r[s].style.active=i,this.DrawRender(),!0;return!1}return t.style.active=i,t._style.active=i,this.DrawRender(),!0}},{key:"api_SetCompositeLayerVisibility",value:function(t,e,i){var r,s=!1;for(r=0;r<this.api_LayerCount();r++)if(this.FLayers[r]===t){s=!0;break}if(s){for(r=0;r<t.style.length;r++)if(t.style[r].MVTXYZName===e){t.rasterize&&this.RemoveRasterizeLayer(),t.style[r].active=i,t._style[r].active=i,t.rasterize&&this.SetRasterizeLayer();break}this.DrawRender()}}},{key:"api_RebuildLayer",value:function(t,e){var i,r,s=!1;for(i=this.FLayers.length;i--;)if(this.FLayers[i]===t){s=!0;break}if(s){for(i=this.FCellOrganizer.Flive.length;i--;){var o=this.FCellOrganizer.Flive[i],n=o.FCellLayers;for(r=n.length;r--;)n[r]===t&&(e?n[r].UserObj.ObjUpdateFontPackets():n[r].UserObj.Rebuild(o.FCellTGW))}this.DrawRender()}}},{key:"api_ReloadLayer",value:function(t){var e,i=!1;for(e=this.FLayers.length;e--;)if(this.FLayers[e]===t){i=!0;break}if(i){for(t.rasterize&&this.RemoveRasterizeLayer(),e=this.FCellOrganizer.Flive.length;e--;)this.FCellOrganizer.Flive[e].XRuQDv(t);t.rasterize&&this.SetRasterizeLayer(),this.DrawRender()}}},{key:"api_SavePoly",value:function(t){this.SavedPoly=t}},{key:"api_LiveCell",value:function(){return this.FCellOrganizer.Flive.length}},{key:"api_DeadCell",value:function(){return this.FCellOrganizer.FDead.length}},{key:"api_DrawedCells",value:function(){return this.FDrawedCells.length}},{key:"api_ActiveCells",value:function(){return this.FActiveCells.length}},{key:"api_GlobeFree",value:function(){this.api_DeleteAllObjectBuffers(),this.XsZQIw(),this.Xe6XXJ(),this.Xr89qa(),this.X11BQu(),this.XhfFZw(),this.FreeGlobeWidgets(),clearInterval(this.globeInterval),window.URL.revokeObjectURL(V.a)}},{key:"api_FreeModelDrawer",value:function(){this.XsZQIw()}},{key:"api_FreeFontDrawer",value:function(){this.Xe6XXJ()}},{key:"api_FreeTouchEvents",value:function(){this.X11BQu()}},{key:"api_FreeIntervals",value:function(){this.XTQKZp()}},{key:"api_FreeGlobeMouseEvent",value:function(){this.Xr89qa()}},{key:"api_SetGlobeMouseEvents",value:function(){this.XJ6mAb()}},{key:"api_SetPolyWireFrameMode",value:function(t){this.polyWireFrameMode=t;for(var e=this.UserObjArr.length;e--;)for(var i=this.UserObjArr[e].TotalObjArr.length;i--;)this.UserObjArr[e].TotalObjArr[i].type===ct.POLYGON&&this.UserObjArr[e].TotalObjArr[i].buildTriangle();this.DrawRender()}},{key:"XR5XAl",value:function(t,e){mt.DEBUG_ALL&&(e?e(t):console.log(t))}},{key:"api_WriteDebug",value:function(t){mt.DEBUG_ALL=t}},{key:"XWzfrR",value:function(t){this.keyCode=t.keyCode}},{key:"X0xrs1",value:function(t){this.keyCode=null}},{key:"X391jZ",value:function(){window.addEventListener("keydown",this.XWzfrR),window.addEventListener("keyup",this.X0xrs1)}},{key:"XQfPcZ",value:function(t){this.parentData=this.parentNode.getBoundingClientRect();var e,i=this.CSWidgets.editWidget,r=this.CSWidgets.editVertexWidget;t.target===this.CSWidgets.editWidget.childNodes[0]?0===t.button&&(this.CSWidgets.dragbar.catched=!0,e=this.CSWidgets.dragbar.parentNode.getBoundingClientRect(),i.savedElemx=e.left,i.savedElemy=e.top,i.savedMousex=t.x,i.savedMousey=t.y,t.preventDefault()):t.target===r.childNodes[0]?0===t.button&&(this.CSWidgets.dragbarVertex.catched=!0,e=this.CSWidgets.dragbarVertex.parentNode.getBoundingClientRect(),r.savedElemx=e.left,r.savedElemy=e.top,r.savedMousex=t.x,r.savedMousey=t.y,t.preventDefault()):t.target===this.canvas2d&&(this.FCamera.FFLYMODE||(this.XAILT9(t.clientX-this.parentData.left,t.clientY-this.parentData.top,t.button,t),this.DrawRender()))}},{key:"XCKJu9",value:function(){window.addEventListener("mousedown",this.XQfPcZ)}},{key:"XTDEA3",value:function(t){this.clientX=t.clientX,this.clientY=t.clientY;var e,i,r=this.CSWidgets.editWidget,s=this.CSWidgets.editVertexWidget,o=t.clientX-this.parentData.left,n=t.clientY-this.parentData.top;0===t.button&&(this.CSWidgets.dragbar.catched||this.CSWidgets.dragbarVertex.catched)?this.CSWidgets.dragbar.catched?(e=r.getBoundingClientRect(),i=r.parentNode.getBoundingClientRect(),r.style.left="".concat(e.left+t.x-r.savedMousex-i.left,"px"),r.style.top="".concat(e.top+t.y-r.savedMousey-i.top,"px"),r.savedMousex=t.x,r.savedMousey=t.y):this.CSWidgets.dragbarVertex.catched&&(e=s.getBoundingClientRect(),i=s.parentNode.getBoundingClientRect(),s.style.left="".concat(e.left+t.x-s.savedMousex-i.left,"px"),s.style.top="".concat(e.top+t.y-s.savedMousey-i.top,"px"),s.savedMousex=t.x,s.savedMousey=t.y):t.target===this.canvas2d||this.MouseMode===Et||4===this.MouseMode||this.MouseMode===Pt||5===this.MouseMode?(this.parentData=this.parentNode.getBoundingClientRect(),this.XadVUL(o,n,t),this.DrawRender(),t.preventDefault()):(o<0||o>this.FScrW||n<0||n>this.FScrH)&&this.CancelObjectHint()}},{key:"X4872A",value:function(){window.addEventListener("mousemove",this.XTDEA3)}},{key:"XHWZjC",value:function(t){if(this.CSWidgets.dragbar.catched?(this.CSWidgets.dragbar.catched=!1,this.parentData=this.parentNode.getBoundingClientRect(),this.CSWidgets.XDD5V3(this.parentData)):this.CSWidgets.dragbarVertex.catched&&(this.CSWidgets.dragbarVertex.catched=!1,this.parentData=this.parentNode.getBoundingClientRect(),this.CSWidgets.EditVertexWidgetResize(this.parentData)),this.MouseModeO=Dt,this.overviewMapDown)return this.overviewMapDown=!1,void this.overview.onMouseUp(t.clientX-this.parentData.left,t.clientY-this.parentData.top);if(t.target===this.canvas2d||this.MouseMode!==Dt){if(this.parentData=this.parentNode.getBoundingClientRect(),this.FCamera.FFLYMODE)return;this.X0TlHs(t.clientX-this.parentData.left,t.clientY-this.parentData.top,t)}}},{key:"XiIinp",value:function(){window.addEventListener("mouseup",this.XHWZjC)}},{key:"Xdwlvx",value:function(t){if(this.parentData=this.parentNode.getBoundingClientRect(),t.target===this.canvas2d){if(this.FCamera.FFLYMODE)return;this.XBJROq(t.clientX-this.parentData.left,t.clientY-this.parentData.top,t)}}},{key:"XjyHpR",value:function(){window.addEventListener("click",this.Xdwlvx)}},{key:"XeUT9D",value:function(t){if(this.parentData=this.parentNode.getBoundingClientRect(),t.target===this.canvas2d){if(this.FCamera.FFLYMODE)return;this.XzD5y6(t.clientX-this.parentData.left,t.clientY-this.parentData.top,t)}}},{key:"Xp6shV",value:function(){window.addEventListener("dblclick",this.XeUT9D)}},{key:"XMvpS5",value:function(t){if(this.parentData=this.parentNode.getBoundingClientRect(),t.target===this.canvas2d){if(this.FCamera.FFLYMODE)return;this.MouseMode=2,this.XyEUY4(t.deltaY,t.clientX-this.parentData.left,t.clientY-this.parentData.top,t.button,t),t.preventDefault()}}},{key:"XQDre8",value:function(){window.addEventListener("wheel",this.XMvpS5,{passive:!1})}},{key:"XTItbk",value:function(t){this.parentData=this.parentNode.getBoundingClientRect(),this.tempmouse.isValid=!1}},{key:"XzHsth",value:function(){this.canvas2d.addEventListener("mouseout",this.XTItbk)}},{key:"XXLfFT",value:function(t,e,i,r){var s=at({},this.api_GetMouseDeg());return null===s.lng?s.lnglatzValid=!1:s.lnglatzValid=!0,s.z=this.X9yZlv(this.TempLongLat),s.x=e,s.y=i,s.type=t,s.me=r,s}},{key:"X9IioP",value:function(t,e,i,r){return this.UserEvents[t](this.XXLfFT(t,e,i,r))}},{key:"CancelObjectHint",value:function(){this.FObjectHintPoint.length=0,clearInterval(this.FObjectHintTimer),this.FObjectHintTimer=null,this.FLastHintActive=!1,this.FCancelHintFunc&&this.FCancelHintFunc()}},{key:"XAILT9",value:function(t,e,i,r){if(this.CancelObjectHint(),this.FEditingObjDown=!1,this.MouseMode=Dt,this.FCamera.X9VnrD(!1),this.YMouseMS=new Date,0===i){if(this.MouseModeO=Et,this.compass.XxFZWi())return void this.api_TurnToNorth();if(this.overview.onMouseDown(t,e,Et))return void(this.overview.clickedOverviewMap&&(this.overviewMapDown=!0));if(this.FEditingObjDown=this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker&&this.FLastEditingObj.eVal.mouseDown(t,e,1,this.FLastEditingObj.eVal.isFreeDrawing),this.tempmouse.isValid&&(this.MouseMode=Et),this.FEditingObjDown)return;if(this.UserEvents.down&&!this.FLastEditingObj){if(It=!1,new Date-this.DownEndTime>200){if(this.X9IioP("down",t,e,r))return void(It=!0);this.tempmouse.isValid&&(this.MouseMode=5)}this.DownEndTime=new Date}else this.tempmouse.isValid&&(this.MouseMode=Et);this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid&&(this.FLastEditingObj||this.FCamera.FScreenLocPrevNext.SaveLastScreenPosition(),this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.FCamera.FArcBall.Xoxggp(t,this.FScrH-e),this.MouseSt.SetV(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e),this.MouseStartForLayer.SetV(t,e))}else if(2===i){if(this.overview.onMouseDown(t,e,Pt))return;if(this.XWWWVg()){if(this.UserEvents.down&&!this.FLastEditingObj){if(It=!1,new Date-this.DownEndTime>200){if(this.X9IioP("down",t,e,r))return void(It=!0);this.tempmouse.isValid&&(this.MouseMode=5)}this.DownEndTime=new Date}else this.tempmouse.isValid&&(this.MouseMode=Pt);this.FLastEditingObj||this.FCamera.FScreenLocPrevNext.SaveLastScreenPosition(),this.MouseMode=Pt,this.MouseSt.SetV(t,e),this.MouseEnd.SetV(t,e),this.MouseStartForEditing.SetV(t,e)}}else if(1===i&&this.XWWWVg()){if(this.UserEvents.down&&!this.FLastEditingObj){if(It=!1,new Date-this.DownEndTime>200){if(this.X9IioP("down",t,e,r))return void(It=!0);this.tempmouse.isValid&&(this.MouseMode=5)}this.DownEndTime=new Date}else this.tempmouse.isValid&&(this.MouseMode=4);this.FCamera.FScreenLocPrevNext.SaveLastScreenPosition(),this.FLastMouse.AssignT(this.FOrbit),this.MouseMode=4,this.MouseSt.SetV(t,e),this.MouseSt2.SetV(t,e),this.MouseEnd.SetV(t,e),this.Fabnextfd=!1,this.Fabnextfd2=!1}}},{key:"FObjectHintInterval",value:function(){if(this.FShowHintFunc){var t=this.api_GetMousePos(),e=new _.u(t.canvasX,t.canvasY);if(e.x>0&&e.x<this.FScrW&&e.y>0&&e.y<this.FScrH)if(this.FObjectHintPoint.length>3&&this.FObjectHintPoint[this.FObjectHintPoint.length-1].Dist2DP(e)<3){if(clearInterval(this.FObjectHintTimer),this.FObjectHintTimer=null,this.CancelObjectHint(),this.FObjectHintOK.Dist2DP(e)>1){var i=this.api_QueryByScreen(this.MouseX,this.MouseY);i.length&&(this.showHintObj=this.FShowHintFunc(this.event,e,i),this.showHintObj||(this.showHintObj={open:!1,region:[0,0,0,0]}),this.FLastHintActive=this.showHintObj.open)}this.FObjectHintOK.SetP(e)}else 4===this.FObjectHintPoint.length?(this.FObjectHintPoint.shift(),this.FObjHintP.SetV(e.x,e.y),this.FObjectHintPoint.push(this.FObjHintP)):(this.FObjHintP.SetV(e.x,e.y),this.FObjectHintPoint.push(this.FObjHintP));else this.CancelObjectHint()}}},{key:"ScreenXYNotInRegion",value:function(t,e){return!this.showHintObj.region||!Array.isArray(this.showHintObj.region)||(t<this.FObjectHintOK.x+this.showHintObj.region[0]||t>this.FObjectHintOK.x+this.showHintObj.region[2]||e<this.FObjectHintOK.y+this.showHintObj.region[1]||e>this.FObjectHintOK.y+this.showHintObj.region[3])}},{key:"XadVUL",value:function(t,e,i){if(this.MouseX=t,this.MouseY=e,this.event=i,this.MouseModeO===Et&&this.overviewMapDown)this.overview.onMouseMove(t,e);else if(this.FLastHintActive&&this.FObjectHintOK.Dist2DV(t,e)>20&&this.ScreenXYNotInRegion(t,e)&&this.CancelObjectHint(),this.MouseMode===Et||5===this.MouseMode)if(this.checkReduction=!0,this.XGqwp9(t,e,!1,this.tempmouse),this.FEditingObjDown&&!this.FLastEditingObj.eVal.isFreeDrawing)this.FLastEditingObj.eVal.mouseMove(t,e,!1);else if(this.FLastEditingObj&&this.FLastEditingObj.eVal.isFreeDrawing)this.FLastEditingObj.eVal.mouseMove(t,e,!0);else{if(this.UserEvents.move&&!this.FLastEditingObj&&this.X9IioP("move",t,e,i))return;if(this.UserEvents.down&&It)return;this.YMouseMS=new Date,this.FLastEditingObj&&-1===this.FLastEditingObj.eVal.lastSnapIndex?(Object.assign(this.MouseSt,this.MouseEnd),this.FCamera.FArcBall.XTuqig(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e)):this.FLastEditingObj||(Object.assign(this.MouseSt,this.MouseEnd),this.FCamera.FArcBall.XTuqig(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e)),this.FCamera.Xvfbh5(),this.CameraChanged(),this.DrawRender()}else if(this.MouseMode===Pt){this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker&&(this.cursorIndex=this.FLastEditingObj.eVal.getSnapIndex(this.MouseX,this.MouseY));var r=new Date;r-this.YMouseMS>200&&(this.YMouseSt.SetV(t,e),this.YMouseMS=r),Object.assign(this.MouseEnd,this.MouseSt);var s=_.b.Sign(this.MouseSt.y-e);this.FCamera.XNLNye(this.X0hEl5()+this.X0hEl5()*s*3/80*mt.NAVIGATION_SPEED*1.5,!1,s),this.MouseSt.SetV(t,e),this.CameraChanged()}else if(4===this.MouseMode){var o,n,a,h,l,u;this.checkReduction=!0,this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker&&(this.cursorIndex=this.FLastEditingObj.eVal.getSnapIndex(this.MouseX,this.MouseY)),this.YMouseMS=new Date,Object.assign(this.MouseEnd,this.MouseSt2),_.b.CSZero(this.FOrbit.MouseZ)?(this.FCamera.FTILT_ROT_DEGREE-=(this.MouseSt2.y-e)/4,this.FCamera.FTILT_ROT_DEGREE>mt.GLOBE_MAX_TILTANGLE&&(this.FCamera.FTILT_ROT_DEGREE=mt.GLOBE_MAX_TILTANGLE),this.FCamera.FTILT_ROT_DEGREE<mt.GLOBE_MIN_TILTANGLE&&(this.FCamera.FTILT_ROT_DEGREE=mt.GLOBE_MIN_TILTANGLE)):(u=-(e-this.MouseSt.y)/4,_.b.CSRotate(u*_.I,0,0,this.FNewEye.x,this.FNewEye.z,this.TNPoint),_.b.CalcPosition(this.Tempp2,this.NullTCoor2,this.TNPoint,-3*mt.GLOBE_RADIUS,0),this.mCircleIntersect.IntersectCircle(this.TNPoint.y,this.TNPoint.x,this.Tempp2.y,this.Tempp2.x,-mt.GLOBE_RADIUS-this.FDeltaXOrbit,this.FDeltaYOrbit,mt.GLOBE_RADIUS),this.TNPoint.x<=0&&2===this.mCircleIntersect.ICnt&&(this.Tempc1.SetV(this.mCircleIntersect.Ix1,this.mCircleIntersect.Iy1),this.Tempc2.SetV(this.mCircleIntersect.Ix2,this.mCircleIntersect.Iy2),this.Tempc2.Dist2DT(this.NullTCoor2)<this.Tempc1.Dist2DT(this.NullTCoor2)&&Object.assign(this.Tempc1,this.Tempc2),this.TempNewOrbit.x=this.Tempc1.y+mt.GLOBE_RADIUS+this.FDeltaXOrbit,this.TempNewOrbit.y=0,this.TempNewOrbit.z=this.Tempc1.x-this.FDeltaYOrbit,o=this.FOrbit.SpacePoint.LayMagnitude(),a=this.Tempc1.LayMagnitude(),n=_.b.Sqrt(a),h=mt.GLOBE_RADIUS,(l=180-_.b.RadyanToDegree(Math.acos((o-a-h*h)/(-2*n*h))))>=0&&l<mt.GLOBE_MAX_TILTANGLE+_.z&&(this.FCamera.Xa74Bc(),this.FCamera.FTILT_ROT_DEGREE=l,this.FCamera.FDist=this.Tempc1.Dist2DT(this.TNPoint),this.FCamera.XcttbF()>mt.GLOBE_MIN_DIST?(this.TempFab_curr.x=1,this.TempFab_curr.y=0,this.TempFab_curr.z=0,this.TempNewOrbit.Normalize(),_.b.GetRotationMatrix(this.TempNewOrbit,this.TempFab_curr,this.FLast_ab_next,this.tempcross),this.Fabnextfd=!0):this.FCamera.XNiKsM()))),Object.assign(this.FCamera.FArcBall.P3Dab_start,this.FOrbit.SpacePoint),this.FCamera.FArcBall.P3Dab_start.Normalize(),u=(t-this.MouseSt.x)/6;var d=Math.sin(u*Math.PI/180),c=Math.cos(u*Math.PI/180);this.tempcross.DotProductSetP(this.FCamera.FArcBall.P3Dab_start,d),this.XDdBtf(this.FCamera.FArcBall.P3Dab_start,u),_.b.quaternion(this.Fab_temp,this.tempcross.x,this.tempcross.y,this.tempcross.z,c),this.Fabnextfd&&(_.b.quatnext(this.Fab_temp2,this.Fab_temp,this.FLast_ab_next),this.Fab_temp=this.Fab_temp2.slice()),this.FCamera.Xa74Bc(),_.b.quatnext(this.TEST_ab_quat,this.Fab_last,this.Fab_temp),this.TempMatrix44=_.b.Quat2Matrix4(this.TEST_ab_quat),_.b.EulFromHMatrix(this.TempMatrix44,_.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea),Object.assign(this.tempeye,this.FEyePos),this.tempeye.Normalize(),_.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TNPoint,this.Tempstart,this.TempLongLat),this.FCamera.FCamZ=this.XyecYr(this.TempLongLat,!1),this.FCamera.XcttbF()>mt.GLOBE_MIN_DIST?(_.b.quatnext(this.FCamera.FArcBall.ab_quat,this.Fab_last,this.Fab_temp),_.b.quaternion(this.Fab_tempX,this.tempcross.x,this.tempcross.y,this.tempcross.z,c),this.Fabnextfd2=!0):(this.Fabnextfd2&&(this.Fab_temp=this.Fab_tempX.slice(),this.Fabnextfd&&(_.b.quatnext(this.Fab_temp2,this.Fab_temp,this.FLast_ab_next),this.Fab_temp=this.Fab_temp2.slice()),_.b.quatnext(this.FCamera.FArcBall.ab_quat,this.Fab_last,this.Fab_temp)),this.FCamera.XNiKsM()),this.MouseSt2.SetV(t,e),this.FCamera.Xvfbh5(),this.CameraChanged(),this.DrawRender()}else t>0&&t<this.FScrW&&e>0&&e<this.FScrH&&(this.XGqwp9(t,e,!1,this.tempmouse),this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker?this.cursorIndex=this.FLastEditingObj.eVal.getSnapIndex(this.MouseX,this.MouseY):this.UserEvents.move&&!this.FLastEditingObj&&this.X9IioP("move",t,e,i),!this.FLastEditingObj&&this.FShowHintFunc&&(this.FObjectHintTimer||!this.FLastHintActive&&!this.FCamera.FFLYMODE&&!this.FCamera.XXA8fM()&&0===this.FObjectHintPoint.length&&this.FObjectHintOK.Dist2DV(t,e)>6&&(this.FObjectHintTimer=setInterval(this.FObjectHintInterval,mt.HINT_SHOW_MS),this.FObjHintPForMove.SetV(t,e),this.FObjectHintPoint[0]=this.FObjHintPForMove)))}},{key:"X0TlHs",value:function(t,e,i){if(this.MouseMode===Et||5===this.MouseMode){if(this.FLastEditingObj&&!this.FLastEditingObj.eVal.isFreeDrawing?this.FLastEditingObj.eVal.walker&&this.FEditingObjDown?(this.FLastEditingObj.eVal.mouseUp(t,e),this.FEditingObjDown=!1):this.FLastEditingCallback.show_walker&&(this.FLastEditingObj.eVal.mouseAddCoord(t,e),this.DrawRender()):this.FLastEditingObj&&this.FLastEditingObj.eVal.isFreeDrawing&&((this.FLastEditingObj.type===ct.POLYGON||this.FLastEditingObj.type===ct.LINE)&&this.FLastEditingObj.eVal.mouseUp(t,e),this.FLastEditingObj.type!==ct.LINE&&this.FLastEditingObj.type!==ct.POLYGON&&(this.FLastEditingObj.eVal.isFreeDrawing=!1),this.FLastEditingObj.onChanged&&this.FLastEditingObj.onChanged(this.FLastEditingObj)),this.UserEvents.up&&!this.FLastEditingObj){if(new Date-this.UpEndTime>200&&this.X9IioP("up",t,e,i))return void(this.MouseMode=Dt);this.UpEndTime=new Date}if(this.UserEvents.down&&It)return void(this.MouseMode=Dt);if(this.MouseSt.Dist2DP(this.MouseEnd)>3)new Date-this.YMouseMS>120&&Object.assign(this.MouseEnd,this.MouseSt),this.FCamera.XmfOaV(this.MouseSt,this.MouseEnd)}else if(this.MouseMode===Pt){if(this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker&&(this.MouseEndForEditing.SetV(t,e),this.MouseStartForEditing.Dist2DP(this.MouseEndForEditing)<=3&&(this.FLastEditingObj.eVal.mouseDeleteCoord(t,e,!0)?(0!==this.FLastEditingObj.eVal.willDrawIcon&&(this.FLastEditingObj.eVal.willDrawIcon=0),this.cursorIndex=this.FLastEditingObj.eVal.getSnapIndex(t,e)):this.api_StopEditObj(!1,!1))),this.UserEvents.up&&!this.FLastEditingObj){if(new Date-this.UpEndTime>200&&this.X9IioP("up",t,e,i))return void(this.MouseMode=Dt);this.UpEndTime=new Date}if(this.UserEvents.down&&It)return void(this.MouseMode=Dt);Math.abs(this.MouseEnd.y-this.MouseSt.y)>=4&&new Date-this.YMouseMS>=5&&this.FCamera.Xbku9Z(this.MouseEnd.y-this.MouseSt.y)}else if(4===this.MouseMode){if(this.UserEvents.up&&!this.FLastEditingObj){if(new Date-this.UpEndTime>200&&this.X9IioP("up",t,e,i))return void(this.MouseMode=Dt);this.UpEndTime=new Date}if(this.UserEvents.down&&It)return void(this.MouseMode=Dt);if(this.MouseEnd.Dist2DP(this.MouseSt2)>1)new Date-this.YMouseMS<120&&this.FCamera.XFBdkD(-(this.MouseEnd.x-this.MouseSt2.x)/50)}if(this.MouseMode=Dt,this.MouseEndForLayer.SetV(t,e),this.MouseStartForLayer.Dist2DP(this.MouseEndForLayer)<3&&!this.FLastEditingObj){var r=[this.MouseX,this.MouseY,this.tempmouse.MouseLong,this.tempmouse.MouseLat];this.XBpeRn(r,i)}this.DrawRender()}},{key:"XBJROq",value:function(t,e,i){mt.SHOW_SCALEBAR&&this.scalebar.onClick(t,e,i)||this.UserEvents.click&&!this.FLastEditingObj&&this.MouseSt.x===this.MouseEnd.x&&this.MouseSt.y===this.MouseEnd.y&&this.X9IioP("click",t,e,i)&&(this.MouseMode=6)}},{key:"XzD5y6",value:function(t,e,i){if(this.MainMouseEnd.SetV(t,e),this.compass.XxFZWi())this.api_TurnToNorth();else if(!this.overview.isDblClick(t,e)){if(this.tempmouse.isValid){if(this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.mouseDblClick(t,e))return;if(this.MaxCellCanBeCreated=2,this.UserEvents.dblclick&&!this.FLastEditingObj&&this.X9IioP("dblclick",t,e,i))return;this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.FCamera.XwGkoZ(this.FLastMouse.MouseLong,this.FLastMouse.MouseLat)}Object.assign(this.LastMouseUpPnt,this.MainMouseEnd),this.MouseMode=Dt}}},{key:"XyEUY4",value:function(t,e,i,r){this.UserEvents.zoomstart&&!this.FLastEditingObj&&this.X9IioP("zoomstart",e,i,r)||this.XWWWVg()&&(t>0?this.X86OE8(t,e,i,r):this.XTmDqA(e,i,t,r))}},{key:"X4DfBS",value:function(t,e){this.MainMouseEnd.SetV(t,e),this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid?(this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.StartOD=this.X0hEl5(),this.FCamera.XRJtwC(this.FLastMouse.MouseLong,this.FLastMouse.MouseLat)):this.XO1bGd()}},{key:"XJ9gV4",value:function(t,e){this.MainMouseEnd.SetV(t,e),this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid&&this.FCamera.FDist<=25513?(this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.StartOD=this.X0hEl5(),this.FCamera.XOj0rq(this.FLastMouse.MouseLong,this.FLastMouse.MouseLat)):this.Xs85aF()}},{key:"X4F7ze",value:function(){var t,e,i,r,s,o,n,a=this;this.onTouchMoveEvent=function(h){if(!a.FCamera.FFLYMODE){if(2===a.touchCount)if(3!==a.fingerCount){if(t=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY),i=h.touches[0].clientX,r=h.touches[1].clientX,s=h.touches[0].clientY,o=h.touches[1].clientY,e=(h.touches[1].clientY-h.touches[0].clientY)/(h.touches[1].clientX-h.touches[0].clientX),n=_.b.RadyanToDegree(Math.atan((a.slope1-e)/(1+a.slope1*e))),a.tana+=n,s>=a.yCoord1+2&&o>=a.yCoord2+2||i>=a.xCoord1+2&&r>=a.xCoord2+2||a.yCoord1>=s+2&&a.yCoord2>=o+2||a.xCoord1>=i+2&&a.xCoord2>=r+2){if(1!==a.selectionoftwofingers){a.selectionoftwofingers=1;var l=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY);a.distance=l,a.xCoord1=h.touches[0].clientX,a.xCoord2=h.touches[1].clientX,a.yCoord1=h.touches[0].clientY,a.yCoord2=h.touches[1].clientY,a.XCwdch((h.touches[0].clientX+h.touches[1].clientX)/2-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top)}a.XGwxKj((h.touches[0].clientX+h.touches[1].clientX)/2-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top)}if(a.distance>=t+3?(a.distance=t,a.XWWWVg()&&(a.TouchMode=2,a.mod=1,a.XJ9gV4((h.touches[0].clientX+h.touches[1].clientX)/2-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top))):a.distance+3<=t&&(a.distance=t,a.XWWWVg()&&(a.TouchMode=2,a.mod=2,a.X4DfBS((h.touches[0].clientX+h.touches[1].clientX)/2-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top))),a.slope1!==e){if(2!==a.selectionoftwofingers){a.TouchMode=5,a.selectionoftwofingers=2;l=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY);a.distance=l,a.xCoord1=h.touches[0].clientX,a.xCoord2=h.touches[1].clientX,a.yCoord1=h.touches[0].clientY,a.yCoord2=h.touches[1].clientY,a.xFirstClick1=h.touches[0].clientX,a.xFirstClick2=h.touches[1].clientX,a.yFirstClick1=h.touches[0].clientY,a.yFirstClick2=h.touches[1].clientY,a.XCwdch((h.touches[0].clientX+h.touches[1].clientX)/2-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top)}a.slope1=e,a.TouchMode=5,a.XGwxKj((a.xFirstClick1+a.xFirstClick2)/2+3*a.tana-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top)}l=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY);a.distance=l,a.xFirstClick1=h.touches[0].clientX,a.xFirstClick2=h.touches[1].clientX,a.yFirstClick1=h.touches[0].clientY,a.yFirstClick2=h.touches[1].clientY,a.slope1=(h.touches[1].clientY-h.touches[0].clientY)/(h.touches[1].clientX-h.touches[0].clientX),e=a.slope1,a.tana=0,a.selectionoftwofingers=1,a.XCwdch((h.touches[0].clientX+h.touches[1].clientX)/2+a.tana-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top),a.yCoord1=s,a.yCoord2=o,a.xCoord1=i,a.xCoord2=r}else{a.TouchMode=_t,a.fingerCount=0,a.selectionoftwofingers=1;l=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY);a.distance=l,a.slope1=(h.touches[1].clientY-h.touches[0].clientY)/(h.touches[1].clientX-h.touches[0].clientX),e=a.slope1,a.tana=0,a.XCwdch((h.touches[0].clientX+h.touches[1].clientX)/2-a.parentData.left,(h.touches[0].clientY+h.touches[1].clientY)/2-a.parentData.top)}if(1===a.touchCount&&(a.moveClickX=h.touches[0].clientX,a.moveClickY=h.touches[0].clientY,a.XGwxKj(h.touches[0].clientX-a.parentData.left,h.touches[0].clientY-a.parentData.top)),3===a.touchCount)if(3===a.fingerCount){var u=(h.touches[0].clientX+h.touches[1].clientX+h.touches[2].clientX)/3,d=(h.touches[0].clientY+h.touches[1].clientY+h.touches[2].clientY)/3;a.TouchMode=3,a.XGwxKj(u-a.parentData.left,d-a.parentData.top)}else{a.fingerCount=3;u=(h.touches[0].clientX+h.touches[1].clientX+h.touches[2].clientX)/3,d=(h.touches[0].clientY+h.touches[1].clientY+h.touches[2].clientY)/3;a.XCwdch(u-a.parentData.left,d-a.parentData.top)}a.DrawRender(),h.preventDefault()}},this.canvas2d.addEventListener("touchmove",this.onTouchMoveEvent,{passive:!1})}},{key:"Xq9dMR",value:function(){var t=this;this.onTouchUpEvent=function(e){t.FCamera.FFLYMODE||(t.touchCount=e.touches.length,t.touchCount<2||3===t.touchCount?t.fingerCount=0:t.touchCount>3&&(t.fingerCount=-1),6!==t.TouchMode&&t.FCamera.X9VnrD(!1),t.doubleValid=0,t.tana=0,t.XcRaIV(e.changedTouches[0].clientX-t.parentData.left,e.changedTouches[0].clientY-t.parentData.top),e.preventDefault())},this.canvas2d.addEventListener("touchend",this.onTouchUpEvent,{passive:!1})}},{key:"Xb09PX",value:function(){var t,e=this,i=0;this.onTouchDownEvent=function(r){if(!e.FCamera.FFLYMODE){if(++i%2?e.time1=new Date:(i=1,t=new Date),e.touchCount=r.touches.length,2===e.touchCount){e.selectionoftwofingers=1;var s=Math.hypot(r.touches[0].clientX-r.touches[1].clientX,r.touches[0].clientY-r.touches[1].clientY);e.distance=s,e.xCoord1=r.touches[0].clientX,e.xCoord2=r.touches[1].clientX,e.yCoord1=r.touches[0].clientY,e.yCoord2=r.touches[1].clientY,e.slope1=(r.touches[1].clientY-r.touches[0].clientY)/(r.touches[1].clientX-r.touches[0].clientX),e.tana=0,e.XCwdch((r.touches[0].clientX+r.touches[1].clientX)/2-e.parentData.left,(r.touches[0].clientY+r.touches[1].clientY)/2-e.parentData.top)}else if(1===e.touchCount&&(t-e.time1>275||void 0===t))e.clickCount=0,r.touches[0].clientX>e.parentData.left&&r.touches[0].clientX<e.parentData.right&&r.touches[0].clientY>e.parentData.top&&r.touches[0].clientY<e.parentData.bottom&&(e.XCwdch(r.touches[0].clientX-e.parentData.left,r.touches[0].clientY-e.parentData.top),void 0!==t&&(e.time1=t),e.FCamera.X9VnrD(!1),e.FCamera.TurnTimer=setInterval(function(){e.firstClickX=r.touches[0].clientX,e.firstClickY=r.touches[0].clientY,e.moveClickX=r.touches[0].clientX,e.moveClickY=r.touches[0].clientY,e.clickCount++,e.clickCount<=2?e.oneFingerMode=1:e.clickCount>=3&&(e.FCamera.X9VnrD(!1),e.oneFingerMode=2)},400));else if(1===e.touchCount&&t-e.time1<=275){if(r.touches[0].clientX>e.parentData.left&&r.touches[0].clientX<e.parentData.right&&r.touches[0].clientY>e.parentData.top&&r.touches[0].clientY<e.parentData.bottom)Math.hypot(r.touches[0].clientX-e.touchX,r.touches[0].clientY-e.touchY)<=50&&e.XUudgY(r.touches[0].clientX-e.parentData.left,r.touches[0].clientY-e.parentData.top)}else if(3===e.touchCount){if(r.touches[0].clientX>e.parentData.left&&r.touches[0].clientX<e.parentData.right&&r.touches[0].clientY>e.parentData.top&&r.touches[0].clientY<e.parentData.bottom){e.fingerCount=3;var o=(r.touches[0].clientX+r.touches[1].clientX+r.touches[2].clientX)/3,n=(r.touches[0].clientY+r.touches[1].clientY+r.touches[2].clientY)/3;e.XCwdch(o-e.parentData.left,n-e.parentData.top)}}else e.touchCount>3&&(e.fingerCount=-1);e.DrawRender(),r.preventDefault()}},this.canvas2d.addEventListener("touchstart",this.onTouchDownEvent,{passive:!1})}},{key:"XUudgY",value:function(t,e){if(this.MainMouseEnd.SetV(t,e),this.tempmouse.isValid){if(this.MaxCellCanBeCreated=2,this.UserEvents.dblclick&&!this.FLastEditingObj&&this.X9IioP("dblclick",t,e))return;this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.TouchMode=6,this.FCamera.XwGkoZ(this.FLastMouse.MouseLong,this.FLastMouse.MouseLat)}Object.assign(this.LastMouseUpPnt,this.MainMouseEnd)}},{key:"XcRaIV",value:function(t,e){if(1===this.TouchMode||7===this.TouchMode){if(2===this.oneFingerMode){if(this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker)this.MouseEndForEditing.SetV(t,e),this.MouseStartForEditing.Dist2DP(this.MouseEndForEditing)<=30&&(this.FLastEditingObj.eVal.mouseDeleteCoord(t,e)?(0!==this.FLastEditingObj.eVal.willDrawIcon&&(this.FLastEditingObj.eVal.willDrawIcon=0),this.cursorIndex=this.FLastEditingObj.eVal.getSnapIndex(t,e)):this.api_StopEditObj(!1,!1));this.oneFingerMode=0,this.XWWWVg()&&(1===this.oneZoomMode?this.XblP7X(-1):2===this.oneZoomMode&&this.X86OE8(1))}else{if(this.touchX=t+this.parentData.left,this.touchY=e+this.parentData.top,this.MouseX=t,this.MouseY=e,this.FLastEditingObj&&!this.FLastEditingObj.eVal.isFreeDrawing?(this.FLastEditingObj.eVal.willDrawIcon&&(this.FLastEditingObj.eVal.willDrawIcon=0),this.FLastEditingObj.eVal.walker&&this.FEditingObjDown?(this.FLastEditingObj.eVal.mouseUp(t,e),this.FLastEditingObj.eVal.getSnapIndex(this.MouseX,this.MouseY),this.cursorIndex=-1,this.FEditingObjDown=!1):(this.FLastEditingObj.type!==ct.LINE&&this.FLastEditingObj.type!==ct.POLYGON||(this.XGqwp9(this.MouseX,this.MouseY,!1,this.tempmouse),this.FLastEditingObj.eVal.setWalkerPoint(this.MouseX,this.MouseY,this.XLqkQr()),this.FLastEditingObj.eVal.updateWalkerPoint()),this.FLastEditingObj.eVal.mouseAddCoord(t,e),this.DrawRender())):this.FLastEditingObj&&this.FLastEditingObj.eVal.isFreeDrawing&&(this.FLastEditingObj.type===ct.POLYGON||this.FLastEditingObj.type===ct.LINE?this.FLastEditingObj.eVal.mouseUp():null(this.FLastEditingObj.type!==ct.LINE&&this.FLastEditingObj.type!==ct.POLYGON)&&(this.FLastEditingObj.eVal.isFreeDrawing=!1),this.FLastEditingObj.onChanged&&this.FLastEditingObj.onChanged(this.FLastEditingObj)),this.UserEvents.click&&!this.FLastEditingObj&&this.X9IioP("click",t,e)&&!this.UserEvents.up)return void(this.TouchMode=_t);if(this.UserEvents.up&&!this.FLastEditingObj){if(new Date-this.UpEndTime>200&&this.X9IioP("up",t,e))return void(this.TouchMode=_t);this.UpEndTime=new Date}if(this.UserEvents.down&&It)return void(this.TouchMode=_t);if(this.MouseSt.Dist2DP(this.MouseEnd)>3)new Date-this.YMouseMS>120&&Object.assign(this.MouseEnd,this.MouseSt),this.FCamera.XmfOaV(this.MouseSt,this.MouseEnd)}this.clickCount=0}else if(4===this.TouchMode){if(this.MouseSt.Dist2DP(this.MouseEnd)>3)new Date-this.YMouseMS>120&&Object.assign(this.MouseEnd,this.MouseSt),this.FCamera.XmfOaV(this.MouseSt,this.MouseEnd)}else 3===this.TouchMode?this.FCamera.XFBdkD(-(this.MouseEnd.x-this.MouseSt2.x)/50):5===this.TouchMode&&this.FCamera.XFBdkD(-(this.MouseEnd.x-this.MouseSt2.x)/50);this.TouchMode=_t,this.DrawRender()}},{key:"XGwxKj",value:function(t,e){if(1===this.TouchMode||7===this.TouchMode){var i=Math.abs(this.firstClickX-this.moveClickX)>10||Math.abs(this.firstClickY-this.moveClickY)>10;if(this.clickCount<=2&&(i||this.FLastEditingObj))if(this.MouseX=t,this.MouseY=e,this.FCamera.X9VnrD(!1),this.FEditingObjDown&&!this.FLastEditingObj.eVal.isFreeDrawing)this.XGqwp9(this.MouseX,this.MouseY,!1,this.tempmouse),this.FLastEditingObj.eVal.setWalkerPoint(this.MouseX,this.MouseY,this.XLqkQr()),this.FLastEditingObj.eVal.mouseMove(t,e,!1);else if(this.FLastEditingObj&&this.FLastEditingObj.eVal.isFreeDrawing)this.XGqwp9(this.MouseX,this.MouseY,!1,this.tempmouse),this.FLastEditingObj.eVal.setWalkerPoint(this.MouseX,this.MouseY,this.XLqkQr()),this.FLastEditingObj.eVal.mouseMove(t,e,!0);else{if(this.UserEvents.move&&!this.FLastEditingObj&&(this.XGqwp9(t,e,!1,this.tempmouse),this.X9IioP("move",t,e)))return;if(this.UserEvents.down&&It)return;this.YMouseMS=new Date,Object.assign(this.MouseSt,this.MouseEnd),this.FCamera.FArcBall.XTuqig(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e),this.FCamera.Xvfbh5()}else this.clickCount>=3?this.XWWWVg()&&(this.moveClickY>this.firstClickY+10?(this.oneZoomMode=1,this.firstClickY=this.moveClickY,this.firstClickX=this.moveClickX,this.XO1bGd()):this.moveClickY+10<this.firstClickY&&(this.oneZoomMode=2,this.firstClickY=this.moveClickY,this.firstClickX=this.moveClickX,this.Xs85aF())):this.clickCount<=2&&(this.FCamera.X9VnrD(!1),this.YMouseMS=new Date,Object.assign(this.MouseSt,this.MouseEnd),this.FCamera.FArcBall.XTuqig(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e),this.FCamera.Xvfbh5())}else if(4===this.TouchMode)this.FCamera.X9VnrD(!1),this.YMouseMS=new Date,Object.assign(this.MouseSt,this.MouseEnd),this.FCamera.FArcBall.XTuqig(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e),this.FCamera.Xvfbh5();else if(5===this.TouchMode){this.YMouseMS=new Date,Object.assign(this.MouseEnd,this.MouseSt2),Object.assign(this.FCamera.FArcBall.P3Dab_start,this.FOrbit.SpacePoint),this.FCamera.FArcBall.P3Dab_start.Normalize(),u=(t-this.MouseSt.x)/3;var r=Math.sin(u*Math.PI/180),s=Math.cos(u*Math.PI/180);this.tempcross.DotProductSetP(this.FCamera.FArcBall.P3Dab_start,r),_.b.quaternion(this.Fab_temp,this.tempcross.x,this.tempcross.y,this.tempcross.z,s),this.Fabnextfd&&(_.b.quatnext(this.Fab_temp2,this.Fab_temp,this.FLast_ab_next),this.Fab_temp=this.Fab_temp2.slice()),this.FCamera.Xa74Bc(),_.b.quatnext(this.TEST_ab_quat,this.Fab_last,this.Fab_temp),this.TempMatrix44=_.b.Quat2Matrix4(this.TEST_ab_quat),_.b.EulFromHMatrix(this.TempMatrix44,_.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea),Object.assign(this.tempeye,this.FEyePos),this.tempeye.Normalize(),_.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TNPoint,this.Tempstart,this.TempLongLat),this.FCamera.FCamZ=this.XyecYr(this.TempLongLat,!1),this.FCamera.XcttbF()>mt.GLOBE_MIN_DIST?(_.b.quatnext(this.FCamera.FArcBall.ab_quat,this.Fab_last,this.Fab_temp),_.b.quaternion(this.Fab_tempX,this.tempcross.x,this.tempcross.y,this.tempcross.z,s),this.Fabnextfd2=!0):(this.Fabnextfd2&&(this.Fab_temp=this.Fab_tempX.slice(),this.Fabnextfd&&(_.b.quatnext(this.Fab_temp2,this.Fab_temp,this.FLast_ab_next),this.Fab_temp=this.Fab_temp2.slice()),_.b.quatnext(this.FCamera.FArcBall.ab_quat,this.Fab_last,this.Fab_temp)),this.FCamera.XNiKsM()),this.MouseSt2.SetV(t,e),this.FCamera.Xvfbh5(),this.DrawRender()}else if(3===this.TouchMode){var o,n,a,h,l,u;this.YMouseMS=new Date,Object.assign(this.MouseEnd,this.MouseSt2),_.b.CSZero(this.FOrbit.MouseZ)?(this.FCamera.FTILT_ROT_DEGREE-=(this.MouseSt2.y-e)/4,this.FCamera.FTILT_ROT_DEGREE>mt.GLOBE_MAX_TILTANGLE&&(this.FCamera.FTILT_ROT_DEGREE=mt.GLOBE_MAX_TILTANGLE),this.FCamera.FTILT_ROT_DEGREE<mt.GLOBE_MIN_TILTANGLE&&(this.FCamera.FTILT_ROT_DEGREE=mt.GLOBE_MIN_TILTANGLE)):(u=-(e-this.MouseSt.y)/4,_.b.CSRotate(u*_.I,0,0,this.FNewEye.x,this.FNewEye.z,this.TNPoint),_.b.CalcPosition(this.Tempp2,this.NullTCoor2,this.TNPoint,-3*mt.GLOBE_RADIUS,0),this.mCircleIntersect.IntersectCircle(this.TNPoint.y,this.TNPoint.x,this.Tempp2.y,this.Tempp2.x,-mt.GLOBE_RADIUS-this.FDeltaXOrbit,this.FDeltaYOrbit,mt.GLOBE_RADIUS),this.TNPoint.x<=0&&2===this.mCircleIntersect.ICnt&&(this.Tempc1.SetV(this.mCircleIntersect.Ix1,this.mCircleIntersect.Iy1),this.Tempc2.SetV(this.mCircleIntersect.Ix2,this.mCircleIntersect.Iy2),this.Tempc2.Dist2DT(this.NullTCoor2)<this.Tempc1.Dist2DT(this.NullTCoor2)&&Object.assign(this.Tempc1,this.Tempc2),this.TempNewOrbit.x=this.Tempc1.y+mt.GLOBE_RADIUS+this.FDeltaXOrbit,this.TempNewOrbit.y=0,this.TempNewOrbit.z=this.Tempc1.x-this.FDeltaYOrbit,o=this.FOrbit.SpacePoint.LayMagnitude(),a=this.Tempc1.LayMagnitude(),n=Math.sqrt(a),h=mt.GLOBE_RADIUS,(l=180-_.b.RadyanToDegree(Math.acos((o-a-h*h)/(-2*n*h))))>=0&&l<mt.GLOBE_MAX_TILTANGLE+_.z&&(this.FCamera.Xa74Bc(),this.FCamera.FTILT_ROT_DEGREE=l,this.FCamera.FDist=this.Tempc1.Dist2DT(this.TNPoint),this.FCamera.XcttbF()>mt.GLOBE_MIN_DIST?(this.TempFab_curr.x=1,this.TempFab_curr.y=0,this.TempFab_curr.z=0,this.TempNewOrbit.Normalize(),_.b.GetRotationMatrix(this.TempNewOrbit,this.TempFab_curr,this.FLast_ab_next,this.tempcross),this.Fabnextfd=!0):this.FCamera.XNiKsM()))),Object.assign(this.FCamera.FArcBall.P3Dab_start,this.FOrbit.SpacePoint),this.FCamera.FArcBall.P3Dab_start.Normalize(),u=(t-this.MouseSt.x)/6;r=Math.sin(u*Math.PI/180),s=Math.cos(u*Math.PI/180);this.tempcross.DotProductSetP(this.FCamera.FArcBall.P3Dab_start,r),_.b.quaternion(this.Fab_temp,this.tempcross.x,this.tempcross.y,this.tempcross.z,s),this.Fabnextfd&&(_.b.quatnext(this.Fab_temp2,this.Fab_temp,this.FLast_ab_next),this.Fab_temp=this.Fab_temp2.slice()),this.FCamera.Xa74Bc(),_.b.quatnext(this.TEST_ab_quat,this.Fab_last,this.Fab_temp),this.TempMatrix44=_.b.Quat2Matrix4(this.TEST_ab_quat),_.b.EulFromHMatrix(this.TempMatrix44,_.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea),Object.assign(this.tempeye,this.FEyePos),this.tempeye.Normalize(),_.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TNPoint,this.Tempstart,this.TempLongLat),this.FCamera.FCamZ=this.XyecYr(this.TempLongLat,!1),this.FCamera.XcttbF()>mt.GLOBE_MIN_DIST?(_.b.quatnext(this.FCamera.FArcBall.ab_quat,this.Fab_last,this.Fab_temp),_.b.quaternion(this.Fab_tempX,this.tempcross.x,this.tempcross.y,this.tempcross.z,s),this.Fabnextfd2=!0):(this.Fabnextfd2&&(this.Fab_temp=this.Fab_tempX.slice(),this.Fabnextfd&&(_.b.quatnext(this.Fab_temp2,this.Fab_temp,this.FLast_ab_next),this.Fab_temp=this.Fab_temp2.slice()),_.b.quatnext(this.FCamera.FArcBall.ab_quat,this.Fab_last,this.Fab_temp)),this.FCamera.XNiKsM()),this.MouseSt2.SetV(t,e),this.FCamera.Xvfbh5(),this.DrawRender()}}},{key:"XCwdch",value:function(t,e){if(this.FEditingObjDown=!1,this.FCamera.X9VnrD(!1),this.MouseStartForEditing.SetV(t,e),this.YMouseMS=new Date,1===this.touchCount){if(this.TouchMode=_t,this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid){if(this.FEditingObjDown=this.FLastEditingObj&&this.FLastEditingObj.eVal.walker&&this.FLastEditingObj.eVal.mouseDown(t,e,1,this.FLastEditingObj.eVal.isFreeDrawing),this.tempmouse.isValid&&(this.TouchMode=1),this.FEditingObjDown)return void(this.cursorIndex=this.FLastEditingObj.eVal.lastSnapIndex);if(this.UserEvents.down&&!this.FLastEditingObj&&new Date-this.DownEndTime>200&&(It=!1,this.tempmouse.isValid&&(this.TouchMode=7),this.DownEndTime=new Date,this.X9IioP("down",t,e)))return void(It=!0);this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.TouchMode=1,this.FCamera.FArcBall.Xoxggp(t,this.FScrH-e),this.MouseSt.SetV(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e)}}else 2===this.touchCount?1===this.selectionoftwofingers?(this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid&&2!==this.doubleValid?(this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.TouchMode=4,this.FCamera.FArcBall.Xoxggp(t,this.FScrH-e),this.MouseSt.SetV(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e),this.doubleValid=1):0===this.doubleValid?this.doubleValid=2:(this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),1===this.doubleValid?this.TouchMode=4:this.TouchMode=_t,this.FCamera.FArcBall.Xoxggp(t,this.FScrH-e),this.MouseSt.SetV(t,this.FScrH-e),this.MouseEnd.SetV(t,this.FScrH-e))):this.XWWWVg()&&(this.FLastMouse.AssignT(this.FOrbit),this.TouchMode=5,this.MouseSt.SetV(t,e),this.MouseSt2.SetV(t,e),this.MouseEnd.SetV(t,e),this.Fabnextfd=!1,this.Fabnextfd2=!1):3===this.touchCount&&this.XWWWVg()&&(this.FLastMouse.AssignT(this.FOrbit),this.TouchMode=3,this.MouseSt.SetV(t,e),this.MouseSt2.SetV(t,e),this.MouseEnd.SetV(t,e),this.Fabnextfd=!1,this.Fabnextfd2=!1)}},{key:"XGqwp9",value:function(t,e,i,r){r.isValid=!1,this.XKOEdV(t,e,r),r.isValid||(this.XKOEdV(t+1,e,r),r.isValid||(this.XKOEdV(t-1,e,r),r.isValid||(this.XKOEdV(t,e+1,r),r.isValid||this.XKOEdV(t,e-1,r))))}},{key:"XKOEdV",value:function(t,e,i){var r;if(i.isValid=!1,this.XBs5KC(0),this.FCamera.FArcBall.XQw9vR(t,this.FScrH-e,this.tempSph)){for(_.b.Rot3D_ToGeo(this.tempSph,this.ea,this.TempNewPoint,this.Tempstart,this.TempLongLat),this.FIntersectCells.length=0,r=this.FDrawedCells.length;r--;)this.FDrawedCells[r].Intersect(this.TempLongLat,this.FCamera.FCamLongLat)&&this.FIntersectCells.push(this.FDrawedCells[r]);for(this.FIntersectCells.length>1&&this.FIntersectCells.sort(this.XjnGqS),r=this.FIntersectCells.length;r--&&(this.XPdDQZ(t,e,this.FIntersectCells[r],i),!i.isValid););}this.XBs5KC(this.FLastMouse.MouseZ)}},{key:"XLqkQr",value:function(){return Object.assign(this.tempmouseGeo,this.tempmouse),this.tempmouseGeo.ConvertRadyanToDegree(),this.tempmouseGeo}},{key:"XBs5KC",value:function(t){var e=this.GLU;e.pushModel(),e.pushProj(),this.XTme9m(),e.InitModel(),this.P3DA.SetV(-this.FCamera.FDist,0,0),Object.assign(this.P3DB,this.FUpPos),_.c.LookAt(this.eyeArr,this.P3DA,this.P3DB,this.lookAtMatrix),e.curModel(this.lookAtMatrix),e.Rotate(_.b.DegreeToRadyan(-this.FCamera.FTILT_ROT_DEGREE),0,1,0,this.modelViewMatrixLoc),e.Translate(-this.FEyePos2.x,-this.FEyePos2.y,-this.FEyePos2.z,this.modelViewMatrixLoc),e.Translate(-mt.GLOBE_RADIUS,0,0,this.modelViewMatrixLoc),e.setModelToGL(this.modelViewMatrixLoc),this.FCamera.FArcBall.XtJtU7(mt.GLOBE_RADIUS+t,this.FEyePos,e.curProjMat,e.curModelMat,this.Lastviewport),e.popProj(),e.popModel()}},{key:"XPdDQZ",value:function(t,e,i,r){this.XtdREI(t,e,i,r),r.isValid&&(r.FarCell=i,r.MouseZ=r.SpacePoint.Magnitude()-mt.GLOBE_RADIUS,r.MouseZ<0&&(r.MouseZ=0,_.b.GeoTo3DRot(r.MouseLong,r.MouseLat,mt.GLOBE_RADIUS,this.ea,this.TempNewPoint,r.SpacePoint)))}},{key:"XtdREI",value:function(t,e,i,r){var s=this.XkFWo9(t,this.FScrH-e,this.tempdir);r.isValid=s&&i.XKAb3U(this.raytracer,this.Fp2T,this.Fp2N,this.tempdir,r)&&this.XLWsBy(this.raytracer,this.Fp2T,this.Fp2N,this.tempdir,r),r.isValid&&(r.SpacePoint.VecAdd(this.Fp2T),_.b.GeoTo3DRotBase(r.SpacePoint,this.ea,this.TempNewPoint))}},{key:"XkFWo9",value:function(t,e,i){var r=_.b.GluUnProject(t,e,0,this.LastmodelMatrix,this.LastprojMatrix,this.Lastviewport,0,this.axyz);return this.axyz=r[1],r[0]&&i.SetV(this.axyz[0],this.axyz[1],this.axyz[2]),r[0]}},{key:"XyecYr",value:function(t,e){var i,r,s=!1,o=0;for(i=this.FRNum;i--;){for(r=this.FCNum;r--;)if(s=this.FCells[i][r].XBOsbO(t)){o=this.XbNFGt(this.FCells[i][r],t);break}if(s)break}return e&&(o*=1/mt.GLOBE_RADIUS_K),o}},{key:"XbNFGt",value:function(t,e){return t.FChilds[0]?e.x>t.FMercatorCenterLonRad?e.y>t.FMercatorCenterLatRad?this.XbNFGt(t.FChilds[2],e):this.XbNFGt(t.FChilds[1],e):e.y>t.FMercatorCenterLatRad?this.XbNFGt(t.FChilds[3],e):this.XbNFGt(t.FChilds[0],e):t.XCvN4h(e)}},{key:"XnCaoF",value:function(t){var e=[];this.FastLastFoundCalcDepthZCell=null;for(var i=this.FRNum;i--;)for(var r=this.FCNum;r--;)t.CSIsCommonRegionT(this.FCells[i][r].FCellTGW)&&e.push(this.FCells[i][r]);return e}},{key:"XjTSzm",value:function(t,e,i,r){if(this.FastLastFoundCalcDepthZCell&&this.FastLastFoundCalcDepthZCell.XRNEwR(t,e)){var s=this.FastLastFoundCalcDepthZCell.X3SOlw(t,e);return i&&(s*=1/mt.GLOBE_RADIUS_K),s}var o,n=!1,a=0;for(o=r.length;o--;){if(n=r[o].XRNEwR(t,e)){a=this.XNVMgj(r[o],t,e);break}if(n)break}return i&&(a*=1/mt.GLOBE_RADIUS_K),a}},{key:"XNVMgj",value:function(t,e,i){return t.FChilds[0]?e>t.FMercatorCenterLonDeg?i>t.FMercatorCenterLatDeg?this.XNVMgj(t.FChilds[2],e,i):this.XNVMgj(t.FChilds[1],e,i):i>t.FMercatorCenterLatDeg?this.XNVMgj(t.FChilds[3],e,i):this.XNVMgj(t.FChilds[0],e,i):(this.FastLastFoundCalcDepthZCell=t,t.X3SOlw(e,i))}},{key:"ReBuildAllMeshes",value:function(){for(var t=this.FRNum;t--;)for(var e=this.FCNum;e--;)this.Change_Z_AbartChildDepth(this.FCells[t][e])}},{key:"Change_Z_AbartChildDepth",value:function(t){if(t.XmYBdX(),t.X7N6TB(!0,!0,!0,!0,!0,!0,!0,!0),t.XHtqRe())for(var e=4;e--;)this.Change_Z_AbartChildDepth(t.FChilds[e])}},{key:"XWWWVg",value:function(){return this.XGqwp9(this.FScrW/2,this.FScrH/2,!1,this.FOrbit),this.FOrbit.isValid&&(this.FCamera.FOrbitFound=!0,this.XzpZ0X()),this.FOrbit.isValid}},{key:"XzpZ0X",value:function(){this.FNewEye.SetV(this.FEyePos.x-this.FOrbit.SpacePoint.x,0,this.FEyePos.z-this.FOrbit.SpacePoint.z),this.Fab_last=this.FCamera.FArcBall.ab_quat.slice(),this.FDistOrbit=this.FOrbit.SpacePoint.Dist3D(this.GLOBE_CENTER),this.FDeltaXOrbit=this.FDistOrbit*Math.cos(_.b.DegreeToRadyan(this.FCamera.FTILT_ROT_DEGREE)),this.FDeltaYOrbit=this.FDistOrbit*Math.sin(_.b.DegreeToRadyan(this.FCamera.FTILT_ROT_DEGREE))}},{key:"X2Ak8l",value:function(t,e,i,r){_.b.GeoTo3DRot(t,e,mt.GLOBE_RADIUS+i,this.ea,this.TempNewPoint,r)}},{key:"X0hEl5",value:function(){return this.FOrbit.isValid?this.FOrbit.SpacePoint.Dist3D(this.FEyePos):0}},{key:"XO1bGd",value:function(){this.StartOD=this.X0hEl5(),this.FCamera.XNLNye(this.StartOD+this.StartOD*(-1/8),!1,-1)}},{key:"Xs85aF",value:function(){this.StartOD=this.X0hEl5(),this.FCamera.XNLNye(this.StartOD-this.StartOD*(-1/8),!1,1)}},{key:"XTmDqA",value:function(t,e,i,r){this.zoomToMousePointer?(this.MainMouseEnd.SetV(t,e),this.XGqwp9(t,e,!1,this.tempmouse),this.tempmouse.isValid?(this.FLastMouse.AssignT(this.tempmouse),this.XBs5KC(this.FLastMouse.MouseZ),this.StartOD=this.X0hEl5(),this.FCamera.X4GWfp(this.FLastMouse.MouseLong,this.FLastMouse.MouseLat)):(this.StartOD=this.X0hEl5(),this.StartOD<500*mt.GLOBE_RADIUS_K?this.FCamera.XNLNye(this.StartOD/1.8,!0,i,r,t,e):this.FCamera.XNLNye(this.StartOD/2.5,!0,i,r,t,e))):(this.StartOD=this.X0hEl5(),this.StartOD<500*mt.GLOBE_RADIUS_K?this.FCamera.XNLNye(this.StartOD/1.8,!0,i,r,t,e):this.FCamera.XNLNye(this.StartOD/2.5,!0,i,r,t,e))}},{key:"XblP7X",value:function(){this.StartOD=this.X0hEl5(),this.StartOD<500*mt.GLOBE_RADIUS_K?this.FCamera.XNLNye(this.StartOD/1.8,!0,-1):this.FCamera.XNLNye(this.StartOD/2.5,!0,-1)}},{key:"X86OE8",value:function(t,e,i,r){this.StartOD=this.X0hEl5(),this.StartOD<500*mt.GLOBE_RADIUS_K?this.FCamera.XNLNye(1.8*this.StartOD,!0,t,r,e,i):this.FCamera.XNLNye(2.5*this.StartOD,!0,t,r,e,i)}},{key:"XX11eE",value:function(t){this.LASTZOOM_MIDROTANG=t,this.FCamera.XaCY4d(t,!0)}},{key:"XkJgaI",value:function(t,e){return t.FCellDist/t.FRealRadius<e.FCellDist/e.FRealRadius?-1:t.FCellDist/t.FRealRadius>e.FCellDist/e.FRealRadius?1:0}},{key:"XLHEsR",value:function(t,e){return t.FCellDist/t.FRealRadius<e.FCellDist/e.FRealRadius?-1:t.FCellDist/t.FRealRadius>e.FCellDist/e.FRealRadius?1:0}},{key:"X9B9Jv",value:function(t,e){return t.FLevel<e.FLevel?-1:t.FLevel>e.FLevel?1:t.FCellDist<e.FCellDist?-1:t.FCellDist>e.FCellDist?1:0}},{key:"SortForTextureDist",value:function(t,e){return t.FLevel<e.FLevel?1:t.FLevel>e.FLevel?-1:t.FCellDist<e.FCellDist?-1:t.FCellDist>e.FCellDist?1:0}},{key:"SortForTexture",value:function(t,e){return t.FCellDist/t.FRealRadius<e.FCellDist/e.FRealRadius?-1:t.FCellDist/t.FRealRadius>e.FCellDist/e.FRealRadius?1:0}},{key:"XwpkLl",value:function(t,e){return t.Cell.FLevel<e.Cell.FLevel?1:t.Cell.FLevel>e.Cell.FLevel?-1:t.Cell.FCellDist<e.Cell.FCellDist?1:t.Cell.FCellDist>e.Cell.FCellDist?-1:0}},{key:"XjnGqS",value:function(t,e){return t.FCellDist<e.FCellDist?1:t.FCellDist>e.FCellDist?-1:0}},{key:"Xpcrhk",value:function(){if(mt.GLOBE_RASTER_LOD_PRIORITY)return 0;var t,e;if(this.FTextCells.length>2*_.b.Max(this.FDrawedCells.length,50)){var i=this.FTextCells.length;for(e=i;e--;)(t=this.FTextCells[e]).XlGTf1(this.Fp2TF,this.Fp2NF);if(i>1&&this.FTextCells.sort(this.SortForTexture),i){var r=parseInt(.8*this.FTextCells.length);for(e=i;e--&&!((t=this.FTextCells[e]).FParent&&!t.XU3xVd()&&(t.XUlzx4(!0),this.FTextCells.splice(e,1),--i<=r)););}}}},{key:"XvBcZP",value:function(t,e){if(t){var i=this.FRasters[this.LoadingTextureCellMain.FCurrentRequestRasterID].maxLodLevel,r=t.FTextures[this.LoadingTextureCellMain.FCurrentRequestRasterID];t.FLevel<i?r.FLoadingChildTextureList.fill(1):r.FLoadingChildTextureList.fill(0),r.FLoadingChildTextureInfoExists=!0,r.textureRESULT=mt.tr_load_OK,t.XFIiZB(this.LoadingTextureCellMain.FCurrentRequestRasterID,this.stretchCtx2.canvas)||t.XrQC2s(this.LoadingTextureCellMain.FCurrentRequestRasterID)}else{var s=this.FRasters[this.LoadingTextureCellMain.FCurrentRequestRasterID].maxLodLevel,o=this.LoadingTextureCellMain.FTextures[this.LoadingTextureCellMain.FCurrentRequestRasterID];this.LoadingTextureCellMain.FLevel<s?o.FLoadingChildTextureList.fill(1):o.FLoadingChildTextureList.fill(0),o.FLoadingChildTextureInfoExists=!0,o.textureRESULT=mt.tr_load_OK,this.LoadingTextureCellMain.XFIiZB(this.LoadingTextureCellMain.FCurrentRequestRasterID,e)||this.LoadingTextureCellMain.XrQC2s(this.LoadingTextureCellMain.FCurrentRequestRasterID)}}},{key:"DrawImageToCanvas",value:function(t,e){if(t.width===mt.GLOBE_IMAGE_SIZE)e.drawImage(t,0,0);else{var i=mt.GLOBE_IMAGE_SIZE/t.width;e.save(),e.scale(i,i),e.drawImage(t,0,0),e.restore()}}},{key:"CheckImageOpacity",value:function(t){for(var e=mt.GLOBE_IMAGE_SIZE,i=t.getImageData(0,0,e,e).data,r=0;r<i.length;r+=4)if(0===i[r+3])return!0;return!1}},{key:"IsRasterExist",value:function(t){for(var e=this.FRasters.length,i=0;i<e;i++)if(this.FRasters[i]._uniqRasterId===t)return!0;return!1}},{key:"FindRasterIndex",value:function(t){for(var e=this.FRasters.length,i=0;i<e;i++)if(this.FRasters[i]._uniqRasterId===t)return i;return-1}},{key:"ApplyRaster",value:function(t,e){if(this.IsRasterExist(e.uniqRasterId)){var i=this.FindRasterIndex(e.uniqRasterId);this.LoadingTextureCellMain=t,this.LoadingTextureCellMain.FCurrentRequestRasterID=i,e.supportImage?e.transparentPixelSupport?(this.DrawImageToCanvas(e.image,this.ctxForRaster),this.CheckImageOpacity(this.ctxForRaster)?(this.ctxForRaster.clearRect(0,0,mt.GLOBE_IMAGE_SIZE,mt.GLOBE_IMAGE_SIZE),this.DrawImageToCanvas(e.supportImage,this.ctxForRaster),this.DrawImageToCanvas(e.image,this.ctxForRaster),this.ApplyRasterToGlobe(this.ctxForRaster.canvas)):this.ApplyRasterToGlobe(e.image),this.ctxForRaster.clearRect(0,0,mt.GLOBE_IMAGE_SIZE,mt.GLOBE_IMAGE_SIZE)):e.outOfBBOXSupport||e.emptyContentSupport?this.ApplyRasterToGlobe(e.supportImage):this.ApplyRasterToGlobe(e.image):this.ApplyRasterToGlobe(e.image)}else t.SetRequestCount()}},{key:"ApplyRasterToGlobe",value:function(t){this.Xpcrhk();var e=this.LoadingTextureCellMain.FParent,i=this.LoadingTextureCellMain.FCurrentRequestRasterID;this.FRasters[i].lowerLod&&e?t?(this.LoadingTextureCellMain.FRequestCount--,this.stretchCtx.drawImage(t,0,0,256,256),e.FChilds[0].FTextures[i].FTextName||(e.FChilds[0].FTextures[i].FTextureRequested=!0,e.FChilds[0].FRequestCount++,this.stretchCtx2.putImageData(this.stretchCtx.getImageData(0,128,128,128),0,0,0,0,128,128),this.XvBcZP(e.FChilds[0])),e.FChilds[1].FTextures[i].FTextName||(e.FChilds[1].FTextures[i].FTextureRequested=!0,e.FChilds[1].FRequestCount++,this.stretchCtx2.putImageData(this.stretchCtx.getImageData(128,128,128,128),0,0,0,0,128,128),this.XvBcZP(e.FChilds[1])),e.FChilds[2].FTextures[i].FTextName||(e.FChilds[2].FTextures[i].FTextureRequested=!0,e.FChilds[2].FRequestCount++,this.stretchCtx2.putImageData(this.stretchCtx.getImageData(128,0,128,128),0,0,0,0,128,128),this.XvBcZP(e.FChilds[2])),e.FChilds[3].FTextures[i].FTextName||(e.FChilds[3].FTextures[i].FTextureRequested=!0,e.FChilds[3].FRequestCount++,this.stretchCtx2.putImageData(this.stretchCtx.getImageData(0,0,128,128),0,0,0,0,128,128),this.XvBcZP(e.FChilds[3])),this.LoadingTextureCellMain=null,this.DrawRender()):(this.LoadingTextureCellMain.TextureCellMain_OK_NoData(this.LoadingTextureCellMain.FCurrentRequestRasterID),this.LoadingTextureCellMain=null):(this.XvBcZP(null,t),this.LoadingTextureCellMain=null,this.DrawRender())}},{key:"Xjo2sj",value:function(e){if(e.response){var i=0;e.responseTime,i=t.byteLength(JSON.stringify(e.response),"utf8"),this.DPSByteSize+=i,this.TotalDownloadSize+=i;var r=0,s=0;for(r=this.LoadingMeshCellMainArr.length;r--;)for(this.FTempMeshMain[r]=[],s=mt.INTERNAL_MESH_N;s--;)this.FTempMeshMain[r][s]=e.response[r*mt.INTERNAL_MESH_N+s];this.XewuYa(),e=null}else this.X7aZcK(),this.LoadingMeshCellMainArr.length=0}},{key:"GetNextMeshURL",value:function(){return Array.isArray(this.MeshServerUrl)?this.MeshServerUrl.length?(this.CurrentMeshIndex=++this.CurrentMeshIndex%this.MeshServerUrl.length,this.MeshServerUrl[this.CurrentMeshIndex]):null:this.MeshServerUrl}},{key:"XbNlj7",value:function(){if(this.CurrentMeshUrl=this.GetNextMeshURL(),this.CurrentMeshUrl){var t="".concat(this.CurrentMeshUrl,"/csh.dll/GHWEB2?FLOAT=1&MESHN=").concat(mt.INTERNAL_MESH_N,"&CN=").concat(this.LoadingMeshCellMainArr.length),e=0,i=0;for(i=this.LoadingMeshCellMainArr.length;i--;)t+="&C".concat(e=i+1,"LLX=").concat(this.LoadingMeshCellMainArr[i].FCellTGW.LL.y,"&C").concat(e,"LLY=").concat(this.LoadingMeshCellMainArr[i].FCellTGW.LL.x,"&C").concat(e,"URX=").concat(this.LoadingMeshCellMainArr[i].FCellTGW.UR.y,"&C").concat(e,"URY=").concat(this.LoadingMeshCellMainArr[i].FCellTGW.UR.x);this.httpJSON.SendReq(t).then(this.Xjo2sj),clearTimeout(this.meshTm),delete this.meshTm}else{var r={response:[]};for(i=this.LoadingMeshCellMainArr.length;i--;)r.response.push([0,0,0,0,0]),r.response.push([0,0,0,0,0]),r.response.push([0,0,0,0,0]),r.response.push([0,0,0,0,0]),r.response.push([0,0,0,0,0]);this.Xjo2sj(r)}}},{key:"XzyOdO",value:function(){this.meshTm=setTimeout(this.XbNlj7,20)}},{key:"LoadMeshCache",value:function(){this.XJoiXs()}},{key:"XewuYa",value:function(){for(var t=this.LoadingMeshCellMainArr.length;t--;)this.LoadingMeshCellMainArr[t].XFTTPF(this.FTempMeshMain[t],null,!0),this.meshCacher.AddMeshToCache(this.LoadingMeshCellMainArr[t].FGeoCoding,this.FTempMeshMain[t]);this.LoadingMeshCellMainThread=null,this.LoadingMeshCellMainArr.length=0,this.DrawRender()}},{key:"XJoiXs",value:function(){for(var t=this.LoadingMeshCellCacheArr.length;t--;)this.LoadingMeshCellCacheArr[t].XFTTPF(this.FTempMeshCache[t],null,!0);this.LoadingMeshCellCacheArr.length=0,this.DrawRender()}},{key:"X7aZcK",value:function(){var t;for(t=this.LoadingMeshCellMainArr.length;t--;)this.LoadingMeshCellMainArr[t].XAbn09();this.LoadingMeshCellMainThread=null,this.LoadingMeshCellMainArr.length=0,this.DrawRender()}},{key:"XBIAqc",value:function(t,e,i){var r=this;this.whitetex=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.whitetex),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));var s=new Image;s.onload=function(){r.XMO1R9(t,e,i,s)},s.src=N.a,s.width=512,s.height=256}},{key:"CreateBaseOverviewTexture",value:function(t,e,i){var r=this,s=new Image;s.onload=function(){r.OnloadBaseOverviewTexture(t,e,i,s),window.URL.revokeObjectURL(s.src)},s.src=N.i,s.width=512,s.height=512}},{key:"XAbjer",value:function(){var t=this;this.EditTexCoordBuff=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.EditTexCoordBuff),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,1,1,1,0,1,1,0,0,0,1]),this.gl.STATIC_DRAW),this.EditTexVertexBuff=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.EditTexVertexBuff),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-16,-16,0,16,16,0,16,-16,0,16,16,0,-16,-16,0,-16,16,0]),this.gl.STATIC_DRAW);var e=new Image;e.src=N.d,e.onload=function(){t.FEditTexture=t.gl.createTexture(),t.Xs6ckh(!0,!0,!0,e,t.FEditTexture),window.URL.revokeObjectURL(e.src)};var i=new Image;i.src=N.f,i.onload=function(){t.FRotateTexture=t.gl.createTexture(),t.Xs6ckh(!0,!0,!0,i,t.FRotateTexture),window.URL.revokeObjectURL(i.src)};var r=new Image;r.src=N.g,r.onload=function(){t.FMoveTexture=t.gl.createTexture(),t.Xs6ckh(!0,!0,!0,r,t.FMoveTexture),window.URL.revokeObjectURL(r.src)}}},{key:"XMO1R9",value:function(t,e,i,r){var s=this.gl;this.FGlobText=s.createTexture(),this.FParentTextID=this.FGlobText,t&&s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0),s.bindTexture(s.TEXTURE_2D,this.FGlobText),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,r),s.generateMipmap(s.TEXTURE_2D),e?s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR):s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),i?(s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)):(s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT)),this.Xq4HjL(),this.DrawRender()}},{key:"OnloadBaseOverviewTexture",value:function(t,e,i,r){var s=this.gl;this.FOverviewText=s.createTexture(),t&&s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0),s.bindTexture(s.TEXTURE_2D,this.FOverviewText),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,r),s.generateMipmap(s.TEXTURE_2D),e?s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR):s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),i?(s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)):(s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT))}},{key:"Xs6ckh",value:function(t,e,i,r,s){var o=this.gl;t&&o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),o.bindTexture(o.TEXTURE_2D,s),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r),o.generateMipmap(o.TEXTURE_2D),e?o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR):o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),i?(o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE)):(o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT))}},{key:"XNQ8I3",value:function(){return this.reUseCellTexture.length&&this.reUseCellTextActive?this.reUseCellTexture.pop():this.gl.createTexture()}},{key:"XNPtRY",value:function(t,e,i,r){var s,o=this.gl;return i?(s=r?this.XNQ8I3():o.createTexture(),o.bindTexture(o.TEXTURE_2D,s),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,i),t?(o.generateMipmap(o.TEXTURE_2D),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR)):o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),e?(o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE)):(o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameterf(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT)),s):null}},{key:"XV6ew4",value:function(t,e,i){return this.XNPtRY(t,e,i,!0)}},{key:"CreateCellTextureFromBmpForPixel",value:function(){var t=this.gl,e=t.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),t.generateMipmap(t.TEXTURE_2D),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),e}},{key:"Xmj7Si",value:function(t,e,i){return this.XNPtRY(t,e,i,!1)}},{key:"Xxa833",value:function(t){this.canvas=t,this.canvas.oncontextmenu=function(){return!1},this.canvas.className="classFor3D",this.parentNode=this.canvas.parentNode,this.parentNode.style.lineHeight="0",this.parentNode.style.position="relative",this.parentData=this.parentNode.getBoundingClientRect(),this.canvas.width=this.parentData.width,this.canvas.height=this.parentData.height}},{key:"X93FVY",value:function(){this.canvas2d=document.createElement("canvas"),this.canvas2d.id="canvas2D",this.canvas2d.oncontextmenu=function(){return!1},this.canvas2d.className="classFor2D",this.parentNode=this.canvas.parentNode,this.parentData=this.parentNode.getBoundingClientRect(),this.canvas2d.width=this.parentData.width,this.canvas2d.height=this.parentData.height,this.canvas2d.style="position:absolute; top:0px; left:0px; z-index:2 !important;",this.parentNode.append(this.canvas2d),this.ctx=this.canvas2d.getContext("2d"),this.ctx.clearRect(0,0,this.canvas2d.width,this.canvas2d.height),this.ctxForDistAndHeight=this.canvas2d.getContext("2d"),this.ctxForDistAndHeight.clearRect(0,0,this.canvas2d.width,this.canvas2d.height)}},{key:"XOLpDL",value:function(t,e,i){this.ctx.fillStyle="rgba(255,255,255,255)",this.ctx.fillText(t,e,i)}},{key:"X7GsX4",value:function(t,e,i,r,s){this.ctx.font=t?"".concat(e,"px")+" ".concat(t):"".concat(e,"px")+" Arial",this.ctx.fillStyle="rgb(".concat(i,",").concat(r,",").concat(s,")")}},{key:"XXOy7D",value:function(t,e,i,r,s){this.ctx.drawImage(t,e,i,r,s)}},{key:"XX7rsM",value:function(t,e,i){this.ctx.fillText(t,e,i)}},{key:"X9oM46",value:function(t,e){e.isValid=1===_.b.GluProject(t.x,t.y,t.z,this.LastmodelMatrix,this.LastprojMatrix,this.Lastviewport,0,this.tempwin),e.isValid&&(e.x=this.tempwin[0],e.y=this.FScrH-this.tempwin[1])}},{key:"XsbPmI",value:function(t,e,i){_.b.GeoTo3D(t.x,t.y,mt.GLOBE_RADIUS+e*mt.GLOBE_RADIUS_K,this.tempcur),this.tempcur.VecSub(this.Fp2T),this.Xh5WFD(this.tempcur)?this.X9oM46(this.tempcur,i):i.isValid=!1}},{key:"XG0gjf",value:function(t,e,i,r,s,o,n){if(i.ConvertDegreeToRadyan(),s||(r+=this.X9yZlv(i)),this.XsbPmI(i,r,o),o.isValid)if(n){if(t>o.x-mt.SNAP_HEIGHT_BOX_SIZE&&t<o.x+mt.SNAP_HEIGHT_BOX_SIZE&&e>o.y-mt.SNAP_HEIGHT_BOX_SIZE&&e<o.y+mt.SNAP_HEIGHT_BOX_SIZE)return!0}else if(t>o.x-mt.SNAP_BOX_SIZE&&t<o.x+mt.SNAP_BOX_SIZE&&e>o.y-mt.SNAP_BOX_SIZE&&e<o.y+mt.SNAP_BOX_SIZE)return!0;return!1}},{key:"X9yZlv",value:function(t){return this.XyecYr(t,!0)}},{key:"Xh5WFD",value:function(t){return!(t.Dist3D(this.Fp2N)>this.FRealViewDist*this.GLOBE_REALVIEW_K)&&this.XFllGC(t)}},{key:"X2BlMn",value:function(t,e,i,r,s,o,n,a){if(this.XFllGC(t)){var h=0;t.ConvertDegreeToRadyan(),!s&&(h=this.X9yZlv(t)),i+=h;var l=new _.u(0,0);if(this.XsbPmI(t,i,l),l.isValid){h=0,e.ConvertDegreeToRadyan(),!s&&(h=this.X9yZlv(e)),r+=h;var u=new _.u(0,0);if(this.XsbPmI(e,r,u),u.isValid)return _.b.CSVerySuperZero(u.y-l.y)?1:0===Math.abs(u.y-l.y)?o*Math.abs(a-l.y)/1:o*(Math.abs(a-l.y)/Math.abs(u.y-l.y))}}return o}},{key:"XyhdDQ",value:function(t,e,i,r,s,o,n,a){if(this.XFllGC(t)){var h=0;t.ConvertDegreeToRadyan(),!s&&(h=this.X9yZlv(t)),i+=h;var l=new _.u(0,0);if(this.XsbPmI(t,i,l),l.isValid){h=0,e.ConvertDegreeToRadyan(),!s&&(h=this.X9yZlv(e)),r+=h;var u=new _.u(0,0);if(this.XsbPmI(e,r,u),u.isValid)return _.b.CSVerySuperZero(u.y-l.y)?1:0===Math.abs(u.y-l.y)?o*Math.abs(a-l.y)/1:o*(Math.abs(a-l.y)/Math.abs(u.y-l.y))}}return o}},{key:"Xdga3V",value:function(t,e,i,r,s,o,n,a){this.ctx.font=null===r?"".concat(s,"px")+" Arial":"".concat(s,"px")+" ".concat(r),this.ctx.fillStyle="rgb(".concat(o,",").concat(n,",").concat(a,")")}},{key:"XK6kDh",value:function(){var t=0;70===(t=this.FCurReqCountPercent||this.FLastReqCountPercent?(this.FLastReqCountPercent-this.FCurReqCountPercent)/this.FLastReqCountPercent*70:70)?this.progresWidctx.fillStyle="rgba(0,255,0,255)":(this.progresWidctx.fillStyle="rgba(125,125,125,255)",this.progresWidctx.fillRect(0,0,70,4),this.progresWidctx.fillStyle="rgba(0,0,255,255)"),this.progresWidctx.fillRect(0,0,t,4)}},{key:"DrawIconGrid",value:function(){this.ctx.strokeStyle="rgba(255,255,255,255)";for(var t=0;t<=this.FScrW;t+=mt.REDUCTION_SYMBOL_BOX_SIZE)this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(t,this.FScrH),this.ctx.stroke(),this.ctx.fillStyle="rgba(255,255,255,255)",this.ctx.fillText(t/30,t+10,10);for(t=0;t<=this.FScrH;t+=mt.REDUCTION_SYMBOL_BOX_SIZE)this.ctx.beginPath(),this.ctx.moveTo(0,t),this.ctx.lineTo(this.FScrW,t),this.ctx.stroke(),this.ctx.fillStyle="rgba(255,255,255,255)",this.ctx.fillText(t/30,0,t+10)}},{key:"XMExBl",value:function(){if(this.showGrid&&this.DrawIconGrid(),this.showStatusBar){var t=this.StatusBarWid.children;t.lodVal.innerText=this.FDRAWED_MAX_LEVEL+parseFloat(this.FDRAWED_MAX_LEVEL_FLOAT.toFixed(1)),t.ebVal.innerText=this.Coordinates.GetCoordStr(_.b.RadyanToDegree(this.tempmouse.MouseLong),_.b.RadyanToDegree(this.tempmouse.MouseLat)),t.zVal.innerText=this.Units.GetAltitudeAsString(1e3*this.tempmouse.MouseZ),t.aVal.innerText=this.Units.GetAltitudeAsString(this.api_Altitude()),t.bakVal.innerText=this.FCamera.FTILT_ROT_DEGREE.toFixed(0)+String.fromCharCode(176),t.isVal.innerText=_.b.RadyanToDegree(this.ea.x).toFixed(0)+String.fromCharCode(176),t.fpsVal.innerText=this.LastFPS,this.LastDPS<1024?t.DataPersecond.innerText="".concat(this.LastDPS.toFixed(0)," b/s"):t.DataPersecond.innerText="".concat((this.LastDPS/1024).toFixed(0)," kb/s"),this.XK6kDh()}else this.statusbarCallback&&(this.statusbarCllbackParams.FPS=this.LastFPS,this.statusbarCllbackParams.LOD=this.FDRAWED_MAX_LEVEL+parseFloat(this.FDRAWED_MAX_LEVEL_FLOAT.toFixed(1)),this.statusbarCllbackParams.LatLong=this.Coordinates.GetCoordStr(_.b.RadyanToDegree(this.tempmouse.MouseLong),_.b.RadyanToDegree(this.tempmouse.MouseLat)),this.statusbarCllbackParams.Z=this.Units.GetAltitudeAsString(1e3*this.tempmouse.MouseZ),this.statusbarCllbackParams.Altitude=this.Units.GetAltitudeAsString(this.api_Altitude()),this.statusbarCllbackParams.Look=this.FCamera.FTILT_ROT_DEGREE.toFixed(0)+String.fromCharCode(176),this.statusbarCllbackParams.Heading=_.b.RadyanToDegree(this.ea.x).toFixed(0)+String.fromCharCode(176),this.LastDPS<1024?this.statusbarCllbackParams.DataPersecond="".concat(this.LastDPS.toFixed(0)," b/s"):this.statusbarCllbackParams.DataPersecond="".concat((this.LastDPS/1024).toFixed(0)," kb/s"),this.FCurReqCountPercent||this.FLastReqCountPercent?this.statusbarCllbackParams.progressBarPercent=(this.FLastReqCountPercent-this.FCurReqCountPercent)/this.FLastReqCountPercent*100:this.statusbarCllbackParams.progressBarPercent=100,this.statusbarCallback(this.statusbarCllbackParams));this.FLastEditingObj&&this.FLastEditingObj.eVal&&this.FLastEditingObj.eVal.walker?(-1===this.cursorIndex?this.ctx.canvas.style.cursor="crosshair":(this.ctx.canvas.style.cursor="move",this.FLastEditingObj.eVal.showZ&&this.objZ.DrawText(this.cursorIndex,this.FLastEditingObj,this.FLastEditingObj.eVal.zColor)),this.ctx.font="12px Arial",this.ctx.fillStyle="white"):this.ctx.canvas.style.cursor=this.canvasCursor}},{key:"XMAmfL",value:function(){if(this.showDebug){this.totalCell=this.FCellOrganizer.FDead.length+this.FCellOrganizer.Flive.length;var t=this.DebugWid.children;t.va.innerHTML=this.FMAX_DRAWED_CELL,t.vp.innerHTML=this.FDrawedCells.length,t.vo.innerHTML=this.FTextCells.length,t.vr.innerHTML="".concat((256*this.FTextCells.length*256*3*2/1024/1024).toFixed(0)," mb"),t.vb.innerHTML=this.FCellOrganizer.Flive.length,t.vc.innerHTML=this.FCellOrganizer.FDead.length,t.ve.innerHTML=this.FCellOrganizer.FDead.length+this.FCellOrganizer.Flive.length,t.vf.innerHTML=this.FontDrawer.FAlive.length,t.vg.innerHTML=this.FontDrawer.FDead.length,t.vm.innerHTML="".concat((this.TotalDownloadSize/1048576).toFixed(1)," mb"),this.totalCellold!==this.totalCell&&(this.totalCellold=this.totalCell,t.vs.innerHTML="".concat(this.XHF2mi(this.FCellOrganizer.Flive[0]).toFixed(1)," mb"));for(var e=0,i=0;i<this.api_ObjectBufferCount();i++)e+=this.UserObjArr[i].TotalObjArr.length;t.vw.innerHTML=e,t.vl.innerHTML=this.layerIconCount,t.vn.innerHTML=this.layerLineCount,t.vv.innerHTML=this.layerPolygonCount,t.vmesh.innerHTML=Object.keys(this.meshCacher.meshCacheObj).length,t.vrasterloadercache.innerHTML=this.rasterLoader.cache.length,t.vrasterloaderprocess.innerHTML=this.rasterLoader.processCount,t.vrastertimeoutcount.innerHTML=this.rasterLoader.rasterTimeoutCount,t.vlayerloadercache.innerHTML=this.vectorLayerLoader.cache.length,t.vlayerloaderprocess.innerHTML=this.vectorLayerLoader.processCount}}},{key:"XcTqoK",value:function(t){return this.ctx.measureText(t).width}},{key:"Xue9Mj",value:function(){this.globeArray=new Float32Array(8)}},{key:"Xi7QDM",value:function(){this.globeArray2=new Float32Array(7)}},{key:"XAKAso",value:function(){this.globeArray3=new Float32Array([76,84,68])}},{key:"XLWsBy",value:function(t,e,i,r,s){if(null!==this.isCheckMouseEventValues)return this.isCheckMouseEventValues;var o,n=0,a=0;for(o=this.globeCanvasText.text1.length/4;o<this.globeCanvasText.text1.length/2;o++)n+=this.globeCanvasText.text1.charCodeAt(o);for(o=this.globeArray.length/4;o<this.globeArray.length/2;o++)a+=this.globeArray[o];return n/a==1?this.XXQvKv(n,a):this.isCheckMouseEventValues=!1}},{key:"XXQvKv",value:function(t,e){var i;for(i=3*this.globeCanvasText.text1.length/4;i<this.globeCanvasText.text1.length;i++)t+=this.globeCanvasText.text1.charCodeAt(i);for(i=3*this.globeArray.length/4;i<this.globeArray.length;i++)e+=this.globeArray[i];return this.isCheckMouseEventValues=t/e==1}},{key:"XDdBtf",value:function(t,e){if(this.globeCanvasText.value2!==this.globeArray2.length*this.globeArray3.length*mt.GLOBE_MIN_TILTANGLE*100)for(var i=this.FCellOrganizer.Flive.length;i--;)this.FCellOrganizer.Flive[i].vidx=2}},{key:"XZUwVU",value:function(){var t=String.fromCharCode(this.globeArray2[5])+String.fromCharCode(this.globeArray2[6]),e=this.XzTJGK();this.XcTqoK(e)!==this.XcTqoK(t)&&(this.orthoLeft=1400,this.orthoTop=900)}},{key:"XzTJGK",value:function(){return"im"}},{key:"Xe6XXJ",value:function(){var t;for(t=this.UserObjArr.length;t--;)for(var e=this.UserObjArr[t].TotalObjArr.length;e--;)this.UserObjArr[t].TotalObjArr[e].type===ct.POINT&&this.UserObjArr[t].TotalObjArr.splice(e,1);for(t=this.FontDrawer.FAlive.length;t--;)this.FontDrawer.FAlive[t].Clear();this.FontDrawer.TextureCache.ClearCache(),this.DrawRender()}},{key:"XsZQIw",value:function(){for(var t=this.UserObjArr.length;t--;)for(var e=this.UserObjArr[e].TotalObjArr.length;e--;)this.UserObjArr[t].TotalObjArr[e].type===ct.MODEL&&this.UserObjArr[t].TotalObjArr.splice(e,1);this.ModelDrawer.ModelCache.ClearUseInfo(),this.ModelDrawer.ModelCache.DeleteUnUsedModel(),this.DrawRender()}},{key:"XhfFZw",value:function(){this.gl.deleteTexture(this.whitetex),this.gl.deleteTexture(this.FGlobText),this.gl.deleteTexture(this.FEditTexture),this.gl.deleteTexture(this.FRotateTexture),this.gl.deleteTexture(this.FMoveTexture),this.gl.deleteBuffer(this.EditTexVertexBuff),this.gl.deleteBuffer(this.EditTexCoordBuff),this.gl.deleteBuffer(this.EditTexVertexBuff)}},{key:"Xr89qa",value:function(){window.removeEventListener("resize",this.XY320e),window.removeEventListener("mouseup",this.XHWZjC),window.removeEventListener("mousemove",this.XTDEA3),window.removeEventListener("mousedown",this.XQfPcZ),window.removeEventListener("dblclick",this.XeUT9D),window.removeEventListener("wheel",this.XMvpS5)}},{key:"FreeGlobeWidgets",value:function(){this.scalebar.Clear(this.gl),this.overview.Clear(this.gl),this.globeCanvasText.Clear(this.gl)}},{key:"XJ6mAb",value:function(){window.addEventListener("resize",this.XY320e),window.addEventListener("mouseup",this.XHWZjC),window.addEventListener("mousemove",this.XTDEA3),window.addEventListener("mousedown",this.XQfPcZ),window.addEventListener("dblclick",this.XeUT9D),window.addEventListener("wheel",this.XMvpS5)}},{key:"X11BQu",value:function(){this.canvas.removeEventListener("touchmove",this.onTouchMoveEvent),this.canvas.removeEventListener("touchend",this.onTouchUpEvent),this.canvas.removeEventListener("touchstart",this.onTouchDownEvent)}},{key:"XTQKZp",value:function(){clearInterval(this.FCamera.TurnTimer),clearInterval(this.globeInterval),clearInterval(this.ModelDrawer.modelCacheInterval),clearInterval(this.EditingHighlightInterval),this.globeCheckMeshForLayerInterval&&(clearInterval(this.globeCheckMeshForLayerInterval),this.globeCheckMeshForLayerInterval=null),this.globeReductionForLayerInterval&&(clearInterval(this.globeReductionForLayerInterval),this.globeReductionForLayerInterval=null)}},{key:"XOsele",value:function(t,e){this.FDrawedWorldRad.SetV(t.x-e,t.y-e,t.x+e,t.y+e),this.FDrawedWorldDeg.SetTW(this.FDrawedWorldRad),this.FDrawedWorldDeg.RadyanToDegree()}},{key:"XHkqeY",value:function(t){for(var e=t.FCellLayers,i=e.length;i--;){var r=e[i],s=r.FCityLayer,o=s._FActive,n=s.style,a=s._style;if(Array.isArray(n))for(var h=n.length,l=0;l<h;l++)o&&n[l].zMode!==Ct.Z_MSL&&r.FStateReady&&r.X7N6TB(this.FDrawedWorldDeg,r.objects[l],n[l],a[l],r.Layer.ITDrawer[l],r.Layer.GeoDrawer[l]);else if(o&&r.FStateReady)if(r.FCityLayer.objectType===ct.OBJECT_3D){var u=r.objects.length;for(l=0;l<u;l++)r.X7N6TB(this.FDrawedWorldDeg,r.objects[l],n,a,r.Layer.ITDrawer[l],r.Layer.GeoDrawer[l])}else n.zMode!==Ct.Z_MSL&&r.X7N6TB(this.FDrawedWorldDeg,r.objects,n,a,r.Layer.ITDrawer,r.Layer.GeoDrawer)}}},{key:"XmHVkr",value:function(t){if(t&&t.MeshChangedForLayer){if(this.FCamera.Xdsj2p()||this.MouseMode!==Dt)return;for(var e=t.FChilds.length,i=0;i<e;i++)this.XmHVkr(t.FChilds[i]);this.XHkqeY(t),t.MeshChangedForLayer=!1}}},{key:"XQD5Ik",value:function(){for(var t=this.FRNum;t--;)for(var e=this.FCNum;e--;)this.XmHVkr(this.FCells[t][e])}},{key:"XFDxZ3",value:function(){this.ReductionScreenMatrix.fill(0)}},{key:"XkgRUn",value:function(){if(this.FLayers.length){if(this.XFDxZ3(),this.MVTContinuousLODExist)for(var t=this.FDrawedCells.length,e=0;e<t;e++)this.FDrawedCells[e].ReductMVTContinuousLayers(this.Fp2TF,this.FDRAWED_MAX_LEVEL,this.FDRAWED_MAX_LEVEL_FLOAT);for(var i=this.FRNum;i--;)for(var r=this.FCNum;r--;)this.XARywg(this.FCells[i][r])}}},{key:"XARywg",value:function(t){if(t.FVisible&&(t.ReductLayers(this.Fp2TF,this.FDRAWED_MAX_LEVEL,this.FDRAWED_MAX_LEVEL_FLOAT),t.FActive))for(var e=0;e<4;e++)t.FChilds[e]&&this.XARywg(t.FChilds[e])}},{key:"XrSiVN",value:function(){this.checkReduction&&(this.checkReduction=!1,this.XkgRUn(),this.DrawRender())}},{key:"Xwov3F",value:function(){this.FLastEditingObj&&this.FLastEditingObj.eVal&&(this.FLastEditingObj.eVal.FHighlight=!this.FLastEditingObj.eVal.FHighlight,this.DrawRender())}},{key:"X5qSkG",value:function(){this.EditingHighlightInterval=setInterval(this.Xwov3F,500)}},{key:"XqPSu7",value:function(t){t.canvas||alert("canvas missed !"),t.globeMaxLodLevel||alert("globeMaxLodLevel missed !"),t.globedll||alert("globedll missed !");var e=t.raster;if(e)if(e._FActive=!0,(void 0===e.opacity||null===e.opacity)&&(e.opacity=1),!e.type&&(e.type=1),(void 0===e.maxLodLevel||null===e.maxLodLevel)&&(e.maxLodLevel=19),e.bbox&&e.bbox.length&&(e._fLimitsDegree=new _.E(e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3])),e._uniqRasterId=++jt%2000000001,e._index=0,e._numIndex=0,e._supportURLIndex=0,e._idx=0,e._lodDisplayArr=[],Array.isArray(e.url)&&e.url.length)for(var i={url:e.url},r=0;r<=mt.GLOBE_MIN_CELL_LEVEL;r++)e._lodDisplayArr.push(i);else if("string"==typeof e.url){var s={url:[e.url]};for(r=0;r<=mt.GLOBE_MIN_CELL_LEVEL;r++)e._lodDisplayArr.push(s)}else this.CreateLodDisplayArraysForRaster(e)}},{key:"api_GeoJSONToObjectArrData",value:function(t){var e=[{coords:[],coordsZ:[],attribs:[]}],i=[{coords:[],coordsZ:[],attribs:[]}],r=[{coords:[],coordsZ:[],attribs:[]}];return W.b.Parse(t,e[0],i[0],r[0]),r[0].coords.length||r[0].attribs.length||(r=null),i[0].coords.length||i[0].attribs.length||(i=null),e[0].coords.length||e[0].attribs.length||(e=null),{pointData:e,lineData:i,polygonData:r}}},{key:"Draw3dEditObj",value:function(t){var e=this.gl;switch(e.useProgram(this.Program3D),mt.FOGGED&&this.Xwm2mb(),e.disable(e.DEPTH_TEST),e.enable(e.BLEND),this.GLU.setProjToGL(this.P3DprojectionMatrixLoc),t.type){case ct.POLYGON:t.FEditing&&t.eVal.walker&&t.eVal.updateWalkerPoint(),this.FDrawedWorldDeg.CSIsCommonRegionT(t.obj.Limit)&&0!==t.style.opacity&&t.draw3d();break;case ct.LINE:if(t.FEditing&&t.eVal.walker){this.FLastEditingCallback.show_walker;t.eVal.updateWalkerPoint()}this.FDrawedWorldDeg.CSIsCommonRegionT(t.obj.Limit)&&0!==t.style.opacity&&t.draw3d();break;default:this.FDrawedWorldDeg.CSIsCommonRegionT(t.obj.Limit)&&0!==t.style.opacity&&t.draw3d()}e.enable(e.DEPTH_TEST)}},{key:"X6LjtT",value:function(t,e){if(e.obj.userObj.FActive&&e.FActive){switch(e.type){case ct.POLYGON:e.hasFontIcon&&e.fontBuild(),t.CSIsCommonRegionT(e.obj.Limit)&&(e.coordBuild(),e.style.showDistances===gt.SHOW3D&&e.findDistances(),e.eVal.expandWithoutWalker(),e.eVal.findStartRadius(),e.eVal.setDragPoints());break;case ct.SHAPE:e.hasFontIcon&&e.fontBuild(),t.CSIsCommonRegionT(e.obj.Limit)&&(e.coordBuild(),e.fillGeo());break;case ct.ARCAREA:e.hasFontIcon&&e.fontBuild(),t.CSIsCommonRegionT(e.obj.Limit)&&(e.coordBuild(),e.fillArcAreaGeo(e.radius2,e.radius2,!1),e.fillArcAreaGeo(e.radius1,e.radius1,!0));break;case ct.LINE:e.hasFontIcon&&e.fontBuild(),t.CSIsCommonRegionT(e.obj.Limit)&&(e.coordBuild(),e.style.showDistances===gt.SHOW3D&&e.findDistances(),e.eVal.expandWithoutWalker(),e.eVal.findStartRadius());break;case ct.MODEL:t.CSIsCommonRegionT(e.obj.Limit)&&e.build();break;case ct.POINT:e.hasFontIcon&&e.build()}e.type!==ct.POINT&&e.type!==ct.MODEL&&e.buildEditIcons(e.eVal)}}},{key:"X0sUmz",value:function(){this.ReductionScreenMatrix=new Float32Array(this.FScrW/mt.REDUCTION_SYMBOL_BOX_SIZE*(this.FScrH/mt.REDUCTION_SYMBOL_BOX_SIZE)),this.ReductionScreenMatrixCol=Math.floor(this.FScrW/mt.REDUCTION_SYMBOL_BOX_SIZE)}}]),e}()}).call(this,i(38).Buffer)},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(e,i){s()(this,t),this.x=e,this.y=i}return n()(t,[{key:"SetV",value:function(t,e){this.x=t,this.y=e}},{key:"SetP",value:function(t){this.x=t.x,this.y=t.y}},{key:"SetT",value:function(t){this.x=t.y,this.y=t.x}},{key:"AddV",value:function(t,e){this.x+=t,this.y+=e}},{key:"AddP",value:function(t){this.x+=t.x,this.y+=t.y}},{key:"Multiply",value:function(t){this.x*=t,this.y*=t}},{key:"Div",value:function(t){this.x/=t,this.y/=t}},{key:"Dist2DP",value:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}},{key:"Dist2DV",value:function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))}},{key:"ConvertDegreeToRadyan",value:function(){this.x=b.DegreeToRadyan(this.x),this.y=b.DegreeToRadyan(this.y)}},{key:"ConvertRadyanToDegree",value:function(){this.x=b.RadyanToDegree(this.x),this.y=b.RadyanToDegree(this.y)}},{key:"IsInRegion",value:function(t){return t.IsPointInRegion(this)}}]),t}(),h=function(){function t(e,i,r){s()(this,t),this.x=e,this.y=i,this.z=r}return n()(t,[{key:"SetV",value:function(t,e,i){this.x=t,this.y=e,this.z=i}},{key:"SetP",value:function(t){this.x=t.x,this.y=t.y,this.z=t.z}},{key:"SetVecSub",value:function(t,e){this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z}},{key:"DotProductSet",value:function(t){this.SetV(this.x*t,this.y*t,this.z*t)}},{key:"DotProductSetP",value:function(t,e){this.x=t.x*e,this.y=t.y*e,this.z=t.z*e}},{key:"SetVecAdd",value:function(t,e){this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z}},{key:"SetMid",value:function(t,e){this.x=(t.x+e.x)/2,this.y=(t.y+e.y)/2,this.z=(t.z+e.z)/2}},{key:"Magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"Normalize",value:function(){var t=this.Magnitude();0!==t&&(this.x/=t,this.y/=t,this.z/=t)}},{key:"LayDistance",value:function(t){return(this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)+(this.z-t.z)*(this.z-t.z)}},{key:"Dist3D",value:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)+(this.z-t.z)*(this.z-t.z))}},{key:"VecAdd",value:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}},{key:"VecSub",value:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}},{key:"Div",value:function(t){this.x/=t,this.y/=t,this.z/=t}},{key:"ScalarProduct",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"LayMagnitude",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"isEqualSp",value:function(t){return b.CSSuperZero2(this.x-t.x)&&b.CSSuperZero2(this.y-t.y)&&b.CSSuperZero2(this.z-t.z)}}]),t}(),l=function(){function t(e,i,r,o){s()(this,t),this.x=e,this.y=i,this.z=r,this.w=o}return n()(t,[{key:"VectorMake",value:function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=0}}]),t}(),u=function(){function t(e,i,r){s()(this,t),this.x=e,this.y=i,this.isValid=Boolean(r)}return n()(t,[{key:"ConvertDegreeToRadyan",value:function(){this.x=b.DegreeToRadyan(this.x),this.y=b.DegreeToRadyan(this.y)}},{key:"ConvertRadyanToDegree",value:function(){this.x=b.RadyanToDegree(this.x),this.y=b.RadyanToDegree(this.y)}}]),t}(),d=function(){function t(e,i){s()(this,t),this.x=i,this.y=e}return n()(t,[{key:"SetV",value:function(t,e){this.y=t,this.x=e}},{key:"SetT",value:function(t){this.y=t.y,this.x=t.x}},{key:"SetP",value:function(t){this.y=t.x,this.x=t.y}},{key:"Dist2DT",value:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}},{key:"Dist2DV",value:function(t,e){return Math.sqrt((this.x-e)*(this.x-e)+(this.y-t)*(this.y-t))}},{key:"Magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"LayMagnitude",value:function(){return this.x*this.x+this.y*this.y}}]),t}(),c=function t(){s()(this,t),this.i=0,this.j=0,this.k=0,this.h=0,this.n=0,this.s=0,this.f=0},f=function(){function t(e,i,r,o){s()(this,t),this.LL=new d(0,0),this.UR=new d(0,0),this.LL.y=e,this.LL.x=i,this.UR.y=r,this.UR.x=o}return n()(t,[{key:"Clear",value:function(){this.LL.y=1e30,this.LL.x=1e30,this.UR.y=-1e30,this.UR.x=-1e30}},{key:"SetV",value:function(t,e,i,r){this.LL.y=t,this.LL.x=e,this.UR.y=i,this.UR.x=r}},{key:"ExpandV",value:function(t,e,i,r){this.UR.y=b.Max(this.UR.y,i),this.UR.x=b.Max(this.UR.x,r),this.LL.y=b.Min(this.LL.y,t),this.LL.x=b.Min(this.LL.x,e)}},{key:"ExpandTGW",value:function(t){this.UR.y=b.Max(this.UR.y,t.UR.y),this.UR.x=b.Max(this.UR.x,t.UR.x),this.LL.y=b.Min(this.LL.y,t.LL.y),this.LL.x=b.Min(this.LL.x,t.LL.x)}},{key:"ExpandXY",value:function(t,e){this.UR.y=b.Max(this.UR.y,t),this.UR.x=b.Max(this.UR.x,e),this.LL.y=b.Min(this.LL.y,t),this.LL.x=b.Min(this.LL.x,e)}},{key:"ExpandP",value:function(t){this.UR.x=b.Max(this.UR.x,t.y),this.UR.y=b.Max(this.UR.y,t.x),this.LL.x=b.Min(this.LL.x,t.y),this.LL.y=b.Min(this.LL.y,t.x)}},{key:"CSIsCommonRegionV",value:function(t,e,i,r){return!(this.LL.x>r)&&(!(e>this.UR.x)&&(!(this.LL.y>i)&&!(t>this.UR.y)))}},{key:"CSIsCommonRegionT",value:function(t){return!(this.LL.x>t.UR.x)&&(!(t.LL.x>this.UR.x)&&(!(this.LL.y>t.UR.y)&&!(t.LL.y>this.UR.y)))}},{key:"CSGetCommonRegion",value:function(e){if(this.CSIsCommonRegionT(e)){var i=new t(0,0,0,0);return i.Clear(),i.LL.y=Math.max(this.LL.y,e.LL.y),i.LL.x=Math.max(this.LL.x,e.LL.x),i.UR.y=Math.min(this.UR.y,e.UR.y),i.UR.x=Math.min(this.UR.x,e.UR.x),{res:!0,reg:i}}return{res:!1,reg:!1}}},{key:"IsPointInRegion",value:function(t){return!(this.LL.x>t.y)&&(!(t.y>this.UR.x)&&(!(this.LL.y>t.x)&&!(t.x>this.UR.y)))}},{key:"IsPointInRegionV",value:function(t,e){return!(this.LL.x>e)&&(!(e>this.UR.x)&&(!(this.LL.y>t)&&!(t>this.UR.y)))}},{key:"ExpandByCoords",value:function(t){for(var e=t.length/2;e--;){var i=2*e;this.ExpandXY(t[i],t[i+1])}}},{key:"GetCenterPoint",value:function(t){t.x=(this.UR.y+this.LL.y)/2,t.y=(this.UR.x+this.LL.x)/2}},{key:"CSMakeGeoW",value:function(t,e,i){this.LL.x=t.y-i,this.LL.y=t.x-e,this.UR.x=t.y+i,this.UR.y=t.x+e}},{key:"SetTW",value:function(t){this.UR.x=t.UR.x,this.UR.y=t.UR.y,this.LL.x=t.LL.x,this.LL.y=t.LL.y}},{key:"DegreeToRadyan",value:function(){this.UR.x=b.DegreeToRadyan(this.UR.x),this.UR.y=b.DegreeToRadyan(this.UR.y),this.LL.x=b.DegreeToRadyan(this.LL.x),this.LL.y=b.DegreeToRadyan(this.LL.y)}},{key:"RadyanToDegree",value:function(){this.UR.x=b.RadyanToDegree(this.UR.x),this.UR.y=b.RadyanToDegree(this.UR.y),this.LL.x=b.RadyanToDegree(this.LL.x),this.LL.y=b.RadyanToDegree(this.LL.y)}},{key:"CSGrowGeoWorld",value:function(t){this.UR.y=Math.max(this.UR.y,t.x),this.UR.x=Math.max(this.UR.x,t.y),this.LL.y=Math.min(this.LL.y,t.x),this.LL.x=Math.min(this.LL.x,t.y)}},{key:"CSGeoWorldArea",value:function(){return Math.abs((this.UR.y-this.LL.y)*(this.UR.x-this.LL.x))}}]),t}(),p=function(){function t(){s()(this,t),this.isValid=!1,this.MouseLong=0,this.MouseLat=0,this.MouseZ=0,this.SpacePoint=new h(0,0,0),this.FarCell={}}return n()(t,[{key:"AssignT",value:function(t){this.isValid=t.isValid,this.MouseLong=t.MouseLong,this.MouseLat=t.MouseLat,this.MouseZ=t.MouseZ,Object.assign(this.SpacePoint,t.SpacePoint),this.FarCell=t.FarCell}},{key:"ConvertDegreeToRadyan",value:function(){this.MouseLong=b.DegreeToRadyan(this.MouseLong),this.MouseLat=b.DegreeToRadyan(this.MouseLat)}},{key:"ConvertRadyanToDegree",value:function(){this.MouseLong=b.RadyanToDegree(this.MouseLong),this.MouseLat=b.RadyanToDegree(this.MouseLat)}}]),t}(),F=function t(e,i,r,o){s()(this,t),this.x=e,this.y=i,this.z=r,this.w=o},y=function(){};y.prototype.MultiplyMV=function(t,e,i){var r,s;for(r=4;r--;)for(i[r]=0,s=4;s--;)i[r]+=t[4*s+r]*e[s];return i},y.prototype.MultiplyMM=function(t,e){var i=new Float64Array(32);return i[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],i[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],i[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],i[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],i[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],i[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],i[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],i[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],i[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],i[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],i[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],i[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],i[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],i[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],i[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],i[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],i},y.prototype.MultiplyMP=function(t,e){var i=e[0],r=e[1],s=e[2],o=e[3],n=e[4],a=e[5],h=e[6],l=e[7],u=e[8],d=t[0],c=t[1],f=t[2],p=t[3],F=t[4],y=t[5],A=t[6],g=t[7],C=t[8];return[i*d+r*p+s*A,i*c+r*F+s*g,i*f+r*y+s*C,o*d+n*p+a*A,o*c+n*F+a*g,o*f+n*y+a*C,h*d+l*p+u*A,h*c+l*F+u*g,h*f+l*y+u*C]},y.prototype.InvertM=function(t,e,i){var r=t[10]*t[15]*t[5]+t[14]*t[7]*t[9]+t[6]*t[11]*t[13]-(t[14]*t[11]*t[5]+t[6]*t[15]*t[9]+t[10]*t[7]*t[13]),s=t[14]*t[11]*t[1]+t[2]*t[15]*t[9]+t[10]*t[3]*t[13]-(t[10]*t[15]*t[1]+t[14]*t[3]*t[9]+t[2]*t[11]*t[13]),o=t[6]*t[15]*t[1]+t[14]*t[3]*t[5]+t[2]*t[7]*t[13]-(t[14]*t[7]*t[1]+t[2]*t[15]*t[5]+t[6]*t[3]*t[13]),n=t[10]*t[7]*t[1]+t[2]*t[11]*t[5]+t[6]*t[3]*t[9]-(t[6]*t[11]*t[1]+t[10]*t[3]*t[5]+t[2]*t[7]*t[9]),a=1/(t[0]*r+t[4]*s+t[8]*o+t[12]*n);return!0===i?(e[16]=a*r,e[17]=a*s,e[18]=a*o,e[19]=a*n,e[20]=a*(t[14]*t[11]*t[4]+t[6]*t[15]*t[8]+t[10]*t[7]*t[12]-(t[10]*t[15]*t[4]+t[14]*t[7]*t[8]+t[6]*t[11]*t[12])),e[21]=a*(t[10]*t[15]*t[0]+t[14]*t[3]*t[8]+t[2]*t[11]*t[12]-(t[14]*t[11]*t[0]+t[2]*t[15]*t[8]+t[10]*t[3]*t[12])),e[22]=a*(t[14]*t[7]*t[0]+t[2]*t[15]*t[4]+t[6]*t[3]*t[12]-(t[6]*t[15]*t[0]+t[14]*t[3]*t[4]+t[2]*t[7]*t[12])),e[23]=a*(t[6]*t[11]*t[0]+t[10]*t[3]*t[4]+t[2]*t[7]*t[8]-(t[10]*t[7]*t[0]+t[2]*t[11]*t[4]+t[6]*t[3]*t[8])),e[24]=a*(t[8]*t[13]*t[7]+t[12]*t[5]*t[11]+t[4]*t[9]*t[15]-(t[12]*t[9]*t[7]+t[4]*t[13]*t[11]+t[8]*t[5]*t[15])),e[25]=a*(t[12]*t[9]*t[3]+t[0]*t[13]*t[11]+t[8]*t[1]*t[15]-(t[8]*t[13]*t[3]+t[12]*t[1]*t[11]+t[0]*t[9]*t[15])),e[26]=a*(t[4]*t[13]*t[3]+t[12]*t[1]*t[7]+t[0]*t[5]*t[15]-(t[12]*t[5]*t[3]+t[0]*t[13]*t[7]+t[4]*t[1]*t[15])),e[27]=a*(t[8]*t[5]*t[3]+t[0]*t[9]*t[7]+t[4]*t[1]*t[11]-(t[4]*t[9]*t[3]+t[8]*t[1]*t[7]+t[0]*t[5]*t[11])),e[28]=a*(t[4]*t[13]*t[10]+t[8]*t[5]*t[14]+t[12]*t[9]*t[6]-(t[4]*t[9]*t[14]+t[8]*t[13]*t[6]+t[12]*t[5]*t[10])),e[29]=a*(t[0]*t[9]*t[14]+t[8]*t[13]*t[2]+t[12]*t[1]*t[10]-(t[0]*t[13]*t[10]+t[8]*t[1]*t[14]+t[12]*t[9]*t[2])),e[30]=a*(t[0]*t[13]*t[6]+t[4]*t[1]*t[14]+t[12]*t[5]*t[2]-(t[0]*t[5]*t[14]+t[4]*t[13]*t[2]+t[12]*t[1]*t[6])),e[31]=a*(t[0]*t[5]*t[10]+t[4]*t[9]*t[2]+t[8]*t[1]*t[6]-(t[0]*t[9]*t[6]+t[4]*t[1]*t[10]+t[8]*t[5]*t[2]))):(e[0]=a*r,e[1]=a*s,e[2]=a*o,e[3]=a*n,e[4]=a*(tmp_1*t[4]+t[6]*t[15]*t[8]+t[10]*t[7]*t[12]-(t[10]*t[15]*t[4]+t[14]*t[7]*t[8]+t[6]*t[11]*t[12])),e[5]=a*(t[10]*t[15]*t[0]+t[14]*t[3]*t[8]+t[2]*t[11]*t[12]-(tmp_1*t[0]+t[2]*t[15]*t[8]+t[10]*t[3]*t[12])),e[6]=a*(t[14]*t[7]*t[0]+t[2]*t[15]*t[4]+t[6]*t[3]*t[12]-(t[6]*t[15]*t[0]+t[14]*t[3]*t[4]+t[2]*t[7]*t[12])),e[7]=a*(t[6]*t[11]*t[0]+t[10]*t[3]*t[4]+t[2]*t[7]*t[8]-(t[10]*t[7]*t[0]+t[2]*t[11]*t[4]+t[6]*t[3]*t[8])),e[8]=a*(t[8]*t[13]*t[7]+t[12]*t[5]*t[11]+t[4]*t[9]*t[15]-(t[12]*t[9]*t[7]+t[4]*t[13]*t[11]+t[8]*t[5]*t[15])),e[9]=a*(t[12]*t[9]*t[3]+t[0]*t[13]*t[11]+t[8]*t[1]*t[15]-(t[8]*t[13]*t[3]+t[12]*t[1]*t[11]+t[0]*t[9]*t[15])),e[10]=a*(t[4]*t[13]*t[3]+t[12]*t[1]*t[7]+t[0]*t[5]*t[15]-(t[12]*t[5]*t[3]+t[0]*t[13]*t[7]+t[4]*t[1]*t[15])),e[11]=a*(t[8]*t[5]*t[3]+t[0]*t[9]*t[7]+t[4]*t[1]*t[11]-(t[4]*t[9]*t[3]+t[8]*t[1]*t[7]+t[0]*t[5]*t[11])),e[12]=a*(t[4]*t[13]*t[10]+t[8]*t[5]*t[14]+t[12]*t[9]*t[6]-(t[4]*t[9]*t[14]+t[8]*t[13]*t[6]+t[12]*t[5]*t[10])),e[13]=a*(t[0]*t[9]*t[14]+t[8]*t[13]*t[2]+t[12]*t[1]*t[10]-(t[0]*t[13]*t[10]+t[8]*t[1]*t[14]+t[12]*t[9]*t[2])),e[14]=a*(t[0]*t[13]*t[6]+t[4]*t[1]*t[14]+t[12]*t[5]*t[2]-(t[0]*t[5]*t[14]+t[4]*t[13]*t[2]+t[12]*t[1]*t[6])),e[15]=a*(t[0]*t[5]*t[10]+t[4]*t[9]*t[2]+t[8]*t[1]*t[6]-(t[0]*t[9]*t[6]+t[4]*t[1]*t[10]+t[8]*t[5]*t[2]))),[!0,e]},y.prototype.LookAt=function(t,e,i,r){var s,o,n,a,h,l,u,d,c,f,p=i.x,F=i.y,y=i.z,A=e.x,g=e.y,C=e.z;if(Math.abs(t[0]-A)<1e-6&&Math.abs(t[1]-g)<1e-6&&Math.abs(t[2]-C)<1e-6)return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,void(r[15]=1);u=t[0]-A,d=t[1]-g,c=t[2]-C,s=F*(c*=f=1/Math.sqrt(u*u+d*d+c*c))-y*(d*=f),o=y*(u*=f)-p*c,n=p*d-F*u,(f=Math.sqrt(s*s+o*o+n*n))?(s*=f=1/f,o*=f,n*=f):(s=0,o=0,n=0),a=d*n-c*o,h=c*s-u*n,l=u*o-d*s,(f=Math.sqrt(a*a+h*h+l*l))?(a*=f=1/f,h*=f,l*=f):(a=0,h=0,l=0),r[0]=s,r[1]=a,r[2]=u,r[3]=0,r[4]=o,r[5]=h,r[6]=d,r[7]=0,r[8]=n,r[9]=l,r[10]=c,r[11]=0,r[12]=-(s*t[0]+o*t[1]+n*t[2]),r[13]=-(a*t[0]+h*t[1]+l*t[2]),r[14]=-(u*t[0]+d*t[1]+c*t[2]),r[15]=1},y.prototype.Identity=function(){return new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},y.prototype.InvertMP=function(t,e){var i=t[0],r=t[1],s=t[2],o=t[3],n=t[4],a=t[5],h=t[6],l=t[7],u=t[8],d=u*n-a*l,c=-u*o+a*h,f=l*o-n*h,p=i*d+r*c+s*f;return p?[d*(p=1/p),(-u*r+s*l)*p,(a*r-s*n)*p,c*p,(u*i-s*h)*p,(-a*i+s*o)*p,f*p,(-l*i+r*h)*p,(n*i-r*o)*p]:null};var A=new y,g=function(){function t(){s()(this,t),this.mind=1e30,this.fd=!1,this.orj=new h(0,0,0),this.dir2=new h(0,0,0),this.orj4=new l(0,0,0,0),this.dir24=new l(0,0,0,0),this.resp=new l(0,0,0,0),this.p1=new h(0,0,0),this.p2=new h(0,0,0),this.p3=new h(0,0,0),this.rp1=new h(0,0,0),this.rp2=new h(0,0,0),this.rp3=new h(0,0,0),this.rv1=new a(0,0),this.rv2=new a(0,0),this.rv3=new a(0,0),this.Shoot=new h(0,0,0),this.RShoot=new h(0,0,0),this.edge1=new h(0,0,0),this.edge2=new h(0,0,0),this.tvec=new h(0,0,0),this.pvec=new h(0,0,0),this.qvec=new h(0,0,0),this.qvec4=new l(0,0,0,0),this.tvec4=new l(0,0,0,0),this.v1=new l(0,0,0,0),this.v2=new l(0,0,0,0),this.RMouseLong=0,this.RMouseLat=0}return n()(t,[{key:"RayCast",value:function(){return!(!this.CSintersectRayTriangle()||!this.XqKkRU())&&(Object.assign(this.Shoot,this.resp),!0)}},{key:"Ray",value:function(){var t=!1;if(this.RayCast()){var e=this.orj.Dist3D(this.Shoot);e<this.mind&&(this.mind=e,Object.assign(this.rp1,this.p1),Object.assign(this.rp2,this.p2),Object.assign(this.rp3,this.p3),Object.assign(this.RShoot,this.Shoot),t=!0,this.fd=!0)}return t}},{key:"Cross",value:function(t,e,i){t.x=e.y*i.z-e.z*i.y,t.y=e.z*i.x-e.x*i.z,t.z=e.x*i.y-e.y*i.x}},{key:"Dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}},{key:"Sub",value:function(t,e,i){t.x=e.x-i.x,t.y=e.y-i.y,t.z=e.z-i.z}},{key:"CSintersectRayTriangle",value:function(){var t,e,i;return this.Sub(this.edge1,this.p2,this.p1),this.Sub(this.edge2,this.p3,this.p1),this.Cross(this.pvec,this.dir2,this.edge2),!((i=this.Dot(this.edge1,this.pvec))<1e-13&&i>-1e-13)&&(this.Sub(this.tvec,this.orj,this.p1),!((t=this.Dot(this.tvec,this.pvec))<0||t>i)&&(this.Cross(this.qvec,this.tvec,this.edge1),!((e=this.Dot(this.dir2,this.qvec))<0||t+e>i)))}},{key:"P3DVectorCrossProduct",value:function(t,e,i){i.x=t.y*e.z-t.z*e.y,i.y=t.z*e.x-t.x*e.z,i.z=t.x*e.y-t.y*e.x}},{key:"P4DVectorCrossProduct",value:function(t,e,i){i.x=t.y*e.z-t.z*e.y,i.y=t.z*e.x-t.x*e.z,i.z=t.x*e.y-t.y*e.x,i.w=0}},{key:"VectorCombine",value:function(t,e,i,r){r.x=t.x+i*e.x,r.y=t.y+i*e.y,r.z=t.z+i*e.z,r.w=t.w+i*e.w}},{key:"P3DVectorSubtract",value:function(t,e,i){i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i.w=0}},{key:"P4DVectorSubtract",value:function(t,e,i){i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i.w=0}},{key:"P3DVectorDotProduct",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}},{key:"P4DVectorDotProduct",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}},{key:"XqKkRU",value:function(){var t,e,i,r,s=0,o=0;return this.P3DVectorSubtract(this.p2,this.p1,this.v1),this.P3DVectorSubtract(this.p3,this.p1,this.v2),this.P3DVectorCrossProduct(this.dir24,this.v2,this.pvec),!((e=this.P3DVectorDotProduct(this.v1,this.pvec))<1e-13&&e>-1e-13)&&(i=1/e,this.P4DVectorSubtract(this.orj4,this.p1,this.tvec4),(t=this.P3DVectorDotProduct(this.tvec4,this.pvec)*i)<0||t>1?r=!1:(this.P4DVectorCrossProduct(this.tvec4,this.v1,this.qvec4),(r=(o=this.P4DVectorDotProduct(this.dir24,this.qvec4)*i)>=-1e-13&&t+o<=1+1e-13)&&((s=this.P4DVectorDotProduct(this.v2,this.qvec4)*i)>0?this.VectorCombine(this.orj4,this.dir24,s,this.resp):r=!1)),r)}},{key:"CSSuperZero",value:function(t){return Math.abs(t)<D}},{key:"EnterpolateLatLong",value:function(){var t,e,i,r,s,o,n,a,h,l,u=0,d=0;return t=this.RShoot.x-this.rp1.x,e=this.RShoot.y-this.rp1.y,i=this.rp2.x-this.rp1.x,r=this.rp3.x-this.rp1.x,s=this.rp2.y-this.rp1.y,o=this.rp3.y-this.rp1.y,n=this.RShoot.z-this.rp1.z,a=this.rp2.z-this.rp1.z,h=this.rp3.z-this.rp1.z,this.CSSuperZero(i)||this.CSSuperZero(r)||this.CSSuperZero(s)||this.CSSuperZero(o)||this.CSSuperZero(i*o-s*r)?this.CSSuperZero(i)||this.CSSuperZero(a)||this.CSSuperZero(h)||this.CSSuperZero(r)||this.CSSuperZero(i*h-a*r)?this.CSSuperZero(a)||this.CSSuperZero(o)||this.CSSuperZero(s)||this.CSSuperZero(h)||this.CSSuperZero(s*h-a*o)?(l=!1,u=0,d=0):(u=(s*n-a*e)/(s*h-a*o),d=(o*n-h*e)/(o*a-h*s),l=!0):(u=(i*n-a*t)/(i*h-a*r),d=(r*n-h*t)/(r*a-h*i),l=!0):(u=(i*e-s*t)/(i*o-s*r),d=(r*e-o*t)/(r*s-o*i),l=!0),l&&(this.RMouseLong=this.rv1.x+(this.rv2.x-this.rv1.x)*d+(this.rv3.x-this.rv1.x)*u,this.RMouseLat=this.rv1.y+(this.rv2.y-this.rv1.y)*d+(this.rv3.y-this.rv1.y)*u),l}}]),t}(),C=i(0),b=new(function(){function t(){s()(this,t),this.result=!1}return n()(t,[{key:"Pi",value:function(){return Math.PI}},{key:"Sign",value:function(t){return t>0?1:t<0?-1:0}},{key:"PiDiv2",value:function(){return Math.PI/2}},{key:"CSVeryBigZero",value:function(t){return Math.abs(t)<x}},{key:"CSBigZero",value:function(t){return Math.abs(t)<O}},{key:"CSZero",value:function(t){return Math.abs(t)<R}},{key:"CSZero2",value:function(t){return Math.abs(t)<m}},{key:"CSVerySuperZero",value:function(t){return Math.abs(t)<P}},{key:"CSSuperZero",value:function(t){return Math.abs(t)<D}},{key:"CSSuperZero2",value:function(t){return Math.abs(t)<E}},{key:"Odd",value:function(t){return!0&t}},{key:"Ordinary",value:function(t){return t?1:0}},{key:"Sqrt",value:function(t){return Math.sqrt(t)}},{key:"Sqr",value:function(t){return t*t}},{key:"Max",value:function(t,e){return t>e?t:e}},{key:"Min",value:function(t,e){return t>e?e:t}},{key:"Frac",value:function(t){return t-parseInt(t)}},{key:"Trunc",value:function(t){return parseInt(t)}},{key:"DegreeToRadyan",value:function(t){return t*Math.PI/180}},{key:"RadyanToDegree",value:function(t){return 180*t/Math.PI}},{key:"_90to180",value:function(t){return Math.PI-(t+Math.PI/2)}},{key:"_90to0",value:function(t){return t+Math.PI/2}},{key:"_180to90",value:function(t){return-(t+Math.PI/2-Math.PI)}},{key:"Swap",value:function(t){return(t>>0&255)<<24|(t>>8&255)<<16|(t>>16&255)<<8|(t>>24&255)<<0}},{key:"GeoTo3D",value:function(t,e,i,r){r.x=i*Math.sin(this._90to180(e))*Math.cos(t),r.y=i*Math.sin(this._90to180(e))*Math.sin(t),r.z=i*Math.cos(this._90to180(e))}},{key:"GeoTo3DP",value:function(t,e,i){i.x=e*Math.sin(this._90to180(t.y))*Math.cos(t.x),i.y=e*Math.sin(this._90to180(t.y))*Math.sin(t.x),i.z=e*Math.cos(this._90to180(t.y))}},{key:"GeoTo3DForLight",value:function(t,e,i,r){r[0]=i*Math.sin(this._90to180(e))*Math.cos(t),r[1]=i*Math.sin(this._90to180(e))*Math.sin(t),r[2]=i*Math.cos(this._90to180(e))}},{key:"CSAngleV2",value:function(t,e){return t>0&&e>0?180*Math.atan(e/t)/Math.PI:t<0&&e>0?180*Math.atan(-t/e)/Math.PI+90:t<0&&e<0?180*Math.atan(e/t)/Math.PI+180:t>0&&e<0?180*Math.atan(-t/e)/Math.PI+270:0===t&&e>0?90:t<0&&0===e?180:0===t&&e<0?270:0}},{key:"CSAngleV4",value:function(t,e,i,r){return this.CSAngleV2(i-t,r-e)}},{key:"CSAngleT",value:function(t,e){return this.CSAngleV2(e.y-t.y,e.x-t.x)}},{key:"CSNormalizeAngle",value:function(t){if(t>360)t-=360*this.Trunc(t/360);else if(t<0)for(;t<0;)t+=360;return t}},{key:"CSRotate",value:function(t,e,i,r,s,o){o.x=(r-e)*Math.sin(t)+(s-i)*Math.cos(t)+i,o.y=(r-e)*Math.cos(t)-(s-i)*Math.sin(t)+e}},{key:"CalcPosition",value:function(t,e,i,r,s){var o,n,a=e.Dist2DT(i);a<1e-15?t.SetT(e):(n=i.y-e.y,o=i.x-e.x,t.y=e.y+(o*s+n*r)/a,t.x=e.x+(o*r-n*s)/a)}},{key:"CalcPositionV",value:function(t,e,i,r,s,o,n){var a,h;return[e+((h=s-i)*n+(a=r-e)*o)/t,i+(h*o-a*n)/t]}},{key:"CarToSpher",value:function(t,e){e.x=t.Magnitude(),e.y=Math.acos(t.z/e.x),NaN===e.y&&(e.y=t.y<0?Math.PI:0),e.y=this._180to90(e.y),e.z=Math.atan2(t.y,t.x),NaN===e.z&&(e.z=0)}},{key:"CarToSpher2",value:function(t,e){var i=Math.acos(t.z/t.Magnitude());NaN===i&&(i=t.y<0?Math.PI:0),i=this._180to90(i);var r=Math.atan2(t.y,t.x);NaN===r&&(r=0),e.x=r,e.y=i}},{key:"Rot3D_ToGeo",value:function(t,e,i,r,s){this.CSRotate(e.x,0,0,t.y,t.z,i),t.y=i.y,t.z=i.x,this.CSRotate(-e.y,0,0,t.x,t.z,i),t.x=i.y,t.z=i.x,this.CSRotate(e.z,0,0,t.x,t.y,i),t.x=i.y,t.y=i.x,this.CarToSpher(t,r),s.x=r.z,s.y=r.y}},{key:"Rotate3D",value:function(t,e,i,r,s){this.CSRotate(e,0,0,t.y,t.z,s),t.y=s.y,t.z=s.x,this.CSRotate(i,0,0,t.x,t.z,s),t.x=s.y,t.z=s.x,this.CSRotate(r,0,0,t.x,t.y,s),t.x=s.y,t.y=s.x}},{key:"Rotate3DCenter",value:function(t,e,i,r){var s=this.DegreeToRadyan(t),o=this.DegreeToRadyan(e),n=this.DegreeToRadyan(i),a=Math.sin(s),h=Math.sin(o),l=Math.sin(n),u=Math.cos(s),d=Math.cos(o),c=Math.cos(n),f=r.y*d-r.z*h,p=r.y*h+r.z*d,F=r.x*u-p*a;r.z=r.x*a+p*u,r.x=F*c-f*l,r.y=F*l+f*c}},{key:"GeoTo3DRotBase",value:function(t,e,i){this.CSRotate(-e.z,0,0,t.x,t.y,i),t.x=i.y,t.y=i.x,this.CSRotate(e.y,0,0,t.x,t.z,i),t.x=i.y,t.z=i.x,this.CSRotate(-e.x,0,0,t.y,t.z,i),t.y=i.y,t.z=i.x}},{key:"GeoTo3DRot",value:function(t,e,i,r,s,o){this.GeoTo3D(t,e,i,o),this.GeoTo3DRotBase(o,r,s)}},{key:"GetCross",value:function(t,e,i){i.x=t.y*e.z-t.z*e.y,i.y=-t.x*e.z+t.z*e.x,i.z=t.x*e.y-t.y*e.x}},{key:"GetNormal",value:function(t,e,i,r){r.x=(e.y-t.y)*(i.z-t.z)-(e.z-t.z)*(i.y-t.y),r.y=-(e.x-t.x)*(i.z-t.z)+(e.z-t.z)*(i.x-t.x),r.z=(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x),r.Normalize()}},{key:"Orientation",value:function(t,e,i,r,s,o){var n=(i-t)*(o-e)-(s-t)*(r-e);if(!(n>0))return n<0?-1:void 0}},{key:"X7UX4S",value:function(t,e,i){t.y+=e/i}},{key:"RotatePointAroundVector",value:function(t,e,i,r,s){var o=e*t.x,n=e*t.y,a=e*t.z,h=i*t.x,l=i*t.y,u=i*t.z,d=r*t.x,c=r*t.y,f=r*t.z,p=Math.sin(s),F=Math.cos(s),y=o+l+f;t.x=e*y+(t.x*(i*i+r*r)-e*(l+f))*F+(-c+u)*p,t.y=i*y+(t.y*(e*e+r*r)-i*(o+f))*F+(d-a)*p,t.z=r*y+(t.z*(e*e+i*i)-r*(o+l))*F+(-h+n)*p}},{key:"AzimuthOf2PointsOnSphere",value:function(t,e){var i=0;try{i=this.RadyanToDegree(Math.atan2(Math.cos(t.y)*Math.sin(e.y)-Math.sin(t.y)*Math.cos(e.y)*Math.cos(e.x-t.x),Math.sin(e.x-t.x)*Math.cos(e.y))),i=this.CSNormalizeAngle(360-i+90)}catch(t){i=0}return i}},{key:"AzimuthOf2PointsOnSphereForAngText",value:function(t,e,i,r){var s=0;t=this.DegreeToRadyan(t),e=this.DegreeToRadyan(e),i=this.DegreeToRadyan(i),r=this.DegreeToRadyan(r);try{s=this.RadyanToDegree(Math.atan2(Math.cos(e)*Math.sin(r)-Math.sin(e)*Math.cos(r)*Math.cos(i-t),Math.sin(i-t)*Math.cos(r))),s=this.CSNormalizeAngle(360-s+90)}catch(t){s=0}return s}},{key:"PolyGetArea",value:function(t){if(t.length/2>2){var e,i,r=0,s=0,o=0,n=0,a=0,h=0;e=t[0],i=t[1],o=t[2],n=t[3];var l=t.length;for(s=4;s<l;s+=2)r=r+(n-i)*((a=t[s])-e)-((h=t[s+1])-i)*(o-e),o=a,n=h;return r*=.5}}},{key:"PolyIsCW",value:function(t){return this.PolyGetArea(t)>0}},{key:"PolyTraverse",value:function(t){if(t.length/2>=2){var e,i=0,r=0,s=t.length/2;for(e=0;e<s;e+=2){i=t[e],r=t[e+1];var o=t.length-1-e;t[e]=t[o-1],t[e+1]=t[o],t[o-1]=i,t[o]=r}}}},{key:"PolyMakeCCW",value:function(t){var e=this.PolyIsCW(t);return e&&this.PolyTraverse(t),e}},{key:"PolyGetCenter",value:function(t,e){var i;for(e.x=0,e.y=0,i=0;i<t.length;i++)e.AddP(t[i]);t.length&&e.Div(t.length)}},{key:"Quat2Matrix4",value:function(t){var e=new Float64Array(4),i=new Float64Array(4),r=new Float64Array(4),s=new Float64Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],i[0]=t[4],i[1]=t[5],i[2]=t[6],i[3]=t[7],r[0]=t[8],r[1]=t[9],r[2]=t[10],r[3]=t[11],s[0]=t[12],s[1]=t[13],s[2]=t[14],s[3]=t[15],[e,i,r,s]}},{key:"Matrix4ToQuat",value:function(t){var e=new Float64Array(16);return e[0]=t[0][0],e[1]=t[0][1],e[2]=t[0][2],e[3]=t[0][3],e[4]=t[1][0],e[5]=t[1][1],e[6]=t[1][2],e[7]=t[1][3],e[8]=t[2][0],e[9]=t[2][1],e[10]=t[2][2],e[11]=t[2][3],e[12]=t[3][0],e[13]=t[3][1],e[14]=t[3][2],e[15]=t[3][3],e}},{key:"quaternion",value:function(t,e,i,r,s){var o,n,a,h,l,u,d,c,f;o=e*e,n=i*i,a=r*r,h=e*i,l=e*r,u=i*r,d=s*e,c=s*i,f=s*r,t[0]=1-2*n-2*a,t[1]=2*h+2*f,t[2]=2*l-2*c,t[4]=2*h-2*f,t[5]=1-2*o-2*a,t[6]=2*u+2*d,t[8]=2*l+2*c,t[9]=2*u-2*d,t[10]=1-2*o-2*n}},{key:"quatidentity",value:function(t){var e=new Float64Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}},{key:"quatnext",value:function(t,e,i){t[0]=e[0]*i[0]+e[1]*i[4]+e[2]*i[8],t[1]=e[0]*i[1]+e[1]*i[5]+e[2]*i[9],t[2]=e[0]*i[2]+e[1]*i[6]+e[2]*i[10],t[4]=e[4]*i[0]+e[5]*i[4]+e[6]*i[8],t[5]=e[4]*i[1]+e[5]*i[5]+e[6]*i[9],t[6]=e[4]*i[2]+e[5]*i[6]+e[6]*i[10],t[8]=e[8]*i[0]+e[9]*i[4]+e[10]*i[8],t[9]=e[8]*i[1]+e[9]*i[5]+e[10]*i[9],t[10]=e[8]*i[2]+e[9]*i[6]+e[10]*i[10]}},{key:"FlyGetRotationMatrix",value:function(t,e,i,r,s,o){var n=Math.sqrt(.5*(1+t.ScalarProduct(e))),a=Math.acos(n)/i,h=!(Math.abs(this.RadyanToDegree(Math.acos(n)))<r);h||(a=Math.acos(n));var l=Math.sin(a);return this.GetCross(t,e,o),o.Normalize(),o.x*=l,o.y*=l,o.z*=l,this.quaternion(s,o.x,o.y,o.z,Math.cos(a)),h}},{key:"FlyGetRotationMatrix2",value:function(t,e,i,r,s){this.GetCross(t,e,s),s.Normalize(),s.DotProductSet(Math.sin(i)),this.quaternion(r,s.x,s.y,s.z,Math.cos(i))}},{key:"FlyGetRotationAngle",value:function(t,e){return this.RadyanToDegree(Math.acos(Math.sqrt(.5*(1+t.ScalarProduct(e)))))}},{key:"GetRotationMatrix",value:function(t,e,i,r){var s=t.ScalarProduct(e),o=Math.sqrt(.5*(1-s)),n=Math.sqrt(.5*(1+s));return this.GetCross(t,e,r),r.Normalize(),r.DotProductSet(o),this.quaternion(i,r.x,r.y,r.z,n),this.RadyanToDegree(Math.acos(n))}},{key:"GetRotationMatrixByAngle",value:function(t,e,i,r,s){var o=Math.sin(s);this.GetCross(t,e,r),r.Normalize(),r.x*=o,r.y*=o,r.z*=o,this.quaternion(i,r.x,r.y,r.z,Math.cos(s))}},{key:"EulOrd",value:function(t,e,i,r){return(((t<<1)+e<<1)+i<<1)+r}},{key:"EulOrdXYZs",value:function(){return this.EulOrd(V,U,w,B)}},{key:"EulGetOrd",value:function(t,e){var i=t;e.f=1&i,i>>=1,e.s=1&i,i>>=1,e.n=1&i,i>>=1,e.i=_[3&i],e.j=I[e.i+e.n],e.k=I[e.i+1-e.n],e.h=1===e.s?e.k:e.i}},{key:"EulFromHMatrix",value:function(t,e,i,r){var s,o,n;this.EulGetOrd(e,i),i.s===M?(s=Math.sqrt(t[i.i][i.j]*t[i.i][i.j]+t[i.i][i.k]*t[i.i][i.k]))>16*Z?(r.x=Math.atan2(t[i.i][i.j],t[i.i][i.k]),r.y=Math.atan2(s,t[i.i][i.i]),r.z=Math.atan2(t[i.j][i.i],-t[i.k][i.i])):(r.x=Math.atan2(-t[i.j][i.k],t[i.j][i.j]),r.y=Math.atan2(s,t[i.i][i.i]),r.z=0):(o=Math.sqrt(t[i.i][i.i]*t[i.i][i.i]+t[i.j][i.i]*t[i.j][i.i]))>16*Z?(r.x=Math.atan2(t[i.k][i.j],t[i.k][i.k]),r.y=Math.atan2(-t[i.k][i.i],o),r.z=Math.atan2(t[i.j][i.i],t[i.i][i.i])):(r.x=Math.atan2(-t[i.j][i.k],t[i.j][i.j]),r.y=Math.atan2(-t[i.k][i.i],o),r.z=0),i.n===k&&(r.x=-r.x,r.y=-r.y,r.z=-r.z),i.f===G&&(n=r.x,r.x=r.z,r.z=n),r.w=e}},{key:"EulToHMatrix",value:function(t,e,i){var r,s,o,n,a,h,l,u,d,c,f,p,F,y=0;this.EulGetOrd(parseInt(t.w),e),e.f===G&&(y=t.x,t.x=t.z,t.z=y),e.n===k&&(t.x=-t.x,t.y=-t.y,t.z=-t.z),r=t.x,s=t.y,o=t.z,n=Math.cos(r),a=Math.cos(s),h=Math.cos(o),l=Math.sin(r),u=Math.sin(s),c=n*h,f=n*(d=Math.sin(o)),p=l*h,F=l*d,e.s===M?(i[e.i][e.i]=a,i[e.i][e.j]=u*l,i[e.i][e.k]=u*n,i[e.j][e.i]=u*d,i[e.j][e.j]=-a*F+c,i[e.j][e.k]=-a*f-p,i[e.k][e.i]=-u*h,i[e.k][e.j]=a*p+f,i[e.k][e.k]=a*c-F):(i[e.i][e.i]=a*h,i[e.i][e.j]=u*p-f,i[e.i][e.k]=u*c+F,i[e.j][e.i]=a*d,i[e.j][e.j]=u*F+c,i[e.j][e.k]=u*f-p,i[e.k][e.i]=-u,i[e.k][e.j]=a*l,i[e.k][e.k]=a*n),i[z][V]=0,i[z][j]=0,i[z][N]=0,i[V][z]=0,i[j][z]=0,i[N][z]=0,i[z][z]=1}},{key:"MatrixConcatenate",value:function(t,e,i){t[0]=e[0]*i[0]+e[1]*i[4]+e[2]*i[8]+e[3]*i[12],t[1]=e[0]*i[1]+e[1]*i[5]+e[2]*i[9]+e[3]*i[13],t[2]=e[0]*i[2]+e[1]*i[6]+e[2]*i[10]+e[3]*i[14],t[3]=e[0]*i[3]+e[1]*i[7]+e[2]*i[11]+e[3]*i[15],t[4]=e[4]*i[0]+e[5]*i[4]+e[6]*i[8]+e[7]*i[12],t[5]=e[4]*i[1]+e[5]*i[5]+e[6]*i[9]+e[7]*i[13],t[6]=e[4]*i[2]+e[5]*i[6]+e[6]*i[10]+e[7]*i[14],t[7]=e[4]*i[3]+e[5]*i[7]+e[6]*i[11]+e[7]*i[15],t[8]=e[8]*i[0]+e[9]*i[4]+e[10]*i[8]+e[11]*i[12],t[9]=e[8]*i[1]+e[9]*i[5]+e[10]*i[9]+e[11]*i[13],t[10]=e[8]*i[2]+e[9]*i[6]+e[10]*i[10]+e[11]*i[14],t[11]=e[8]*i[3]+e[9]*i[7]+e[10]*i[11]+e[11]*i[15],t[12]=e[12]*i[0]+e[13]*i[4]+e[14]*i[8]+e[15]*i[12],t[13]=e[12]*i[1]+e[13]*i[5]+e[14]*i[9]+e[15]*i[13],t[14]=e[12]*i[2]+e[13]*i[6]+e[14]*i[10]+e[15]*i[14],t[15]=e[12]*i[3]+e[13]*i[7]+e[14]*i[11]+e[15]*i[15]}},{key:"CalcViewVolumePlanes",value:function(t,e,i,r){this.MatrixConcatenate(i,t,e),r[0][0]=i[3]-i[0],r[0][1]=i[7]-i[4],r[0][2]=i[11]-i[8],r[0][3]=i[15]-i[12],r[1][0]=i[3]+i[0],r[1][1]=i[7]+i[4],r[1][2]=i[11]+i[8],r[1][3]=i[15]+i[12],r[2][0]=i[3]+i[1],r[2][1]=i[7]+i[5],r[2][2]=i[11]+i[9],r[2][3]=i[15]+i[13],r[3][0]=i[3]-i[1],r[3][1]=i[7]-i[5],r[3][2]=i[11]-i[9],r[3][3]=i[15]-i[13],r[4][0]=i[3]- -i[2],r[4][1]=i[7]- -i[6],r[4][2]=i[11]- -i[10],r[4][3]=i[15]- -i[14],r[5][0]=i[3]+-i[2],r[5][1]=i[7]+-i[6],r[5][2]=i[11]+-i[10],r[5][3]=i[15]+-i[14]}},{key:"DistanceFromPlane",value:function(t,e){return t[0]*e.x+t[1]*e.y+t[2]*e.z+t[3]}},{key:"GluUnProject",value:function(t,e,i,r,s,o,n,a){var h;if(h=A.MultiplyMM(r,s),!A.InvertM(h,h,!0)[0])return!1;h[0]=2*(t-o[n+0])/o[n+2]-1,h[1]=2*(e-o[n+1])/o[n+3]-1,h[2]=2*i-1,h[3]=1;var l=h.slice(0,16),u=h.slice(16,32);if(0===(a=A.MultiplyMV(u,l,a))[3])return[!1,a];a[3]=1/a[3],a[0]*=a[3],a[1]*=a[3],a[2]*=a[3];var d=[!0];return d[1]=a.slice(),d}},{key:"GluProject",value:function(t,e,i,r,s,o,n,a){var h=new Float64Array(8);return h[0]=r[0]*t+r[4]*e+r[8]*i+r[12],h[1]=r[1]*t+r[5]*e+r[9]*i+r[13],h[2]=r[2]*t+r[6]*e+r[10]*i+r[14],h[3]=r[3]*t+r[7]*e+r[11]*i+r[15],h[4]=s[0]*h[0]+s[4]*h[1]+s[8]*h[2]+s[12]*h[3],h[5]=s[1]*h[0]+s[5]*h[1]+s[9]*h[2]+s[13]*h[3],h[6]=s[2]*h[0]+s[6]*h[1]+s[10]*h[2]+s[14]*h[3],h[7]=-h[2],0===h[7]?0:(h[7]=1/h[7],h[4]*=h[7],h[5]*=h[7],h[6]*=h[7],a[0]=(.5*h[4]+.5)*o[2]+o[0],a[1]=(.5*h[5]+.5)*o[3]+o[1],a[2]=.5*(1+h[6]),1)}},{key:"NearestPowOfUpper",value:function(t){var e=Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)));return e>1024&&(e=1024),e}},{key:"NearestPowOfUpperForImage",value:function(t,e){var i=Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)));return i>e&&(i=e),i}},{key:"NearestPowOfUpperForImageLayer",value:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))}},{key:"GetDistanceFromLatLonInMeter",value:function(t,e,i,r){var s=this.DegreeToRadyan(i-t),o=this.DegreeToRadyan(r-e),n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.DegreeToRadyan(t))*Math.cos(this.DegreeToRadyan(i))*Math.sin(o/2)*Math.sin(o/2),a=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return C.z.GLOBE_RADIUS*a/C.z.GLOBE_RADIUS_K}},{key:"CSGreatCircleDegreeAngle",value:function(t,e){var i,r=t.ScalarProduct(e)/(t.Magnitude()*e.Magnitude());return r>1&&(r=1),r<-1&&(r=-1),i=Math.acos(r),this.RadyanToDegree(i)}},{key:"CSDist3DGreatCircleDegree",value:function(t,e,i,r){var s=new a(t,e),o=new a(i,r),n=new h(0,0,0),l=new h(0,0,0);return s.ConvertDegreeToRadyan(),o.ConvertDegreeToRadyan(),this.GeoTo3DP(s,C.z.GLOBE_RADIUS_K,n),n.Normalize(),this.GeoTo3DP(o,C.z.GLOBE_RADIUS_K,l),l.Normalize(),this.CSGreatCircleDegreeAngle(n,l)*(2*Math.PI)/360*(C.z.GLOBE_RADIUS/C.z.GLOBE_RADIUS_K)}},{key:"RotatePoint",value:function(t,e,i){var r=new h(0,0,0),s=new a(0,0);return this.GeoTo3DP(t,C.z.GLOBE_RADIUS,r),r.Normalize(),this.RotatePointAroundVector(r,e.x,e.y,e.z,this.DegreeToRadyan(i)),r.DotProductSetP(r,C.z.GLOBE_RADIUS),this.CarToSpher2(r,s),s.ConvertRadyanToDegree(),s}},{key:"RotatePointAndFindP2D",value:function(t,e,i,r){var s=new h(0,0,0);this.GeoTo3DP(t,C.z.GLOBE_RADIUS,s),s.Normalize(),this.RotatePointAroundVector(s,e.x,e.y,e.z,this.DegreeToRadyan(i)),s.DotProductSetP(s,C.z.GLOBE_RADIUS),this.CarToSpher2(s,r),r.ConvertRadyanToDegree()}},{key:"FindPointAtBeginOfLine_ByDistAngle",value:function(t,e,i,r,s){var o,n=new h(0,0,0);i=Math.abs(i),o=-this.AzimuthOf2PointsOnSphere(t,e)+r,this.GeoTo3DP(t,C.z.GLOBE_RADIUS,n),n.Normalize(),this.X7UX4S(t,i,C.z.GLOBE_RADIUS),this.RotatePointAndFindP2D(t,n,o,s)}},{key:"MakeParallelGeoRadyan",value:function(t,e,i,r,s,o){var n,a=new h(0,0,0);i=Math.abs(i),n=r?-this.AzimuthOf2PointsOnSphere(t,e)-90:90-this.AzimuthOf2PointsOnSphere(t,e),this.GeoTo3DP(t,C.z.GLOBE_RADIUS,a),this.X7UX4S(t,i,C.z.GLOBE_RADIUS),a.Normalize(),this.RotatePointAndFindP2D(t,a,n,s),n=r?90-this.AzimuthOf2PointsOnSphere(e,t):-this.AzimuthOf2PointsOnSphere(e,t)-90,this.GeoTo3DP(e,C.z.GLOBE_RADIUS,a),this.X7UX4S(e,i,C.z.GLOBE_RADIUS),a.Normalize(),this.RotatePointAndFindP2D(e,a,n,o)}},{key:"MakeRadyan2DPoints",value:function(t,e,i,r,s,o){t.SetV(e,i),r.SetV(s,o),t.ConvertDegreeToRadyan(),r.ConvertDegreeToRadyan()}},{key:"MakeParallelLineStringDeg",value:function(t,e,i,r,s){var o,n=[],h=new a(0,0),l=new a(0,0),u=new a(0,0),d=new a(0,0),c=new a(0,0),f=new a(0,0),p=new a(0,0);if((e=Math.abs(e))<E)n=t.slice();else{var F=t.length-2;for(o=0;o<F;o+=2)0===o?(this.MakeRadyan2DPoints(f,t[o],t[o+1],p,t[o+2],t[o+3]),this.FindPointAtBeginOfLine_ByDistAngle(f,p,e,s,h),n[o]=h.x,n[o+1]=h.y):(this.MakeRadyan2DPoints(f,t[o-2],t[o-1],p,t[o],t[o+1]),this.MakeParallelGeoRadyan(f,p,e,i,l,u),this.MakeRadyan2DPoints(f,t[o],t[o+1],p,t[o+2],t[o+3]),this.MakeParallelGeoRadyan(f,p,e,i,d,c),this.CSLineIntersection(h,l,u,d,c).result?(n[o]=h.x,n[o+1]=h.y):(this.MakeRadyan2DPoints(f,t[o],t[o+1],p,t[o+2],t[o+3]),this.FindPointAtBeginOfLine_ByDistAngle(f,p,e,s,h),n[o]=h.x,n[o+1]=h.y));this.MakeRadyan2DPoints(f,t[t.length-2],t[t.length-1],p,t[t.length-4],t[t.length-3]),this.FindPointAtBeginOfLine_ByDistAngle(f,p,e,-s,h),n[t.length-2]=h.x,n[t.length-1]=h.y,r&&t.length>=6&&(this.MakeRadyan2DPoints(f,t[t.length-2],t[t.length-1],p,t[0],t[1]),this.MakeParallelGeoRadyan(f,p,e,i,l,u),this.MakeRadyan2DPoints(f,t[0],t[1],p,t[2],t[3]),this.MakeParallelGeoRadyan(f,p,e,i,d,c),this.CSLineIntersection(h,l,u,d,c).result?(n[0]=h.x,n[1]=h.y):(this.MakeRadyan2DPoints(f,t[0],t[1],p,t[2],t[3]),this.FindPointAtBeginOfLine_ByDistAngle(f,p,e,s,h),n[0]=h.x,n[1]=h.y),this.MakeRadyan2DPoints(f,t[t.length-4],t[t.length-3],p,t[t.length-2],t[t.length-1]),this.MakeParallelGeoRadyan(f,p,e,i,l,u),this.MakeRadyan2DPoints(f,t[t.length-2],t[t.length-1],p,t[0],t[1]),this.MakeParallelGeoRadyan(f,p,e,i,d,c),this.CSLineIntersection(h,l,u,d,c).result?(n[t.length-2]=h.x,n[t.length-1]=h.y):(this.MakeRadyan2DPoints(f,t[t.length-2],t[t.length-1],p,t[0],t[1]),this.FindPointAtBeginOfLine_ByDistAngle(f,p,e,s,h),n[t.length-2]=h.x,n[t.length-1]=h.y))}return n}},{key:"CSExpandGeoRegion",value:function(t,e,i){var r=Math.abs(t.UR.y-t.LL.y)*e,s=Math.abs(t.UR.x-t.LL.x)*i;t.UR.y+=r,t.UR.x+=s,t.LL.y-=r,t.LL.x-=s}},{key:"CSPointInPolygon",value:function(t,e,i){for(var r,s,o,n,a=!1,h=0,l=i.length/2-1;h<i.length/2;l=h++)r=i[2*h],s=i[2*h+1],o=i[2*l],s>e!=(n=i[2*l+1])>e&&t<(o-r)*(e-s)/(n-s)+r&&(a=!a);return a}},{key:"Dist2DV",value:function(t,e,i,r){return Math.sqrt((t-i)*(t-i)+(e-r)*(e-r))}},{key:"CSSegmentIntersect",value:function(t,e,i,r,s,o,n,a){var h,l,u,d,c;if(c=(h=r-e)*(d=n-s)-(l=a-o)*(u=i-t),!(Math.abs(c)<1e-20)){var f=e-o,p=t-s,F=-(f*d-p*l)/c,y=(p*h-f*u)/c;return F>=0&&F<=1&&y>=0&&y<=1}return!1}},{key:"CSLineIntersection",value:function(t,e,i,r,s){var o,n,a,h,l,u,d,c,f,p=!1,F=!1,y=!1;return o=i.y-e.y,n=s.y-r.y,a=i.x-e.x,d=o*(h=s.x-r.x)-n*a,Math.abs(d)<1e-20?{result:!1,onFirst:p,onSecond:F,onBoth:y}:(c=-((l=e.y-r.y)*h-(u=e.x-r.x)*n)/d,f=(u*o-l*a)/d,t.y=e.y+c*o,t.x=e.x+c*a,{result:!0,onFirst:p=c>=0&&c<=1,onSecond:F=f>=0&&f<=1,onBoth:y=p&&F})}},{key:"FillEllipseGeo",value:function(t,e,i,r,s,o,n,l){var u,d,c,f,p,F=[];e*=C.z.GLOBE_RADIUS_K,i*=C.z.GLOBE_RADIUS_K;var y=new a(0,0);for(o||(o=new a(0,0)),n||(n=new a(0,0)),l||(l=new h(0,0,0)),F.length=2*(s+1),o.SetV(this.DegreeToRadyan(t[0]),this.DegreeToRadyan(t[1])),this.GeoTo3DP(o,C.z.GLOBE_RADIUS,l),l.Normalize(),d=s+1;d--;)u=this.DegreeToRadyan(d*(360/s)+270),c=e*Math.cos(u),f=i*Math.sin(u),p=Math.sqrt(c*c+f*f),u=this.DegreeToRadyan(this.CSAngleV2(c,f)),Object.assign(n,o),this.X7UX4S(n,p,C.z.GLOBE_RADIUS),y=this.RotateNorth(n,l,u,r),n.SetV(this.RadyanToDegree(y.x),this.RadyanToDegree(y.y)),F[2*d]=n.x,F[2*d+1]=n.y;return F}},{key:"RotateNorth",value:function(t,e,i,r){var s=new h(0,0,0),o=new a(0,0);return this.GeoTo3DP(t,C.z.GLOBE_RADIUS,s),s.Normalize(),this.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+this.DegreeToRadyan(-r)+i),s.DotProductSetP(s,C.z.GLOBE_RADIUS),this.CarToSpher2(s,o),o}},{key:"CalcLookUpAngles",value:function(t,e,i,r,s){var o,n,a,l,u,d,c;return e.ConvertDegreeToRadyan(),i.ConvertDegreeToRadyan(),o=-this.AzimuthOf2PointsOnSphere(e,i),u=new h(0,0,0),d=new h(0,0,0),c=new h(0,0,0),e.ConvertRadyanToDegree(),i.ConvertRadyanToDegree(),this.GeoTo3DP(e,t+r,c),this.GeoTo3DP(i,t+s,d),n=d.Dist3D(c),a=u.Dist3D(c),l=u.Dist3D(d),{NorthAngDeg:o,TiltAngleDeg:-(90-this.RadyanToDegree(Math.acos((n*n+a*a-l*l)/(2*n*a))))}}},{key:"MeterToRadyan",value:function(t){return t/C.z.GLOBE_RADIUS}},{key:"MeterToDegree",value:function(t){return this.RadyanToDegree(t/C.z.GLOBE_RADIUS)}},{key:"RadyanToMeter",value:function(t){return C.z.GLOBE_RADIUS*t}},{key:"DegreeToMeter",value:function(t){return C.z.GLOBE_RADIUS*this.DegreeToRadyan(t)}}]),t}()),T=function(){function t(){s()(this,t),this.ICnt=0,this.Ix1=0,this.Iy1=0,this.Ix2=0,this.Iy2=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.Cx=0,this.Cy=0,this.Radius=0,this.Px=0,this.Py=0}return n()(t,[{key:"ClosestPointOnSegmentFromPoint",value:function(){var t,e,i,r,s;return t=this.x2-this.x1,e=this.y2-this.y1,(i=t*(this.Cx-this.x1)+e*(this.Cy-this.y1))<=0?(this.Px=this.x1,void(this.Py=this.y1)):(r=t*t+e*e)<=i?(this.Px=this.x2,void(this.Py=this.y2)):(s=i/r,this.Px=this.x1+s*t,void(this.Py=this.y1+s*e))}},{key:"ProjectPoint",value:function(t,e,i,r,s,o){var n=s/Math.sqrt((t-i)*(t-i)+(e-r)*(e-r));o?(this.Ix1=t+n*(i-t),this.Iy1=e+n*(r-e)):(this.Ix2=t+n*(i-t),this.Iy2=e+n*(r-e))}},{key:"IntersectCircle",value:function(t,e,i,r,s,o,n){var a,h;if(this.x1=t,this.y1=e,this.x2=i,this.y2=r,this.Cx=s,this.Cy=o,this.Radius=n,this.ICnt=0,this.ClosestPointOnSegmentFromPoint(),b.CSSuperZero(this.x1-this.Px)&&b.CSSuperZero(this.y1-this.Py)||b.CSSuperZero(this.x2-this.Px)&&b.CSSuperZero(this.y2-this.Py));else{if((a=Math.sqrt((this.Px-this.Cx)*(this.Px-this.Cx)+(this.Py-this.Cy)*(this.Py-this.Cy)))>this.Radius)return;b.CSSuperZero(a-this.Radius)?(this.ICnt=1,this.Ix1=this.Px,this.Iy1=this.Py):b.CSSuperZero(a)?(this.ICnt=2,this.ProjectPoint(this.Cx,this.Cy,this.x1,this.y1,this.Radius,!0),this.ProjectPoint(this.Cx,this.Cy,this.x2,this.y2,this.Radius,!1)):(this.ICnt=2,h=Math.sqrt(this.Radius*this.Radius-a*a),this.ProjectPoint(this.Px,this.Py,this.x1,this.y1,h,!0),this.ProjectPoint(this.Px,this.Py,this.x2,this.y2,h,!1))}}}]),t}();i.d(e,"I",function(){return L}),i.d(e,"G",function(){return x}),i.d(e,"a",function(){return O}),i.d(e,"e",function(){return R}),i.d(e,"f",function(){return m}),i.d(e,"z",function(){return D}),i.d(e,"A",function(){return E}),i.d(e,"H",function(){return P}),i.d(e,"n",function(){return _}),i.d(e,"i",function(){return I}),i.d(e,"h",function(){return B}),i.d(e,"g",function(){return G}),i.d(e,"l",function(){return w}),i.d(e,"m",function(){return M}),i.d(e,"j",function(){return U}),i.d(e,"k",function(){return k}),i.d(e,"p",function(){return V}),i.d(e,"q",function(){return j}),i.d(e,"r",function(){return N}),i.d(e,"o",function(){return z}),i.d(e,"t",function(){return Z}),i.d(e,"B",function(){return S}),i.d(e,"w",function(){return h}),i.d(e,"u",function(){return a}),i.d(e,"x",function(){return l}),i.d(e,"D",function(){return c}),i.d(e,"b",function(){return b}),i.d(e,"s",function(){return F}),i.d(e,"c",function(){return A}),i.d(e,"v",function(){return u}),i.d(e,"E",function(){return f}),i.d(e,"C",function(){return d}),i.d(e,"y",function(){return g}),i.d(e,"F",function(){return p}),i.d(e,"d",function(){return T});var v=Math.PI,L=(Math.PI,v/180),S=0,x=.01,O=.001,R=1e-4,m=1e-5,D=1e-6,E=1e-7,P=1e-9,_=new Int8Array([0,1,2,0]),I=new Int8Array([1,2,0,1]),B=0,G=1,w=0,M=1,U=0,k=1,V=0,j=1,N=2,z=3,Z=1e-5},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return CSUtils}),__webpack_require__.d(__webpack_exports__,"a",function(){return CSParamTypes}),__webpack_require__.d(__webpack_exports__,"b",function(){return CSProcessType});var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_CSUnits_CSUnits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27),_CSMath_CSMath__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_CSGlobe_CSGlobe__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),CSDateTypes={y:0,m:1,d:2,H:3,M:4,S:5},CSProcessType={SUM:"sum",AVG:"avg",MAX:"max",MIN:"min",UNIQ:"uniq",OBJCOUNT:"objcount"},CSParamTypes={ARRAY:0,NUMBER:1,INTEGER:2,STRING:3,BOOLEAN:4},Utils=function(){function Utils(){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,Utils),this.Units=new _CSUnits_CSUnits__WEBPACK_IMPORTED_MODULE_4__.a,this.dateRegx=/\w+/g,this.clusterReg=/Calc\(([a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+,)+\d\)|Calc\(([a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+,)+\)|Calc\(([a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+,)+[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+\)/g,this.macroReg=/(\${[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+}\.(\${[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+}\.+)+\${[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+})|(\${[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+}\.\${[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+})/g,this.macroReg2=/[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+/g,this.macroReg3=/\${[a-zA-Z0-9.\-"_' \u00c7\u00e7\u011e\u011f\u0049\u0130\u0131\u00d6\u00f6\u015e\u015f\u00dc\u00fc]+}/g,this.macroReg4=/\n|\\n/gi}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Utils,[{key:"ClearSpecialChars",value:function(t){for(var e=["\b","\f","\0","\r","\t","\v"],i=0;i<e.length;i++)t=t.replace(e[i],"  ");return t}},{key:"EvalMacroText",value:function EvalMacroText(macro,attribs,attribArr){try{if(attribArr)macro=this.EvalMacroCluster(macro,attribs,attribArr),macro=macro.toString();else{var regArr=macro.match(this.macroReg);if(regArr){var value="",keys=regArr[0].match(this.macroReg2);value=attribs[keys[0]];for(var i=1;i<keys.length;i++)value=value[keys[i]]}if(regArr=macro.match(this.macroReg3),regArr){for(var i=regArr.length;i--;)macro=Array.isArray(attribs[regArr[i].slice(2,-1)])?attribs[regArr[i].slice(2,-1)]:macro.replace(regArr[i],attribs[regArr[i].slice(2,-1)]);return macro=this.ClearSpecialChars(macro),macro=macro.replace(this.macroReg4,"[NEWLINE]"),macro=eval(macro),macro=this.SplitTitle(macro.toString()),macro}}return macro=macro.replace(this.macroReg4,"[NEWLINE]"),this.SplitTitle(macro)}catch(t){return null}}},{key:"EvalMacroCluster",value:function EvalMacroCluster(macro,attribs,attribArr){var regArr=macro.match(this.clusterReg);if(regArr){for(var i=0;i<regArr.length;i++){var result=regArr[i],regArr2=result.slice(5,-1).split(",");if(regArr2){var calcResult=this.CalcMacro(regArr2,attribs,attribArr);macro=macro.replace(result,calcResult)}}macro=eval(macro)}return macro}},{key:"CalcMacro",value:function(t,e,i){var r=t[1].toLowerCase(),s=null,o=null,n=0,a=[],h=0;switch(r){case CSProcessType.OBJCOUNT:s=t[0].toUpperCase();break;case CSProcessType.UNIQ:s=t[0].toUpperCase(),o=t[2];break;default:o=t[2],s=t[0].toUpperCase(),CSParamTypes[s]!==CSParamTypes.NUMBER&&CSParamTypes[s]!==CSParamTypes.STRING||!t[3]||(n=parseInt(t[3]))}switch(r){case CSProcessType.SUM:for(var l=0;l<i.length;l++){var u=_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(i[l].attribs[o]);"string"===u?h+=parseFloat(i[l].attribs[o]):"number"===u&&(h+=i[l].attribs[o])}break;case CSProcessType.AVG:for(l=0;l<i.length;l++){var d=_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(i[l].attribs[o]);"string"===d?h+=parseFloat(i[l].attribs[o]):"number"===d&&(h+=i[l].attribs[o])}h&&(h/=i.length);break;case CSProcessType.MIN:for(l=0;l<i.length;l++){var c=_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(i[l].attribs[o]);"string"===c?a.push(parseFloat(i[l].attribs[o])):"number"===c&&a.push(i[l].attribs[o])}a.length&&(h=Math.min.apply(Math,a));break;case CSProcessType.MAX:for(l=0;l<i.length;l++){var f=_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(i[l].attribs[o]);"string"===f?a.push(parseFloat(i[l].attribs[o])):"number"===f&&a.push(i[l].attribs[o])}a.length&&(h=Math.max.apply(Math,a));break;case CSProcessType.UNIQ:for(l=0;l<i.length;l++)-1===a.indexOf(i[l].attribs[o])&&a.push(i[l].attribs[o]);return a.length;case CSProcessType.OBJCOUNT:return h=e.point_count,CSParamTypes.STRING===s?String(h):parseInt(h)}return h=n?h.toFixed(n):Math.trunc(h)+"",this.SetParamType(h,s)}},{key:"SetParamType",value:function(t,e){switch(CSParamTypes[e]){case CSParamTypes.NUMBER:return parseFloat(t);case CSParamTypes.INTEGER:return parseInt(t);case CSParamTypes.STRING:return String(t);case CSParamTypes.BOOLEAN:if("string"==typeof t&&"true"===t)return!0;if("string"==typeof t&&"false"===t)return!1;if("boolean"==typeof t)return t;if("number"==typeof t)return t}}},{key:"SplitTitle",value:function(t){return t.split("[NEWLINE]")}},{key:"TestMacro",value:function(t){try{return!t.match(/console\.|alert\(|eval\(|function\s*\(\)|\(\s*\)\s*\=\>|return|document.|new\s+XMLHttpRequest|for\s*\(|this.|new\s+Worker/g)}catch(t){return!1}}},{key:"EvalDateMacro",value:function(t,e){try{if(t){var i=t.match(/\${\w+}/g);if(i){for(var r=i.length;r--;)t=Array.isArray(e[i[r].slice(2,-1)])?e[i[r].slice(2,-1)]:t.replace(i[r],e[i[r].slice(2,-1)]);return t=this.ClearSpecialChars(t)}return t}return""}catch(t){return""}}},{key:"EvalObjectParams",value:function(t,e,i){if("string"==typeof e){var r=this.EvalMacroText(e,i);return this.SetParamType(r,t)}return null}},{key:"EValShapeType",value:function(t,e){if("string"==typeof t||"number"==typeof t){if("string"==typeof t){var i=this.EvalMacroText(t,e);return parseInt(i)}return t}return 7}},{key:"EvalObjectArray",value:function EvalObjectArray(macro,attribs){if(Array.isArray(macro))return macro;var resultMacro=this.EvalMacroText(macro,attribs);return resultMacro&&-1!==resultMacro.indexOf("[")?eval(resultMacro):resultMacro}},{key:"EvalObjectZArr",value:function EvalObjectZArr(macro,attribs){if(Array.isArray(macro))return macro;var resultMacro=this.EvalMacroText(macro,attribs);return resultMacro&&-1!==resultMacro.indexOf("[")?eval(resultMacro):resultMacro}},{key:"StringToColor",value:function(t,e){if("#"===t.charAt(0)){var i,r,s,o=(t=t.substr(1)).split("");if(2===t.length)r=i=parseInt(o[0].toString()+o[1].toString(),16),s=i;else if(3===t.length)i=parseInt(o[0].toString()+o[0].toString(),16),r=parseInt(o[1].toString()+o[1].toString(),16),s=parseInt(o[2].toString()+o[2].toString(),16);else{if(!(t.length>=6))return new Float32Array([1,1,1,1]);i=parseInt(o[0].toString()+o[1].toString(),16),r=parseInt(o[2].toString()+o[3].toString(),16),s=parseInt(o[4].toString()+o[5].toString(),16)}return new Float32Array([i/255,r/255,s/255,e])}if("r"===t.charAt(0)||"R"===t.charAt(0)){if(!((t=t.replace(/[^\d,]/g,"").split(",")).length>=3))return new Float32Array([1,1,1,1]);t[3]=e;var n=(t=t.slice(0,4)).map(Number);return new Float32Array([n[0]/255,n[1]/255,n[2]/255,n[3]])}return new Float32Array([1,1,1,1])}},{key:"StringToColorForCanvas",value:function(t,e){if("#"===t.charAt(0)){var i,r,s,o=(t=t.substr(1)).split("");if(2===t.length)r=i=parseInt(o[0].toString()+o[1].toString(),16),s=i;else if(3===t.length)i=parseInt(o[0].toString()+o[0].toString(),16),r=parseInt(o[1].toString()+o[1].toString(),16),s=parseInt(o[2].toString()+o[2].toString(),16);else{if(!(t.length>=6))return new Float32Array([255,255,255,1]);i=parseInt(o[0].toString()+o[1].toString(),16),r=parseInt(o[2].toString()+o[3].toString(),16),s=parseInt(o[4].toString()+o[5].toString(),16)}return new Float32Array([i,r,s,e])}return("r"===t.charAt(0)||"R"===t.charAt(0))&&(t=t.replace(/[^\d,]/g,"").split(",")).length>=3?(t[3]=e,t=t.slice(0,4),new Float32Array(t.map(Number))):new Float32Array([255,255,255,1])}},{key:"DateParser",value:function(t,e){var i=t.split(" "),r=e.split(" ");return this.DateCreator(this.DateRegx(i[0],i[1]),this.DateRegx(r[0],r[1]))}},{key:"DateRegx",value:function(t,e){return[t?t.match(this.dateRegx):null,e?e.match(this.dateRegx):null]}},{key:"DateCreator",value:function(t,e){var i=2019,r=1,s=1,o=0,n=0,a=0;if(e[0]&&t[0])for(var h=e[0].length;h--;)switch(CSDateTypes[e[0][h]]){case CSDateTypes.y:i=t[0][h];break;case CSDateTypes.m:r=t[0][h];break;case CSDateTypes.d:s=t[0][h];break;case CSDateTypes.H:o=t[0][h];break;case CSDateTypes.M:n=t[0][h];break;case CSDateTypes.S:a=t[0][h]}if(e[1]&&t[1])for(h=e[1].length;h--;)switch(CSDateTypes[e[1][h]]){case CSDateTypes.y:i=t[1][h];break;case CSDateTypes.m:r=t[1][h];break;case CSDateTypes.d:s=t[1][h];break;case CSDateTypes.H:o=t[1][h];break;case CSDateTypes.M:n=t[1][h];break;case CSDateTypes.S:a=t[1][h]}return new Date(i,r-1,s,o,n,a).getTime()}},{key:"ConvertToOneDimArr",value:function(t,e){for(var i=0;i<e.length;i++)if(Array.isArray(e[i]))for(var r=0;r<e[i].length;r++)t.push(e[i][r]);else t.push(e[i])}},{key:"GetFontSizeAsNumber",value:function(t){if("number"==typeof t)return t;var e=t.replace(/\s+/g,"");return-1!==e.search(/px/i)?(e=e.replace(/\px+/gi,""),3*parseFloat(e)/2):-1!==e.search(/pt/i)?(e=e.replace(/\pt+/gi,""),2*parseFloat(e)):24}},{key:"ContainsAnyString",value:function(t,e){for(var i=e.length,r=0;r<i;r++)if(t.indexOf(e[r])>-1)return!0;return!1}},{key:"GetSizeAsMeter",value:function(t,e,i,r){var s=t.replace(/\s+/g,"");return-1!==s.search(/px/i)?(s=s.replace(/\px+/gi,""),parseFloat(s)*e/i):-1!==s.search(/cm/i)?(s=s.replace(/\cm+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[0],parseFloat(s))*r):-1!==s.search(/km/i)?(s=s.replace(/\km+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[2],parseFloat(s))*r):-1!==s.search(/mile/i)?(s=s.replace(/mile+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[3],parseFloat(s))*r):-1!==s.search(/nm/i)?(s=s.replace(/nm+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[4],parseFloat(s))*r):-1!==s.search(/m/i)?(s=s.replace(/m+/gi,""),parseFloat(s)*r):-1!==s.search(/in/i)?(s=s.replace(/in+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[5],parseFloat(s))*r):-1!==s.search(/ft/i)?(s=s.replace(/ft+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[6],parseFloat(s))*r):-1!==s.search(/yd/i)?(s=s.replace(/yd+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[7],parseFloat(s))*r):parseFloat(t)*e/i}},{key:"GetZAsMeter",value:function(t){if("number"==typeof t)return t;var e=t.replace(/\s+/g,"");return-1!==e.search(/cm/i)?(e=e.replace(/\cm+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[0],parseFloat(e))):-1!==e.search(/km/i)?(e=e.replace(/\km+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[2],parseFloat(e))):-1!==e.search(/mile/i)?(e=e.replace(/mile+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[3],parseFloat(e))):-1!==e.search(/min/i)?(e=e.replace(/min+/gi,""),_CSMath_CSMath__WEBPACK_IMPORTED_MODULE_5__.b.DegreeToMeter(parseFloat(e)/60)/_CSGlobe_CSGlobe__WEBPACK_IMPORTED_MODULE_6__.z.GLOBE_RADIUS_K):-1!==e.search(/nm/i)?(e=e.replace(/nm+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[4],parseFloat(e))):-1!==e.search(/m/i)?(e=e.replace(/m+/gi,""),parseFloat(e)):-1!==e.search(/in/i)?(e=e.replace(/in+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[5],parseFloat(e))):-1!==e.search(/ft/i)?(e=e.replace(/ft+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[6],parseFloat(e))):-1!==e.search(/yd/i)?(e=e.replace(/yd+/gi,""),this.Units.DistanceAnyUtoM(_CSUnits_UnitTypes__WEBPACK_IMPORTED_MODULE_3__.d[7],parseFloat(e))):-1!==e.search(/deg/i)?(e=e.replace(/deg+/gi,""),_CSMath_CSMath__WEBPACK_IMPORTED_MODULE_5__.b.DegreeToMeter(parseFloat(e))/_CSGlobe_CSGlobe__WEBPACK_IMPORTED_MODULE_6__.z.GLOBE_RADIUS_K):parseFloat(t)}}]),Utils}(),CSUtils=new Utils},function(t,e,i){"use strict";i.d(e,"d",function(){return s}),i.d(e,"a",function(){return n}),i.d(e,"c",function(){return a}),i.d(e,"e",function(){return o}),i.d(e,"b",function(){return h});var r=i(4);function s(t,e){return t.Clear(),t.ExpandByCoords(e),t}function o(t,e){var i=[];return r.c.ConvertToOneDimArr(i,e),t.Clear(),t.ExpandByCoords(i),t}function n(t,e,i){for(var r=0,s=0,o=0,n=i.length,a=0;a<n;a++)r+=e[2*a],s+=e[2*a+1],o+=i[a];r/=n,s/=n,o/=n,t.SetV(r,s,o)}function a(t,e,i){var s=[],o=[];r.c.ConvertToOneDimArr(s,e),r.c.ConvertToOneDimArr(o,i);for(var n=0,a=0,h=0,l=o.length,u=0;u<l;u++)n+=s[2*u],a+=s[2*u+1],h+=o[u];n/=l,a/=l,h/=l,t.SetV(n,a,h)}function h(t,e,i){var s=[];r.c.ConvertToOneDimArr(s,e);for(var o=0,n=0,a=s.length/2,h=0;h<a;h++)o+=s[2*h],n+=s[2*h+1];o/=a,n/=a,t.SetV(o,n,i)}},function(t,e,i){"use strict";i.d(e,"d",function(){return r}),i.d(e,"c",function(){return s}),i.d(e,"b",function(){return o}),i.d(e,"a",function(){return n}),i.d(e,"e",function(){return a});var r=[{type:"centimeters",k:100,label:"cm",labelText:"santimetre",digits:0},{type:"meter",k:1,label:"m",labelText:"metre",digits:2},{type:"kilometer",k:.001,label:"km",labelText:"kilometre",digits:2},{type:"groundmile",k:1/1609.344,label:"mile",labelText:"kara mili",digits:2},{type:"seamile",k:1/1852,label:"nm",labelText:"deniz mili",digits:2},{type:"inch",k:100/2.54,label:"in",labelText:"inch",digits:0},{type:"feet",k:100/30.48,label:"ft",labelText:"feet",digits:0},{type:"yard",k:1.0936,label:"yd",labelText:"yarda",digits:0}],s=[{type:"centimeterssquare",k:1e4,label:"cm".concat(String.fromCharCode(178)),labelText:"santimetre kare",digits:0},{type:"inchsquare",k:1550.0031000062002,label:"in".concat(String.fromCharCode(178)),labelText:"inch kare",digits:0},{type:"metersquare",k:1,label:"m".concat(String.fromCharCode(178)),labelText:"metre kare",digits:2},{type:"decare",k:.001,label:"decare",labelText:"decare",digits:2},{type:"hectare",k:1e-4,label:"hek",labelText:"hektar",digits:2},{type:"kilometersquare",k:1e-6,label:"km".concat(String.fromCharCode(178)),labelText:"kilometre kare",digits:2}],o=[{type:"degree",k:1,label:String.fromCharCode(176),labelText:"derece",digits:0},{type:"radyan",k:Math.PI/180,label:"rad",labelText:"radyan",digits:3},{type:"grad",k:400/360,label:"g",labelText:"grad",digits:0},{type:"angularmil",k:6400/360,label:"mil",labelText:"milyem",digits:0},{type:"minuteofarc",k:60,label:"''",labelText:"arc dakika",digits:0},{type:"secondofarc",k:3600,label:'"',labelText:"arc saniye",digits:0}],n=[{type:"centimeters",k:100,label:"cm",labelText:"santimetre",digits:0},{type:"meter",k:1,label:"m",labelText:"metre",digits:2},{type:"kilometer",k:.001,label:"km",labelText:"kilometre",digits:2},{type:"inch",k:100/2.54,label:"in",labelText:"inch",digits:2},{type:"feet",k:100/30.48,label:"ft",labelText:"feet",digits:2},{type:"yard",k:1.0936,label:"yd",labelText:"yarda",digits:0}],a=[{type:"cubiccentimeters",k:1e6,label:"cm".concat(String.fromCharCode(179)),labelText:"santimetre kp",digits:0},{type:"cubicmeter",k:1,label:"m".concat(String.fromCharCode(179)),labelText:"metre kp",digits:3},{type:"cubicdekameter",k:.001,label:"dm".concat(String.fromCharCode(179)),labelText:"dekametre kp",digits:3},{type:"cubichectometer",k:1e-6,label:"hm".concat(String.fromCharCode(179)),labelText:"hektometre kp",digits:3},{type:"cubickilometer",k:1e-9,label:"km".concat(String.fromCharCode(179)),labelText:"kilometre kp",digits:3}]},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,h,l,u,f,p,y=e&&e.length,A=y?e[0]*i:t.length,g=s(t,0,A,i,!0),C=[];if(!g||g.next===g.prev)return C;if(y&&(g=function(t,e,i,r){var n,a,h,l,u,f=[];for(n=0,a=e.length;n<a;n++)h=e[n]*r,l=n<a-1?e[n+1]*r:t.length,(u=s(t,h,l,r,!1))===u.next&&(u.steiner=!0),f.push(F(u));for(f.sort(d),n=0;n<f.length;n++)c(f[n],i),i=o(i,i.next);return i}(t,e,g,i)),t.length>80*i){r=h=t[0],a=l=t[1];for(var b=i;b<A;b+=i)(u=t[b])<r&&(r=u),(f=t[b+1])<a&&(a=f),u>h&&(h=u),f>l&&(l=f);p=0!==(p=Math.max(h-r,l-a))?1/p:0}return n(g,C,i,r,a,p),C}function s(t,e,i,r,s){var o,n;if(s===m(t,e,i,r)>0)for(o=e;o<i;o+=r)n=x(o,t[o],t[o+1],n);else for(o=i-r;o>=e;o-=r)n=x(o,t[o],t[o+1],n);return n&&C(n,n.next)&&(O(n),n=n.next),n}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!C(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(O(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function n(t,e,i,r,s,d,c){if(t){!c&&d&&function(t,e,i,r){var s=t;do{null===s.z&&(s.z=p(s.x,s.y,e,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,function(t){var e,i,r,s,o,n,a,h,l=1;do{for(i=t,t=null,o=null,n=0;i;){for(n++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(s=i,i=i.nextZ,a--):(s=r,r=r.nextZ,h--),o?o.nextZ=s:t=s,s.prevZ=o,o=s;i=r}o.nextZ=null,l*=2}while(n>1)}(s)}(t,r,s,d);for(var f,F,y=t;t.prev!==t.next;)if(f=t.prev,F=t.next,d?h(t,r,s,d):a(t))e.push(f.i/i),e.push(t.i/i),e.push(F.i/i),O(t),t=F.next,y=F.next;else if((t=F)===y){c?1===c?n(t=l(o(t),e,i),e,i,r,s,d,2):2===c&&u(t,e,i,r,s,d):n(o(t),e,i,r,s,d,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;for(var s=t.next.next;s!==t.prev;){if(y(e.x,e.y,i.x,i.y,r.x,r.y,s.x,s.y)&&g(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function h(t,e,i,r){var s=t.prev,o=t,n=t.next;if(g(s,o,n)>=0)return!1;for(var a=s.x<o.x?s.x<n.x?s.x:n.x:o.x<n.x?o.x:n.x,h=s.y<o.y?s.y<n.y?s.y:n.y:o.y<n.y?o.y:n.y,l=s.x>o.x?s.x>n.x?s.x:n.x:o.x>n.x?o.x:n.x,u=s.y>o.y?s.y>n.y?s.y:n.y:o.y>n.y?o.y:n.y,d=p(a,h,e,i,r),c=p(l,u,e,i,r),f=t.prevZ,F=t.nextZ;f&&f.z>=d&&F&&F.z<=c;){if(f!==t.prev&&f!==t.next&&y(s.x,s.y,o.x,o.y,n.x,n.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,F!==t.prev&&F!==t.next&&y(s.x,s.y,o.x,o.y,n.x,n.y,F.x,F.y)&&g(F.prev,F,F.next)>=0)return!1;F=F.nextZ}for(;f&&f.z>=d;){if(f!==t.prev&&f!==t.next&&y(s.x,s.y,o.x,o.y,n.x,n.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;F&&F.z<=c;){if(F!==t.prev&&F!==t.next&&y(s.x,s.y,o.x,o.y,n.x,n.y,F.x,F.y)&&g(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function l(t,e,i){var r=t;do{var s=r.prev,n=r.next.next;!C(s,n)&&b(s,r,r.next,n)&&L(s,n)&&L(n,s)&&(e.push(s.i/i),e.push(r.i/i),e.push(n.i/i),O(r),O(r.next),r=t=n),r=r.next}while(r!==t);return o(r)}function u(t,e,i,r,s,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&A(h,l)){var u=S(h,l);return h=o(h,h.next),u=o(u,u.next),n(h,e,i,r,s,a),void n(u,e,i,r,s,a)}l=l.next}h=h.next}while(h!==t)}function d(t,e){return t.x-e.x}function c(t,e){if(e=function(t,e){var i,r=e,s=t.x,o=t.y,n=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=s&&a>n){if(n=a,a===s){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(s===n)return i;var h,l=i,u=i.x,d=i.y,c=1/0;r=i;do{s>=r.x&&r.x>=u&&s!==r.x&&y(o<d?s:n,o,u,d,o<d?n:s,o,r.x,r.y)&&(h=Math.abs(o-r.y)/(s-r.x),L(r,t)&&(h<c||h===c&&(r.x>i.x||r.x===i.x&&f(i,r)))&&(i=r,c=h)),r=r.next}while(r!==l);return i}(t,e)){var i=S(e,t);o(i,i.next)}}function f(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function p(t,e,i,r,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function F(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,r,s,o,n,a){return(s-n)*(e-a)-(t-n)*(o-a)>=0&&(t-n)*(r-a)-(i-n)*(e-a)>=0&&(i-n)*(o-a)-(s-n)*(r-a)>=0}function A(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(L(t,e)&&L(e,t)&&function(t,e){var i=t,r=!1,s=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||C(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function C(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,r){var s=v(g(t,e,i)),o=v(g(t,e,r)),n=v(g(i,r,t)),a=v(g(i,r,e));return s!==o&&n!==a||(!(0!==s||!T(t,i,e))||(!(0!==o||!T(t,r,e))||(!(0!==n||!T(i,t,r))||!(0!==a||!T(i,e,r)))))}function T(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function v(t){return t>0?1:t<0?-1:0}function L(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function S(t,e){var i=new R(t.i,t.x,t.y),r=new R(e.i,e.x,e.y),s=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function x(t,e,i,r){var s=new R(t,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m(t,e,i,r){for(var s=0,o=e,n=i-r;o<i;o+=r)s+=(t[n]-t[o])*(t[o+1]+t[n+1]),n=o;return s}t.exports=r,t.exports.default=r,r.deviation=function(t,e,i,r){var s=e&&e.length,o=s?e[0]*i:t.length,n=Math.abs(m(t,0,o,i));if(s)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;n-=Math.abs(m(t,l,u,i))}var d=0;for(a=0;a<r.length;a+=3){var c=r[a]*i,f=r[a+1]*i,p=r[a+2]*i;d+=Math.abs((t[c]-t[p])*(t[f+1]-t[c+1])-(t[c]-t[f])*(t[p+1]-t[c+1]))}return 0===n&&0===d?0:Math.abs((d-n)/n)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,s=0;s<t.length;s++){for(var o=0;o<t[s].length;o++)for(var n=0;n<e;n++)i.vertices.push(t[s][o][n]);s>0&&(r+=t[s-1].length,i.holes.push(r))}return i}},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){"use strict";i.d(e,"a",function(){return F}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return u});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=(i(1),Math.PI/360),h=Math.PI/180,l=20037508.34,u=2*l,d=l/Math.PI,c=180/Math.PI,f=Math.PI/l,p=.5*Math.PI,F=function(){function t(){s()(this,t),this.mercatorObj={x:0,y:0}}return n()(t,[{key:"getTileX",value:function(t,e){return Math.floor((t+180)/360*Math.pow(2,e))}},{key:"getTileY",value:function(t,e){var i=t*h;return Math.floor(.5*(1-Math.log(Math.tan(i)+1/Math.cos(i))/Math.PI)*Math.pow(2,e))}},{key:"getTileExtent",value:function(t,e,i,r){var s=u/Math.pow(2,i);r.LL.y=t*s-l,r.LL.x=l-e*s-s,r.UR.x=r.LL.x+s,r.UR.y=r.LL.y+s}},{key:"mercatorToLonLat",value:function(t,e,i){var r=180*t/l,s=c*(2*Math.atan(Math.exp(e*f))-p);i.x=s,i.y=r}},{key:"forwardLonLatToMercator",value:function(t,e){return this.mercatorObj.x=t*l/180,this.mercatorObj.y=Math.log(Math.tan((90+e)*a))*d,this.mercatorObj}},{key:"getNumberOfXTilesAtLevel",value:function(t){return 1<<t}},{key:"getNumberOfYTilesAtLevel",value:function(t){return 1<<t}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return F});var r=i(8),s=i.n(r),o=i(12),n=i.n(o),a=i(2),h=i.n(a),l=i(3),u=i.n(l),d=i(4),c=i(0);function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var F=new(function(){function t(){h()(this,t)}return u()(t,[{key:"CreateLayerClusterStyle",value:function(t){return t?{titleRT:"",titleRB:"",titleLT:"",titleLB:"",titleCN:"Calc(NUMBER,objcount)",fontFamily:{name:"arial",bold:!0,italic:!1,hollow:!0,hollowWidth:3},titleFont:{size:20,hollowColor:"#000",textColor:"#FFF"},iconType:c.e.CIRCLE,milIcon:[],active:!0,icon:{mapName:"",name:"",iconColor:"#ffffff",borderColor:"#0000ff",fillColor:"#ffffff",borderWidth:2,radius:16,sizeX:32,sizeY:32,rotDeg:0},filter:[],opacity:1,border:!0,borderColor:"#f4d6f6",filled:!0,fillColor:"#ffff00",bottomFilled:!1,bottomFillColor:"#ffff00",sideFilled:!0,sideColor:"#ff00ff",cullFace:!0,depthTest:!1,zMode:c.u.Z_GROUND_PERVERTEX}:{rule:["true"],cluster:{maxLod:19,radius:32,style:this.CreateLayerClusterStyle(!0)}}}},{key:"CreateLayerStyle",value:function(){return{titleRT:"",titleRB:"",titleLT:"",titleLB:"",titleCN:"",fontFamily:{name:"arial",bold:!0,italic:!1,hollow:!0,hollowWidth:3},titleFont:{size:20,hollowColor:"#000",textColor:"#FFF"},lodDisplay:[],symbolReduction:!1,iconType:c.e.NOICON,milIcon:[],active:!0,icon:{mapName:"",name:"",iconColor:"#ffffff",borderColor:"#0000ff",fillColor:"#ffffff",borderWidth:2,radius:16,sizeX:32,sizeY:32,rotDeg:0},filter:[],opacity:1,lineType:{cap:"butt",join:"miter",miterLimit:10,dash:[],width:1},border:!0,borderColor:"#000000",filled:!0,fillColor:"#ffff00",bottomFilled:!1,bottomFillColor:"#ffff00",sideFilled:!0,sideColor:"#ff00ff",cullFace:!0,depthTest:!1,zMode:c.u.Z_GROUND_PERVERTEX}}},{key:"CreateCompositeLayerStyle",value:function(){var t=this.CreateLayerStyle();return t.MVTXYZName=null,t.objectType=null,t.startLod=0,t.endLod=25,t}},{key:"CreateLayerStyleNoIcon",value:function(){return{titleRT:"",titleRB:"",titleLT:"",titleLB:"",titleCN:"",titleFont:this.createLayerFontStyle(),filter:[],lodDisplay:[],opacity:1,border:!0,borderColor:"#f4d6f6",filled:!0,fillColor:"#ffff00",bottomFilled:!1,bottomFillColor:"#ffff00",sideFilled:!0,sideColor:"#ff00ff",cullFace:!0,depthTest:!1,zMode:c.u.Z_GROUND_PERVERTEX}}},{key:"FillStyleColor",value:function(t){t.__textColor=d.c.StringToColor(t.titleFont.textColor,t.opacity),t.__haloColor=d.c.StringToColor(t.titleFont.hollowColor,t.opacity),t.__borderColor=d.c.StringToColor(t.borderColor,t.opacity),t.__fillColor=d.c.StringToColor(t.fillColor,t.opacity),t.__bottomFillColor=d.c.StringToColor(t.bottomFillColor,t.opacity),t.__sideColor=d.c.StringToColor(t.sideColor,t.opacity),t.__circleFillColor=d.c.StringToColor(t.icon.fillColor,t.opacity),t.__circleBorderColor=d.c.StringToColor(t.icon.borderColor,t.opacity)}},{key:"FillFontLayerStyleString",value:function(t,e){var i="";return t.italic&&(i+="italic "),t.bold&&(i+="bold "),i+=e?" 16px ":"".concat(t.size/2,"px "),i+=t.name}},{key:"FillFontSizeAsNumber",value:function(t){t.__titleSize=d.c.GetFontSizeAsNumber(t.titleFont.size)}},{key:"CheckStyle",value:function(t,e,i){var r;e||(e={});var s=e;r=i?this.CreateCompositeLayerStyle():this.CreateLayerStyle();for(var o=Object.keys(r),a=o.length;a--;)if(Array.isArray(s[o[a]])||"object"!==n()(s[o[a]]))void 0===s[o[a]]&&(s[o[a]]=r[o[a]]);else for(var h=Object.keys(r[o[a]]),l=h.length;l--;)void 0===s[o[a]][h[l]]&&(s[o[a]][h[l]]=r[o[a]][h[l]])}},{key:"CopySubObject",value:function(t,e){Object.assign(e,t)}},{key:"ContinueToPreCalcStyleInfo",value:function(t,e,i,r,s){var o=this.DuplicateStyle(i);this.FillStyleColor(o),this.FillFontSizeAsNumber(o);var a=o,h=a.filter,l=a.milIcon;a.__milIcon=this.ParseMilIcon(l[0],i.iconType);for(var u=h.length;u--;){var d=this.DuplicateStyle(o);d.filter&&(d.filter=null,delete d.filter);for(var c=Object.keys(h[u].style),f=c.length;f--;)"object"===n()(h[u].style[c[f]])&&"__icontextCoordBuff"!==c[f]&&"__milIcon"!==c[f]&&"filter"!==c[f]?Object.assign(d[c[f]],p({},h[u].style[c[f]])):void 0!==h[u].style[c[f]]&&(d[c[f]]=h[u].style[c[f]]);l&&0!==l.length||(d.icon._mapIndex=s.Xq9tYT(d.icon.mapName),-1===d.icon._mapIndex&&(d.icon._mapIndex=a.icon._mapIndex)),this.FillStyleColor(d),this.FillFontSizeAsNumber(d),a.filter[u].style=d}return a}},{key:"PreCalcStyleInfo",value:function(t,e,i,r){if(Array.isArray(t.style)){e._style=[];for(var s=0;s<t.style.length;s++)this.CheckStyleForBufferDelete(e._style[s],i),e._style[s]=this.ContinueToPreCalcStyleInfo(t,e,t.style[s],t.style[s].objectType,r)}else this.CheckStyleForBufferDelete(e._style,i),e._style=this.ContinueToPreCalcStyleInfo(t,e,t.style,t.objectType,r)}},{key:"ContinueToCreateLodDisplayArrays",value:function(t){var e,i;if(t.__lodDisplayArr?t.__lodDisplayArr.length=0:t.__lodDisplayArr=[],t.lodDisplay&&t.lodDisplay.length)for(e=0;e<=25;e++){i=!1;for(var r=0;r<t.lodDisplay.length;r++)if(e>=t.lodDisplay[r].startLod&&e<=t.lodDisplay[r].endLod){i=!0,t.__lodDisplayArr.push({0:t.lodDisplay[r].RT,1:t.lodDisplay[r].RB,2:t.lodDisplay[r].LT,3:t.lodDisplay[r].LB,4:t.lodDisplay[r].CN,textScale:t.lodDisplay[r].textScale,symbolScale:t.lodDisplay[r].symbolScale,lineScale:t.lodDisplay[r].lineScale});break}i||t.__lodDisplayArr.push({0:!0,1:!0,2:!0,3:!0,4:!0,textScale:1,symbolScale:1,lineScale:1})}else for(e=0;e<=25;e++)t.__lodDisplayArr.push({0:!0,1:!0,2:!0,3:!0,4:!0,textScale:1,symbolScale:1,lineScale:1})}},{key:"CreateLodDisplayArrays",value:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.ContinueToCreateLodDisplayArrays(t[e]);else this.ContinueToCreateLodDisplayArrays(t)}},{key:"DuplicateStyle",value:function(t){for(var e=p({},t),i=Object.keys(t),r=i.length;r--;)-1===i[r].search("__")?"filter"!==i[r]&&Array.isArray(t[i[r]])?e[i[r]]=t[i[r]].slice():"filter"!==i[r]&&"object"===n()(t[i[r]])&&(e[i[r]]=p({},t[i[r]])):t[i[r]]&&"object"===n()(t[i[r]])&&(e[i[r]]=t[i[r]].slice());return e}},{key:"DuplicateClusterStyle",value:function(t){return p({},t)}},{key:"DeleteBuffers",value:function(t,e){for(var i=t.length;i--;){var r=t[i].style.__icontextCoordBuff;r&&(e.deleteBuffer(r),r=null,delete t[i].style.__icontextCoordBuff)}}},{key:"CheckStyleForBufferDelete",value:function(t,e){t&&this.DeleteBuffers(t.filter,e)}},{key:"ParseMilIcon",value:function(t,e){try{if(e===c.e.MAP){var i=t.match(/\${\w+}/g);if(i&&i.length){for(var r=0;r<i.length;r++)i[r]=i[r].slice(2,-1);return i}return null}return null}catch(t){return null}}}]),t}())},function(t,e,i){"use strict";i.d(e,"g",function(){return" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACKUlEQVR4nO2WTW7TQBSAv5mYtCyouskBOAI3YscNAKkSCzgBQkgcoWuu0UpsuqrEqktQm8Txv2cei2fHrmO7qrPIgoz0ZHtm5O97bzLjmNfWcsh2WPpRYF+BX+fncjCBGr6vxCSBLnQfiWcLDMGmSpj//hwIxga/nJ5eZCIfBayp+ozRO9Oa50XwgAdc3adR/vb+68+i+DTEGF2Ci5OT9dvr61fu5ga5v0ceHjTCENlsIIqQPIc0RZwDEYy1EAQwn2MWC35cXv79nueLSRUQCPzdHf72VsHLJbJea0QRJAmSJFAUSFmC92AtphKwWYaDF2OMnfS7v2YJQySKkM1GIww1VqtGKAwhjiHLIM+1KkmCrFbkI+/eEehOcKDQKELiWCOKFFhJkaZQliCi4T04h3gPQPlEgnZooBYgSRSSpppl9SxxrGBowO1r1UrZPR7aLDsE3wrkOZJlSFVaqeHOgTEKq3YGVdZbkZ4KdCUswJvl0vRNKkR0PcsS8rwJ73fhPZliLX5AoGbabke7lXVW3quEc3qtBWaz7VypBZxrKlGWvRVos+zQANDYt7IT73WfW/tIwtQVqfur56JTmS5j5xxoT/BQmLOzl2ax2L7QOKfLYIxm61yTeRBoqFEtXgzB4YmT8N18/j6GDyIyE0CqqkgrXPte5NEYUPwR+Xbl3OchxvFrOPot6GtjfzyGtvNYe3YFhiBT4JME+mBT4ZMF2tB94HDcBUcB+Af9JJEeQT6dVAAAAABJRU5ErkJggg=="}),i.d(e,"a",function(){return"data:image/jpeg;base64,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"}),i.d(e,"d",function(){return"data:image/png;base64,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"}),i.d(e,"f",function(){return" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEFUlEQVR4nO2WTWhUVxiGn3Puz8zcyaSZJoTEaDQmK43kpzFCMaCxiwhGiLoIolmIm4AtLiK4KpYWSsCVaXFX4kIsLkTsQkSycFUIVuLCoEESNTHqRDM/N5m5d2bunC6uBkud6iTZ1RcOl3s55/3e833nvN+Fz/iMNSLZ3KwSTU1qtevlWoKnOjoUur4WCla1OrV37yZc95nKZECINQkoOQP2/v39wDPlumsKvCoBdk/PiLLtK+rNG8jn/d0rv/yJ+nqVqKn5rlQBn5y/VFfXhFpcbEFKhGmCYYCmvWURkM+jkkkK8/O4Sv1Yk0p9v24CUnv2LBs9PZZyXbyJCdTsLIRCYJoIKX0B750Fb3KS18nk/aZUqnVdBAAkGhrmtKamusCpU7ijo6iFBUQ47GfB8/ynroOUCMMgPz7O88XF59tte+O6CACIV1Ze0dvb+62rV0mfOAGOg3H4MFp7O974OPk7d3whmoYwTXLXr/PUcX5ose1z6yIAIB6N9sva2iuRe/dwL16kMD1N7to1tLY2zOPHyY+NgZT+0DRmRkdRUL7Dtu0P8ZV8DaPx+O/q9etNqYYGzEOHMAcGAPDu3v06c/o0WkcHIhxGhEKIcJj6bdvw4OdifKtywopYbK7ixQthd3Yiq6v9by9f/qkc5xtneBhRVQWRCMKy0Lu78WD/ugpYEfLqlVjat2/lPRqPjy0vLEyrRMI/oIEAsq6OCiG2FuMoasXpoSGlMhlwHJTjgOuistnJyI0b29+f98Xjx/84Rzr8Vnjy5Ce9sRGyWbAsvjSMopso3gsiEfT29pUr5k1N4d2/v63o/LdQINB1RFkZ5HJgWYh3hvUBFC9BOg2m6Q9NQ9bX+4QfQR569V27fKcMBhFlZbxxnNIFqGwWUVmJCAYRoRCyrg4RDGIfONBSbE08Gm0JG0anbG5GBAKIcBgVj5NQarpkAcCvKpGASAQsC0wT4+hR8LyJVHf3v0QkamtbkHLCunDB9wDLQlRUkLt9Gw1uFgtS1IjSQ0NlKp+3g2fPUpiaWjEWtbDgG1AsNk42+weOg0qne4VldYbOn0fU1KyUStTW8rC1FQWRHba9VJIAgOXBwRG9q+uUvns3hfl532alRAQCeJOTFGZmIJdDNjaitbWhlpehUIBCAVFdjXPmDI9v3fql1ba/LTkD77B07Nhs4OTJjdrOnXiPHvndT9P87iffVlApP7DngRDILVtwR0Z4ODw812bbm/6L/5N6wdKRI7NGb+9GY2AAFYuhYjE/4Pu/Y5rmW/DmzWQGB5m5fHmu+SPBS4Ld1zdiHzyosjdvqoJSHxzupUsqVl6unpaXj3wqb0nd0O7rC6lk8pxKJPbJqqqvxIYNkM/jPXhAfnr6LwljSHkuGo9nSt/iZ/xf8TcCzqS83/IQFQAAAABJRU5ErkJggg=="}),i.d(e,"b",function(){return"data:image/png;base64,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"}),i.d(e,"c",function(){return"data:image/png;base64,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"}),i.d(e,"j",function(){return"data:image/png;base64,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"}),i.d(e,"l",function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAgCAYAAAD9qabkAAAFKElEQVR4nO1a21LjSAyVJtl3+MrMZt6WD8hXDAVfCXZg2AI72gf35Ujuzsw8bFG7PqcKnNjdks6RWrYbRAiCIAiCIAiCIAiCIAiCIAiC+B/j/WOw94/BPjsOgiD+feB6//LZwRAE8XlgAyCIDYMNgCC2jouZXcy4B0AQG8DFzO/5sQEQxHaA652vABvG6XSy0+m0yca/Ze4rbPkJgNzJfWvgEwBBECIisscvd3d3dnNzKyKpMWr+qGmELZ/z1/zdREQtHdPFVnON14LZ6sv8Ua2OK/N0saP5KGKmouoGLZNcKMmuijw/PQfuN+myigP6V4wv8CwuFcK3NT8FMpbjCT4LN/QfNMHc4HfFuIrjGrupPD0/FVd/3d3Z7c3NSraoV+UBPhQmFb7qxwvGGuOXmsMSI8aA44ELAnh5rhiTFD2fV9xvQ04gplIPFrTJuodYikagGcbv9IgaK3AOHKDmTCx9CmsjrqGSq1oLz0+Vu0hoAMMwJNdQ4IIxm6jWIMoijARz8aakLLwgQao1Vu/KFwJcW8ybqKmYhgaBhSYqKiZWxM7zLa3rIp0Mw+C4F2nRr9O2Xij1mNRQUVizKU4UD9Qs6zMWT4nf9zr3GesE4ynxVY4N08XxOFbu4zAsmoV5CrraKpLEO+lc4oEmXFi7XFzPXa2dar9YKzawNs2pW+01VmZK2Hhe533d+Roarp2s7avPGfJdKhNyZVrvZfFmivZLSLU+6ulqFydUX5hXk2E4u5G+AYyjXC4XbwY7dQTmqzPGNaCeka6DttQru6424W6CLgRuWAnnl5fyeRgC92tx594msFxVJb9SYoKcNk2qKUW+0/QB17sa9OZJHXN+qYUwjEPh3tM7llJGbEE/D6Q1pC1SOxa8u8XzImjHym8/FfM+Qs3nXLoHgF49QbhYV6sWnurCX29p0OF7Vc4cb2udtm9dyF0kNIBxGGSa5tJVf6cnRiEiqVafiratc2zZw7mt2FYPFo2xr68/yrlxHGSap649Z7OTlLZO68E9bV3hNfz34ulxdTaC3dfX13JpHM4yT7Ob22PQy8uvoNvMG36kM7YdWbs55SHxLe3FcR9lmqbVAr1Wg73Y4/lfqdNr4/trqa1VK+YYP9a8SGwA51He3t5kv/+j7cZ9hcc0+O3HtSiky+nu1W5uscs3SjA9B5f+1urU0WQNQaZpkmmqC34cM/ckCdqP79vFEBhtNQX3biteO/dOG+ziu7/F1MJ8wVPZF4xXsFkOKtP04bifS953EGsrn+DHhRz59BDr6UrOFEZn7fGRzBoaNDTyNbZw/4jc//5R895aPeV45elDRdyegS4G8unVuK40yXkKfO1qnWdVg1N4u/V+pnmSj/fJnVOR5c8C+cTjw4Pc39/Lbr/zSccJGFTOkFvVoWjT/PpkkZZtDlZda6hezNxWgJXbGMiSRNMcgywTrAiY9gysRj7Psxy/HeVw+OrEeHx4lPv777Lb71PY63ffImvZ26g65PHVEyQibgA5YrjQtH4sC9m876CVmkGfjMUI+bPM/ZscDoc2990OalCBeU4rNtsUE66LvL8Dezl5/6bqJGWPpnJKRlBXv+EBd4zQDFLAmOZGqDJPkxyPRzl8bed9v9un+TlWRZldsjUJ4mtLGk0paZA1KUNrTtx+GbqDd34nQa7trGNjrZXenWpynmY5Hv903L8oLOzT6WT574Nb+cF/BNkaf3LfJvfInyAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiCI/zL+AQ7WUdzeTZYMAAAAAElFTkSuQmCC"}),i.d(e,"k",function(){return"asdf"}),i.d(e,"e",function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYhe2WUQ3DIBiEPw84qAEMTEEV1EEdzAEWqqES6gEL1VAL3cMPgSVrtmwhtwe+hCce7srB/YVOp/MbHtiBAxgVBlbgTGtTGLhXBoLCAMAEzCrxv8BjUci4YTHICMmEhAHrAQkOiAjzX7D37xTiIYkvCvGR0n6DwsCexFeF+ET5+qv6jdh09C0M1MPn6u3n/SYn9ImBjYbjeeZ9BPmSNjkBh+V7YpfxVQdkA83q2VcmIs+/YmPaaz6cHFZGkRLJgR27bDB1Ol/xAD7MOJQQKCSlAAAAAElFTkSuQmCC"}),i.d(e,"h",function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAIABJREFUeJzt3X2YXlV97//32vdMmLbTk8ho0phqjP5CMGDEhpQYoDgmzCQqogJWUFAqqCfWXrGKeCpWWsGDPDRYG34KHBFRQHlQjJBMSIioIKcEC6nQIj/F1GIaJAjH6TFk5t7r98eaKZPne+bee333w+d1XfvqJYW9vpO5c+/PXnvt9XWUXydwkHURIiJSKs8BQ9ZFWHLWBbSoE1gAHA0cDswCXgr0AN2GdYmISHkNA08D/wE8DvwrcD/wA2CbYV1RFDkA9ACnA33AsehCLyIi8WwG7gJuAu41riUXRQwAJwDvBd4IdBjXIiIi8hhwLfAFYLtxLZkpSgBIgLcCfw3MM65FRERkbwaBVcBKKvCIoAgBYBHw98B860JERERaMAj8LXA5JV5IaBkAeoCLgLMMaxAREZmoR4CzKekagYbRuIuAdcDrjcYXERFp14uAdwMpcA/gbcsZH4sZgBXAJWiBn4iIVMd64B2UaJFgzACQAJ8HlkccU0REJJZHCK+uP2FdSCtiBYBO4Hrg5EjjiYiIWNgC9AOPWhdyIDECQAJ8HV38RUSkHrYSdq593LqQ/UkijHEZuviLiEh9TAcGgGnWhexP3gFgxcghIiJSJ7OBbxEegRdSnq8BLiI8948xyyAiIlI0fwj8PmE2oHDyCgA9hPf8D87p/CIiImWwEPgR8BPrQnaX1935RcDMnM4tIiJSJl8EJlsXsbs8ZgAWEZoliIiISHgM0EXBHgVk/RpgAvwT6ugnIiIy1jCh6d1m60JGZf0I4K3o4i8iIrK7DuCT1kWMlfUMwEMoAIiIiOzLoRRkl8AsZwCWoou/iIjI/vyVdQGjsgwA783wXCIiIlX0dgryRkBWAaAHeFNG5xIREamqLkIIMJdVAPhTwg8lIiIi+3eqdQGQXQDoy+g8IiIiVXcsBXgMkEUASIDjMjiPiIhIHXQAf2JdRBYBYD4wJYPziIiI1MXrrQvIIgAsyOAcIiIidTLfuoAsAsBhGZxDRESkTl5lXUAWAeCQDM4hIiJSJ1MIr9CbySIAvDiDc4iIiNTNSywHzyIAvDCDc4iIiNTNH1gOnkUA+N0MziEiIlI3v2c5eBYBQDsAioiIjN9BloNn2QxIRERESkIBQEREpIY6rAvI2c3AHcAvrAsREZGoXgKcOHJIToYAX7DjN8CSPH9oEREpheOAp7C/Lu3tOC3Hn/uAqvoI4DRgvXURIiJi7m7CDeEO60KKpooB4DZgtXURIiJSGA8Cn7MuomiqGACusy5AREQK5xbrAoqmigHgp9YFiIhI4fzSuoCiqWIASK0LEBGRwhm2LqBoqhgARERE5AAUAERERGpIAUBERKSGFABERERqSAFARESkhhQAREREakgBQEREpIYUAERERGpIAUBERKSGFABERERqSAFARESkhhQAREREakgBQEREpIYUAERERGpIAUBERKSGFABERERqSAFARESkhhQAREREakgBQEREpIYUAERERGpIAUBERKSGFABERERqSAFARESkhhQAREREakgBQEREpIYUAERERGpIAUBERKSGFABERERqSAFARESkhhQAREREakgBQEREpIY6rAsQEamxLmA6MHnk+B2gExgChoFngaeAXwGDRjVKRSkAiIjkrws4CngNcBhwODCTcPFv1Xbg58BPgH8aOe4nhASRcVMAEBHJXgIsBI4HlgJH0v73bc/IMR84dcw/3wzcCawF7ibMHohEMQT4Ah3z8v1xRUT2aQGwEvglNt9/TwFXAcfl/YOW0DTsr0+7H6fl+hNHoAAgInXWBZwNbML++2/s8RPgHMLaAlEAyIUCgIjU0WTgE8A27L/39nf8BriUcAGsMwWAHCgAiEiddBHurJ/C/vtuvEHgIuo7I6AAkAMFABGpixMIU+vW33PtHNsIjyzqtg+MAsBu6vYBEBGZiGnATcC3gdnGtbRrKnAl8F1gjm0pYkkBQERk/04AHgZOti4kY8cCDwIrrAsRGwoAIiJ71wmsItz19xjXkpcuwmuLd1Ddn1H2QQFARGRP04DvAcutC4lkGfAAcIR1IRKPAoCIyK7mAf+bsJNfncwEvk945CE1oAAgIvK84wjb6c60LsRIN3Ar4S0BqTgFABGRYAnwHWCKdSHGOghvCWhxYMUpAIiIhDv/1YQ7YAlWUp81ELWkACAidbeAcOffZV1IAa0CTrcuQvKhACAidTaLcPHXnf++fYnweEQqRgFAROqqm3Dxn2pdSMF1EHZB1K6BFaMAICJ1dSUw17qIkphCeDtAMyUVogAgInW0HDjVuoiSmUtYEyAVoQAgInUzB7jMuoiSOoMKtLCVQAFA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"}),i.d(e,"i",function(){return"data:image/jpeg;base64,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"})},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?t.exports=r=function(t){return i(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)},r(e)}t.exports=r},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=i(5),u=i(4),d=new(function(){function t(){s()(this,t)}return n()(t,[{key:"Point",value:function(t,e,i,r,s){var o={attribs:{}};switch(Object.assign(o.attribs,e),t){case h.b.CS_OBJECT_ARRAY:o.coords=[i[2*s],i[2*s+1]],o.coordsZ=[r[s]];break;case h.b.DEFAULT:o.coords=i.slice(),o.coordsZ=[0]}return o.center=new a.w(o.coords[0],o.coords[1],0),o.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),TempGeo3C:new a.w(0,0,0)},o.obj.symbolTGW=new a.E(0,0,0,0),o.obj.Limit=new a.E(0,0,0,0),o.cp=[],Object(l.d)(o.obj.Limit,o.coords),Object(l.a)(o.center,o.coords,o.coordsZ),o}},{key:"ClusterPoint",value:function(t,e){var i=t.coordinates,r=t.properties,s={attribs:{}};return s.coords=i.slice(),s.coordsZ=[0],s.attribs=Object.assign({},r),s.center=new a.w(s.coords[0],s.coords[1],0),s.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),TempGeo3C:new a.w(0,0,0),superCluster:e},s.getLeaves=function(t,e){return this.obj.superCluster.getLeaves(this.attribs.cluster_id,t,e)},s.obj.symbolTGW=new a.E(0,0,0,0),s.cp=[],s.objects=t.objects.slice(),Object(l.a)(s.center,s.coords,s.coordsZ),s}},{key:"Line",value:function(t,e,i,r){var s={attribs:{}};switch(Object.assign(s.attribs,e),s.center=new a.w(0,0,0),s.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},t){case h.b.CS_OBJECT_ARRAY:s.coords=i,s.coordsZ=r,Object(l.c)(s.center,s.coords,s.coordsZ),Object(l.e)(s.obj.Limit,s.coords);break;case h.b.DEFAULT:s.coords=[],s.coordsZ=[];for(var o=0;o<i.length/2;o++)s.coords.push(i[2*o],i[2*o+1]),s.coordsZ.push(0);Object(l.a)(s.center,s.coords,s.coordsZ),Object(l.d)(s.obj.Limit,s.coords)}return s.obj.symbolTGW=new a.E(0,0,0,0),s.cp=[],s}},{key:"Polygon",value:function(t,e,i,r){var s={attribs:{}};switch(Object.assign(s.attribs,e),s.center=new a.w(0,0,0),s.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},t){case h.b.CS_OBJECT_ARRAY:s.coords=i,s.coordsZ=r,Object(l.c)(s.center,s.coords,s.coordsZ),Object(l.e)(s.obj.Limit,s.coords);break;case h.b.DEFAULT:s.coords=[],s.coordsZ=[];for(var o=0;o<i.length/2;o++)s.coords.push(i[2*o]),s.coords.push(i[2*o+1]),s.coordsZ.push(0);Object(l.a)(s.center,s.coords,s.coordsZ),Object(l.d)(s.obj.Limit,s.coords)}return s.obj.symbolTGW=new a.E(0,0,0,0),s.cp=[],s}},{key:"Shape",value:function(t,e,i,r,s,o){var n={attribs:{}};return Object.assign(n.attribs,e),n.coords=[i[2*o],i[2*o+1]],n.coordsZ=[r[o]],n.shapeType=s.shapeType[o],n.radius1=s.radius1[o],n.radius2=s.radius2[o],n.rotDeg=s.rotDeg[o],n.center=new a.w(n.coords[0],n.coords[1],0),n.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},n.obj.symbolTGW=new a.E(0,0,0,0),n.cp=[],Object(l.a)(n.center,n.coords,n.coordsZ),n}},{key:"ArcArea",value:function(t,e,i,r,s,o){var n={attribs:{}};return Object.assign(n.attribs,e),n.coords=[i[2*o],i[2*o+1]],n.coordsZ=[r[o]],n.startAng=s.startAng[o],n.endAng=s.endAng[o],n.radius1=s.radius1[o],n.radius2=s.radius2[o],n.stepAng=s.stepAng[o],n.center=new a.w(n.coords[0],n.coords[1],0),n.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0),TempGeo3CLine:new a.w(0,0,0)},n.obj.symbolTGW=new a.E(0,0,0,0),n.cp=[],n}},{key:"Point3D",value:function(t,e,i,r){var s={attribs:{}};Object.assign(s.attribs,t),s.coords=[e[2*r],e[2*r+1],e[2*r],e[2*r+1]];var o=u.c.GetZAsMeter(i.minZ[r]),n=u.c.GetZAsMeter(i.maxZ[r]);return s.coordsZ=[o,n],s.minZ=i.minZ[r],s.maxZ=i.maxZ[r],s.zMode=[i.minZMode[r],i.maxZMode[r]],s.center=new a.w(s.coords[0],s.coords[1],0),s.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},s.obj.symbolTGW=new a.E(0,0,0,0),s.cp=[],Object(l.d)(s.obj.Limit,s.coords),Object(l.a)(s.center,s.coords,[n,n]),s}},{key:"PolyLine3D",value:function(t,e,i,r,s,o){var n,h=[],d={attribs:{}};Object.assign(d.attribs,t),d.center=new a.w(0,0,0),d.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},d.coords=e,d.coordsZ=[],d.heights=[];for(var c=0;c<i.length;c++)if(Array.isArray(i[c])){d.coordsZ[c]=[],d.heights[c]=[];for(var f=0;f<i[c].length;f++)d.coordsZ[c].push(u.c.GetZAsMeter(i[c][f])),n=u.c.GetZAsMeter(s[c][f]),d.heights[c].push(n-d.coordsZ[c][f]),h.push(n)}else d.coordsZ.push(u.c.GetZAsMeter(i[c])),n=u.c.GetZAsMeter(s[c]),d.heights.push(n-d.coordsZ[c]),h.push(n);return d.minZMode=r,d.maxZMode=o,Object(l.b)(d.center,d.coords,Math.max.apply(Math,h)),Object(l.e)(d.obj.Limit,d.coords),d.obj.symbolTGW=new a.E(0,0,0,0),d.cp=[],d}},{key:"EllipseCircle3D",value:function(t,e,i,r,s,o){var n={attribs:{}};Object.assign(n.attribs,t),n.coords=[e[2*s],e[2*s+1]];var l=u.c.GetZAsMeter(i.minZ[s]),d=u.c.GetZAsMeter(i.maxZ[s]);return n.coordsZ=[l],n.height=d-l,o===h.i.ELLIPSE?(n.radius1=u.c.GetZAsMeter(r.radius1[s]),n.radius2=u.c.GetZAsMeter(r.radius2[s]),n.rotDeg=r.rotDeg[s]):(n.radius1=u.c.GetZAsMeter(r.radius[s]),n.radius2=u.c.GetZAsMeter(r.radius[s]),n.rotDeg=0),n.center=new a.w(n.coords[0],n.coords[1],d),n.minZMode=i.minZMode[s],n.maxZMode=i.maxZMode[s],n.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},n.obj.symbolTGW=new a.E(0,0,0,0),n.cp=[],n}},{key:"Rectangle3D",value:function(t,e,i,r,s,o){var n={attribs:{}};Object.assign(n.attribs,t),n.center=new a.w(0,0,0),n.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},n.coords=[],n.coords.push(e[0],e[1]),n.coords.push(e[2],e[1]),n.coords.push(e[2],e[3]),n.coords.push(e[0],e[3]),n.coords.push(e[0],e[1]);var h=u.c.GetZAsMeter(i),d=u.c.GetZAsMeter(s);n.coordsZ=[],n.coordsZ.length=5,n.coordsZ.fill(h);var c=d-h;return n.heights=[],n.heights.length=5,n.heights.fill(c),n.minZMode=r,n.maxZMode=o,Object(l.b)(n.center,n.coords.slice(0,n.coords.length-2),d),Object(l.e)(n.obj.Limit,n.coords),n.obj.symbolTGW=new a.E(0,0,0,0),n.cp=[],n}},{key:"ArcArea3D",value:function(t,e,i,r,s){var o={attribs:{}};Object.assign(o.attribs,t),o.coords=[e[2*s],e[2*s+1]];var n=u.c.GetZAsMeter(i.minZ[s]),h=u.c.GetZAsMeter(i.maxZ[s]);return o.coordsZ=[n],o.height=h-n,o.radius1=u.c.GetZAsMeter(r.radius1[s]),o.radius2=u.c.GetZAsMeter(r.radius2[s]),o.startAng=r.startAng[s],o.endAng=r.endAng[s],o.stepAng=r.stepAng[s],o.center=new a.w(o.coords[0],o.coords[1],h),o.minZMode=i.minZMode[s],o.maxZMode=i.maxZMode[s],o.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0),TempGeo3CLine:new a.w(0,0,0)},o.obj.symbolTGW=new a.E(0,0,0,0),o.cp=[],o}},{key:"Orbit3D",value:function(t,e,i,r,s){var o={attribs:{}};Object.assign(o.attribs,t),o.coords=[e[0],e[1],e[2],e[3]];var n=u.c.GetZAsMeter(i.minZ[s]),h=u.c.GetZAsMeter(i.maxZ[s]);return o.coordsZ=[n],o.height=h-n,o.radius1=u.c.GetZAsMeter(r.radius[s]),o.radius2=u.c.GetZAsMeter(r.radius[s]),o.minZMode=i.minZMode[s],o.maxZMode=i.maxZMode[s],o.center=new a.w(0,0,0),o.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},Object(l.b)(o.center,o.coords,h),o.obj.symbolTGW=new a.E(0,0,0,0),o.cp=[],o}},{key:"PolyArc3D",value:function(t,e,i,r,s){var o={attribs:{}};Object.assign(o.attribs,t),o.coords=[e[s][0][0],e[s][0][1]],o.polyCoords=[];for(var n=0;n<e[s][1].length;n++)o.polyCoords.push(e[s][1][n]);var h=u.c.GetZAsMeter(i.minZ[s]),l=u.c.GetZAsMeter(i.maxZ[s]);return o.coordsZ=[h],o.height=l-h,o.radius=u.c.GetZAsMeter(r.radius[s]),o.startAng=r.startAng[s],o.endAng=r.endAng[s],o.stepAng=r.stepAng[s],o.center=new a.w(o.coords[0],o.coords[1],l),o.minZMode=i.minZMode[s],o.maxZMode=i.maxZMode[s],o.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0),TempGeo3CLine:new a.w(0,0,0)},o.obj.symbolTGW=new a.E(0,0,0,0),o.cp=[],o}},{key:"Corridor3D",value:function(t,e,i,r,s){var o={attribs:{}};Object.assign(o.attribs,t),o.coords=[],o.width=u.c.GetZAsMeter(r.width[s]);var n=o.width*h.z.GLOBE_RADIUS_K;o.coords=a.b.MakeParallelLineStringDeg(e,n,!0,!1,-90);for(var d=a.b.MakeParallelLineStringDeg(e,n,!1,!1,90),c=d.length;c>0;c-=2)o.coords.push(d[c-2]),o.coords.push(d[c-1]);o.coords.push(o.coords[0]),o.coords.push(o.coords[1]);var f=u.c.GetZAsMeter(i.minZ[s]),p=u.c.GetZAsMeter(i.maxZ[s]);return o.coordsZ=[],o.coordsZ.length=o.coords.length/2,o.coordsZ.fill(f),o.heights=[],o.heights.length=o.coords.length/2,o.heights.fill(p-f),o.minZMode=i.minZMode[s],o.maxZMode=i.maxZMode[s],o.center=new a.w(0,0,0),o.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},Object(l.b)(o.center,o.coords.slice(0,o.coords.length-2),p),Object(l.e)(o.obj.Limit,o.coords),o.obj.symbolTGW=new a.E(0,0,0,0),o.cp=[],o}},{key:"Track3D",value:function(t,e,i,r,s){var o,n,d=[],c={attribs:{}};Object.assign(c.attribs,t),c.leftWidth=u.c.GetZAsMeter(r.leftWidth[s]),c.rightWidth=u.c.GetZAsMeter(r.rightWidth[s]),c.coords=[],c.coords=a.b.MakeParallelLineStringDeg(e,c.rightWidth*h.z.GLOBE_RADIUS_K,!0,!1,-90);var f=a.b.MakeParallelLineStringDeg(e,c.leftWidth*h.z.GLOBE_RADIUS_K,!1,!1,90);for(n=f.length;n>0;n-=2)c.coords.push(f[n-2]),c.coords.push(f[n-1]);for(c.coords.push(c.coords[0]),c.coords.push(c.coords[1]),c.coordsZ=[],c.heights=[],n=0;n<i.minZ[s].length;n++)c.coordsZ.push(u.c.GetZAsMeter(i.minZ[s][n])),o=u.c.GetZAsMeter(i.maxZ[s][n]),c.heights.push(o-c.coordsZ[n]),d.push(o);for(n=c.coordsZ.length-1;n>=0;n-=1)c.coordsZ.push(c.coordsZ[n]),c.heights.push(c.heights[n]);return c.coordsZ.push(c.coordsZ[0]),c.heights.push(c.heights[0]),c.minZMode=i.minZMode[s],c.maxZMode=i.maxZMode[s],c.center=new a.w(0,0,0),c.obj={Geo3D:new a.w(0,0,0),Geo3C:new a.w(0,0,0),CanvasPoint:new a.v(0,0),Limit:new a.E(0,0,0,0),TempGeo3C:new a.w(0,0,0)},Object(l.b)(c.center,c.coords.slice(0,c.coords.length-2),Math.max.apply(Math,d)),Object(l.e)(c.obj.Limit,c.coords),c.obj.symbolTGW=new a.E(0,0,0,0),c.cp=[],c}}]),t}())},function(t,e,i){var r=i(12),s=i(90);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){var r=i(91);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,i){"use strict";i.d(e,"c",function(){return a}),i.d(e,"d",function(){return h}),i.d(e,"a",function(){return u}),i.d(e,"b",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o);function a(t,e,i,r,s,o,n){return new Promise(function(a,h){t.responseType="arraybuffer",t.onload=function(){if(200===t.status){var e={response:t.response,responseTime:new Date-l,cellVectorLayer:n};a(e)}else a({response:null,status:!0,noData:!0,cellVectorLayer:n})},t.onerror=function(){r&&console.log(o),a({response:null,err:!0,cellVectorLayer:n})},t.ontimeout=function(){r&&console.log(s),a({response:null,timeout:!0,cellVectorLayer:n})},t.onabort=function(){r&&console.log("aborted")},t.open("GET",e),t.timeout=i;var l=new Date;t.send()})}function h(t,e,i,r,s,o,n,a){return new Promise(function(h,l){t.onload=function(){if(200===t.status){var e={response:t.responseXML,responseText:t.responseText,responseTime:new Date-u,responseTextureSize:n,cellVectorLayer:a};h(e)}else h({response:null,noData:!0,cellVectorLayer:a})},t.onerror=function(){r&&console.log(o),h({response:null,cellVectorLayer:a})},t.ontimeout=function(){r&&console.log(s),h({response:null,cellVectorLayer:a})},t.onabort=function(){console.log("aborted")},t.open("GET",e),t.timeout=i;var u=new Date;t.send()})}var l=function(){function t(e,i,r,o){s()(this,t),this.Req=this.Req.bind(this),this.Onload=this.Onload.bind(this),this.Onerror=this.Onerror.bind(this),this.OntimeOut=this.OntimeOut.bind(this),this.timeOut=e,this.debugActive=i,this.timoutMessage=r,this.errorMessage=o}return n()(t,[{key:"Req",value:function(t,e){delete this.resolve,this.resolve=t,this.xhttp=new XMLHttpRequest,this.xhttp.responseType="json",this.xhttp.onload=this.Onload,this.xhttp.onerror=this.Onerror,this.xhttp.ontimeout=this.OntimeOut,this.xhttp.open("GET",this.url),this.xhttp.timeout=this.timeOut,this.StartTime=new Date,this.xhttp.send()}},{key:"Onload",value:function(){this.resolve({response:this.xhttp.response,responseTime:new Date-this.StartTime}),delete this.xhttp}},{key:"Onerror",value:function(){this.debugActive&&console.log(this.errorMessage),delete this.xhttp,this.resolve({response:null})}},{key:"OntimeOut",value:function(){this.debugActive&&console.log(this.timoutMessage),delete this.xhttp,this.resolve({response:null})}},{key:"SendReq",value:function(t){return this.url=t,new Promise(this.Req)}}]),t}(),u=function(){function t(e,i,r,o){s()(this,t),this.Req=this.Req.bind(this),this.Onload=this.Onload.bind(this),this.Onerror=this.Onerror.bind(this),this.OntimeOut=this.OntimeOut.bind(this),this.OnAbort=this.OnAbort.bind(this),this.timeOut=e,this.debugActive=i,this.timoutMessage=r,this.errorMessage=o}return n()(t,[{key:"SetTimeout",value:function(t){this.xhttp.timeout=t}},{key:"Req",value:function(t,e){delete this.resolve,this.resolve=t,this.xhttp=new XMLHttpRequest,this.xhttp.responseType="arraybuffer",this.xhttp.onload=this.Onload,this.xhttp.onerror=this.Onerror,this.xhttp.ontimeout=this.OntimeOut,this.xhttp.onabort=this.OnAbort,this.xhttp.open("GET",this.url),this.xhttp.timeout=this.timeOut,this.StartTime=new Date,this.xhttp.send()}},{key:"Onload",value:function(){this.resolve({response:this.xhttp.response,responseTime:new Date-this.StartTime,url:this.url}),delete this.xhttp}},{key:"Onerror",value:function(){this.debugActive&&console.log(this.errorMessage),this.resolve({response:null,message:"error"}),delete this.xhttp}},{key:"OntimeOut",value:function(){this.debugActive&&console.log(this.timoutMessage),this.resolve({response:null,message:"timeout"}),delete this.xhttp}},{key:"OnAbort",value:function(){console.log("aborted"),this.resolve({response:null})}},{key:"SendReq",value:function(t,e){return e&&(this.timeout=e),this.url=t,new Promise(this.Req)}},{key:"AbortIfExist",value:function(){this.xhttp&&this.xhttp.abort()}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(4),h=i(0),l=new(function(){function t(){s()(this,t)}return n()(t,[{key:"createFontStyle",value:function(){return{name:"Arial",color:"#FFFFFF",size:24,hollow:!0,bold:!0,italic:!1}}},{key:"createRasterizeStyle",value:function(){return{fill:{color:"#ffff00"},border:{type:"line",width:1,color:"#f4d6f6",cap:"square"}}}},{key:"checkFonts",value:function(t){if(t){var e={};return t.showDistances===h.s.NOTSHOW||t.distanceFont||(e.createDistances=!0),t.showHeights&&!t.heightFont&&(e.createHeights=!0),t.showVertex&&!t.vertexFont&&(e.createVertex=!0),t.showAngles&&!t.angleFont&&(e.createAngles=!0),t.showArea&&!t.areaFont&&(e.createArea=!0),t.showVolume&&!t.volumeFont&&(e.createVolume=!0),e}return null}},{key:"CreateStyle",value:function(){return{titleRT:"",titleRB:"",titleLT:"",titleLB:"",titleCN:"",titleFont:this.createFontStyle(),icon:{type:h.e.URL,URL:null,iconColor:"#ffffff",shapeType:h.r.ELLIPSE,sizeX:32,sizeY:32,rotDeg:0,offsetX:0,offsetY:0,radius:16,borderColor:"#0000ff",fillColor:"#ffffff",borderWidth:2,backgroundColor:null,textureSize:null},opacity:1,border:!0,borderColor:"#f4d6f6",filled:!0,fillColor:"#ffff00",sideColor:"#ff00ff",cullFace:!0,depthTest:!1,showDistances:h.s.SHOW2D,showHeights:!1,showVertex:!1,showAngles:!1,showArea:!1,showVolume:!1,zMode:h.u.Z_GROUND_PERVERTEX}}},{key:"CreateStyleNoIcon",value:function(){return{titleRT:"",titleRB:"",titleLT:"",titleLB:"",titleCN:"",titleFont:this.createFontStyle(),icon:{type:h.e.NOICON},opacity:1,border:!0,borderColor:"#f4d6f6",filled:!0,fillColor:"#ffff00",sideColor:"#ff00ff",cullFace:!0,depthTest:!1}}},{key:"FillColor",value:function(t){Array.isArray(t.__titleFontStr)||(t.__titleFontStr=[]),this.FillFontStyleString(t,t.titleFont,t.__titleFontStr,!0),t.__fontTextColor=a.c.StringToColor(t.titleFont.color,t.opacity),t.distanceFont&&(Array.isArray(t.__distanceFontStr)||(t.__distanceFontStr=[]),t.__distanceTextColor=a.c.StringToColorForCanvas(t.distanceFont.color,t.opacity),this.FillFontStyleString(t,t.distanceFont,t.__distanceFontStr)),t.heightFont&&(Array.isArray(t.__heightFontStr)||(t.__heightFontStr=[]),t.__heightTextColor=a.c.StringToColorForCanvas(t.heightFont.color,t.opacity),this.FillFontStyleString(t,t.heightFont,t.__heightFontStr)),t.vertexFont&&(Array.isArray(t.__vertexFontStr)||(t.__vertexFontStr=[]),t.__vertexTextColor=a.c.StringToColorForCanvas(t.vertexFont.color,t.opacity),this.FillFontStyleString(t,t.vertexFont,t.__vertexFontStr)),t.angleFont&&(Array.isArray(t.__angleFontStr)||(t.__angleFontStr=[]),t.__angleTextColor=a.c.StringToColorForCanvas(t.angleFont.color,t.opacity),this.FillFontStyleString(t,t.angleFont,t.__angleFontStr)),t.areaFont&&(Array.isArray(t.__areaFontStr)||(t.__areaFontStr=[]),t.__areaTextColor=a.c.StringToColorForCanvas(t.areaFont.color,t.opacity),this.FillFontStyleString(t,t.areaFont,t.__areaFontStr)),t.volumeFont&&(Array.isArray(t.__volumeFontStr)||(t.__volumeFontStr=[]),t.__volumeTextColor=a.c.StringToColorForCanvas(t.volumeFont.color,t.opacity),this.FillFontStyleString(t,t.volumeFont,t.__volumeFontStr)),t.__borderColor=a.c.StringToColor(t.borderColor,t.opacity),t.__fillColor=a.c.StringToColor(t.fillColor,t.opacity),t.__sideColor=a.c.StringToColor(t.sideColor,t.opacity),Object.keys(t.icon).length>1&&(t.__iconColor=a.c.StringToColor(t.icon.iconColor,t.opacity),t.__iconborderColor=a.c.StringToColor(t.icon.borderColor,t.opacity),t.__iconfillColor=a.c.StringToColor(t.icon.fillColor,t.opacity))}},{key:"FillFontStyleString",value:function(t,e,i,r){e.italic?i[0]="italic ":i[0]="",e.bold?i[0]+="bold ":i[0]+="",i[0]||(i[0]="normal "),r?(t.__titleSize=a.c.GetFontSizeAsNumber(e.size),i[1]=16):i[1]=a.c.GetFontSizeAsNumber(e.size)/2,i[2]=e.name}}]),t}())},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r;try{r=new Blob(['\nvar cdt2dLib=function(r){var n={};function t(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return r[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=n,t.d=function(r,n,e){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:e})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n)return r;if(4&n&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&n&&"string"!=typeof r)for(var i in r)t.d(e,i,function(n){return r[n]}.bind(null,i));return e},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,"a",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p="",t(t.s=5)}([function(r,n,t){"use strict";function e(r,n,t,e,i){var u=["function ",r,"(a,l,h,",e.join(","),"){",i?"":"var i=",t?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?n.indexOf("c")<0?u.push(";if(x===y){return m}else if(x<=y){"):u.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):u.push(";if(",n,"){i=m;"),t?u.push("l=m+1}else{h=m-1}"):u.push("h=m-1}else{l=m+1}"),u.push("}"),i?u.push("return -1};"):u.push("return i};"),u.join("")}function i(r,n,t,i){return new Function([e("A","x"+r+"y",n,["y"],i),e("P","c(x,y)"+r+"0",n,["y","c"],i),"function dispatchBsearch",t,"(a,y,c,l,h){if(typeof(c)===\'function\'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",t].join(""))()}r.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},function(r,n,t){"use strict";r.exports=function(r,n,t){var i=r*n,u=e*r,o=u-(u-r),a=r-o,s=e*n,f=s-(s-n),h=n-f,c=a*h-(i-o*f-a*f-o*h);if(t)return t[0]=c,t[1]=i,t;return[c,i]};var e=+(Math.pow(2,27)+1)},function(r,n,t){"use strict";r.exports=function(r,n){var t=0|r.length,e=0|n.length;if(1===t&&1===e)return function(r,n){var t=r+n,e=t-r,i=r-(t-e)+(n-e);if(i)return[i,t];return[t]}(r[0],n[0]);var i,u,o=new Array(t+e),a=0,s=0,f=0,h=Math.abs,c=r[s],l=h(c),p=n[f],v=h(p);l<v?(u=c,(s+=1)<t&&(c=r[s],l=h(c))):(u=p,(f+=1)<e&&(p=n[f],v=h(p)));s<t&&l<v||f>=e?(i=c,(s+=1)<t&&(c=r[s],l=h(c))):(i=p,(f+=1)<e&&(p=n[f],v=h(p)));var g,d,y=i+u,b=y-i,m=u-b,w=m,x=y;for(;s<t&&f<e;)l<v?(i=c,(s+=1)<t&&(c=r[s],l=h(c))):(i=p,(f+=1)<e&&(p=n[f],v=h(p))),(m=(u=w)-(b=(y=i+u)-i))&&(o[a++]=m),w=x-((g=x+y)-(d=g-x))+(y-d),x=g;for(;s<t;)(m=(u=w)-(b=(y=(i=c)+u)-i))&&(o[a++]=m),w=x-((g=x+y)-(d=g-x))+(y-d),x=g,(s+=1)<t&&(c=r[s]);for(;f<e;)(m=(u=w)-(b=(y=(i=p)+u)-i))&&(o[a++]=m),w=x-((g=x+y)-(d=g-x))+(y-d),x=g,(f+=1)<e&&(p=n[f]);w&&(o[a++]=w);x&&(o[a++]=x);a||(o[a++]=0);return o.length=a,o}},function(r,n,t){"use strict";var e=t(1),i=t(9);r.exports=function(r,n){var t=r.length;if(1===t){var u=e(r[0],n);return u[0]?u:[u[1]]}var o=new Array(2*t),a=[.1,.1],s=[.1,.1],f=0;e(r[0],n,a),a[0]&&(o[f++]=a[0]);for(var h=1;h<t;++h){e(r[h],n,s);var c=a[1];i(c,s[0],a),a[0]&&(o[f++]=a[0]);var l=s[1],p=a[1],v=l+p,g=p-(v-l);a[1]=v,g&&(o[f++]=g)}a[1]&&(o[f++]=a[1]);0===f&&(o[f++]=0);return o.length=f,o}},function(r,n,t){"use strict";r.exports=function(r,n){var t=0|r.length,e=0|n.length;if(1===t&&1===e)return function(r,n){var t=r+n,e=t-r,i=r-(t-e)+(n-e);if(i)return[i,t];return[t]}(r[0],-n[0]);var i,u,o=new Array(t+e),a=0,s=0,f=0,h=Math.abs,c=r[s],l=h(c),p=-n[f],v=h(p);l<v?(u=c,(s+=1)<t&&(c=r[s],l=h(c))):(u=p,(f+=1)<e&&(p=-n[f],v=h(p)));s<t&&l<v||f>=e?(i=c,(s+=1)<t&&(c=r[s],l=h(c))):(i=p,(f+=1)<e&&(p=-n[f],v=h(p)));var g,d,y=i+u,b=y-i,m=u-b,w=m,x=y;for(;s<t&&f<e;)l<v?(i=c,(s+=1)<t&&(c=r[s],l=h(c))):(i=p,(f+=1)<e&&(p=-n[f],v=h(p))),(m=(u=w)-(b=(y=i+u)-i))&&(o[a++]=m),w=x-((g=x+y)-(d=g-x))+(y-d),x=g;for(;s<t;)(m=(u=w)-(b=(y=(i=c)+u)-i))&&(o[a++]=m),w=x-((g=x+y)-(d=g-x))+(y-d),x=g,(s+=1)<t&&(c=r[s]);for(;f<e;)(m=(u=w)-(b=(y=(i=p)+u)-i))&&(o[a++]=m),w=x-((g=x+y)-(d=g-x))+(y-d),x=g,(f+=1)<e&&(p=-n[f]);w&&(o[a++]=w);x&&(o[a++]=x);a||(o[a++]=0);return o.length=a,o}},function(r,n,t){r.exports=t(6)},function(r,n,t){"use strict";var e=t(7),i=t(10),u=t(11),o=t(13);function a(r){return[Math.min(r[0],r[1]),Math.max(r[0],r[1])]}function s(r,n){return r[0]-n[0]||r[1]-n[1]}function f(r,n,t){return n in r?r[n]:t}r.exports=function(r,n,t){Array.isArray(n)?(t=t||{},n=n||[]):(t=n||{},n=[]);var h=!!f(t,"delaunay",!0),c=!!f(t,"interior",!0),l=!!f(t,"exterior",!0),p=!!f(t,"infinity",!1);if(!c&&!l||0===r.length)return[];var v=e(r,n);if(h||c!==l||p){for(var g=i(r.length,function(r){return r.map(a).sort(s)}(n)),d=0;d<v.length;++d){var y=v[d];g.addTriangle(y[0],y[1],y[2])}return h&&u(r,g),l?c?p?o(g,0,p):g.cells():o(g,1,p):o(g,-1)}return v}},function(r,n,t){"use strict";var e=t(0),i=t(8)[3],u=0,o=1,a=2;function s(r,n,t,e,i){this.a=r,this.b=n,this.idx=t,this.lowerIds=e,this.upperIds=i}function f(r,n,t,e){this.a=r,this.b=n,this.type=t,this.idx=e}function h(r,n){var t=r.a[0]-n.a[0]||r.a[1]-n.a[1]||r.type-n.type;return t||(r.type!==u&&(t=i(r.a,r.b,n.b))?t:r.idx-n.idx)}function c(r,n){return i(r.a,r.b,n)}function l(r,n,t,u,o){for(var a=e.lt(n,u,c),s=e.gt(n,u,c),f=a;f<s;++f){for(var h=n[f],l=h.lowerIds,p=l.length;p>1&&i(t[l[p-2]],t[l[p-1]],u)>0;)r.push([l[p-1],l[p-2],o]),p-=1;l.length=p,l.push(o);var v=h.upperIds;for(p=v.length;p>1&&i(t[v[p-2]],t[v[p-1]],u)<0;)r.push([v[p-2],v[p-1],o]),p-=1;v.length=p,v.push(o)}}function p(r,n){var t;return(t=r.a[0]<n.a[0]?i(r.a,r.b,n.a):i(n.b,n.a,r.a))?t:(t=n.b[0]<r.b[0]?i(r.a,r.b,n.b):i(n.b,n.a,r.b))||r.idx-n.idx}function v(r,n,t){var i=e.le(r,t,p),u=r[i],o=u.upperIds,a=o[o.length-1];u.upperIds=[a],r.splice(i+1,0,new s(t.a,t.b,t.idx,[a],o))}function g(r,n,t){var i=t.a;t.a=t.b,t.b=i;var u=e.eq(r,t,p),o=r[u];r[u-1].upperIds=o.upperIds,r.splice(u,1)}r.exports=function(r,n){for(var t=r.length,e=n.length,i=[],c=0;c<t;++c)i.push(new f(r[c],null,u,c));for(c=0;c<e;++c){var p=n[c],d=r[p[0]],y=r[p[1]];d[0]<y[0]?i.push(new f(d,y,a,c),new f(y,d,o,c)):d[0]>y[0]&&i.push(new f(y,d,a,c),new f(d,y,o,c))}i.sort(h);for(var b=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),m=[new s([b,1],[b,0],-1,[],[],[],[])],w=[],x=(c=0,i.length);c<x;++c){var j=i[c],A=j.type;A===u?l(w,m,r,j.a,j.idx):A===a?v(m,r,j):g(m,r,j)}return w}},function(r,n,t){"use strict";var e=t(1),i=t(2),u=t(3),o=t(4),a=5;function s(r,n){for(var t=new Array(r.length-1),e=1;e<r.length;++e)for(var i=t[e-1]=new Array(r.length-1),u=0,o=0;u<r.length;++u)u!==n&&(i[o++]=r[e][u]);return t}function f(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var n=r.length>>1;return["sum(",f(r.slice(0,n)),",",f(r.slice(n)),")"].join("")}function h(r){if(2===r.length)return[["sum(prod(",r[0][0],",",r[1][1],"),prod(-",r[0][1],",",r[1][0],"))"].join("")];for(var n=[],t=0;t<r.length;++t)n.push(["scale(",f(h(s(r,t))),",",(e=t,1&e?"-":""),r[0][t],")"].join(""));return n;var e}function c(r){for(var n=[],t=[],a=function(r){for(var n=new Array(r),t=0;t<r;++t){n[t]=new Array(r);for(var e=0;e<r;++e)n[t][e]=["m",e,"[",r-t-1,"]"].join("")}return n}(r),c=[],l=0;l<r;++l)0==(1&l)?n.push.apply(n,h(s(a,l))):t.push.apply(t,h(s(a,l))),c.push("m"+l);var p=f(n),v=f(t),g="orientation"+r+"Exact",d=["function ",g,"(",c.join(),"){var p=",p,",n=",v,",d=sub(p,n);return d[d.length-1];};return ",g].join("");return new Function("sum","prod","scale","sub",d)(i,e,u,o)}var l=c(3),p=c(4),v=[function(){return 0},function(){return 0},function(r,n){return n[0]-r[0]},function(r,n,t){var e,i=(r[1]-t[1])*(n[0]-t[0]),u=(r[0]-t[0])*(n[1]-t[1]),o=i-u;if(i>0){if(u<=0)return o;e=i+u}else{if(!(i<0))return o;if(u>=0)return o;e=-(i+u)}var a=33306690738754716e-32*e;return o>=a||o<=-a?o:l(r,n,t)},function(r,n,t,e){var i=r[0]-e[0],u=n[0]-e[0],o=t[0]-e[0],a=r[1]-e[1],s=n[1]-e[1],f=t[1]-e[1],h=r[2]-e[2],c=n[2]-e[2],l=t[2]-e[2],v=u*f,g=o*s,d=o*a,y=i*f,b=i*s,m=u*a,w=h*(v-g)+c*(d-y)+l*(b-m),x=7771561172376103e-31*((Math.abs(v)+Math.abs(g))*Math.abs(h)+(Math.abs(d)+Math.abs(y))*Math.abs(c)+(Math.abs(b)+Math.abs(m))*Math.abs(l));return w>x||-w>x?w:p(r,n,t,e)}];function g(r){var n=v[r.length];return n||(n=v[r.length]=c(r.length)),n.apply(void 0,r)}!function(){for(;v.length<=a;)v.push(c(v.length));for(var n=[],t=["slow"],e=0;e<=a;++e)n.push("a"+e),t.push("o"+e);var i=["function getOrientation(",n.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(e=2;e<=a;++e)i.push("case ",e,":return o",e,"(",n.slice(0,e).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),t.push(i.join(""));var u=Function.apply(void 0,t);for(r.exports=u.apply(void 0,[g].concat(v)),e=0;e<=a;++e)r.exports[e]=v[e]}()},function(r,n,t){"use strict";r.exports=function(r,n,t){var e=r+n,i=e-r,u=n-i,o=r-(e-i);if(t)return t[0]=o+u,t[1]=e,t;return[o+u,e]}},function(r,n,t){"use strict";var e=t(0);function i(r,n){this.stars=r,this.edges=n}r.exports=function(r,n){for(var t=new Array(r),e=0;e<r;++e)t[e]=[];return new i(t,n)};var u=i.prototype;function o(r,n,t){for(var e=1,i=r.length;e<i;e+=2)if(r[e-1]===n&&r[e]===t)return r[e-1]=r[i-2],r[e]=r[i-1],void(r.length=i-2)}u.isConstraint=function(){var r=[0,0];function n(r,n){return r[0]-n[0]||r[1]-n[1]}return function(t,i){return r[0]=Math.min(t,i),r[1]=Math.max(t,i),e.eq(this.edges,r,n)>=0}}(),u.removeTriangle=function(r,n,t){var e=this.stars;o(e[r],n,t),o(e[n],t,r),o(e[t],r,n)},u.addTriangle=function(r,n,t){var e=this.stars;e[r].push(n,t),e[n].push(t,r),e[t].push(r,n)},u.opposite=function(r,n){for(var t=this.stars[n],e=1,i=t.length;e<i;e+=2)if(t[e]===r)return t[e-1];return-1},u.flip=function(r,n){var t=this.opposite(r,n),e=this.opposite(n,r);this.removeTriangle(r,n,t),this.removeTriangle(n,r,e),this.addTriangle(r,e,t),this.addTriangle(n,t,e)},u.edges=function(){for(var r=this.stars,n=[],t=0,e=r.length;t<e;++t)for(var i=r[t],u=0,o=i.length;u<o;u+=2)n.push([i[u],i[u+1]]);return n},u.cells=function(){for(var r=this.stars,n=[],t=0,e=r.length;t<e;++t)for(var i=r[t],u=0,o=i.length;u<o;u+=2){var a=i[u],s=i[u+1];t<Math.min(a,s)&&n.push([t,a,s])}return n}},function(r,n,t){"use strict";var e=t(12)[4];t(0);function i(r,n,t,i,u,o){var a=n.opposite(i,u);if(!(a<0)){if(u<i){var s=i;i=u,u=s,s=o,o=a,a=s}n.isConstraint(i,u)||e(r[i],r[u],r[o],r[a])<0&&t.push(i,u)}}r.exports=function(r,n){for(var t=[],u=r.length,o=n.stars,a=0;a<u;++a)for(var s=o[a],f=1;f<s.length;f+=2){if(!((p=s[f])<a)&&!n.isConstraint(a,p)){for(var h=s[f-1],c=-1,l=1;l<s.length;l+=2)if(s[l-1]===p){c=s[l];break}c<0||e(r[a],r[p],r[h],r[c])<0&&t.push(a,p)}}for(;t.length>0;){for(var p=t.pop(),v=(a=t.pop(),h=-1,c=-1,s=o[a],1);v<s.length;v+=2){var g=s[v-1],d=s[v];g===p?c=d:d===p&&(h=g)}h<0||c<0||(e(r[a],r[p],r[h],r[c])>=0||(n.flip(a,p),i(r,n,t,h,a,c),i(r,n,t,a,c,h),i(r,n,t,c,p,h),i(r,n,t,p,h,c)))}}},function(r,n,t){"use strict";var e=t(1),i=t(2),u=t(4),o=t(3),a=6;function s(r,n){for(var t=new Array(r.length-1),e=1;e<r.length;++e)for(var i=t[e-1]=new Array(r.length-1),u=0,o=0;u<r.length;++u)u!==n&&(i[o++]=r[e][u]);return t}function f(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var n=r.length>>1;return["sum(",f(r.slice(0,n)),",",f(r.slice(n)),")"].join("")}function h(r,n){if("m"===r.charAt(0)){if("w"===n.charAt(0)){var t=r.split("[");return["w",n.substr(1),"m",t[0].substr(1)].join("")}return["prod(",r,",",n,")"].join("")}return h(n,r)}function c(r){if(2===r.length)return[["diff(",h(r[0][0],r[1][1]),",",h(r[1][0],r[0][1]),")"].join("")];for(var n=[],t=0;t<r.length;++t)n.push(["scale(",f(c(s(r,t))),",",(e=t,!0&e?"-":""),r[0][t],")"].join(""));return n;var e}function l(r,n){for(var t=[],e=0;e<n-2;++e)t.push(["prod(m",r,"[",e,"],m",r,"[",e,"])"].join(""));return f(t)}function p(r){for(var n=[],t=[],a=function(r){for(var n=new Array(r),t=0;t<r;++t){n[t]=new Array(r);for(var e=0;e<r;++e)n[t][e]=["m",e,"[",r-t-2,"]"].join("")}return n}(r),h=0;h<r;++h)a[0][h]="1",a[r-1][h]="w"+h;for(h=0;h<r;++h)0==(1&h)?n.push.apply(n,c(s(a,h))):t.push.apply(t,c(s(a,h)));var p=f(n),v=f(t),g="exactInSphere"+r,d=[];for(h=0;h<r;++h)d.push("m"+h);var y=["function ",g,"(",d.join(),"){"];for(h=0;h<r;++h){y.push("var w",h,"=",l(h,r),";");for(var b=0;b<r;++b)b!==h&&y.push("var w",h,"m",b,"=scale(w",h,",m",b,"[0]);")}return y.push("var p=",p,",n=",v,",d=diff(p,n);return d[d.length-1];}return ",g),new Function("sum","diff","prod","scale",y.join(""))(i,u,e,o)}var v=[function(){return 0},function(){return 0},function(){return 0}];function g(r){var n=v[r.length];return n||(n=v[r.length]=p(r.length)),n.apply(void 0,r)}!function(){for(;v.length<=a;)v.push(p(v.length));for(var n=[],t=["slow"],e=0;e<=a;++e)n.push("a"+e),t.push("o"+e);var i=["function testInSphere(",n.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(e=2;e<=a;++e)i.push("case ",e,":return o",e,"(",n.slice(0,e).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),t.push(i.join(""));var u=Function.apply(void 0,t);for(r.exports=u.apply(void 0,[g].concat(v)),e=0;e<=a;++e)r.exports[e]=v[e]}()},function(r,n,t){"use strict";var e,i=t(0);function u(r,n,t,e,i,u,o){this.cells=r,this.neighbor=n,this.flags=e,this.constraint=t,this.active=i,this.next=u,this.boundary=o}function o(r,n){return r[0]-n[0]||r[1]-n[1]||r[2]-n[2]}r.exports=function(r,n,t){var e=function(r,n){for(var t=r.cells(),e=t.length,i=0;i<e;++i){var a=(y=t[i])[0],s=y[1],f=y[2];s<f?s<a&&(y[0]=s,y[1]=f,y[2]=a):f<a&&(y[0]=f,y[1]=a,y[2]=s)}t.sort(o);var h=new Array(e);for(i=0;i<h.length;++i)h[i]=0;var c=[],l=[],p=new Array(3*e),v=new Array(3*e),g=null;n&&(g=[]);var d=new u(t,p,v,h,c,l,g);for(i=0;i<e;++i)for(var y=t[i],b=0;b<3;++b){a=y[b],s=y[(b+1)%3];var m=p[3*i+b]=d.locate(s,a,r.opposite(s,a)),w=v[3*i+b]=r.isConstraint(a,s);m<0&&(w?l.push(i):(c.push(i),h[i]=1),n&&g.push([s,a,-1]))}return d}(r,t);if(0===n)return t?e.cells.concat(e.boundary):e.cells;var i=1,a=e.active,s=e.next,f=e.flags,h=e.cells,c=e.constraint,l=e.neighbor;for(;a.length>0||s.length>0;){for(;a.length>0;){var p=a.pop();if(f[p]!==-i){f[p]=i;h[p];for(var v=0;v<3;++v){var g=l[3*p+v];g>=0&&0===f[g]&&(c[3*p+v]?s.push(g):(a.push(g),f[g]=i))}}}var d=s;s=a,a=d,s.length=0,i=-i}var y=function(r,n,t){for(var e=0,i=0;i<r.length;++i)n[i]===t&&(r[e++]=r[i]);return r.length=e,r}(h,f,n);if(t)return y.concat(e.boundary);return y},u.prototype.locate=(e=[0,0,0],function(r,n,t){var u=r,a=n,s=t;return n<t?n<r&&(u=n,a=t,s=r):t<r&&(u=t,a=r,s=n),u<0?-1:(e[0]=u,e[1]=a,e[2]=s,i.eq(this.cells,e,o))})}]);\n\n\nvar onmessage = function(event)\n{\n  try {\n    if(event.data){\n      var cdt_coords = event.data[0]\n      var mainCoordLen = event.data[1]\n\n      var polycoord = []\n      for (var i = 0; i< cdt_coords.length / 2; i++) {\n        polycoord[i] = [cdt_coords[i * 2], cdt_coords[i * 2 + 1]]\n      }\n\n      var edges = []\n      // outher loop\n      for (var i = 0; i < mainCoordLen / 2 - 1; i++) {\n        edges.push([i, i + 1])\n      }\n      edges.push([mainCoordLen / 2 - 1, 0])\n      var notFlattenIndex = cdt2dLib(polycoord, edges, {exterior: false})\n      var flattenIndex = []\n\n      for (var i = 0; i < notFlattenIndex.length; i++) {\n        const notFlattenIndexI = notFlattenIndex[i]\n        flattenIndex.push(notFlattenIndexI[0])\n        flattenIndex.push(notFlattenIndexI[1])\n        flattenIndex.push(notFlattenIndexI[2])\n      }\n      postMessage(flattenIndex)\n    }\n  } catch (e) {\n    postMessage(["catch error"])\n  }\n}\npostMessage(["loaded"]);\n\n'],{type:"application/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(r=new window.BlobBuilder).append([0]),r=r.getBlob()}var s=URL.createObjectURL(r)},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(4),h={AND:"AND",OR:"OR",EQUAL:"EQUAL",NOTEQUAL:"NOTEQUAL",GREATER:"GREATER",LESS:"LESS",GREATEREQUAL:"GREATEREQUAL",LESSEQUAL:"LESSEQUAL",CONTAINS:"CONTAINS",NOTCONTAINS:"NOTCONTAINS","&":"&","=":"=","!=":"!=","<":"<",">":">","<=":"<=",">=":">=","|":"|","+":"+","-":"-"},l={STRING:0,DATE:1,FLOAT:2,INTEGER:3},u=new(function(){function t(){s()(this,t)}return n()(t,[{key:"EvaluateLeafs",value:function(t,e,i){if("string"==typeof t[0]||"number"==typeof t[0]||"boolean"==typeof t[0])t[0]=this.EvalLeafRule(t,e,i),5===t.length&&t.pop(),t.pop(),t.pop(),t.pop();else if(Array.isArray(t[0]))for(var r=t.length,s=0;s<=r;s+=2)this.EvaluateLeafs(t[s],e,i)}},{key:"IsRuleNested",value:function(t){for(var e=t.length;e--;)if(Array.isArray(t[e][0]))return!0;return!1}},{key:"EvaluateRoots",value:function(t){if(1===t.length&&!Array.isArray(t[0]))return t;if(this.IsRuleNested(t)){for(var e=t.length;e>1;)t.push(this.EvaluateRoots(t.pop()),t.pop(),this.EvaluateRoots(t.pop())),e-=2;return this.EvaluateRoots(t)}for(e=t.length;e>1;)t.push([this.EvalRootRule(t.pop(),t.pop(),t.pop())]),e-=2;return t.pop()}},{key:"GetResult",value:function(t,e,i){return 1===t.length?this.SwitchParamRule(h,null,t[0],null):(this.EvaluateLeafs(t,e,i),this.EvaluateRoots(t)[0])}},{key:"EvalMacroAttribsVal",value:function(t,e,i){return"number"!=typeof t&&(t=a.c.EvalMacroText(t,e,i)),Array.isArray(t)?t[0]:t}},{key:"EvalForConditionType",value:function(t,e){switch(l[e[3]]){case l.STRING:return String(t);case l.BOOLEAN:return Boolean(JSON.parse(t.toLowerCase()));case l.INTEGER:return parseInt(t);case l.FLOAT:return parseFloat(t.replace(",","."));case l.DATE:return a.c.DateParser(t,e[4])}}},{key:"EvalLeafRule",value:function(t,e,i){if(5===t.length)var r=a.c.EvalDateMacro(t[0],e),s=a.c.EvalDateMacro(t[2],e);else r=this.EvalMacroAttribsVal(t[0],e,i),s=this.EvalMacroAttribsVal(t[2],e,i);return r=this.EvalForConditionType(r,t),s=this.EvalForConditionType(s,t),this.SwitchParamRule(h,t[1],r,s)}},{key:"SwitchParamRule",value:function(t,e,i,r){if(!e&&!r)return"string"!=typeof i&&(i=String(i)),"true"==i;switch(e){case t.EQUAL:return i==r;case t.NOTEQUAL:return i!=r;case t.LESS:return i<r;case t.GREATER:return i>r;case t.LESSEQUAL:return i<=r;case t.GREATEREQUAL:return i>=r;case t.AND:return i&&r;case t.OR:return i||r;case t.CONTAINS:return-1!==i.search(r);case t.NOTCONTAINS:return-1===i.search(r);case t["="]:return i==r;case t["!="]:return i!=r;case t["<"]:return i<r;case t[">"]:return i>r;case t["<="]:return i<=r;case t[">="]:return i>=r;case t["&"]:return i&&r;case t["|"]:return i||r;case t["+"]:return-1!==i.search(r);case t["-"]:return-1===i.search(r);default:return 0}}},{key:"EvalRootRule",value:function(t,e,i){switch(e){case h.EQUAL:return t[0]==i[0];case h.NOTEQ:return t[0]!=i[0];case h.AND:return t[0]&&i[0];case h.OR:return t[0]||i[0]}}}]),t}())},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(32),h=i.n(a),l=i(0),u=i(4),d=i(20),c=i(1),f=i(5),p=i(13),F=i(14),y=i.n(F),A=i(15),g=i.n(A),C=i(16),b=i.n(C),T=i(10),v=i(23),L=function(){function t(e,i){s()(this,t),this.Cell=i,this.FCityLayer=e,this.FilterIndexCountArr=[],this.MilIconIndexCountArr=[],this.MapStartCountArr=[],this.StartCountArr=[],this.tempp2d=new c.u(0,0),this.IconCoordBuff,this.vertexBuffTitle=[null,null,null,null,null],this.textureCoordsBuffTitle=[null,null,null,null,null],this.totalCount=[0,0,0,0,0],this.iconSize=new Float32Array([0,0]),this.textScale=new Float32Array([0,0])}return n()(t,[{key:"SortFuncForObjValues",value:function(t,e){return t.mil.IconMap.mapIndex<e.mil.IconMap.mapIndex?-1:t.mil.IconMap.mapIndex>e.mil.IconMap.mapIndex?1:t.ruleIndex<e.ruleIndex?-1:t.ruleIndex>e.ruleIndex?1:t.mil.IconStr.toUpperCase()<e.mil.IconStr.toUpperCase()?-1:t.mil.IconStr.toUpperCase()>e.mil.IconStr.toUpperCase()?1:0}},{key:"SortFuncForIconStr",value:function(t,e){return t.mil.IconStr.toUpperCase()<e.mil.IconStr.toUpperCase()?-1:t.mil.IconStr.toUpperCase()>e.mil.IconStr.toUpperCase()?1:0}},{key:"SortFuncForMilMapIndex",value:function(t,e){return t.mapIndex<e.mapIndex?-1:t.mapIndex>e.mapIndex?1:0}},{key:"SortFuncForRules",value:function(t,e){return t.ruleIndex<e.ruleIndex?-1:t.ruleIndex>e.ruleIndex?1:0}},{key:"SortFuncForMapName",value:function(t,e){return t.IconMap.name.toUpperCase()<e.IconMap.name.toUpperCase()?-1:t.IconMap.name.toUpperCase()>e.IconMap.name.toUpperCase()?1:0}},{key:"SortFuncForMapIndex",value:function(t,e){return t.style.icon._mapIndex<e.style.icon._mapIndex?-1:t.style.icon._mapIndex>e.style.icon._mapIndex?1:0}},{key:"SortFuncForObjMapIndex",value:function(t,e){return t.mil.IconMap.mapIndex<e.mil.IconMap.mapIndex?-1:t.mil.IconMap.mapIndex>e.mil.IconMap.mapIndex?1:0}},{key:"EvaluateFilterRule",value:function(t,e,i){for(var r=t.length;r--;)if(d.a.GetResult(JSON.parse(JSON.stringify(t[r].rule)),e,i))return r;return-1}},{key:"Build",value:function(t,e,i,r){if(e&&(this.FillStartCountArr(r),this.FillIconVal(t,i)),!this.FCityLayer.rasterize){this.existTitleRT=this.CheckBuffersForTitles(r,i,"titleRT"),this.existTitleRB=this.CheckBuffersForTitles(r,i,"titleRB"),this.existTitleLT=this.CheckBuffersForTitles(r,i,"titleLT"),this.existTitleLB=this.CheckBuffersForTitles(r,i,"titleLB"),this.existTitleCN=this.CheckBuffersForTitles(r,i,"titleCN"),this.CreteBuffers(r,i);for(var s=[],o=[],n=0;n<5;n++)s[n]=[],o[n]=[];this.FindTitleVertex(s,o,e,t,r,i);var a=this.gl;if(r.__hasFont&&e)for(n=0;n<5;n++)this.vertexBuffTitle[n]&&(a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffTitle[n]),a.bufferData(a.ARRAY_BUFFER,new Float32Array(s[n]),a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.textureCoordsBuffTitle[n]),a.bufferData(a.ARRAY_BUFFER,new Float32Array(o[n]),a.STATIC_DRAW));e&&r.symbolReduction&&(this.FGlobe.XFDxZ3(),this.Reduction(r))}}},{key:"CheckBuffersForTitles",value:function(t,e,i){if(e[i])return!0;if(t.filter&&t.filter.length)for(var r=t.filter.length,s=0;s<r;s++)if(t.filter[s].style[i])return!0;return!1}},{key:"GetPixelValForRasterize",value:function(t,e,i){if("string"==typeof t){var r=u.c.EvalMacroText(t,i),s=c.b.DegreeToMeter(e.FDegreeW);return u.c.GetSizeAsMeter(r[0],s,l.z.GLOBE_IMAGE_SIZE,l.z.GLOBE_RADIUS_K)*l.z.GLOBE_IMAGE_SIZE/s}return t}},{key:"GetPixelVal",value:function(t,e){if("string"==typeof t){var i=u.c.EvalMacroText(t,e);return parseFloat(i[0].replace(/\D/g,""))}return t}},{key:"FillIconVal",value:function(t,e){if(e.iconType===l.e.MAP||e.iconType===l.e.NOICON){var i=t.length;if(this.FCityLayer.rasterize)for(r=0;r<i;r++)t[r].style.icon.__sizeX=this.GetPixelValForRasterize(t[r].style.icon.sizeX,this.Cell,t[r].attribs),t[r].style.icon.__sizeY=this.GetPixelValForRasterize(t[r].style.icon.sizeY,this.Cell,t[r].attribs);else for(r=0;r<i;r++)t[r].style.icon.__sizeX=this.GetPixelVal(t[r].style.icon.sizeX,t[r].attribs),t[r].style.icon.__sizeY=this.GetPixelVal(t[r].style.icon.sizeY,t[r].attribs)}else if(e.iconType===l.e.CIRCLE){var r,s=t.length;if(this.FCityLayer.rasterize)for(r=0;r<s;r++)t[r].style.icon.__sizeX=this.GetPixelValForRasterize(t[r].style.icon.sizeX,this.Cell,t[r].attribs),t[r].style.icon.__sizeY=this.GetPixelValForRasterize(t[r].style.icon.sizeY,this.Cell,t[r].attribs),t[r].style.icon.__borderWidth=this.GetPixelValForRasterize(t[r].style.icon.borderWidth,this.Cell,t[r].attribs),t[r].style.icon.__radius=this.GetPixelValForRasterize(t[r].style.icon.radius,this.Cell,t[r].attribs);else for(r=0;r<s;r++)t[r].style.icon.__sizeX=this.GetPixelVal(t[r].style.icon.sizeX,t[r].attribs),t[r].style.icon.__sizeY=this.GetPixelVal(t[r].style.icon.sizeY,t[r].attribs),t[r].style.icon.__borderWidth=this.GetPixelVal(t[r].style.icon.borderWidth,t[r].attribs),t[r].style.icon.__radius=this.GetPixelVal(t[r].style.icon.radius,t[r].attribs)}}},{key:"FillStartCountArr",value:function(t){var e=t.filter,i=t.__milIcon,r=this.IconMap;if(this.StartCountArr.length=0,i){this.FillObjectsRuleIndex(i,t),this.objects.sort(this.SortFuncForObjValues),this.ClearMilIconIndexCountArr(),this.MilIconIndexCountArr.length=0;for(var s=[],o=this.objects.length,n=0;n<o;n++)this.objects[n].mil.IconStr&&(-1===s.indexOf(this.objects[n].mil.IconStr)?(s.push(this.objects[n].mil.IconStr),this.MilIconIndexCountArr[s.length-1]={count:1,mil:this.objects[n].mil,style:this.objects[n].style}):this.MilIconIndexCountArr[s.length-1].count++);var a=0,h=this.MilIconIndexCountArr.length;for(n=0;n<h;n++){var u=this.MilIconIndexCountArr[n].mil;this.FillIconTextCoordBuffer(u.IconMap.map[u.IconStr],l.z.AUTO_MILITARY_MAP_SIZE,l.z.AUTO_MILITARY_MAP_SIZE,this.MilIconIndexCountArr[n]),this.StartCountArr.push({start:a,count:this.MilIconIndexCountArr[n].count,mapIndex:this.MilIconIndexCountArr[n].mil.IconMap.mapIndex,style:this.MilIconIndexCountArr[n].style,IconStr:this.MilIconIndexCountArr[n].mil.IconStr,icontextCoordBuff:this.MilIconIndexCountArr[n].__icontextCoordBuff}),a+=this.MilIconIndexCountArr[n].count}this.FindMilMapCountArr()}else if(e){n=0;if(this.FillObjectsRuleIndex(i,t),this.objects.sort(this.SortFuncForRules),this.FilterIndexCountArr[0]){this.StartCountArr.push({ruleIndex:-1,start:0,count:this.FilterIndexCountArr[0],style:t});var d=t.icon,c=t.iconType,f=t.icon;c===l.e.MAP&&-1!==d._mapIndex&&f&&this.FillIconTextCoordBuffer(r[d._mapIndex].map[d.name],r[d._mapIndex].mapW,r[d._mapIndex].mapH,t)}a=this.FilterIndexCountArr[0];var p=e.length;for(n=0;n<p;n++){if(this.FilterIndexCountArr[n+1])this.StartCountArr.push({ruleIndex:n,start:a,count:this.FilterIndexCountArr[n+1],style:e[n].style}),a+=this.FilterIndexCountArr[n+1],t.iconType===l.e.MAP&&-1!==e[n].style.icon._mapIndex&&e[n].style.icon.name&&this.FillIconTextCoordBuffer(r[e[n].style.icon._mapIndex].map[e[n].style.icon.name],r[e[n].style.icon._mapIndex].mapW,r[e[n].style.icon._mapIndex].mapH,e[n].style)}this.StartCountArr.sort(this.SortFuncForMapIndex),this.FindMapCountArr()}else if(this.objects.length){this.StartCountArr.push({ruleIndex:-1,start:0,count:this.objects.length,style:t});var F=t.icon,y=t.iconType,A=t.icon;y===l.e.MAP&&-1!==F._mapIndex&&A&&this.FillIconTextCoordBuffer(r[F._mapIndex].map[F.name],r[F._mapIndex].mapW,r[F._mapIndex].mapH,t),this.FindMapCountArr()}}},{key:"FillObjectsRuleIndex",value:function(t,e){var i=e.filter,r=0;if(t)for(r=this.objects.length;r--;)this.objects[r].ruleIndex=this.EvaluateFilterRule(i,this.objects[r].attribs,this.objects[r].objects),-1===this.objects[r].ruleIndex?(e.icon.name&&(this.objects[r].mil.IconStr=e.icon.name,v.a.AddIcon(this.objects[r].mil)),this.objects[r].style=e):(i[this.objects[r].ruleIndex].style.icon.name&&(this.objects[r].mil.IconStr=i[this.objects[r].ruleIndex].style.icon.name,v.a.AddIcon(this.objects[r].mil)),this.objects[r].style=i[this.objects[r].ruleIndex].style);else for(this.FilterIndexCountArr.length=0,this.FilterIndexCountArr.length=i.length+1,this.FilterIndexCountArr.fill(0),r=this.objects.length;r--;)this.objects[r].ruleIndex=this.EvaluateFilterRule(i,this.objects[r].attribs,this.objects[r].objects),-1===this.objects[r].ruleIndex?(this.FilterIndexCountArr[0]++,this.objects[r].style=e):(this.FilterIndexCountArr[this.objects[r].ruleIndex+1]++,this.objects[r].style=i[this.objects[r].ruleIndex].style)}},{key:"ClearMilIconIndexCountArr",value:function(){for(var t=this.gl,e=this.MilIconIndexCountArr.length;e--;){var i=this.MilIconIndexCountArr[e];i.__icontextCoordBuff&&t.deleteBuffer(i.__icontextCoordBuff)}}},{key:"FillIconTextCoordBuffer",value:function(t,e,i,r){var s=this.gl;if(!r.__icontextCoordBuff&&t){r.__icontextCoordBuff=s.createBuffer();var o=t.x/e,n=t.y/i,a=(t.x+t.width)/e,h=(t.y+t.height)/i;s.bindBuffer(s.ARRAY_BUFFER,r.__icontextCoordBuff),s.bufferData(s.ARRAY_BUFFER,new Float32Array([o,n,a,h,a,n,a,h,o,n,o,h]),s.STATIC_DRAW)}}},{key:"FindMilMapCountArr",value:function(){this.MapStartCountArr.length=0;for(var t=[],e=this.StartCountArr.length,i=0;i<e;i++)-1===t.indexOf(this.StartCountArr[i].mapIndex)?(t.push(this.StartCountArr[i].mapIndex),this.MapStartCountArr[t.length-1]=1):this.MapStartCountArr[t.length-1]++}},{key:"FindMapCountArr",value:function(){this.MapStartCountArr.length=0;for(var t=[],e=this.StartCountArr.length,i=0;i<e;i++)-1!==this.StartCountArr[i].style.icon._mapIndex&&(-1===t.indexOf(this.StartCountArr[i].style.icon._mapIndex)?(t.push(this.StartCountArr[i].style.icon._mapIndex),this.MapStartCountArr[t.length-1]=1):this.MapStartCountArr[t.length-1]++)}},{key:"CreteBuffers",value:function(t,e){var i=this.gl;e.icon&&!this.IconCoordBuff&&(this.IconCoordBuff=i.createBuffer()),t.__hasFont&&(this.existTitleRT&&(this.vertexBuffTitle[0]||(this.vertexBuffTitle[0]=i.createBuffer()),this.textureCoordsBuffTitle[0]||(this.textureCoordsBuffTitle[0]=i.createBuffer())),this.existTitleRB&&(this.vertexBuffTitle[1]||(this.vertexBuffTitle[1]=i.createBuffer()),this.textureCoordsBuffTitle[1]||(this.textureCoordsBuffTitle[1]=i.createBuffer())),this.existTitleLT&&(this.vertexBuffTitle[2]||(this.vertexBuffTitle[2]=i.createBuffer()),this.textureCoordsBuffTitle[2]||(this.textureCoordsBuffTitle[2]=i.createBuffer())),this.existTitleLB&&(this.vertexBuffTitle[3]||(this.vertexBuffTitle[3]=i.createBuffer()),this.textureCoordsBuffTitle[3]||(this.textureCoordsBuffTitle[3]=i.createBuffer())),this.existTitleCN&&(this.vertexBuffTitle[4]||(this.vertexBuffTitle[4]=i.createBuffer()),this.textureCoordsBuffTitle[4]||(this.textureCoordsBuffTitle[4]=i.createBuffer())))}},{key:"FindTitleVertex",value:function(t,e,i,r,s,o){for(var n=r.length,a=0;a<n;a++){var h=r[a];this.BuildPoint(h.center.x,h.center.y,h.center.z,h.obj.TempGeo3C,o),i&&this.FillTitleVertex(h,t,e,null,s,o,a)}}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s.zMode!==l.u.Z_GROUND_PERVERTEX&&s.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"FillTitleVertex",value:function(t,e,i,r,s,o,n){var a,h,u,d=-1,c=[this.totalCount[0],this.totalCount[1],this.totalCount[2],this.totalCount[3],this.totalCount[4]],f=[0,0,0,0,0];if(u=s.iconType===l.e.CIRCLE?[-t.style.icon.__radius,t.style.icon.__radius,t.style.icon.__radius,-t.style.icon.__radius]:[-t.style.icon.__sizeX/2,t.style.icon.__sizeY/2,t.style.icon.__sizeX/2,-t.style.icon.__sizeY/2],s.__hasFont){var p,F=null,y=this.FGlobe.SDFFont;if(-1===t.ruleIndex){var A=s.__titleSize;p=this.FillTitles(s,t.attribs,t.objects),F=y.Get(o.fontFamily._fontIndex)}else{var g=s.filter[t.ruleIndex].style;A=g.__titleSize;p=this.FillTitles(g,t.attribs,t.objects),F=y.Get(o.fontFamily._fontIndex)}if(!F)return;var C=A/32,b=0,T=Object.keys(p),v={},L=s.filter;if(-1===t.ruleIndex)var S=o;else S=L[t.ruleIndex].style;S.icon;o.iconType===l.e.CIRCLE?(a=t.style.icon.__radius,h=t.style.icon.__radius):(a=t.style.icon.__sizeX/2,h=t.style.icon.__sizeY/2);var x=8;if(p.titleCN){var O=16*C/2*(p.titleCN.length-1)+8*C*(p.titleCN.length-1)/2;x=h>=O?0:-(O-h)-8*C}for(var R=T.length;R--;)if(p[T[R]]&&p[T[R]].length){for(var m=p[T[R]],D=0,E=0;E<m.length;E++){switch(b=0,T[R]){case"titleRT":b=this.GetLineWidth(m[E],F,b),v={x:a-7*C,y:-(h+(16*C-x))-16*E*C-D},u.push(v.x+(a+(b+7+m[E].length-1)*C),v.y-16*C),d=0;break;case"titleRB":b=this.GetLineWidth(m[E],F,b),v={x:a-7*C,y:h+(16*C-x)+16*E*C+D},u.push(v.x+(a+(b+7+m[E].length-1)*C),v.y+16*C),d=1;break;case"titleLT":v={x:-(a+((b=this.GetLineWidth(m[E],F,b))+7+m[E].length)*C),y:-(h+(16*C-x))-16*E*C-D},u.push(v.x,v.y-16*C),d=2;break;case"titleLB":v={x:-(a+((b=this.GetLineWidth(m[E],F,b))+7+m[E].length)*C),y:h+(16*C-x)+16*E*C+D},u.push(v.x,v.y+16*C),d=3;break;case"titleCN":v={x:-((b=this.GetLineWidth(m[E],F,b))+14+m[E].length-1)/2*C,y:-16*C/2*(m.length-1)+16*E*C-8*C*(m.length-1)/2+D},u.push(v.x,v.y),d=4}for(var P=0,_=0;_<m[E].length;_++){var I="",B=(I=F.charCoords[m[E][_]]?F.charCoords[m[E][_]]:F.charCoords[F.undefinedChar]).x,G=I.y,w=I.width;e[d].push(v.x+P,v.y-16*C,v.x+P,v.y+16*C,v.x+32*C+P,v.y-16*C,v.x+32*C+P,v.y-16*C,v.x+P,v.y+16*C,v.x+32*C+P,v.y+16*C),P=P+w*C+C,i[d].push(B,G,B,G+32/F.cheight,B+32/F.cwidth,G,B+32/F.cwidth,G,B,G+32/F.cheight,B+32/F.cwidth,G+32/F.cheight)}f[d]+=6*m[E].length,D+=8*C}this.drawParams[d][n]={start:c[d],count:f[d]},this.totalCount[d]+=f[d]}}t.obj.symbolTGW.ExpandByCoords(u)}},{key:"FillTitles",value:function(t,e,i){if(t.__hasFont){var r={};return t.titleRT&&(r.titleRT=u.c.EvalMacroText(t.titleRT,e,i),r.titleRT&&r.titleRT.reverse()),t.titleRB&&(r.titleRB=u.c.EvalMacroText(t.titleRB,e,i)),t.titleLT&&(r.titleLT=u.c.EvalMacroText(t.titleLT,e,i),r.titleLT&&r.titleLT.reverse()),t.titleLB&&(r.titleLB=u.c.EvalMacroText(t.titleLB,e,i)),t.titleCN&&(r.titleCN=u.c.EvalMacroText(t.titleCN,e,i)),r}return null}},{key:"GetLineWidth",value:function(t,e,i){for(var r=t.length,s=0;s<r;s++)e.charCoords[t[s]]?i+=e.charCoords[t[s]].width:e.charCoords[e.undefinedChar]&&(i+=e.charCoords[e.undefinedChar].width);return i}},{key:"FillCanvasPoint",value:function(t,e){var i=t.obj,r=i.TempGeo3C,s=i.Geo3D,o=i.CanvasPoint;s.SetVecSub(e,r),this.FGlobe.Xh5WFD(s)?this.FGlobe.X9oM46(s,o):o.isValid=!1}},{key:"FillFilterIndexArr",value:function(t,e){for(var i=t.length,r=0;r<i;r++)-1===t[r].ruleIndex?e[0]++:e[t[r].ruleIndex+1]++}}]),t}(),S=function(t){function e(t,i,r,o){var n;s()(this,e),(n=y()(this,g()(e).call(this,i,o))).objects=t,n.FGlobe=r,n.gl=r.gl,n.IconMap=r.IconMap,n.drawParams=[],n.drawParamsReduction=[];for(var a=0;a<5;a++)n.drawParams[a]=[],n.drawParamsReduction[a]=[];return n.visibleChecked=!1,n.IconCoordArr=[],n.IconCount=0,n.reductionObjects=[],n.ReductionStartCountArr=[],n.ReductionMapStartCountArr=[],n.FilterIndexCountArrReduction=[],n.MilIconIndexCountArrForReduction=[],n}return b()(e,t),n()(e,[{key:"Clear",value:function(t){var e=this.FGlobe.gl;this.IconCoordBuff&&(e.deleteBuffer(this.IconCoordBuff),this.IconCoordBuff=null);for(var i=0;i<5;i++)this.vertexBuffTitle[i]&&(e.deleteBuffer(this.vertexBuffTitle[i]),this.vertexBuffTitle[i]=null),this.textureCoordsBuffTitle[i]&&(e.deleteBuffer(this.textureCoordsBuffTitle[i]),this.textureCoordsBuffTitle[i]=null);this.reductionObjects.length=0,this.ReductionStartCountArr.length=0,t.filter&&T.a.DeleteBuffers(t.filter,e),this.objects.length=0,this.StartCountArr.length=0,this.FilterIndexCountArr.length=0,this.MapStartCountArr.length=0,this.MilIconIndexCountArr.length=0;for(i=0;i<5;i++)this.drawParams[i].length=0,this.totalCount[i]=0,this.drawParamsReduction[i].length=0;this.visibleChecked=null,this.IconCoordArr.length=0,this.IconCount=null,this.FilterIndexCountArrReduction.length=0,this.MilIconIndexCountArrForReduction.length=0,this.vertexBuffTitle.length=0,this.textureCoordsBuffTitle.length=0,this.tempp2d=null,this.iconSize=null,this.textScale=null,this.existTitleRT=null,this.existTitleRB=null,this.existTitleLT=null,this.existTitleLB=null,this.existTitleCN=null}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FillStartCountArr(e),this.FillIconVal(this.objects,t),t.symbolReduction?(this.FGlobe.globeReductionForLayerInterval||(this.FGlobe.globeReductionForLayerInterval=setInterval(this.FGlobe.IntervalReductionForLayer,l.z.LAYER_REDUCTION_INTERVAL_MS)),this.FGlobe.XFDxZ3(),this.Reduction(e)):this.FGlobe.globeReductionForLayerInterval&&(clearInterval(this.FGlobe.globeReductionForLayerInterval),this.FGlobe.globeReductionForLayerInterval=null);for(var r=0;r<5;r++)this.drawParams[r].length=0,this.totalCount[r]=0;if(this.existTitleRT=this.CheckBuffersForTitles(e,t,"titleRT"),this.existTitleRB=this.CheckBuffersForTitles(e,t,"titleRB"),this.existTitleLT=this.CheckBuffersForTitles(e,t,"titleLT"),this.existTitleLB=this.CheckBuffersForTitles(e,t,"titleLB"),this.existTitleCN=this.CheckBuffersForTitles(e,t,"titleCN"),this.CreteBuffers(e,t),t.__hasFont){var s=[],o=[];for(r=0;r<5;r++)s[r]=[],o[r]=[];this.FindTitleVertex(s,o,!0,this.objects,e,t);for(r=0;r<5;r++)this.vertexBuffTitle[r]&&(i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffTitle[r]),i.bufferData(i.ARRAY_BUFFER,new Float32Array(s[r]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.textureCoordsBuffTitle[r]),i.bufferData(i.ARRAY_BUFFER,new Float32Array(o[r]),i.STATIC_DRAW))}}},{key:"VisibleCheck",value:function(t){var e=this.FGlobe,i=e.Fp2T,r=e.gl;this.IconCoordArr.length=0,this.IconCount=0;for(var s=t.length,o=0;o<s;o++){var n=t[o];this.FillCanvasPoint(n,i);var a=n.obj.CanvasPoint;a.isValid?(this.IconCount++,this.FGlobe.layerIconCount++,n.cp=[a.x,a.y],this.IconCoordArr.push(n.cp[0],n.cp[1])):(n.cp=[-1e4,-1e4],this.IconCoordArr.push(-1e4,-1e4))}this.IconCount&&(r.bindBuffer(r.ARRAY_BUFFER,this.IconCoordBuff),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.IconCoordArr),r.STATIC_DRAW))}},{key:"Reduction",value:function(t){var e,i=this.FGlobe,r=i.ReductionScreenMatrixCol,s=i.ReductionScreenMatrix,o=i.Fp2T;for(this.reductionObjects.length=0,e=0;e<5;e++)this.drawParamsReduction[e].length=0;var n=this.objects.length;for(e=0;e<n;e++){var a=this.objects[e],h=a.obj,u=h.CanvasPoint,d=h.symbolTGW;if(this.FillCanvasPoint(a,o),u.isValid){a.cp[0]=u.x,a.cp[1]=u.y;var c=d.LL,f=d.UR,p=Math.floor(Math.abs(a.cp[0]+f.y)/l.z.REDUCTION_SYMBOL_BOX_SIZE),F=Math.floor(Math.abs(a.cp[1]+f.x)/l.z.REDUCTION_SYMBOL_BOX_SIZE),y=Math.floor(Math.abs(a.cp[0]+c.y)/l.z.REDUCTION_SYMBOL_BOX_SIZE),A=Math.floor(Math.abs(a.cp[1]+c.x)/l.z.REDUCTION_SYMBOL_BOX_SIZE),g=!1;t:for(var C=y;C<=p;C++)for(var b=A;b<=F;b++)if(s[b*r+C]){g=!0;break t}if(!g){for(C=y;C<=p;C++)for(b=A;b<=F;b++)s[b*r+C]=1;this.reductionObjects.push(a);for(var T=0;T<5;T++)this.drawParams[T].length&&this.drawParamsReduction[T].push(this.drawParams[T][e])}}else a.cp[0]=-1e4,a.cp[1]=-1e4}this.reductionObjects.length&&this.FillStartCountArrForReduction(this.ReductionStartCountArr,this.FilterIndexCountArrReduction,t)}},{key:"FindMapReductionCountArr",value:function(){this.ReductionMapStartCountArr.length=0;for(var t=[],e=this.ReductionStartCountArr.length,i=0;i<e;i++)-1!==this.ReductionStartCountArr[i].style.icon._mapIndex&&(-1===t.indexOf(this.ReductionStartCountArr[i].style.icon._mapIndex)?(t.push(this.ReductionStartCountArr[i].style.icon._mapIndex),this.ReductionMapStartCountArr[t.length-1]=1):this.ReductionMapStartCountArr[t.length-1]++)}},{key:"FillStartCountArrForReduction",value:function(t,e,i){var r=i.filter,s=i.__milIcon;if(t.length=0,s){this.ClearMilIconIndexCountArrForReduction(),this.reductionObjects.sort(this.SortFuncForObjValues),this.MilIconIndexCountArrForReduction.length=0;for(var o=[],n=this.reductionObjects.length,a=0;a<n;a++)this.reductionObjects[a].mil.IconStr&&(-1===o.indexOf(this.reductionObjects[a].mil.IconStr)?(o.push(this.reductionObjects[a].mil.IconStr),this.MilIconIndexCountArrForReduction[o.length-1]={count:1,mil:this.reductionObjects[a].mil,style:this.reductionObjects[a].style}):this.MilIconIndexCountArrForReduction[o.length-1].count++);var h=0,u=this.MilIconIndexCountArrForReduction.length;for(a=0;a<u;a++){var d=this.MilIconIndexCountArrForReduction[a].mil;this.FillIconTextCoordBuffer(d.IconMap.map[d.IconStr],l.z.AUTO_MILITARY_MAP_SIZE,l.z.AUTO_MILITARY_MAP_SIZE,this.MilIconIndexCountArrForReduction[a]),t.push({start:h,count:this.MilIconIndexCountArrForReduction[a].count,mapIndex:this.MilIconIndexCountArrForReduction[a].mil.IconMap.mapIndex,style:this.MilIconIndexCountArrForReduction[a].style,IconStr:this.MilIconIndexCountArrForReduction[a].mil.IconStr,icontextCoordBuff:this.MilIconIndexCountArrForReduction[a].__icontextCoordBuff}),h+=this.MilIconIndexCountArrForReduction[a].count}this.FindMilMapCountArrForReduction()}else if(r){e.length=0,e.length=r.length+1,e.fill(0),this.FillFilterIndexArr(this.reductionObjects,e),e[0]&&t.push({ruleIndex:-1,start:0,count:e[0],style:i});h=e[0];var c=r.length;for(a=0;a<c;a++)e[a+1]&&(t.push({ruleIndex:a,start:h,count:e[a+1],style:r[a].style}),h+=e[a+1]);t.sort(this.SortFuncForMapIndex),this.FindMapReductionCountArr()}else this.reductionObjects.length&&(t.push({ruleIndex:-1,start:0,count:this.reductionObjects.length,style:i}),this.FindMapReductionCountArr())}},{key:"ClearMilIconIndexCountArrForReduction",value:function(){for(var t=this.FGlobe.gl,e=this.MilIconIndexCountArrForReduction.length;e--;){var i=this.MilIconIndexCountArrForReduction[e];i.__icontextCoordBuff&&t.deleteBuffer(i.__icontextCoordBuff)}}},{key:"FindMilMapCountArrForReduction",value:function(){this.ReductionMapStartCountArr.length=0;for(var t=[],e=this.ReductionStartCountArr.length,i=0;i<e;i++)-1===t.indexOf(this.ReductionStartCountArr[i].mapIndex)?(t.push(this.ReductionStartCountArr[i].mapIndex),this.ReductionMapStartCountArr[t.length-1]=1):this.ReductionMapStartCountArr[t.length-1]++}},{key:"Draw2dMilIcon",value:function(t,e,i,r,s){if(0!==e.length){var o=s.iconType,n=this.IconMap;this.visibleChecked=!1;var a=s.__lodDisplayArr[r];if(o===l.e.MAP){if(this.VisibleCheck(e),this.visibleChecked=!0,0===this.IconCount)return;var h=this.FGlobe,u=h.ext,d=h.P2DoffsetLocForLayerIcon,c=h.P2DRotationLocForLayerIcon,f=h.P2DScaleLocForLayerIcon,p=h.P2DOpacityLocForLayerIcon,F=h.P2DvertexPosForLayerIcon,y=h.P2DtextCoordLocForLayerIcon,A=h.Program2DForLayerIcon,g=h.IconMapVertCoordBuff,C=h.gl;C.useProgram(A),C.enableVertexAttribArray(d),this.FGlobe.XZgyMf(),C.enableVertexAttribArray(y),u.vertexAttribDivisorANGLE(d,1);for(var b=0,T=l.z.GLOBE_SYMBOL_SCALE*a.symbolScale,v=i.length,L=0;L<v;L++)if(-1!==n[t[b].mapIndex].texture){C.bindBuffer(C.ARRAY_BUFFER,g),C.vertexAttribPointer(F,3,C.FLOAT,!1,0,0),C.bindTexture(C.TEXTURE_2D,n[t[b].mapIndex].texture);for(var S=0;S<i[L];S++)if(t[b+S].style.active){var x=t[b+S].style.icon,O=t[b+S],R=O.start,m=O.count;x.rotDeg&&C.uniform1f(c,x.rotDeg),this.iconSize[0]=x.__sizeX*T,this.iconSize[1]=x.__sizeY*T,C.uniform2fv(f,this.iconSize),C.uniform1f(p,t[b+S].style.opacity),C.bindBuffer(C.ARRAY_BUFFER,t[b+S].icontextCoordBuff),C.vertexAttribPointer(y,2,C.FLOAT,!1,0,0),C.bindBuffer(C.ARRAY_BUFFER,this.IconCoordBuff),C.vertexAttribPointer(d,2,C.FLOAT,!1,0,2*R*4),u.drawArraysInstancedANGLE(C.TRIANGLES,0,6,m),x.rotDeg&&C.uniform1f(c,0)}b+=i[L]}u.vertexAttribDivisorANGLE(d,0),C.disableVertexAttribArray(y),C.disableVertexAttribArray(d)}}}},{key:"Draw2dIcon",value:function(t,e,i,r,s){if(0!==e.length){var o=s.iconType,n=this.IconMap;this.visibleChecked=!1;var a=s.__lodDisplayArr[r];if(o===l.e.MAP){if(this.VisibleCheck(e),this.visibleChecked=!0,0===this.IconCount)return;var h=this.FGlobe,u=h.ext,d=h.P2DoffsetLocForLayerIcon,c=h.P2DRotationLocForLayerIcon,f=h.P2DScaleLocForLayerIcon,p=h.P2DOpacityLocForLayerIcon,F=h.P2DvertexPosForLayerIcon,y=h.P2DtextCoordLocForLayerIcon,A=h.Program2DForLayerIcon,g=h.IconMapVertCoordBuff,C=h.gl;C.useProgram(A),C.enableVertexAttribArray(d),this.FGlobe.XZgyMf(),C.enableVertexAttribArray(y),u.vertexAttribDivisorANGLE(d,1);for(var b=0,T=l.z.GLOBE_SYMBOL_SCALE*a.symbolScale,v=i.length,L=0;L<v;L++){C.bindBuffer(C.ARRAY_BUFFER,g),C.vertexAttribPointer(F,3,C.FLOAT,!1,0,0),C.bindTexture(C.TEXTURE_2D,n[t[b].style.icon._mapIndex].texture);for(var S=0;S<i[L];S++){if(t[b+S].style.active)if((j=t[b+S].style.icon).name){var x=t[b+S],O=x.start,R=x.count;j.rotDeg&&C.uniform1f(c,j.rotDeg),this.iconSize[0]=j.__sizeX*T,this.iconSize[1]=j.__sizeY*T,C.uniform2fv(f,this.iconSize),C.uniform1f(p,t[b+S].style.opacity),!t[b+S].style.__icontextCoordBuff&&j.name?this.FillIconTextCoordBuffer(n[j._mapIndex].map[j.name],n[j._mapIndex].mapW,n[j._mapIndex].mapH,t[b+S].style):C.bindBuffer(C.ARRAY_BUFFER,t[b+S].style.__icontextCoordBuff),C.vertexAttribPointer(y,2,C.FLOAT,!1,0,0),C.bindBuffer(C.ARRAY_BUFFER,this.IconCoordBuff),C.vertexAttribPointer(d,2,C.FLOAT,!1,0,2*O*4),u.drawArraysInstancedANGLE(C.TRIANGLES,0,6,R),j.rotDeg&&C.uniform1f(c,0)}}b+=i[L]}u.vertexAttribDivisorANGLE(d,0),C.disableVertexAttribArray(y),C.disableVertexAttribArray(d)}else if(o===l.e.CIRCLE){if(this.VisibleCheck(e),this.visibleChecked=!0,0===this.IconCount)return;var m=this.FGlobe,D=m.ext,E=m.P2DvertexPosForLayerCircle,P=m.Program2DForLayerCircle,_=m.P2DoffsetLocForLayerCircle,I=m.P2DFillColorLocForLayerCircle,B=m.P2DBorderColorLocForLayerCircle,G=m.P2DBorderWidthLocForLayerCircle,w=m.P2DRadiusLocForLayerCircle,M=m.IconMapVertCoordBuff,U=m.gl;U.useProgram(P),U.enableVertexAttribArray(_),this.FGlobe.OrthoLyrCircle(),D.vertexAttribDivisorANGLE(_,1),U.bindBuffer(U.ARRAY_BUFFER,M),U.vertexAttribPointer(E,3,U.FLOAT,!1,0,0);T=l.z.GLOBE_SYMBOL_SCALE*a.symbolScale;for(var k=t.length,V=0;V<k;V++)if(t[V].style.active){var j=t[V].style.icon;U.uniform4fv(I,t[V].style.__circleFillColor),U.uniform4fv(B,t[V].style.__circleBorderColor),U.uniform1f(G,j.__borderWidth),U.uniform1f(w,j.__radius*T);var N=t[V],z=N.start,Z=N.count;U.bindBuffer(U.ARRAY_BUFFER,this.IconCoordBuff),U.vertexAttribPointer(_,2,U.FLOAT,!1,0,2*z*4),D.drawArraysInstancedANGLE(U.POINTS,0,1,Z)}D.vertexAttribDivisorANGLE(_,0),U.disableVertexAttribArray(_)}}}},{key:"Draw2dText",value:function(t,e,i,r,s,o){if(0!==e.length){var n=o.__hasFont,a=s.__lodDisplayArr[r];if(n){this.visibleChecked||this.VisibleCheck(e);var h=this.FGlobe,u=h.SDFFont,d=h.P2DOpacityLocForLayerLabels,c=h.P2DvertexPosForLayerLabels,f=h.P2DtextCoordLocForLayerLabels,p=h.P2DisHollowLocForLayerLabels,F=h.P2DHaloColorLocForLayerLabels,y=h.Program2DForLayerLabels,A=h.P2DTranslationLocForLayerLabels,g=h.P2DScaleLocForLayerLabels,C=h.gl;C.useProgram(y),C.enableVertexAttribArray(f),this.FGlobe.XSpiH9(),u.SDFFonts[o.fontFamily._fontIndex].font.hollow?C.uniform1i(p,1):C.uniform1i(p,0);var b=a.textScale*l.z.GLOBE_TEXT_SCALE,T=a.symbolScale*l.z.GLOBE_SYMBOL_SCALE;C.bindTexture(C.TEXTURE_2D,u.SDFFonts[o.fontFamily._fontIndex].texture);for(var v=0;v<5;v++)if(i[v].length&&a[v]){C.bindBuffer(C.ARRAY_BUFFER,this.textureCoordsBuffTitle[v]),C.vertexAttribPointer(f,2,C.FLOAT,!1,0,0),C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffTitle[v]),C.vertexAttribPointer(c,2,C.FLOAT,!1,0,0),this.textScale[0]=b,this.textScale[1]=b,C.uniform2fv(g,this.textScale);for(var L=0;L<t.length;L++)if(t[L].style.active){var S=t[L].style.icon.__sizeX,x=t[L].style.icon.__sizeY,O=(S-S*T)/2,R=(x-x*T)/2,m=(S-S*b)/2,D=(x-x*b)/2,E=l.B[v].symbolOffsetX*O+l.B[v].textOffsetX*m,P=l.B[v].symbolOffsetY*R+l.B[v].textOffsetY*D;C.uniform4fv(F,t[L].style.__haloColor),C.uniform4fv(d,t[L].style.__textColor);for(var _=0;_<t[L].count;_++){var I=e[_+t[L].start].cp.slice();i[v][_+t[L].start]&&-1e4!==I[0]&&(I[0]+=E,I[1]+=P,C.uniform2fv(A,I),C.drawArrays(C.TRIANGLES,i[v][_+t[L].start].start,i[v][t[L].start+_].count))}}}C.disableVertexAttribArray(f)}}}},{key:"Draw",value:function(t,e,i){if(t<=this.FCityLayer.endLod){var r=e.symbolReduction,s=i.__milIcon;r?(s?this.Draw2dMilIcon(this.ReductionStartCountArr,this.reductionObjects,this.ReductionMapStartCountArr,t,i):this.Draw2dIcon(this.ReductionStartCountArr,this.reductionObjects,this.ReductionMapStartCountArr,t,i),this.Draw2dText(this.ReductionStartCountArr,this.reductionObjects,this.drawParamsReduction,t,i,e)):(s?this.Draw2dMilIcon(this.StartCountArr,this.objects,this.MapStartCountArr,t,i):this.Draw2dIcon(this.StartCountArr,this.objects,this.MapStartCountArr,t,i),this.Draw2dText(this.StartCountArr,this.objects,this.drawParams,t,i,e))}}},{key:"ChangeOpacityVal",value:function(t,e){t.opacity=e,t.__textColor[3]=e,t.__borderColor[3]=e,t.__circleBorderColor[3]=e,t.__circleFillColor[3]=e,t.__fillColor[3]=e,t.__bottomFillColor[3]=e,t.__sideColor[3]=e,t.__haloColor[3]=e}},{key:"OpacityChanged",value:function(t,e,i){if(0!==e.length){var r,s=this.StartCountArr.length;for(r=0;r<s;r++)this.ChangeOpacityVal(this.StartCountArr[r].style,t);if(i.symbolReduction){var o=this.ReductionStartCountArr.length;for(r=0;r<o;r++)this.ChangeOpacityVal(this.ReductionStartCountArr[r].style,t)}}}}]),e}(L),x=function(t){function e(t,i,r,o){var n;s()(this,e),(n=y()(this,g()(e).call(this,i,o))).FGlobe=r,n.gl=r.gl,n.IconMap=r.IconMap,n.objects=t,n.drawParams=[];for(var a=0;a<5;a++)n.drawParams[a]=[];return n.visibleChecked=!1,n.IconCoordArr=[],n.IconCount=0,n}return b()(e,t),n()(e,[{key:"Clear",value:function(t){var e=this.FGlobe.gl;this.IconCoordBuff&&(e.deleteBuffer(this.IconCoordBuff),this.IconCoordBuff=null);for(var i=0;i<5;i++)this.vertexBuffTitle[i]&&(e.deleteBuffer(this.vertexBuffTitle[i]),this.vertexBuffTitle[i]=null),this.textureCoordsBuffTitle[i]&&(e.deleteBuffer(this.textureCoordsBuffTitle[i]),this.textureCoordsBuffTitle[i]=null);t.filter&&T.a.DeleteBuffers(t.filter,e),this.objects.length=0,this.StartCountArr.length=0,this.MapStartCountArr.length=0,this.FilterIndexCountArr.length=0,this.MilIconIndexCountArr.length=0,this.drawParams.length=0,this.visibleChecked=null,this.IconCoordArr.length=0,this.IconCount=null,this.vertexBuffTitle.length=0,this.textureCoordsBuffTitle.length=0,this.totalCount.length=0,this.tempp2d=null,this.iconSize=null,this.textScale=null,this.existTitleRT=null,this.existTitleRB=null,this.existTitleLT=null,this.existTitleLB=null,this.existTitleCN=null}},{key:"VisibleCheck",value:function(t){var e=this.FGlobe,i=e.Fp2T,r=e.gl;this.IconCoordArr.length=0,this.IconCount=0;for(var s=t.length,o=0;o<s;o++){var n=t[o];this.FillCanvasPoint(n,i);var a=n.obj.CanvasPoint;a.isValid?(this.IconCount++,this.FGlobe.layerIconCount++,n.cp=[a.x,a.y],this.IconCoordArr.push(n.cp[0],n.cp[1])):(n.cp=[-1e4,-1e4],this.IconCoordArr.push(-1e4,-1e4))}this.IconCount&&(r.bindBuffer(r.ARRAY_BUFFER,this.IconCoordBuff),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.IconCoordArr),r.STATIC_DRAW))}},{key:"Draw2dMilIcon",value:function(t,e,i,r,s){if(0!==e.length){var o=r.iconType,n=this.IconMap;if(this.visibleChecked=!1,o===l.e.MAP){if(this.VisibleCheck(e),this.visibleChecked=!0,0===this.IconCount)return;var a=this.FGlobe,h=a.ext,u=a.P2DoffsetLocForLayerIcon,d=a.P2DRotationLocForLayerIcon,c=a.P2DScaleLocForLayerIcon,f=a.P2DOpacityLocForLayerIcon,p=a.P2DvertexPosForLayerIcon,F=a.P2DtextCoordLocForLayerIcon,y=a.Program2DForLayerIcon,A=a.IconMapVertCoordBuff,g=a.gl;g.useProgram(y),g.enableVertexAttribArray(u),this.FGlobe.XZgyMf(),g.enableVertexAttribArray(F),h.vertexAttribDivisorANGLE(u,1);for(var C=0,b=l.z.GLOBE_SYMBOL_SCALE*s.symbolScale,T=i.length,v=0;v<T;v++)if(-1!==n[t[C].mapIndex].texture){g.bindBuffer(g.ARRAY_BUFFER,A),g.vertexAttribPointer(p,3,g.FLOAT,!1,0,0),g.bindTexture(g.TEXTURE_2D,n[t[C].mapIndex].texture);for(var L=0;L<i[v];L++)if(t[C+L].style.active){var S=t[C+L].style.icon,x=t[C+L],O=x.start,R=x.count;S.rotDeg&&g.uniform1f(d,S.rotDeg),this.iconSize[0]=S.__sizeX*b,this.iconSize[1]=S.__sizeY*b,g.uniform2fv(c,this.iconSize),g.uniform1f(f,t[C+L].style.opacity),g.bindBuffer(g.ARRAY_BUFFER,t[C+L].icontextCoordBuff),g.vertexAttribPointer(F,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,this.IconCoordBuff),g.vertexAttribPointer(u,2,g.FLOAT,!1,0,2*O*4),h.drawArraysInstancedANGLE(g.TRIANGLES,0,6,R),S.rotDeg&&g.uniform1f(d,0)}C+=i[v]}h.vertexAttribDivisorANGLE(u,0),g.disableVertexAttribArray(F),g.disableVertexAttribArray(u)}}}},{key:"Draw2dIcon",value:function(t,e,i,r,s){if(0!==e.length){var o=r.iconType,n=this.IconMap;if(this.visibleChecked=!1,o===l.e.MAP){if(this.VisibleCheck(e),this.visibleChecked=!0,0===this.IconCount)return;var a=this.FGlobe,h=a.ext,u=a.P2DoffsetLocForLayerIcon,d=a.P2DRotationLocForLayerIcon,c=a.P2DScaleLocForLayerIcon,f=a.P2DOpacityLocForLayerIcon,p=a.P2DvertexPosForLayerIcon,F=a.P2DtextCoordLocForLayerIcon,y=a.Program2DForLayerIcon,A=a.IconMapVertCoordBuff,g=a.gl;g.useProgram(y),g.enableVertexAttribArray(u),this.FGlobe.XZgyMf(),g.enableVertexAttribArray(F),h.vertexAttribDivisorANGLE(u,1);for(var C=0,b=l.z.GLOBE_SYMBOL_SCALE*s.symbolScale,T=i.length,v=0;v<T;v++){g.bindBuffer(g.ARRAY_BUFFER,A),g.vertexAttribPointer(p,3,g.FLOAT,!1,0,0),g.bindTexture(g.TEXTURE_2D,n[t[C].style.icon._mapIndex].texture);for(var L=0;L<i[v];L++){if(t[C+L].style.active)if((V=t[C+L].style.icon).name){var S=t[C+L],x=S.start,O=S.count;V.rotDeg&&g.uniform1f(d,V.rotDeg),this.iconSize[0]=V.__sizeX*b,this.iconSize[1]=V.__sizeY*b,g.uniform2fv(c,this.iconSize),g.uniform1f(f,t[C+L].style.opacity),!t[C+L].style.__icontextCoordBuff&&V.name?this.FillIconTextCoordBuffer(n[V._mapIndex].map[V.name],n[V._mapIndex].mapW,n[V._mapIndex].mapH,t[C+L].style):g.bindBuffer(g.ARRAY_BUFFER,t[C+L].style.__icontextCoordBuff),g.vertexAttribPointer(F,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,this.IconCoordBuff),g.vertexAttribPointer(u,2,g.FLOAT,!1,0,2*x*4),h.drawArraysInstancedANGLE(g.TRIANGLES,0,6,O),V.rotDeg&&g.uniform1f(d,0)}}C+=i[v]}h.vertexAttribDivisorANGLE(u,0),g.disableVertexAttribArray(F),g.disableVertexAttribArray(u)}else if(o===l.e.CIRCLE){if(this.VisibleCheck(e),this.visibleChecked=!0,0===this.IconCount)return;var R=this.FGlobe,m=R.ext,D=R.P2DvertexPosForLayerCircle,E=R.Program2DForLayerCircle,P=R.P2DoffsetLocForLayerCircle,_=R.P2DFillColorLocForLayerCircle,I=R.P2DBorderColorLocForLayerCircle,B=R.P2DBorderWidthLocForLayerCircle,G=R.P2DRadiusLocForLayerCircle,w=R.IconMapVertCoordBuff,M=R.gl;M.useProgram(E),M.enableVertexAttribArray(P),this.FGlobe.OrthoLyrCircle(),m.vertexAttribDivisorANGLE(P,1),M.bindBuffer(M.ARRAY_BUFFER,w),M.vertexAttribPointer(D,3,M.FLOAT,!1,0,0);b=l.z.GLOBE_SYMBOL_SCALE*s.symbolScale;for(var U=t.length,k=0;k<U;k++)if(t[k].style.active){var V=t[k].style.icon;M.uniform4fv(_,t[k].style.__circleFillColor),M.uniform4fv(I,t[k].style.__circleBorderColor),M.uniform1f(B,V.__borderWidth),M.uniform1f(G,V.__radius*b);var j=t[k],N=j.start,z=j.count;M.bindBuffer(M.ARRAY_BUFFER,this.IconCoordBuff),M.vertexAttribPointer(P,2,M.FLOAT,!1,0,2*N*4),m.drawArraysInstancedANGLE(M.POINTS,0,1,z)}m.vertexAttribDivisorANGLE(P,0),M.disableVertexAttribArray(P)}}}},{key:"Draw2dText",value:function(t,e,i,r,s){if(0!==e.length&&r.__hasFont){this.visibleChecked||this.VisibleCheck(e);var o=this.FGlobe,n=o.SDFFont,a=o.P2DOpacityLocForLayerLabels,h=o.P2DvertexPosForLayerLabels,u=o.P2DtextCoordLocForLayerLabels,d=o.P2DisHollowLocForLayerLabels,c=o.P2DHaloColorLocForLayerLabels,f=o.Program2DForLayerLabels,p=o.P2DTranslationLocForLayerLabels,F=o.P2DScaleLocForLayerLabels,y=o.gl;y.useProgram(f),y.enableVertexAttribArray(u),this.FGlobe.XSpiH9(),n.SDFFonts[r.fontFamily._fontIndex].font.hollow?y.uniform1i(d,1):y.uniform1i(d,0);var A=s.textScale*l.z.GLOBE_TEXT_SCALE,g=s.symbolScale*l.z.GLOBE_SYMBOL_SCALE;y.bindTexture(y.TEXTURE_2D,n.SDFFonts[r.fontFamily._fontIndex].texture);for(var C=0;C<5;C++)if(i[C].length&&s[C]){y.bindBuffer(y.ARRAY_BUFFER,this.textureCoordsBuffTitle[C]),y.vertexAttribPointer(u,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,this.vertexBuffTitle[C]),y.vertexAttribPointer(h,2,y.FLOAT,!1,0,0),this.textScale[0]=A,this.textScale[1]=A,y.uniform2fv(F,this.textScale);for(var b=0;b<t.length;b++)if(t[b].style.active){var T=t[b].style.icon.__sizeX,v=t[b].style.icon.__sizeY,L=(T-T*g)/2,S=(v-v*g)/2,x=(T-T*A)/2,O=(v-v*A)/2,R=l.B[C].symbolOffsetX*L+l.B[C].textOffsetX*x,m=l.B[C].symbolOffsetY*S+l.B[C].textOffsetY*O;y.uniform4fv(c,t[b].style.__haloColor),y.uniform4fv(a,t[b].style.__textColor);for(var D=0;D<t[b].count;D++){var E=e[D+t[b].start].cp.slice();i[C][D+t[b].start]&&-1e4!==E[0]&&(E[0]+=R,E[1]+=m,y.uniform2fv(p,E),y.drawArrays(y.TRIANGLES,i[C][D+t[b].start].start,i[C][t[b].start+D].count))}}}y.disableVertexAttribArray(u)}}},{key:"Draw2d",value:function(t,e){var i=this.FCityLayer._style.__lodDisplayArr[this.FGlobe.api_GetCurrentLOD()];e.__milIcon?this.Draw2dMilIcon(this.StartCountArr,this.objects,this.MapStartCountArr,e,i):this.Draw2dIcon(this.StartCountArr,this.objects,this.MapStartCountArr,e,i),this.Draw2dText(this.StartCountArr,this.objects,this.drawParams,t,i)}},{key:"Draw3d",value:function(){}}]),e}(L),O=function(){function t(){s()(this,t)}return n()(t,[{key:"CheckType",value:function(t){for(var e=this.objects.length,i=0;i<e;i++){var r=this.objects[i];Array.isArray(r.coords[0])?r.multi=!0:(r.multi=!1,this.objects[i].obj.index=[null],this.objects[i]._coords=[this.objects[i].coords],this.objects[i]._coordsZ=[this.objects[i].coordsZ],this.objects[i].OuterPolyArr=[this.objects[i].coords],this.objects[i].MultiArr=[this.objects[i].coords],this.objects[i].MultiArrZ=[this.objects[i].coordsZ],t&&(this.objects[i]._heights=[this.objects[i].heights],this.objects[i]._minZMode=[this.objects[i].minZMode],this.objects[i]._maxZMode=[this.objects[i].maxZMode]))}}},{key:"PrepareMulti",value:function(){this.OuterStartCountArr.length=0;for(var t=this.objects.length,e=0;e<t;e++)if(this.objects[e].multi){var i=this.objects[e].coords,r=this.objects[e].coordsZ;this.objects[e]._coords=[],this.objects[e]._coordsZ=[],this.objects[e].obj.index=[],this.objects[e].MultiArr=[],this.objects[e].MultiArrZ=[],this.objects[e].OuterPolyArr=[];for(var s=i.length,o=0;o<s;o++)this.FindHoles(i,i[o],r,r[o],null,null,e)}}},{key:"PrepareMultiFor3D",value:function(){this.OuterStartCountArr.length=0;for(var t=this.objects.length,e=0;e<t;e++)if(this.objects[e].multi){var i=this.objects[e].coords,r=this.objects[e].coordsZ,s=this.objects[e].heights;this.objects[e]._coords=[],this.objects[e]._coordsZ=[],this.objects[e]._heights=[],this.objects[e]._minZMode=this.objects[e].minZMode,this.objects[e]._maxZMode=this.objects[e].maxZMode,this.objects[e].obj.index=[],this.objects[e].MultiArr=[],this.objects[e].MultiArrZ=[],this.objects[e].OuterPolyArr=[];for(var o=i.length,n=0;n<o;n++)this.FindHoles(i,i[n],r,r[n],s,s[n],e)}}},{key:"FindHoles",value:function(t,e,i,r,s,o,n){if(-1===this.objects[n].OuterPolyArr.indexOf(e)){for(var a=t.length,h=0;h<a;h++)if(e!==t[h]){var l=this.FindHoleCenter(e);if(l&&c.b.CSPointInPolygon(l[0],l[1],t[h])){for(var u=!1,d=e.length/2,f=0;f<d;f++)if(c.b.CSPointInPolygon(e[2*f],e[2*f+1],t[h])){u=!0;break}if(u){if(this.CoordsIsInOuterArr(t,e,t[h],i,r,o,n))return;this.objects[n].OuterPolyArr.push(t[h]);for(var p=t[h].slice(),F=e.length,y=0;y<F;y++)p.push(e[y]);this.objects[n].MultiArr.push(p),this.objects[n].obj.index.push([t[h].length/2]);for(var A=i[h].slice(),g=r.length,C=0;C<g;C++)A.push(r[C]);return this.objects[n].MultiArrZ.push(A),this.objects[n]._coords.push(t[h],e),this.objects[n]._coordsZ.push(i[h],r),o&&this.objects[n]._heights.push(s[h],o),void(this.OuterStartCountArr[this.objects[n].OuterPolyArr.length-1]=1)}}}this.objects[n].OuterPolyArr.push(e),this.OuterStartCountArr[this.objects[n].OuterPolyArr.length-1]=0,this.objects[n].MultiArr.push(e),this.objects[n].MultiArrZ.push(r),this.objects[n]._coords.push(e),this.objects[n]._coordsZ.push(r),o&&this.objects[n]._heights.push(o),this.objects[n].obj.index.push(null)}}},{key:"CoordsIsInOuterArr",value:function(t,e,i,r,s,o,n){var a=this.objects[n].OuterPolyArr.indexOf(i);if(-1!==a){Array.isArray(this.objects[n].obj.index[a])?this.objects[n].obj.index[a].push(this.objects[n].MultiArr[a].length/2):this.objects[n].obj.index[a]=[this.objects[n].MultiArr[a].length/2];for(var h=this.objects[n].MultiArr[a].slice(),l=e.length,u=0;u<l;u++)h.push(e[u]);this.objects[n].MultiArr[a]=h;for(var d=this.objects[n].MultiArrZ[a].slice(),c=s.length,f=0;f<c;f++)d.push(s[f]);this.objects[n].MultiArrZ[a]=d,this.OuterStartCountArr[a]++;var p=this.objects[n]._coords.indexOf(i)+this.OuterStartCountArr[a];return this.objects[n]._coords.splice(p,0,e),this.objects[n]._coordsZ.splice(p,0,s),o&&this.objects[n]._heights.splice(p,0,o),!0}return!1}},{key:"FindHoleCenter",value:function(t){for(var e,i,r=t.length/2-2,s=0;s<r;s++)if(e=(t[2*s]+t[2*s+2]+t[2*s+4])/3,i=(t[2*s+1]+t[2*s+3]+t[2*s+5])/3,c.b.CSPointInPolygon(e,i,t))return[e,i];var o=t.length/2-2;return e=(t[2*o]+t[2*o+2]+t[0])/3,i=(t[2*o+1]+t[2*o+3]+t[1])/3,c.b.CSPointInPolygon(e,i,t)?[e,i]:(e=(t[2*o+2]+t[0]+t[2])/3,i=(t[2*o+3]+t[1]+t[3])/3,c.b.CSPointInPolygon(e,i,t)?[e,i]:null)}}]),t}(),R=function(t){function e(t,i,r,o,n){var a;return s()(this,e),(a=y()(this,g()(e).call(this))).objects=t,a.FCityLayer=i,a.FGlobe=r,a.Cell=o,a.objectType=n,a.tempp2d=new c.u(0,0),a.tempArr=new Float32Array(3),a.vertexBufferForGeometry=void 0,a.vertexTypedArrForGeometry=void 0,a.OuterStartCountArr=[],a.LineStartCountArr=[],a.FilterLineStartCountArr=[],a}return b()(e,t),n()(e,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.OuterStartCountArr.length=0,this.tempp2d=null,this.tempArr=null,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0}},{key:"FillLineTypedArr",value:function(t,e,i){if(e){var r=0,s=0,o=0;for(s=0;s<t.length;s++){var n=t[s],a=n.obj,h=n.center,l=n._coords,u=n._coordsZ;for(t[s].VStart=[],o=0;o<l.length;o++)t[s].VStart.push(r),this.FilterLineStartCountArr[t[s].ruleIndex+1].start.push(r),this.FillTypedArr(l[o],u[o],this.vertexTypedArrForGeometry,r,a.TempGeo3C,i),this.FilterLineStartCountArr[t[s].ruleIndex+1].count.push(l[o].length/2),r+=l[o].length/2,this.BuildPoint(h.x,h.y,h.z,a.TempGeo3C,i)}}else for(s=0;s<t.length;s++){var d=t[s],c=(a=d.obj,h=d.center,l=d._coords,u=d._coordsZ,d.VStart);for(o=0;o<l.length;o++)this.FillTypedArr(l[o],u[o],this.vertexTypedArrForGeometry,c[o],a.TempGeo3C,i),this.BuildPoint(h.x,h.y,h.z,a.TempGeo3C,i)}}},{key:"FillTypedArr",value:function(t,e,i,r,s,o){for(var n=0;n<e.length;n++)this.BuildPoint(t[2*n],t[2*n+1],e[n],s,o),this.tempArr[0]=s.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=s.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=s.z-this.Cell.FCellGeoWPs.z,i.set(this.tempArr,3*(r+n))}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s.zMode!==l.u.Z_GROUND_PERVERTEX&&s.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)for(var i=0;i<this.objects[e]._coords.length;i++)t+=3*this.objects[e]._coordsZ[i].length;return t}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=1;e<this.FilterLineStartCountArr.length;e++)this.FilterLineStartCountArr[e].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[e].start,count:this.FilterLineStartCountArr[e].count,style:t.filter[e-1].style})}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterLineStartCountArr[i]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"GetLineWidth",value:function(t,e,i){if("string"==typeof t){var r=u.c.EvalMacroText(t,i),s=c.b.DegreeToMeter(e.FDegreeW);return u.c.GetSizeAsMeter(r[0],s,l.z.GLOBE_IMAGE_SIZE,l.z.GLOBE_RADIUS_K)*l.z.GLOBE_IMAGE_SIZE/s}return t}},{key:"FillObjLineWidth",value:function(t,e){if(e.border)for(var i=t.length,r=0;r<i;r++)t[r].style.lineType.__width=this.GetLineWidth(t[r].style.lineType.width,this.Cell,t[r].attribs)}},{key:"Build",value:function(t,e,i,r){if(e&&(this.CheckType(),this.PrepareMulti(),this.FCityLayer.rasterize?this.FillObjLineWidth(t,i):(this.vertexTypedArrForGeometry=new Float32Array(this.GetTotalcoordLen()),this.FindFilterLineStartCount(r))),!this.FCityLayer.rasterize){var s=this.FGlobe.gl;this.vertexBufferForGeometry||this.objectType===l.j.POINT||(this.vertexBufferForGeometry=s.createBuffer()),this.FillLineTypedArr(t,e,i),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW)}}},{key:"Draw",value:function(t,e){var i=this.FGlobe,r=i.gl,s=i.P3DvertexPosForLayer,o=i.P3DOpacityLocForLayer,n=e.depthTest,a=e.cullFace;n||r.disable(r.DEPTH_TEST),a||r.disable(r.CULL_FACE),r.enable(r.BLEND),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBufferForGeometry),r.vertexAttribPointer(s,3,r.FLOAT,!1,0,0);var h=0;if(this.objects.length){var l=this.LineStartCountArr.length;for(h=0;h<l;h++)if(this.LineStartCountArr[h].style.border&&this.LineStartCountArr[h].style.active&&(r.uniform4fv(o,this.LineStartCountArr[h].style.__borderColor),t))for(var u=this.LineStartCountArr[h].start.length,d=0;d<u;d++)this.FGlobe.layerLineCount++,r.drawArrays(r.LINE_STRIP,this.LineStartCountArr[h].start[d],this.LineStartCountArr[h].count[d])}n||r.enable(r.DEPTH_TEST),a||r.enable(r.CULL_FACE)}},{key:"StyleChanged",value:function(t,e){if(this.FCityLayer.rasterize)this.FillObjLineWidth(this.objects,t);else{var i=this.FGlobe.gl;this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW)}}}]),e}(O),m=i(7),D=function(t){function e(t,i,r,o,n){var a;return s()(this,e),(a=y()(this,g()(e).call(this))).objects=t,a.FCityLayer=i,a.FGlobe=r,a.Cell=o,a.objectType=n,a.totalCoordLen=0,a.OuterStartCountArr=[],a.tempp2d=new c.u(0,0),a.tempArr=new Float32Array(3),a.vertexBufferForGeometry=void 0,a.vertexTypedArrForGeometry=void 0,a.PolyStartCountArr=[],a.FilterTriIndexCountArr=[],a.LineStartCountArr=[],a.FilterLineStartCountArr=[],a.isFilled=!1,a.totalTriIndexCnt=0,a}return b()(e,t),n()(e,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.OuterStartCountArr.length=0,this.tempp2d=null,this.tempArr=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null}},{key:"FillLineTypedArr",value:function(t,e,i){if(e){var r=0,s=0,o=0;for(s=0;s<t.length;s++){var n=t[s],a=n.obj,h=n.center,l=n._coords,u=n._coordsZ;for(t[s].VStart=[],o=0;o<l.length;o++)t[s].VStart.push(r),this.FilterLineStartCountArr[t[s].ruleIndex+1].start.push(r),this.FillTypedArr(l[o],u[o],this.vertexTypedArrForGeometry,r,a.TempGeo3C,i),this.FilterLineStartCountArr[t[s].ruleIndex+1].count.push(l[o].length/2),r+=l[o].length/2,this.BuildPoint(h.x,h.y,h.z,a.TempGeo3C,i)}}else for(s=0;s<t.length;s++){var d=t[s],c=(a=d.obj,h=d.center,l=d._coords,u=d._coordsZ,d.VStart);for(o=0;o<l.length;o++)this.FillTypedArr(l[o],u[o],this.vertexTypedArrForGeometry,c[o],a.TempGeo3C,i),this.BuildPoint(h.x,h.y,h.z,a.TempGeo3C,i)}}},{key:"FillTypedArr",value:function(t,e,i,r,s,o){for(var n=e.length,a=0;a<n;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],s,o),this.tempArr[0]=s.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=s.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=s.z-this.Cell.FCellGeoWPs.z,i.set(this.tempArr,3*(r+a))}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s.zMode!==l.u.Z_GROUND_PERVERTEX&&s.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)for(var i=0;i<this.objects[e]._coords.length;i++)t+=3*this.objects[e]._coordsZ[i].length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=0;e<this.FilterTriIndexCountArr.length;e++)for(var i=0;i<this.FilterTriIndexCountArr[e].length;i++)this.vertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]+1],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=1;i<this.FilterTriIndexCountArr.length;i++)this.FilterTriIndexCountArr[i].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[i].length,style:t.filter[i-1].style}),e+=this.FilterTriIndexCountArr[i].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=1;e<this.FilterLineStartCountArr.length;e++)this.FilterLineStartCountArr[e].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[e].start,count:this.FilterLineStartCountArr[e].count,style:t.filter[e-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=0;r<this.objects.length;r++)for(var s=0;s<this.objects[r].MultiArr.length;s++){t=(t=m(this.objects[r].MultiArr[s],this.objects[r].obj.index[s],2)).map(i);for(var o=0;o<t.length;o++)this.FilterTriIndexCountArr[this.objects[r].ruleIndex+1].push(t[o]);e+=this.objects[r].MultiArrZ[s].length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterTriIndexCountArr[i]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterLineStartCountArr[i]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled)return!0;if(i&&i.length)for(var r=0;r<i.length;r++)if(i[r].style.filled)return!0;return!1}},{key:"GetLineWidth",value:function(t,e,i){if("string"==typeof t){var r=u.c.EvalMacroText(t,i),s=c.b.DegreeToMeter(e.FDegreeW);return u.c.GetSizeAsMeter(r[0],s,l.z.GLOBE_IMAGE_SIZE,l.z.GLOBE_RADIUS_K)*l.z.GLOBE_IMAGE_SIZE/s}return t}},{key:"FillObjLineWidth",value:function(t,e){if(e.border)for(var i=t.length,r=0;r<i;r++)t[r].style.lineType.__width=this.GetLineWidth(t[r].style.lineType.width,this.Cell,t[r].attribs)}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;e&&(this.CheckType(),this.PrepareMulti(),this.FCityLayer.rasterize?this.FillObjLineWidth(t,i):(this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.vertexBufferForGeometry||this.objectType===l.j.POINT||(this.vertexBufferForGeometry=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen(),this.vertexTypedArrForGeometry=new Float32Array(this.totalCoordLen+3*this.totalTriIndexCnt),this.FindFilterLineStartCount(r))),this.FCityLayer.rasterize||(this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW))}},{key:"Draw",value:function(t,e){var i,r=this.FGlobe,s=r.gl,o=r.P3DvertexPosForLayer,n=r.P3DOpacityLocForLayer,a=e.depthTest,h=e.cullFace;if(a||s.disable(s.DEPTH_TEST),h||s.disable(s.CULL_FACE),s.enable(s.BLEND),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.vertexAttribPointer(o,3,s.FLOAT,!1,0,0),this.objects.length){var l=this.PolyStartCountArr.length;for(i=0;i<l;i++)this.PolyStartCountArr[i].style.filled&&this.PolyStartCountArr[i].style.active&&(s.uniform4fv(n,this.PolyStartCountArr[i].style.__fillColor),s.drawArrays(s.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[i].start,this.PolyStartCountArr[i].count))}if(this.objects.length){var u=this.LineStartCountArr.length;for(i=0;i<u;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(s.uniform4fv(n,this.LineStartCountArr[i].style.__borderColor),t))for(var d=this.LineStartCountArr[i].start.length,c=0;c<d;c++)this.FGlobe.layerPolygonCount++,s.drawArrays(s.LINE_LOOP,this.LineStartCountArr[i].start[c],this.LineStartCountArr[i].count[c])}}},{key:"StyleChanged",value:function(t,e){if(this.FCityLayer.rasterize)this.FillObjLineWidth(this.objects,t);else{var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW)}}}]),e}(O),E=function(){function t(e,i,r,o,n){s()(this,t),this.objects=e,this.FCityLayer=i,this.FGlobe=r,this.Cell=o,this.objectType=n,this.totalCoordLen=0,this.tempp2d=new c.u(0,0),this.tempArr=new Float32Array(3),this.vertexBufferForGeometry=void 0,this.vertexTypedArrForGeometry=void 0,this.PolyStartCountArr=[],this.FilterTriIndexCountArr=[],this.LineStartCountArr=[],this.FilterLineStartCountArr=[],this.isFilled=!1,this.totalTriIndexCnt=0}return n()(t,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.totalCoordLen=null,this.tempp2d=null,this.tempArr=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null,this.totalTriIndexCnt=null}},{key:"FillLineTypedArr",value:function(t,e,i){var r=0;if(e){var s=0;for(s=0,r=0;r<t.length;r++){var o=t[r],n=o._coords,a=o._coordsZ,h=o.obj,l=o.center;t[r].VStart=s,this.FilterLineStartCountArr[t[r].ruleIndex+1].start.push(s),this.FillTypedArr(n,a,this.vertexTypedArrForGeometry,s,h.TempGeo3C,i),this.FilterLineStartCountArr[t[r].ruleIndex+1].count.push(n.length/2),s+=n.length/2,this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i)}}else for(r=0;r<t.length;r++){var u=t[r],d=(n=u._coords,a=u._coordsZ,h=u.obj,l=u.center,u.VStart);this.FillTypedArr(n,a,this.vertexTypedArrForGeometry,d,h.TempGeo3C,i),this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i)}}},{key:"FillTypedArr",value:function(t,e,i,r,s,o){for(var n=0;n<e.length;n++)this.BuildPoint(t[2*n],t[2*n+1],e[n],s,o),this.tempArr[0]=s.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=s.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=s.z-this.Cell.FCellGeoWPs.z,i.set(this.tempArr,3*(r+n))}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s.zMode!==l.u.Z_GROUND_PERVERTEX&&s.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)t+=3*this.objects[e]._coordsZ.length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=0;e<this.FilterTriIndexCountArr.length;e++)for(var i=0;i<this.FilterTriIndexCountArr[e].length;i++)this.vertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]+1],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=1;i<this.FilterTriIndexCountArr.length;i++)this.FilterTriIndexCountArr[i].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[i].length,style:t.filter[i-1].style}),e+=this.FilterTriIndexCountArr[i].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=1;e<this.FilterLineStartCountArr.length;e++)this.FilterLineStartCountArr[e].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[e].start,count:this.FilterLineStartCountArr[e].count,style:t.filter[e-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=0;r<this.objects.length;r++){t=(t=m(this.objects[r]._coords,null,2)).map(i);for(var s=0;s<t.length;s++)this.FilterTriIndexCountArr[this.objects[r].ruleIndex+1].push(t[s]);e+=this.objects[r]._coordsZ.length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterTriIndexCountArr[i]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterLineStartCountArr[i]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled)return!0;if(i&&i.length)for(var r=0;r<i.length;r++)if(i[r].style.filled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){for(var o=t.length;o--;){if(t[o]._coordsZ=[],t[o].shapeType===l.r.ELLIPSE)t[o]._coordsZ.length=l.z.SHAPE_DIVISION+1,t[o]._coordsZ.fill(t[o].coordsZ[0]),this.FillEllipseGeo(t[o],t[o].coords,t[o].radius1,t[o].radius2,t[o].rotDeg,l.z.SHAPE_DIVISION);else{var n=this.FGlobe.Shapes.Definitions[t[o].shapeType].vert.length;t[o]._coordsZ.length=n/2,t[o]._coordsZ.fill(t[o].coordsZ[0]),this.FillShapeGeo(t[o])}Object(f.d)(t[o].obj.Limit,t[o]._coords)}this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.vertexBufferForGeometry||this.objectType===l.j.POINT||(this.vertexBufferForGeometry=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen(),this.vertexTypedArrForGeometry=new Float32Array(this.totalCoordLen+3*this.totalTriIndexCnt),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW)}},{key:"Draw",value:function(t,e){var i,r=this.FGlobe,s=r.gl,o=r.P3DvertexPosForLayer,n=r.P3DOpacityLocForLayer,a=e.depthTest,h=e.cullFace;if(a||s.disable(s.DEPTH_TEST),h||s.disable(s.CULL_FACE),s.enable(s.BLEND),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.vertexAttribPointer(o,3,s.FLOAT,!1,0,0),this.objects.length){var l=this.PolyStartCountArr.length;for(i=0;i<l;i++)this.PolyStartCountArr[i].style.filled&&this.PolyStartCountArr[i].style.active&&(s.uniform4fv(n,this.PolyStartCountArr[i].style.__fillColor),s.drawArrays(s.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[i].start,this.PolyStartCountArr[i].count))}if(this.objects.length){var u=this.LineStartCountArr.length;for(i=0;i<u;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(s.uniform4fv(n,this.LineStartCountArr[i].style.__borderColor),t))for(var d=this.LineStartCountArr[i].start.length,c=0;c<d;c++)this.FGlobe.layerPolygonCount++,s.drawArrays(s.LINE_LOOP,this.LineStartCountArr[i].start[c],this.LineStartCountArr[i].count[c])}}},{key:"FillEllipseGeo",value:function(t,e,i,r,s,o){var n,a,h,u,d;i*=l.z.GLOBE_RADIUS_K,r*=l.z.GLOBE_RADIUS_K;var f=new c.u(0,0),p=new c.w(0,0,0),F=new c.u(0,0),y=new c.u(0,0);for(t._coords=[],t._coords.length=2*(o+1),f.SetV(c.b.DegreeToRadyan(e[0]),c.b.DegreeToRadyan(e[1])),c.b.GeoTo3DP(f,l.z.GLOBE_RADIUS,p),p.Normalize(),a=0;a<o+1;a++)n=c.b.DegreeToRadyan(a*(360/o)+270),h=i*Math.cos(n),u=r*Math.sin(n),d=Math.sqrt(h*h+u*u),n=c.b.DegreeToRadyan(c.b.CSAngleV2(h,u)),Object.assign(y,f),c.b.X7UX4S(y,d,l.z.GLOBE_RADIUS),F=this.RotateNorth(y,p,n,s),y.SetV(c.b.RadyanToDegree(F.x),c.b.RadyanToDegree(F.y)),t._coords[2*a]=y.x,t._coords[2*a+1]=y.y}},{key:"RotateNorth",value:function(t,e,i,r){var s=new c.w(0,0,0),o=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),c.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+c.b.DegreeToRadyan(-r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),c.b.CarToSpher2(s,o),o}},{key:"FillShapeGeo",value:function(t){t._coords=[];for(var e,i=this.FGlobe.Shapes.Definitions[t.shapeType].vert.slice(),r=new c.u(0,0),s=new c.w(0,0,0),o=i.length/2;o--;)e=this.ConvertShapePnt(i[2*o],i[2*o+1],t),t._coords[2*o]=e.x,t._coords[2*o+1]=e.y;r.SetV(c.b.DegreeToRadyan(t.coords[0]),c.b.DegreeToRadyan(t.coords[1])),c.b.GeoTo3DP(r,l.z.GLOBE_RADIUS,s),s.Normalize()}},{key:"ConvertShapePnt",value:function(t,e,i){var r,s,o=new c.u(0,0),n=new c.u(0,0),a=new c.w(0,0,0),h=new c.F,u=new c.u(0,0);return o.x=t*i.radius1*l.z.GLOBE_RADIUS_K,o.y=e*i.radius2*l.z.GLOBE_RADIUS_K,c.b.CSRotate(c.b.DegreeToRadyan(-i.rotDeg),0,0,o.x,o.y,h),Object.assign(o,h),s=o.Dist2DV(0,0),r=c.b.CSAngleV2(o.x,o.y),n.x=i.coords[0],n.y=i.coords[1],n.ConvertDegreeToRadyan(),c.b.GeoTo3D(n.x,n.y,l.z.GLOBE_RADIUS,a),a.Normalize(),Object.assign(u,n),c.b.X7UX4S(u,s,l.z.GLOBE_RADIUS),(n=this.RotateNorthOther(u,a,-r)).ConvertRadyanToDegree(),n}},{key:"RotateNorthOther",value:function(t,e,i){var r=new c.w(0,0,0),s=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,r),r.Normalize(),c.b.RotatePointAroundVector(r,e.x,e.y,e.z,c.b.DegreeToRadyan(i)),r.DotProductSetP(r,l.z.GLOBE_RADIUS),c.b.CarToSpher2(r,s),s}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW)}}]),t}(),P=function(){function t(e,i,r,o,n){s()(this,t),this.objects=e,this.FCityLayer=i,this.FGlobe=r,this.Cell=o,this.objectType=n,this.totalCoordLen=0,this.tempp2d=new c.u(0,0),this.tempArr=new Float32Array(3),this.vertexBufferForGeometry=void 0,this.vertexTypedArrForGeometry=void 0,this.vertexBufferForLineCenter=void 0,this.vertexTypedArrForLineCenter=void 0,this.PolyStartCountArr=[],this.FilterTriIndexCountArr=[],this.LineStartCountArr=[],this.FilterLineStartCountArr=[],this.isFilled=!1,this.totalTriIndexCnt=0,this.TempGeo3C=new c.w(0,0,0)}return n()(t,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.vertexBufferForLineCenter&&(t.deleteBuffer(this.vertexBufferForLineCenter),this.vertexBufferForLineCenter=null,this.vertexTypedArrForLineCenter=null),this.totalCoordLen=null,this.tempp2d=null,this.tempArr=null,this.TempGeo3C=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null,this.totalTriIndexCnt=null}},{key:"FillLineTypedArr",value:function(t,e,i){var r=0;if(e){var s=0;for(s=0,r=0;r<t.length;r++){var o=t[r],n=o._coords,a=o._coordsZ,h=o.obj,l=o.center;t[r].VStart=s,this.FilterLineStartCountArr[t[r].ruleIndex+1].start.push(s),this.FillTypedArr(n,a,this.vertexTypedArrForGeometry,s,h.TempGeo3C,i),this.FilterLineStartCountArr[t[r].ruleIndex+1].count.push(n.length/2),s+=n.length/2,this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i)}}else for(r=0;r<t.length;r++){var u=t[r],d=(n=u._coords,a=u._coordsZ,h=u.obj,l=u.center,u.VStart);this.FillTypedArr(n,a,this.vertexTypedArrForGeometry,d,h.TempGeo3C,i),this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i)}}},{key:"FillTypedArr",value:function(t,e,i,r,s,o){for(var n=0;n<e.length;n++)this.BuildPoint(t[2*n],t[2*n+1],e[n],s,o),this.tempArr[0]=s.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=s.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=s.z-this.Cell.FCellGeoWPs.z,i.set(this.tempArr,3*(r+n))}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s.zMode!==l.u.Z_GROUND_PERVERTEX&&s.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)t+=3*this.objects[e]._coordsZ.length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=0;e<this.FilterTriIndexCountArr.length;e++)for(var i=0;i<this.FilterTriIndexCountArr[e].length;i++)this.vertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]+1],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[e][i]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=1;i<this.FilterTriIndexCountArr.length;i++)this.FilterTriIndexCountArr[i].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[i].length,style:t.filter[i-1].style}),e+=this.FilterTriIndexCountArr[i].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,lStart:this.FilterLineStartCountArr[0].lStart,style:t});for(var e=1;e<this.FilterLineStartCountArr.length;e++)this.FilterLineStartCountArr[e].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[e].start,count:this.FilterLineStartCountArr[e].count,lStart:this.FilterLineStartCountArr[e].lStart,style:t.filter[e-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=0;r<this.objects.length;r++){t=(t=m(this.objects[r]._coords,null,2)).map(i);for(var s=0;s<t.length;s++)this.FilterTriIndexCountArr[this.objects[r].ruleIndex+1].push(t[s]);e+=this.objects[r]._coordsZ.length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterTriIndexCountArr[i]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=0;i<e.length+1;i++)this.FilterLineStartCountArr[i]={start:[],count:[],lStart:[]};else this.FilterLineStartCountArr[0]={start:[],count:[],lStart:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled)return!0;if(i&&i.length)for(var r=0;r<i.length;r++)if(i[r].style.filled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){for(var o=t.length;o--;)t[o]._coords=[],t[o]._coordsZ=[],this.FixedAnglesAndFindCoordLength(t[o]),this.FindMidPoint(t[o]),this.FillArcAreaGeo(t[o],t[o].radius2,t[o].radius2,!1),this.FillArcAreaGeo(t[o],t[o].radius1,t[o].radius1,!0),t[o]._coordsZ.length=t[o]._coords.length/2,t[o]._coordsZ.fill(t[o].coordsZ[0]),Object(f.d)(t[o].obj.Limit,t[o]._coords);this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.vertexBufferForGeometry||this.objectType===l.j.POINT||(this.vertexBufferForGeometry=s.createBuffer(),this.vertexBufferForLineCenter=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen(),this.vertexTypedArrForGeometry=new Float32Array(this.totalCoordLen+3*this.totalTriIndexCnt),this.vertexTypedArrForLineCenter=new Float32Array(9*t.length),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),this.FillBufferForCenterLines(t,e),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW)}},{key:"Draw",value:function(t,e){var i,r,s=this.FGlobe,o=s.gl,n=s.P3DvertexPosForLayer,a=s.P3DOpacityLocForLayer,h=e.depthTest,l=e.cullFace;if(h||o.disable(o.DEPTH_TEST),l||o.disable(o.CULL_FACE),o.enable(o.BLEND),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBufferForGeometry),o.vertexAttribPointer(n,3,o.FLOAT,!1,0,0),this.objects.length){var u=this.PolyStartCountArr.length;for(i=0;i<u;i++)this.PolyStartCountArr[i].style.filled&&this.PolyStartCountArr[i].style.active&&(o.uniform4fv(a,this.PolyStartCountArr[i].style.__fillColor),o.drawArrays(o.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[i].start,this.PolyStartCountArr[i].count))}if(this.objects.length){var d=this.LineStartCountArr.length;for(i=0;i<d;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(o.uniform4fv(a,this.LineStartCountArr[i].style.__borderColor),t)){var c=this.LineStartCountArr[i].start.length;for(r=0;r<c;r++)this.FGlobe.layerPolygonCount++,o.drawArrays(o.LINE_LOOP,this.LineStartCountArr[i].start[r],this.LineStartCountArr[i].count[r])}for(o.bindBuffer(o.ARRAY_BUFFER,this.vertexBufferForLineCenter),o.vertexAttribPointer(n,3,o.FLOAT,!1,0,0),i=0;i<d;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(o.uniform4fv(a,this.LineStartCountArr[i].style.__borderColor),t)){var f=this.LineStartCountArr[i].lStart.length;for(r=0;r<f;r++){var p=this.LineStartCountArr[i].lStart[r];o.drawArrays(o.LINE_STRIP,p,3)}}}}},{key:"FixedAnglesAndFindCoordLength",value:function(t){Math.abs(t.endAng-t.startAng)%360==0&&(t.endAng-=1e-7,t.fixedEAng=t.endAng),t.startAng>0&&t.endAng<0?(t.fixedSAng=t.startAng%360,t.fixedEAng=t.endAng%360+360):t.startAng<0&&t.endAng>0?(t.fixedSAng=t.startAng%360+360,t.fixedEAng=t.endAng%360):t.startAng<0&&t.endAng<0?(t.fixedSAng=t.startAng%360+360,t.fixedEAng=t.endAng%360+360):(t.fixedSAng=t.startAng%360,t.fixedEAng=t.endAng%360),t.fixedSAng>t.fixedEAng&&(t.fixedEAng+=360),t.fixedSAng+=90,t.fixedEAng+=90,t.stepCount=Math.floor((t.fixedEAng-t.fixedSAng)/t.stepAng),t.overageAng=(t.fixedEAng-t.fixedSAng)%t.stepAng,isNaN(t.stepCount)||"number"!=typeof t.stepCount||(t.overageAng?t._coords.length=2*(t.stepCount+1)+2:t._coords.length=2*(t.stepCount+1))}},{key:"FindMidPoint",value:function(t){t.obj.midPRad=(t.radius2-t.radius1)/2+t.radius1,t.obj.midAng=(t.fixedEAng-t.fixedSAng)/2+t.fixedSAng,this.FillMidGeo(t,t.obj.midPRad,t.obj.midPRad)}},{key:"FillMidGeo",value:function(t,e,i){var r,s,o,n,a=new c.u(0,0),h=new c.w(0,0,0),u=new c.u(0,0),d=new c.u(0,0);e*=l.z.GLOBE_RADIUS_K,i*=l.z.GLOBE_RADIUS_K,a.SetV(c.b.DegreeToRadyan(t.coords[0]),c.b.DegreeToRadyan(t.coords[1])),c.b.GeoTo3DP(a,l.z.GLOBE_RADIUS,h),h.Normalize(),r=c.b.DegreeToRadyan(t.obj.midAng),s=e*Math.cos(r),o=i*Math.sin(r),n=Math.sqrt(s*s+o*o),r=c.b.DegreeToRadyan(-c.b.CSAngleV2(s,o)),Object.assign(d,a),c.b.X7UX4S(d,n,l.z.GLOBE_RADIUS),u=this.RotateNorth(d,h,r,0),t.center.SetV(c.b.RadyanToDegree(u.x),c.b.RadyanToDegree(u.y),t.center.z)}},{key:"RotateNorth",value:function(t,e,i,r){var s=new c.w(0,0,0),o=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),c.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+c.b.DegreeToRadyan(r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),c.b.CarToSpher2(s,o),o}},{key:"FillArcAreaGeo",value:function(t,e,i,r){var s,o,n,a,h;e*=l.z.GLOBE_RADIUS_K,i*=l.z.GLOBE_RADIUS_K;var u=new c.u(0,0),d=new c.w(0,0,0),f=new c.u(0,0),p=new c.u(0,0),F=[];for(u.SetV(c.b.DegreeToRadyan(t.coords[0]),c.b.DegreeToRadyan(t.coords[1])),c.b.GeoTo3DP(u,l.z.GLOBE_RADIUS,d),d.Normalize(),o=0;o<=t.stepCount;o++)s=c.b.DegreeToRadyan(o*t.stepAng+t.fixedSAng),n=e*Math.cos(s),a=i*Math.sin(s),h=Math.sqrt(n*n+a*a),s=c.b.DegreeToRadyan(-c.b.CSAngleV2(n,a)),Object.assign(p,u),c.b.X7UX4S(p,h,l.z.GLOBE_RADIUS),f=this.RotateNorth(p,d,s,0),p.SetV(c.b.RadyanToDegree(f.x),c.b.RadyanToDegree(f.y)),F[2*o]=p.x,F[2*o+1]=p.y;if(t.overageAng&&(s=c.b.DegreeToRadyan((o-1)*t.stepAng+t.fixedSAng+t.overageAng),n=e*Math.cos(s),a=i*Math.sin(s),h=Math.sqrt(n*n+a*a),s=c.b.DegreeToRadyan(-c.b.CSAngleV2(n,a)),Object.assign(p,u),c.b.X7UX4S(p,h,l.z.GLOBE_RADIUS),f=this.RotateNorth(p,d,s,0),p.SetV(c.b.RadyanToDegree(f.x),c.b.RadyanToDegree(f.y)),F[2*o]=p.x,F[2*o+1]=p.y),r)for(o=0;o<F.length-1;o+=2)t._coords[F.length+o]=F[o],t._coords[F.length+o+1]=F[o+1];else for(o=F.length-1;o>0;o-=2)t._coords[F.length-o-1]=F[o-1],t._coords[F.length-o]=F[o]}},{key:"FillBufferForCenterLines",value:function(t,e){var i,r=this.vertexTypedArrForLineCenter,s=this.vertexBufferForLineCenter,o=this.FGlobe.gl;if(e){var n=0;for(i=0;i<t.length;i++)this.BuildCenterPoints(9*i,t[i]._coords[t[i]._coordsZ.length],t[i]._coords[t[i]._coordsZ.length+1],t[i]._coordsZ[t[i]._coordsZ.length-1],r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(9*i+3,t[i].coords[0],t[i].coords[1],t[i].coordsZ[0],r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(9*i+6,t[i]._coords[t[i]._coords.length-2],t[i]._coords[t[i]._coords.length-1],t[i]._coordsZ[t[i]._coordsZ.length-1],r,t[i].obj.TempGeo3CLine),t[i].LStart=3*n,this.FilterLineStartCountArr[t[i].ruleIndex+1].lStart.push(n),n+=3}else for(i=0;i<t.length;i++){var a=t[i].LStart;this.BuildCenterPoints(a,t[i]._coords[t[i]._coordsZ.length],t[i]._coords[t[i]._coordsZ.length+1],t[i]._coordsZ[t[i]._coordsZ.length-1],r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(a+3,t[i].coords[0],t[i].coords[1],t[i].coordsZ[0],r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(a+6,t[i]._coords[t[i]._coords.length-2],t[i]._coords[t[i]._coords.length-1],t[i]._coordsZ[t[i]._coordsZ.length-1],r,t[i].obj.TempGeo3CLine)}o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,r,o.STATIC_DRAW)}},{key:"BuildCenterPoints",value:function(t,e,i,r,s,o){var n=this.FCityLayer.style;this.tempp2d.SetV(e,i),this.tempp2d.ConvertDegreeToRadyan(),n.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+r*l.z.GLOBE_RADIUS_K,o):n.zMode!==l.u.Z_GROUND_PERVERTEX&&n.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+r*l.z.GLOBE_RADIUS_K,o),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,s.set(this.tempArr,t)}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillBufferForCenterLines(this.objects,!0),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW)}}]),t}(),_=function(){function t(){s()(this,t)}return n()(t,[{key:"Build",value:function(t,e){}},{key:"Clear",value:function(){}},{key:"StyleChanged",value:function(){}},{key:"Draw",value:function(t){}},{key:"Draw2d",value:function(t){}},{key:"Draw3d",value:function(t){}}]),t}(),I=function(t){function e(t,i,r,o){var n;return s()(this,e),(n=y()(this,g()(e).call(this))).objects=t,n.FCityLayer=i,n.FGlobe=r,n.Cell=o,n.tempp2d=new c.u(0,0),n.tempArr=new Float32Array(3),n.vertexBufferForGeometry=void 0,n.vertexTypedArrForGeometry=void 0,n.OuterStartCountArr=[],n.LineStartCountArr=[],n.FilterLineStartCountArr=[],n}return b()(e,t),n()(e,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.OuterStartCountArr.length=0,this.tempp2d=null,this.tempArr=null,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0}},{key:"FillLineTypedArr",value:function(t,e,i){if(e){var r=0,s=0,o=0,n=t.length;for(s=0;s<n;s++){var a=t[s],h=a.obj,l=a.center,u=a._coords,d=a._coordsZ,c=a.zMode;t[s].VStart=[];var f=u.length;for(o=0;o<f;o++)t[s].VStart.push(r),this.FilterLineStartCountArr[t[s].ruleIndex+1].start.push(r),this.FillTypedArr(u[o],d[o],this.vertexTypedArrForGeometry,r,h.TempGeo3C,c),this.FilterLineStartCountArr[t[s].ruleIndex+1].count.push(u[o].length/2),r+=u[o].length/2,this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i.zMode)}}else{var p=t.length;for(s=0;s<p;s++){var F=t[s],y=(h=F.obj,l=F.center,u=F._coords,d=F._coordsZ,F.VStart),A=(c=F.zMode,u.length);for(o=0;o<A;o++)this.FillTypedArr(u[o],d[o],this.vertexTypedArrForGeometry,y[o],h.TempGeo3C,c),this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i.zMode)}}}},{key:"FillTypedArr",value:function(t,e,i,r,s,o){for(var n=e.length,a=0;a<n;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],s,o[a]),this.tempArr[0]=s.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=s.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=s.z-this.Cell.FCellGeoWPs.z,i.set(this.tempArr,3*(r+a))}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)for(var i=0;i<this.objects[e]._coords.length;i++)t+=3*this.objects[e]._coordsZ[i].length;return t}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,style:t.filter[i-1].style})}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"Build",value:function(t,e,i,r){e&&(this.CheckType(),this.vertexTypedArrForGeometry=new Float32Array(this.GetTotalcoordLen()),this.FindFilterLineStartCount(r));var s=this.FGlobe.gl;this.vertexBufferForGeometry||(this.vertexBufferForGeometry=s.createBuffer()),this.FillLineTypedArr(t,e,i),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW)}},{key:"Draw",value:function(t){var e=this.FGlobe,i=e.gl,r=e.P3DvertexPosForLayer,s=e.P3DOpacityLocForLayer,o=e.P3DisPointForLayer;i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.vertexAttribPointer(r,3,i.FLOAT,!1,0,0);var n=0;if(this.objects.length){var a=this.LineStartCountArr.length;for(n=0;n<a;n++)if(this.LineStartCountArr[n].style.active&&(i.uniform4fv(s,this.LineStartCountArr[n].style.__borderColor),t)){var h,l=this.LineStartCountArr[n].start.length;for(h=0;h<l;h++)i.drawArrays(i.LINE_STRIP,this.LineStartCountArr[n].start[h],this.LineStartCountArr[n].count[h]);for(i.uniform1i(o,1),h=0;h<l;h++)i.drawArrays(i.POINTS,this.LineStartCountArr[n].start[h],this.LineStartCountArr[n].count[h]);i.uniform1i(o,0)}}}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW)}}]),e}(O),B=function(t){function e(t,i,r,o){var n;return s()(this,e),(n=y()(this,g()(e).call(this))).objects=t,n.FCityLayer=i,n.FGlobe=r,n.Cell=o,n.tempp2d=new c.u(0,0),n.tempArr=new Float32Array(3),n.vertexBufferForGeometry=void 0,n.vertexTypedArrForGeometry=void 0,n.topVertexBufferForGeometry=void 0,n.topVertexTypedArrForGeometry=void 0,n.sideVertexBufferForGeometry=void 0,n.sideVertexTypedArrForGeometry=void 0,n.OuterStartCountArr=[],n.LineStartCountArr=[],n.FilterLineStartCountArr=[],n}return b()(e,t),n()(e,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.topVertexBufferForGeometry&&(t.deleteBuffer(this.topVertexBufferForGeometry),this.topVertexBufferForGeometry=null,this.topVertexTypedArrForGeometry=null),this.sideVertexBufferForGeometry&&(t.deleteBuffer(this.sideVertexBufferForGeometry),this.sideVertexBufferForGeometry=null,this.sideVertexTypedArrForGeometry=null),this.OuterStartCountArr.length=0,this.tempp2d=null,this.tempArr=null,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0}},{key:"FillLineTypedArr",value:function(t,e,i){if(e){var r=0,s=0,o=0,n=t.length;for(s=0;s<n;s++){var a=t[s],h=a.obj,l=a.center,u=a._coords,d=a._coordsZ,c=a._heights,f=a._minZMode,p=a._maxZMode;t[s].VStart=[];var F=u.length;for(o=0;o<F;o++){var y=d[o].length;t[s].VStart.push(r),this.FilterLineStartCountArr[t[s].ruleIndex+1].start.push(r),this.FillBottomTypedArr(u[o],d[o],y,this.vertexTypedArrForGeometry,r,h.TempGeo3C,f[o]),this.FillTopTypedArr(u[o],d[o],y,this.topVertexTypedArrForGeometry,r,h.TempGeo3C,p[o],c[o]),this.FillSideTypeArray(d[o],y,3*r*2),this.FilterLineStartCountArr[t[s].ruleIndex+1].count.push(u[o].length/2),r+=u[o].length/2,this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i.zMode)}}}else{var A=t.length;for(s=0;s<A;s++){var g=t[s],C=(h=g.obj,l=g.center,u=g._coords,d=g._coordsZ,g.VStart),b=(c=g._heights,f=g._minZMode,p=g._maxZMode,u.length);for(o=0;o<b;o++){var T=d[o].length;this.FillBottomTypedArr(u[o],d[o],T,this.vertexTypedArrForGeometry,C[o],h.TempGeo3C,f[o]),this.FillTopTypedArr(u[o],d[o],T,this.topVertexTypedArrForGeometry,C[o],h.TempGeo3C,p[o],c[o]),this.FillSideTypeArray(d[o],T,3*C[o]*2),this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i.zMode)}}}}},{key:"FillBottomTypedArr",value:function(t,e,i,r,s,o,n){for(var a=0;a<i;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+a))}},{key:"FillTopTypedArr",value:function(t,e,i,r,s,o,n,a){for(var h=0;h<i;h++)this.BuildPoint(t[2*h],t[2*h+1],e[h]+a[h],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+h))}},{key:"FillSideTypeArray",value:function(t,e,i){for(var r=i/2,s=0;s<e;s++){var o=6*s,n=o/2;this.sideVertexTypedArrForGeometry[i+o]=this.vertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+1]=this.vertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+2]=this.vertexTypedArrForGeometry[r+n+2],this.sideVertexTypedArrForGeometry[i+o+3]=this.topVertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+4]=this.topVertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+5]=this.topVertexTypedArrForGeometry[r+n+2]}}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)for(var i=0;i<this.objects[e]._coords.length;i++)t+=3*this.objects[e]._coordsZ[i].length;return t}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,style:t.filter[i-1].style})}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"Build",value:function(t,e,i,r){if(e){this.CheckType(!0),this.PrepareMultiFor3D();var s=this.GetTotalcoordLen();this.vertexTypedArrForGeometry=new Float32Array(s),this.topVertexTypedArrForGeometry=new Float32Array(s),this.sideVertexTypedArrForGeometry=new Float32Array(2*s),this.FindFilterLineStartCount(r)}var o=this.FGlobe.gl;this.vertexBufferForGeometry||(this.vertexBufferForGeometry=o.createBuffer()),this.topVertexBufferForGeometry||(this.topVertexBufferForGeometry=o.createBuffer()),this.sideVertexBufferForGeometry||(this.sideVertexBufferForGeometry=o.createBuffer()),this.FillLineTypedArr(t,e,i),e&&this.FillLineStartCountArr(r),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBufferForGeometry),o.bufferData(o.ARRAY_BUFFER,this.vertexTypedArrForGeometry,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,this.topVertexBufferForGeometry),o.bufferData(o.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,this.sideVertexBufferForGeometry),o.bufferData(o.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,o.STATIC_DRAW)}},{key:"Draw",value:function(t){if(this.objects.length){var e=this.LineStartCountArr.length;this.DrawSurface(t,e),this.DrawSide(t,e)}}},{key:"DrawSurface",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.vertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)this.FGlobe.layerLineCount++,n.drawArrays(n.LINE_STRIP,this.LineStartCountArr[i].start[r],this.LineStartCountArr[i].count[r]);for(n.bindBuffer(n.ARRAY_BUFFER,this.topVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.LINE_STRIP,this.LineStartCountArr[i].start[r],this.LineStartCountArr[i].count[r])}},{key:"DrawSide",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.sideVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.sideFilled&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__sideColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.TRIANGLE_STRIP,2*this.LineStartCountArr[i].start[r],2*this.LineStartCountArr[i].count[r]);for(i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)for(var l=this.LineStartCountArr[i].count[r],u=0;u<l;u++)n.drawArrays(n.LINES,2*(this.LineStartCountArr[i].start[r]+u),2)}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.topVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.sideVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,i.STATIC_DRAW)}}]),e}(O),G=function(t){function e(t,i,r,o){var n;return s()(this,e),(n=y()(this,g()(e).call(this))).objects=t,n.FCityLayer=i,n.FGlobe=r,n.Cell=o,n.totalCoordLen=0,n.OuterStartCountArr=[],n.tempp2d=new c.u(0,0),n.tempArr=new Float32Array(3),n.vertexBufferForGeometry=void 0,n.vertexTypedArrForGeometry=void 0,n.topVertexBufferForGeometry=void 0,n.topVertexTypedArrForGeometry=void 0,n.sideVertexBufferForGeometry=void 0,n.sideVertexTypedArrForGeometry=void 0,n.PolyStartCountArr=[],n.FilterTriIndexCountArr=[],n.LineStartCountArr=[],n.FilterLineStartCountArr=[],n.isFilled=!1,n.totalTriIndexCnt=0,n}return b()(e,t),n()(e,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.topVertexBufferForGeometry&&(t.deleteBuffer(this.topVertexBufferForGeometry),this.topVertexBufferForGeometry=null,this.topVertexTypedArrForGeometry=null),this.sideVertexBufferForGeometry&&(t.deleteBuffer(this.sideVertexBufferForGeometry),this.sideVertexBufferForGeometry=null,this.sideVertexTypedArrForGeometry=null),this.OuterStartCountArr.length=0,this.tempp2d=null,this.tempArr=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null}},{key:"FillLineTypedArr",value:function(t,e,i){if(e){var r=0,s=0,o=0,n=t.length;for(s=0;s<n;s++){var a=t[s],h=a.obj,l=a.center,u=a._coords,d=a._coordsZ,c=a._heights,f=a._minZMode,p=a._maxZMode;t[s].VStart=[];var F=u.length;for(o=0;o<F;o++){var y=d[o].length;t[s].VStart.push(r),this.FilterLineStartCountArr[t[s].ruleIndex+1].start.push(r),this.FillBottomTypedArr(u[o],d[o],y,this.vertexTypedArrForGeometry,r,h.TempGeo3C,f[o]),this.FillTopTypedArr(u[o],d[o],y,this.topVertexTypedArrForGeometry,r,h.TempGeo3C,p[o],c[o]),this.FillSideTypeArray(d[o],y,3*r*2),this.FilterLineStartCountArr[t[s].ruleIndex+1].count.push(u[o].length/2),r+=u[o].length/2,this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i.zMode)}}}else{var A=t.length;for(s=0;s<A;s++){var g=t[s],C=(h=g.obj,l=g.center,u=g._coords,d=g._coordsZ,g.VStart),b=(c=g._heights,f=g._minZMode,p=g._maxZMode,u.length);for(o=0;o<b;o++){var T=d[o].length;this.FillBottomTypedArr(u[o],d[o],T,this.vertexTypedArrForGeometry,C[o],h.TempGeo3C,f[o]),this.FillTopTypedArr(u[o],d[o],T,this.topVertexTypedArrForGeometry,C[o],h.TempGeo3C,p[o],c[o]),this.FillSideTypeArray(d[o],T,3*C[o]*2),this.BuildPoint(l.x,l.y,l.z,h.TempGeo3C,i.zMode)}}}}},{key:"FillBottomTypedArr",value:function(t,e,i,r,s,o,n){for(var a=0;a<i;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+a))}},{key:"FillTopTypedArr",value:function(t,e,i,r,s,o,n,a){for(var h=0;h<i;h++)this.BuildPoint(t[2*h],t[2*h+1],e[h]+a[h],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+h))}},{key:"FillSideTypeArray",value:function(t,e,i){for(var r=i/2,s=0;s<e;s++){var o=6*s,n=o/2;this.sideVertexTypedArrForGeometry[i+o]=this.vertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+1]=this.vertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+2]=this.vertexTypedArrForGeometry[r+n+2],this.sideVertexTypedArrForGeometry[i+o+3]=this.topVertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+4]=this.topVertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+5]=this.topVertexTypedArrForGeometry[r+n+2]}}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)for(var i=0;i<this.objects[e]._coords.length;i++)t+=3*this.objects[e]._coordsZ[i].length;return t}},{key:"FillPolyBottomAndTopTypedArrs",value:function(){for(var t=0,e=this.FilterTriIndexCountArr.length,i=0;i<e;i++)for(var r=this.FilterTriIndexCountArr[i].length,s=0;s<r;s++){var o=3*t+this.totalCoordLen,n=3*this.FilterTriIndexCountArr[i][s];this.vertexTypedArrForGeometry[o]=this.vertexTypedArrForGeometry[n],this.vertexTypedArrForGeometry[o+1]=this.vertexTypedArrForGeometry[n+1],this.vertexTypedArrForGeometry[o+2]=this.vertexTypedArrForGeometry[n+2],this.topVertexTypedArrForGeometry[o]=this.topVertexTypedArrForGeometry[n],this.topVertexTypedArrForGeometry[o+1]=this.topVertexTypedArrForGeometry[n+1],this.topVertexTypedArrForGeometry[o+2]=this.topVertexTypedArrForGeometry[n+2],t++}}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=this.FilterTriIndexCountArr.length,r=1;r<i;r++)this.FilterTriIndexCountArr[r].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[r].length,style:t.filter[r-1].style}),e+=this.FilterTriIndexCountArr[r].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,style:t.filter[i-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=this.objects.length,s=0;s<r;s++)for(var o=this.objects[s].MultiArr.length,n=0;n<o;n++){for(var a=(t=(t=m(this.objects[s].MultiArr[n],this.objects[s].obj.index[n],2)).map(i)).length,h=0;h<a;h++)this.FilterTriIndexCountArr[this.objects[s].ruleIndex+1].push(t[h]);e+=this.objects[s].MultiArrZ[n].length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterTriIndexCountArr[r]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled||t.bottomFilled||t.sideFilled)return!0;if(i&&i.length)for(var r=i.length,s=0;s<r;s++)if(i[s].style.filled||i[s].style.bottomFilled||i[s].style.sideFilled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){this.CheckType(!0),this.PrepareMultiFor3D(),this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.vertexBufferForGeometry||(this.vertexBufferForGeometry=s.createBuffer()),this.topVertexBufferForGeometry||(this.topVertexBufferForGeometry=s.createBuffer()),this.sideVertexBufferForGeometry||(this.sideVertexBufferForGeometry=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen();var o=3*this.totalTriIndexCnt+this.totalCoordLen;this.vertexTypedArrForGeometry=new Float32Array(o),this.topVertexTypedArrForGeometry=new Float32Array(o),this.sideVertexTypedArrForGeometry=new Float32Array(2*this.totalCoordLen),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyBottomAndTopTypedArrs(),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.topVertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.sideVertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,s.STATIC_DRAW)}},{key:"Draw",value:function(t){if(this.objects.length){var e=this.PolyStartCountArr.length,i=this.LineStartCountArr.length;this.DrawBottom(t,e,i),this.DrawSide(t,i),this.DrawTop(t,e,i)}}},{key:"DrawBottom",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.vertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.bottomFilled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__bottomFillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawTop",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.topVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.filled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__fillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)this.FGlobe.layerPolygonCount++,n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawSide",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.enable(n.POLYGON_OFFSET_FILL),n.polygonOffset(1,1),n.bindBuffer(n.ARRAY_BUFFER,this.sideVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.sideFilled&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__sideColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.TRIANGLE_STRIP,2*this.LineStartCountArr[i].start[r],2*this.LineStartCountArr[i].count[r]);for(i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)for(var l=this.LineStartCountArr[i].count[r],u=0;u<l;u++)n.drawArrays(n.LINES,2*(this.LineStartCountArr[i].start[r]+u),2);n.disable(n.POLYGON_OFFSET_FILL)}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyBottomAndTopTypedArrs(),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.topVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.sideVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,i.STATIC_DRAW)}}]),e}(O),w=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.FGlobe=r,this.Cell=o,this.totalCoordLen=0,this.tempp2d=new c.u(0,0),this.tempArr=new Float32Array(3),this.vertexBufferForGeometry=void 0,this.vertexTypedArrForGeometry=void 0,this.topVertexBufferForGeometry=void 0,this.topVertexTypedArrForGeometry=void 0,this.sideVertexBufferForGeometry=void 0,this.sideVertexTypedArrForGeometry=void 0,this.PolyStartCountArr=[],this.FilterTriIndexCountArr=[],this.LineStartCountArr=[],this.FilterLineStartCountArr=[],this.isFilled=!1,this.totalTriIndexCnt=0}return n()(t,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.topVertexBufferForGeometry&&(t.deleteBuffer(this.topVertexBufferForGeometry),this.topVertexBufferForGeometry=null,this.topVertexTypedArrForGeometry=null),this.sideVertexBufferForGeometry&&(t.deleteBuffer(this.sideVertexBufferForGeometry),this.sideVertexBufferForGeometry=null,this.sideVertexTypedArrForGeometry=null),this.totalCoordLen=null,this.tempp2d=null,this.tempArr=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null,this.totalTriIndexCnt=null}},{key:"FillLineTypedArr",value:function(t,e,i){var r=0;if(e){var s=0;s=0;var o=t.length;for(r=0;r<o;r++){var n=t[r],a=n._coords,h=n._coordsZ,l=n.obj,u=n.center,d=n.minZMode,c=n.maxZMode,f=n.height,p=h.length;t[r].VStart=s,this.FilterLineStartCountArr[t[r].ruleIndex+1].start.push(s),this.FillBottomTypedArr(a,h,p,this.vertexTypedArrForGeometry,s,l.TempGeo3C,d),this.FillTopTypedArr(a,h,p,this.topVertexTypedArrForGeometry,s,l.TempGeo3C,c,f),this.FillSideTypeArray(h,p,3*s*2),this.FilterLineStartCountArr[t[r].ruleIndex+1].count.push(a.length/2),s+=a.length/2,this.BuildPoint(u.x,u.y,u.z,l.TempGeo3C,i.zMode)}}else{var F=t.length;for(r=0;r<F;r++){var y=t[r],A=(a=y._coords,h=y._coordsZ,l=y.obj,u=y.center,y.VStart),g=(d=y.minZMode,c=y.maxZMode,f=y.height,h.length);this.FillBottomTypedArr(a,h,g,this.vertexTypedArrForGeometry,A,l.TempGeo3C,d),this.FillTopTypedArr(a,h,g,this.topVertexTypedArrForGeometry,A,l.TempGeo3C,c,f),this.FillSideTypeArray(h,g,3*A*2),this.BuildPoint(u.x,u.y,u.z,l.TempGeo3C,i.zMode)}}}},{key:"FillBottomTypedArr",value:function(t,e,i,r,s,o,n){for(var a=0;a<i;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+a))}},{key:"FillTopTypedArr",value:function(t,e,i,r,s,o,n,a){for(var h=0;h<i;h++)this.BuildPoint(t[2*h],t[2*h+1],e[h]+a,o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+h))}},{key:"FillSideTypeArray",value:function(t,e,i){for(var r=i/2,s=0;s<e;s++){var o=6*s,n=o/2;this.sideVertexTypedArrForGeometry[i+o]=this.vertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+1]=this.vertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+2]=this.vertexTypedArrForGeometry[r+n+2],this.sideVertexTypedArrForGeometry[i+o+3]=this.topVertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+4]=this.topVertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+5]=this.topVertexTypedArrForGeometry[r+n+2]}}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)t+=3*this.objects[e]._coordsZ.length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=this.FilterTriIndexCountArr.length,i=0;i<e;i++)for(var r=this.FilterTriIndexCountArr[i].length,s=0;s<r;s++)this.vertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+1],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+2],this.topVertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.topVertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]],this.topVertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.topVertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+1],this.topVertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.topVertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=this.FilterTriIndexCountArr.length,r=1;r<i;r++)this.FilterTriIndexCountArr[r].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[r].length,style:t.filter[r-1].style}),e+=this.FilterTriIndexCountArr[r].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,style:t.filter[i-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=this.objects.length,s=0;s<r;s++){for(var o=(t=(t=m(this.objects[s]._coords,null,2)).map(i)).length,n=0;n<o;n++)this.FilterTriIndexCountArr[this.objects[s].ruleIndex+1].push(t[n]);e+=this.objects[s]._coordsZ.length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterTriIndexCountArr[r]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled||t.bottomFilled||t.sideFilled)return!0;if(i&&i.length)for(var r=i.length,s=0;s<r;s++)if(i[s].style.filled||i[s].style.bottomFilled||i[s].style.sideFilled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){for(var o=t.length;o--;)t[o]._coordsZ=[],t[o]._coordsZ.length=l.z.SHAPE_DIVISION+1,t[o]._coordsZ.fill(t[o].coordsZ[0]),this.FillEllipseGeo(t[o],t[o].coords,t[o].radius1,t[o].radius2,t[o].rotDeg,l.z.SHAPE_DIVISION),Object(f.d)(t[o].obj.Limit,t[o]._coords);this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.vertexBufferForGeometry||(this.vertexBufferForGeometry=s.createBuffer()),this.topVertexBufferForGeometry||(this.topVertexBufferForGeometry=s.createBuffer()),this.sideVertexBufferForGeometry||(this.sideVertexBufferForGeometry=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen();var n=3*this.totalTriIndexCnt+this.totalCoordLen;this.vertexTypedArrForGeometry=new Float32Array(n),this.topVertexTypedArrForGeometry=new Float32Array(n),this.sideVertexTypedArrForGeometry=new Float32Array(2*this.totalCoordLen),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.topVertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.sideVertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,s.STATIC_DRAW)}},{key:"Draw",value:function(t){if(this.objects.length){var e=this.PolyStartCountArr.length,i=this.LineStartCountArr.length;this.DrawBottom(t,e,i),this.DrawSide(t,i),this.DrawTop(t,e,i)}}},{key:"DrawBottom",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.vertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.bottomFilled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__bottomFillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawTop",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.topVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.filled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__fillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)this.FGlobe.layerPolygonCount++,n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawSide",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.enable(n.POLYGON_OFFSET_FILL),n.polygonOffset(1,1),n.bindBuffer(n.ARRAY_BUFFER,this.sideVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.sideFilled&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__sideColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.TRIANGLE_STRIP,2*this.LineStartCountArr[i].start[r],2*this.LineStartCountArr[i].count[r]);for(i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)for(var l=this.LineStartCountArr[i].count[r],u=0;u<l;u++)n.drawArrays(n.LINES,2*(this.LineStartCountArr[i].start[r]+u),2);n.disable(n.POLYGON_OFFSET_FILL)}},{key:"FillEllipseGeo",value:function(t,e,i,r,s,o){var n,a,h,u,d;i*=l.z.GLOBE_RADIUS_K,r*=l.z.GLOBE_RADIUS_K;var f=new c.u(0,0),p=new c.w(0,0,0),F=new c.u(0,0),y=new c.u(0,0);for(t._coords=[],t._coords.length=2*(o+1),f.SetV(c.b.DegreeToRadyan(e[0]),c.b.DegreeToRadyan(e[1])),c.b.GeoTo3DP(f,l.z.GLOBE_RADIUS,p),p.Normalize(),a=0;a<o+1;a++)n=c.b.DegreeToRadyan(a*(360/o)+270),h=i*Math.cos(n),u=r*Math.sin(n),d=Math.sqrt(h*h+u*u),n=c.b.DegreeToRadyan(c.b.CSAngleV2(h,u)),Object.assign(y,f),c.b.X7UX4S(y,d,l.z.GLOBE_RADIUS),F=this.RotateNorth(y,p,n,s),y.SetV(c.b.RadyanToDegree(F.x),c.b.RadyanToDegree(F.y)),t._coords[2*a]=y.x,t._coords[2*a+1]=y.y}},{key:"RotateNorth",value:function(t,e,i,r){var s=new c.w(0,0,0),o=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),c.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+c.b.DegreeToRadyan(-r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),c.b.CarToSpher2(s,o),o}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.topVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.sideVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,i.STATIC_DRAW)}}]),t}(),M=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.FGlobe=r,this.Cell=o,this.totalCoordLen=0,this.tempp2d=new c.u(0,0),this.tempArr=new Float32Array(3),this.bottomVertBuffer=void 0,this.bottomVertTypedArr=void 0,this.topVertBuffer=void 0,this.topVertTypedArr=void 0,this.sideVertBuffer=void 0,this.sideVertTypedArr=void 0,this.centerSideHeightLineVertBuffer=void 0,this.centerSideHeightLineVertTypedArr=void 0,this.centerHeightLineVertBuffer=void 0,this.centerHeightLineVertTypedArr=void 0,this.PolyStartCountArr=[],this.FilterTriIndexCountArr=[],this.LineStartCountArr=[],this.FilterLineStartCountArr=[],this.isFilled=!1,this.totalTriIndexCnt=0,this.TempGeo3C=new c.w(0,0,0)}return n()(t,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.bottomVertBuffer&&(t.deleteBuffer(this.bottomVertBuffer),this.bottomVertBuffer=null,this.bottomVertTypedArr=null),this.topVertBuffer&&(t.deleteBuffer(this.topVertBuffer),this.topVertBuffer=null,this.topVertTypedArr=null),this.sideVertBuffer&&(t.deleteBuffer(this.sideVertBuffer),this.sideVertBuffer=null,this.sideVertTypedArr=null),this.centerSideHeightLineVertBuffer&&(t.deleteBuffer(this.centerSideHeightLineVertBuffer),this.centerSideHeightLineVertBuffer=null,this.centerSideHeightLineVertTypedArr=null),this.centerHeightLineVertBuffer&&(t.deleteBuffer(this.centerHeightLineVertBuffer),this.centerHeightLineVertBuffer=null,this.centerHeightLineVertTypedArr=null),this.totalCoordLen=null,this.tempp2d=null,this.tempArr=null,this.TempGeo3C=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null,this.totalTriIndexCnt=null}},{key:"FillLineTypedArr",value:function(t,e,i){var r=0;if(e){var s=0,o=0,n=0,a=t.length;for(r=0;r<a;r++){var h=t[r],l=h._coords,u=h._coordsZ,d=h.obj,c=h.center,f=h.minZMode,p=h.maxZMode,F=h.height,y=u.length;t[r].VStart=s,t[r].VSideOffset=n,this.FilterLineStartCountArr[t[r].ruleIndex+1].start.push(s),this.FilterLineStartCountArr[t[r].ruleIndex+1].sideStart.push(o),this.FillBottomTypedArr(l,u,y,this.bottomVertTypedArr,s,d.TempGeo3C,f),this.FillTopTypedArr(l,u,y,this.topVertTypedArr,s,d.TempGeo3C,p,F),this.FillSideTypeArray(u,y,3*s*2+n,3*s),this.FilterLineStartCountArr[t[r].ruleIndex+1].count.push(l.length/2),this.FilterLineStartCountArr[t[r].ruleIndex+1].sideCount.push(l.length/2+1),s+=l.length/2,o+=l.length/2+1,this.BuildPoint(c.x,c.y,c.z,d.TempGeo3C,i.zMode),n+=6}}else{var A=t.length;for(r=0;r<A;r++){var g=t[r],C=(l=g._coords,u=g._coordsZ,d=g.obj,c=g.center,g.VStart),b=(f=g.minZMode,p=g.maxZMode,F=g.height,g.VSideOffset),T=u.length;this.FillBottomTypedArr(l,u,T,this.bottomVertTypedArr,C,d.TempGeo3C,f),this.FillTopTypedArr(l,u,T,this.topVertTypedArr,C,d.TempGeo3C,p,F),this.FillSideTypeArray(u,T,3*C*2+b,3*C),this.BuildPoint(c.x,c.y,c.z,d.TempGeo3C,i.zMode)}}}},{key:"FillBottomTypedArr",value:function(t,e,i,r,s,o,n){for(var a=0;a<i;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+a))}},{key:"FillTopTypedArr",value:function(t,e,i,r,s,o,n,a){for(var h=0;h<i;h++)this.BuildPoint(t[2*h],t[2*h+1],e[h]+a,o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+h))}},{key:"FillSideTypeArray",value:function(t,e,i,r){for(var s=0;s<e;s++){var o=6*s,n=o/2;this.sideVertTypedArr[i+o]=this.bottomVertTypedArr[r+n],this.sideVertTypedArr[i+o+1]=this.bottomVertTypedArr[r+n+1],this.sideVertTypedArr[i+o+2]=this.bottomVertTypedArr[r+n+2],this.sideVertTypedArr[i+o+3]=this.topVertTypedArr[r+n],this.sideVertTypedArr[i+o+4]=this.topVertTypedArr[r+n+1],this.sideVertTypedArr[i+o+5]=this.topVertTypedArr[r+n+2]}var a=6*s;this.sideVertTypedArr[i+a]=this.bottomVertTypedArr[r],this.sideVertTypedArr[i+a+1]=this.bottomVertTypedArr[r+1],this.sideVertTypedArr[i+a+2]=this.bottomVertTypedArr[r+2],this.sideVertTypedArr[i+a+3]=this.topVertTypedArr[r],this.sideVertTypedArr[i+a+4]=this.topVertTypedArr[r+1],this.sideVertTypedArr[i+a+5]=this.topVertTypedArr[r+2]}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)t+=3*this.objects[e]._coordsZ.length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=this.FilterTriIndexCountArr.length,i=0;i<e;i++)for(var r=this.FilterTriIndexCountArr[i].length,s=0;s<r;s++)this.bottomVertTypedArr[this.totalCoordLen+3*t]=this.bottomVertTypedArr[3*this.FilterTriIndexCountArr[i][s]],this.bottomVertTypedArr[this.totalCoordLen+3*t+1]=this.bottomVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+1],this.bottomVertTypedArr[this.totalCoordLen+3*t+2]=this.bottomVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+2],this.topVertTypedArr[this.totalCoordLen+3*t]=this.topVertTypedArr[3*this.FilterTriIndexCountArr[i][s]],this.topVertTypedArr[this.totalCoordLen+3*t+1]=this.topVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+1],this.topVertTypedArr[this.totalCoordLen+3*t+2]=this.topVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=this.FilterTriIndexCountArr.length,r=1;r<i;r++)this.FilterTriIndexCountArr[r].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[r].length,style:t.filter[r-1].style}),e+=this.FilterTriIndexCountArr[r].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,lStart:this.FilterLineStartCountArr[0].lStart,lineHeightOffset:this.FilterLineStartCountArr[0].lineHeightOffset,sideStart:this.FilterLineStartCountArr[0].sideStart,sideCount:this.FilterLineStartCountArr[0].sideCount,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,lStart:this.FilterLineStartCountArr[i].lStart,lineHeightOffset:this.FilterLineStartCountArr[i].lineHeightOffset,sideStart:this.FilterLineStartCountArr[i].sideStart,sideCount:this.FilterLineStartCountArr[i].sideCount,style:t.filter[i-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=this.objects.length,s=0;s<r;s++){for(var o=(t=(t=m(this.objects[s]._coords,null,2)).map(i)).length,n=0;n<o;n++)this.FilterTriIndexCountArr[this.objects[s].ruleIndex+1].push(t[n]);e+=this.objects[s]._coordsZ.length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterTriIndexCountArr[r]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[],lStart:[],lineHeightOffset:[],sideStart:[],sideCount:[]};else this.FilterLineStartCountArr[0]={start:[],count:[],lStart:[],lineHeightOffset:[],sideStart:[],sideCount:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled||t.bottomFilled||t.sideFilled)return!0;if(i&&i.length)for(var r=i.length,s=0;s<r;s++)if(i[s].style.filled||i[s].style.bottomFilled||i[s].style.sideFilled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){for(var o=t.length;o--;)t[o]._coords=[],t[o]._coordsZ=[],this.FixedAnglesAndFindCoordLength(t[o]),this.FindMidPoint(t[o]),this.FillArcAreaGeo(t[o],t[o].radius2,t[o].radius2,!1),this.FillArcAreaGeo(t[o],t[o].radius1,t[o].radius1,!0),t[o]._coordsZ.length=t[o]._coords.length/2,t[o]._coordsZ.fill(t[o].coordsZ[0]),Object(f.d)(t[o].obj.Limit,t[o]._coords);this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.bottomVertBuffer||(this.bottomVertBuffer=s.createBuffer(),this.centerSideHeightLineVertBuffer=s.createBuffer()),this.topVertBuffer||(this.topVertBuffer=s.createBuffer()),this.sideVertBuffer||(this.sideVertBuffer=s.createBuffer()),this.centerHeightLineVertBuffer||(this.centerHeightLineVertBuffer=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen();var n=3*this.totalTriIndexCnt+this.totalCoordLen;this.bottomVertTypedArr=new Float32Array(n),this.topVertTypedArr=new Float32Array(n),this.sideVertTypedArr=new Float32Array(2*this.totalCoordLen+6*t.length),this.centerSideHeightLineVertTypedArr=new Float32Array(9*t.length),this.centerHeightLineVertTypedArr=new Float32Array(6*t.length),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),this.FillBufferForCenterLines(t,e),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.bottomVertBuffer),s.bufferData(s.ARRAY_BUFFER,this.bottomVertTypedArr,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.topVertBuffer),s.bufferData(s.ARRAY_BUFFER,this.topVertTypedArr,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.sideVertBuffer),s.bufferData(s.ARRAY_BUFFER,this.sideVertTypedArr,s.STATIC_DRAW)}},{key:"Draw",value:function(t){if(this.objects.length){var e=this.PolyStartCountArr.length,i=this.LineStartCountArr.length;this.DrawBottom(t,e,i),this.DrawSide(t,i),this.DrawTop(t,e,i),this.DrawCenterHeightLines(t,i)}}},{key:"DrawBottom",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.bottomVertBuffer),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.bottomFilled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__bottomFillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawTop",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.topVertBuffer),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.filled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__fillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)this.FGlobe.layerPolygonCount++,n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawSide",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.enable(n.POLYGON_OFFSET_FILL),n.polygonOffset(1,1),n.bindBuffer(n.ARRAY_BUFFER,this.sideVertBuffer),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.sideFilled&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__sideColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.TRIANGLE_STRIP,2*this.LineStartCountArr[i].sideStart[r],2*this.LineStartCountArr[i].sideCount[r]);for(i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++){var l=2*this.LineStartCountArr[i].sideStart[r],u=this.LineStartCountArr[i].count[r];n.drawArrays(n.LINES,l,2),n.drawArrays(n.LINES,l+u-2,2),n.drawArrays(n.LINES,l+u,2),n.drawArrays(n.LINES,l+2*u-2,2)}n.disable(n.POLYGON_OFFSET_FILL)}},{key:"DrawCenterHeightLines",value:function(t,e){var i,r,s=this.FGlobe,o=s.gl,n=s.P3DvertexPosForLayer,a=s.P3DOpacityLocForLayer;for(o.bindBuffer(o.ARRAY_BUFFER,this.centerSideHeightLineVertBuffer),o.vertexAttribPointer(n,3,o.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(o.uniform4fv(a,this.LineStartCountArr[i].style.__borderColor),t)){var h=this.LineStartCountArr[i].lStart.length;for(r=0;r<h;r++){var l=this.LineStartCountArr[i].lStart[r];o.drawArrays(o.LINE_STRIP,l,3)}}for(o.bindBuffer(o.ARRAY_BUFFER,this.centerHeightLineVertBuffer),o.vertexAttribPointer(n,3,o.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(o.uniform4fv(a,this.LineStartCountArr[i].style.__borderColor),t)){h=this.LineStartCountArr[i].lStart.length;for(r=0;r<h;r++)o.drawArrays(o.LINES,this.LineStartCountArr[i].lineHeightOffset[r],2)}}},{key:"FixedAnglesAndFindCoordLength",value:function(t){Math.abs(t.endAng-t.startAng)%360==0&&(t.endAng-=1e-7,t.fixedEAng=t.endAng),t.startAng>0&&t.endAng<0?(t.fixedSAng=t.startAng%360,t.fixedEAng=t.endAng%360+360):t.startAng<0&&t.endAng>0?(t.fixedSAng=t.startAng%360+360,t.fixedEAng=t.endAng%360):t.startAng<0&&t.endAng<0?(t.fixedSAng=t.startAng%360+360,t.fixedEAng=t.endAng%360+360):(t.fixedSAng=t.startAng%360,t.fixedEAng=t.endAng%360),t.fixedSAng>t.fixedEAng&&(t.fixedEAng+=360),t.fixedSAng+=90,t.fixedEAng+=90,t.stepCount=Math.floor((t.fixedEAng-t.fixedSAng)/t.stepAng),t.overageAng=(t.fixedEAng-t.fixedSAng)%t.stepAng,isNaN(t.stepCount)||"number"!=typeof t.stepCount||(t.overageAng?t._coords.length=2*(t.stepCount+1)+2:t._coords.length=2*(t.stepCount+1))}},{key:"FindMidPoint",value:function(t){t.obj.midPRad=(t.radius2-t.radius1)/2+t.radius1,t.obj.midAng=(t.fixedEAng-t.fixedSAng)/2+t.fixedSAng,this.FillMidGeo(t,t.obj.midPRad,t.obj.midPRad)}},{key:"FillMidGeo",value:function(t,e,i){var r,s,o,n,a=new c.u(0,0),h=new c.w(0,0,0),u=new c.u(0,0),d=new c.u(0,0);e*=l.z.GLOBE_RADIUS_K,i*=l.z.GLOBE_RADIUS_K,a.SetV(c.b.DegreeToRadyan(t.coords[0]),c.b.DegreeToRadyan(t.coords[1])),c.b.GeoTo3DP(a,l.z.GLOBE_RADIUS,h),h.Normalize(),r=c.b.DegreeToRadyan(t.obj.midAng),s=e*Math.cos(r),o=i*Math.sin(r),n=Math.sqrt(s*s+o*o),r=c.b.DegreeToRadyan(-c.b.CSAngleV2(s,o)),Object.assign(d,a),c.b.X7UX4S(d,n,l.z.GLOBE_RADIUS),u=this.RotateNorth(d,h,r,0),t.center.SetV(c.b.RadyanToDegree(u.x),c.b.RadyanToDegree(u.y),t.center.z)}},{key:"RotateNorth",value:function(t,e,i,r){var s=new c.w(0,0,0),o=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),c.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+c.b.DegreeToRadyan(r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),c.b.CarToSpher2(s,o),o}},{key:"FillArcAreaGeo",value:function(t,e,i,r){var s,o,n,a,h;e*=l.z.GLOBE_RADIUS_K,i*=l.z.GLOBE_RADIUS_K;var u=new c.u(0,0),d=new c.w(0,0,0),f=new c.u(0,0),p=new c.u(0,0),F=[];for(u.SetV(c.b.DegreeToRadyan(t.coords[0]),c.b.DegreeToRadyan(t.coords[1])),c.b.GeoTo3DP(u,l.z.GLOBE_RADIUS,d),d.Normalize(),o=0;o<=t.stepCount;o++)s=c.b.DegreeToRadyan(o*t.stepAng+t.fixedSAng),n=e*Math.cos(s),a=i*Math.sin(s),h=Math.sqrt(n*n+a*a),s=c.b.DegreeToRadyan(-c.b.CSAngleV2(n,a)),Object.assign(p,u),c.b.X7UX4S(p,h,l.z.GLOBE_RADIUS),f=this.RotateNorth(p,d,s,0),p.SetV(c.b.RadyanToDegree(f.x),c.b.RadyanToDegree(f.y)),F[2*o]=p.x,F[2*o+1]=p.y;if(t.overageAng&&(s=c.b.DegreeToRadyan((o-1)*t.stepAng+t.fixedSAng+t.overageAng),n=e*Math.cos(s),a=i*Math.sin(s),h=Math.sqrt(n*n+a*a),s=c.b.DegreeToRadyan(-c.b.CSAngleV2(n,a)),Object.assign(p,u),c.b.X7UX4S(p,h,l.z.GLOBE_RADIUS),f=this.RotateNorth(p,d,s,0),p.SetV(c.b.RadyanToDegree(f.x),c.b.RadyanToDegree(f.y)),F[2*o]=p.x,F[2*o+1]=p.y),r)for(o=0;o<F.length-1;o+=2)t._coords[F.length+o]=F[o],t._coords[F.length+o+1]=F[o+1];else for(o=F.length-1;o>0;o-=2)t._coords[F.length-o-1]=F[o-1],t._coords[F.length-o]=F[o]}},{key:"FillCenterHeightLine",value:function(t,e,i,r,s,o){var n=this.centerHeightLineVertTypedArr,a=this.centerHeightLineVertBuffer,h=this.FGlobe.gl;this.BuildCenterPoints(t,e,i,r+s,n,o),this.BuildCenterPoints(t+3,e,i,r,n,o),h.bindBuffer(h.ARRAY_BUFFER,a),h.bufferData(h.ARRAY_BUFFER,n,h.STATIC_DRAW)}},{key:"FillBufferForCenterLines",value:function(t,e){var i,r=this.centerSideHeightLineVertTypedArr,s=this.centerSideHeightLineVertBuffer,o=this.FGlobe.gl;if(e){var n=0,a=0,h=t.length;for(i=0;i<h;i++)this.BuildCenterPoints(9*i,t[i]._coords[t[i]._coordsZ.length],t[i]._coords[t[i]._coordsZ.length+1],t[i]._coordsZ[t[i]._coordsZ.length-1]+t[i].height,r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(9*i+3,t[i].coords[0],t[i].coords[1],t[i].coordsZ[0]+t[i].height,r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(9*i+6,t[i]._coords[t[i]._coords.length-2],t[i]._coords[t[i]._coords.length-1],t[i]._coordsZ[t[i]._coordsZ.length-1]+t[i].height,r,t[i].obj.TempGeo3CLine),this.FillCenterHeightLine(6*i,t[i].coords[0],t[i].coords[1],t[i].coordsZ[0],t[i].height,t[i].obj.TempGeo3CLine),t[i].LStart=3*n,this.FilterLineStartCountArr[t[i].ruleIndex+1].lStart.push(n),this.FilterLineStartCountArr[t[i].ruleIndex+1].lineHeightOffset.push(a),n+=3,a+=2}else{var l=t.length;for(i=0;i<l;i++){var u=t[i].LStart;this.BuildCenterPoints(u,t[i]._coords[t[i]._coordsZ.length],t[i]._coords[t[i]._coordsZ.length+1],t[i]._coordsZ[t[i]._coordsZ.length-1]+t[i].height,r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(u+3,t[i].coords[0],t[i].coords[1],t[i].coordsZ[0]+t[i].height,r,t[i].obj.TempGeo3CLine),this.BuildCenterPoints(u+6,t[i]._coords[t[i]._coords.length-2],t[i]._coords[t[i]._coords.length-1],t[i]._coordsZ[t[i]._coordsZ.length-1]+t[i].height,r,t[i].obj.TempGeo3CLine),this.FillCenterHeightLine(2*u/3,t[i].coords[0],t[i].coords[1],t[i].coordsZ[0],t[i].height,t[i].obj.TempGeo3CLine)}}o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,r,o.STATIC_DRAW)}},{key:"BuildCenterPoints",value:function(t,e,i,r,s,o){var n=this.FCityLayer.style;this.tempp2d.SetV(e,i),this.tempp2d.ConvertDegreeToRadyan(),n.zMode===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+r*l.z.GLOBE_RADIUS_K,o):n.zMode!==l.u.Z_GROUND_PERVERTEX&&n.zMode!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+r*l.z.GLOBE_RADIUS_K,o),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,s.set(this.tempArr,t)}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillBufferForCenterLines(this.objects,!0),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.bottomVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.bottomVertTypedArr,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.topVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.topVertTypedArr,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.sideVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.sideVertTypedArr,i.STATIC_DRAW)}}]),t}(),U=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.FGlobe=r,this.Cell=o,this.totalCoordLen=0,this.tempp2d=new c.u(0,0),this.tempArr=new Float32Array(3),this.vertexBufferForGeometry=void 0,this.vertexTypedArrForGeometry=void 0,this.topVertexBufferForGeometry=void 0,this.topVertexTypedArrForGeometry=void 0,this.sideVertexBufferForGeometry=void 0,this.sideVertexTypedArrForGeometry=void 0,this.PolyStartCountArr=[],this.FilterTriIndexCountArr=[],this.LineStartCountArr=[],this.FilterLineStartCountArr=[],this.isFilled=!1,this.totalTriIndexCnt=0}return n()(t,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.vertexBufferForGeometry&&(t.deleteBuffer(this.vertexBufferForGeometry),this.vertexBufferForGeometry=null,this.vertexTypedArrForGeometry=null),this.topVertexBufferForGeometry&&(t.deleteBuffer(this.topVertexBufferForGeometry),this.topVertexBufferForGeometry=null,this.topVertexTypedArrForGeometry=null),this.sideVertexBufferForGeometry&&(t.deleteBuffer(this.sideVertexBufferForGeometry),this.sideVertexBufferForGeometry=null,this.sideVertexTypedArrForGeometry=null),this.totalCoordLen=null,this.tempp2d=null,this.tempArr=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null,this.totalTriIndexCnt=null}},{key:"FillLineTypedArr",value:function(t,e,i){var r=0;if(e){var s=0;s=0;var o=t.length;for(r=0;r<o;r++){var n=t[r],a=n._coords,h=n._coordsZ,l=n.obj,u=n.center,d=n.minZMode,c=n.maxZMode,f=n.height,p=h.length;t[r].VStart=s,this.FilterLineStartCountArr[t[r].ruleIndex+1].start.push(s),this.FillBottomTypedArr(a,h,p,this.vertexTypedArrForGeometry,s,l.TempGeo3C,d),this.FillTopTypedArr(a,h,p,this.topVertexTypedArrForGeometry,s,l.TempGeo3C,c,f),this.FillSideTypeArray(h,p,3*s*2),this.FilterLineStartCountArr[t[r].ruleIndex+1].count.push(a.length/2),s+=a.length/2,this.BuildPoint(u.x,u.y,u.z,l.TempGeo3C,i.zMode)}}else{var F=t.length;for(r=0;r<F;r++){var y=t[r],A=(a=y._coords,h=y._coordsZ,l=y.obj,u=y.center,y.VStart),g=(d=y.minZMode,c=y.maxZMode,f=y.height,h.length);this.FillBottomTypedArr(a,h,g,this.vertexTypedArrForGeometry,A,l.TempGeo3C,d),this.FillTopTypedArr(a,h,g,this.topVertexTypedArrForGeometry,A,l.TempGeo3C,c,f),this.FillSideTypeArray(h,g,3*A*2),this.BuildPoint(u.x,u.y,u.z,l.TempGeo3C,i.zMode)}}}},{key:"FillBottomTypedArr",value:function(t,e,i,r,s,o,n){for(var a=0;a<i;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+a))}},{key:"FillTopTypedArr",value:function(t,e,i,r,s,o,n,a){for(var h=0;h<i;h++)this.BuildPoint(t[2*h],t[2*h+1],e[h]+a,o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+h))}},{key:"FillSideTypeArray",value:function(t,e,i){for(var r=i/2,s=0;s<e;s++){var o=6*s,n=o/2;this.sideVertexTypedArrForGeometry[i+o]=this.vertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+1]=this.vertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+2]=this.vertexTypedArrForGeometry[r+n+2],this.sideVertexTypedArrForGeometry[i+o+3]=this.topVertexTypedArrForGeometry[r+n],this.sideVertexTypedArrForGeometry[i+o+4]=this.topVertexTypedArrForGeometry[r+n+1],this.sideVertexTypedArrForGeometry[i+o+5]=this.topVertexTypedArrForGeometry[r+n+2]}}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)t+=3*this.objects[e]._coordsZ.length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=this.FilterTriIndexCountArr.length,i=0;i<e;i++)for(var r=this.FilterTriIndexCountArr[i].length,s=0;s<r;s++)this.vertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+1],this.vertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.vertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+2],this.topVertexTypedArrForGeometry[this.totalCoordLen+3*t]=this.topVertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]],this.topVertexTypedArrForGeometry[this.totalCoordLen+3*t+1]=this.topVertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+1],this.topVertexTypedArrForGeometry[this.totalCoordLen+3*t+2]=this.topVertexTypedArrForGeometry[3*this.FilterTriIndexCountArr[i][s]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=this.FilterTriIndexCountArr.length,r=1;r<i;r++)this.FilterTriIndexCountArr[r].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[r].length,style:t.filter[r-1].style}),e+=this.FilterTriIndexCountArr[r].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,style:t.filter[i-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=this.objects.length,s=0;s<r;s++){for(var o=(t=(t=m(this.objects[s]._coords,null,2)).map(i)).length,n=0;n<o;n++)this.FilterTriIndexCountArr[this.objects[s].ruleIndex+1].push(t[n]);e+=this.objects[s]._coordsZ.length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterTriIndexCountArr[r]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[]};else this.FilterLineStartCountArr[0]={start:[],count:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled||t.bottomFilled||t.sideFilled)return!0;if(i&&i.length)for(var r=i.length,s=0;s<r;s++)if(i[s].style.filled||i[s].style.bottomFilled||i[s].style.sideFilled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){for(var o=t.length;o--;){t[o]._coordsZ=[],t[o]._coordsZ.length=l.z.SHAPE_DIVISION+3,t[o]._coordsZ.fill(t[o].coordsZ[0]);var n=360-c.b.CSAngleV4(t[o].coords[0],t[o].coords[1],t[o].coords[2],t[o].coords[3]);this.FillEllipseGeo(t[o],t[o].coords,t[o].radius1,t[o].radius2,n,l.z.SHAPE_DIVISION),Object(f.d)(t[o].obj.Limit,t[o]._coords)}this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.vertexBufferForGeometry||(this.vertexBufferForGeometry=s.createBuffer()),this.topVertexBufferForGeometry||(this.topVertexBufferForGeometry=s.createBuffer()),this.sideVertexBufferForGeometry||(this.sideVertexBufferForGeometry=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen();var a=3*this.totalTriIndexCnt+this.totalCoordLen;this.vertexTypedArrForGeometry=new Float32Array(a),this.topVertexTypedArrForGeometry=new Float32Array(a),this.sideVertexTypedArrForGeometry=new Float32Array(2*this.totalCoordLen),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.vertexTypedArrForGeometry,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.topVertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.sideVertexBufferForGeometry),s.bufferData(s.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,s.STATIC_DRAW)}},{key:"Draw",value:function(t){if(this.objects.length){var e=this.PolyStartCountArr.length,i=this.LineStartCountArr.length;this.DrawBottom(t,e,i),this.DrawSide(t,i),this.DrawTop(t,e,i)}}},{key:"DrawBottom",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.vertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.bottomFilled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__bottomFillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawTop",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.topVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.filled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__fillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)this.FGlobe.layerPolygonCount++,n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawSide",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.enable(n.POLYGON_OFFSET_FILL),n.polygonOffset(1,1),n.bindBuffer(n.ARRAY_BUFFER,this.sideVertexBufferForGeometry),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.sideFilled&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__sideColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.TRIANGLE_STRIP,2*this.LineStartCountArr[i].start[r],2*this.LineStartCountArr[i].count[r]);n.disable(n.POLYGON_OFFSET_FILL)}},{key:"FillEllipseGeo",value:function(t,e,i,r,s,o){var n,a,h,u,d;i*=l.z.GLOBE_RADIUS_K,r*=l.z.GLOBE_RADIUS_K;var f=new c.u(0,0),p=new c.w(0,0,0),F=new c.u(0,0),y=new c.u(0,0);for(t._coords=[],t._coords.length=2*(o+3),f.SetV(c.b.DegreeToRadyan(e[0]),c.b.DegreeToRadyan(e[1])),c.b.GeoTo3DP(f,l.z.GLOBE_RADIUS,p),p.Normalize(),a=0;a<(o+2)/2;a++)n=c.b.DegreeToRadyan(a*(360/o)+270),h=i*Math.cos(n),u=r*Math.sin(n),d=Math.sqrt(h*h+u*u),n=c.b.DegreeToRadyan(c.b.CSAngleV2(h,u)),Object.assign(y,f),c.b.X7UX4S(y,d,l.z.GLOBE_RADIUS),F=this.RotateNorth(y,p,n,s),y.SetV(c.b.RadyanToDegree(F.x),c.b.RadyanToDegree(F.y)),t._coords[2*a]=y.x,t._coords[2*a+1]=y.y;for(f.SetV(c.b.DegreeToRadyan(e[2]),c.b.DegreeToRadyan(e[3])),c.b.GeoTo3DP(f,l.z.GLOBE_RADIUS,p),p.Normalize(),a=(o+2)/2-1;a<o+1;a++)n=c.b.DegreeToRadyan(a*(360/o)+270),h=i*Math.cos(n),u=r*Math.sin(n),d=Math.sqrt(h*h+u*u),n=c.b.DegreeToRadyan(c.b.CSAngleV2(h,u)),Object.assign(y,f),c.b.X7UX4S(y,d,l.z.GLOBE_RADIUS),F=this.RotateNorth(y,p,n,s),y.SetV(c.b.RadyanToDegree(F.x),c.b.RadyanToDegree(F.y)),t._coords[2*(a+1)]=y.x,t._coords[2*(a+1)+1]=y.y;t._coords[t._coords.length-2]=t._coords[0],t._coords[t._coords.length-1]=t._coords[1]}},{key:"RotateNorth",value:function(t,e,i,r){var s=new c.w(0,0,0),o=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),c.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+c.b.DegreeToRadyan(-r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),c.b.CarToSpher2(s,o),o}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.vertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.topVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.topVertexTypedArrForGeometry,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.sideVertexBufferForGeometry),i.bufferData(i.ARRAY_BUFFER,this.sideVertexTypedArrForGeometry,i.STATIC_DRAW)}}]),t}(),k=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.FGlobe=r,this.Cell=o,this.totalCoordLen=0,this.tempp2d=new c.u(0,0),this.tempArr=new Float32Array(3),this.bottomVertBuffer=void 0,this.bottomVertTypedArr=void 0,this.topVertBuffer=void 0,this.topVertTypedArr=void 0,this.sideVertBuffer=void 0,this.sideVertTypedArr=void 0,this.PolyStartCountArr=[],this.FilterTriIndexCountArr=[],this.LineStartCountArr=[],this.FilterLineStartCountArr=[],this.isFilled=!1,this.totalTriIndexCnt=0,this.TempGeo3C=new c.w(0,0,0)}return n()(t,[{key:"Clear",value:function(){var t=this.FGlobe.gl;this.bottomVertBuffer&&(t.deleteBuffer(this.bottomVertBuffer),this.bottomVertBuffer=null,this.bottomVertTypedArr=null),this.topVertBuffer&&(t.deleteBuffer(this.topVertBuffer),this.topVertBuffer=null,this.topVertTypedArr=null),this.sideVertBuffer&&(t.deleteBuffer(this.sideVertBuffer),this.sideVertBuffer=null,this.sideVertTypedArr=null),this.totalCoordLen=null,this.tempp2d=null,this.tempArr=null,this.TempGeo3C=null,this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr.length=0,this.LineStartCountArr.length=0,this.FilterLineStartCountArr.length=0,this.isFilled=null,this.totalTriIndexCnt=null}},{key:"FillLineTypedArr",value:function(t,e,i){var r=0;if(e){var s=0,o=t.length;for(r=0;r<o;r++){var n=t[r],a=n._coords,h=n._coordsZ,l=n.obj,u=n.center,d=n.minZMode,c=n.maxZMode,f=n.height,p=n.polyStart,F=h.length;t[r].VStart=s,this.FilterLineStartCountArr[t[r].ruleIndex+1].start.push(s),this.FillBottomTypedArr(a,h,F,this.bottomVertTypedArr,s,l.TempGeo3C,d),this.FillTopTypedArr(a,h,F,this.topVertTypedArr,s,l.TempGeo3C,c,f),this.FillSideTypeArray(h,F,3*s*2,3*s),this.FilterLineStartCountArr[t[r].ruleIndex+1].count.push(a.length/2),this.FilterLineStartCountArr[t[r].ruleIndex+1].polyStart.push(p),s+=a.length/2,this.BuildPoint(u.x,u.y,u.z,l.TempGeo3C,i.zMode)}}else{var y=t.length;for(r=0;r<y;r++){var A=t[r],g=(a=A._coords,h=A._coordsZ,l=A.obj,u=A.center,A.VStart),C=(d=A.minZMode,c=A.maxZMode,f=A.height,h.length);this.FillBottomTypedArr(a,h,C,this.bottomVertTypedArr,g,l.TempGeo3C,d),this.FillTopTypedArr(a,h,C,this.topVertTypedArr,g,l.TempGeo3C,c,f),this.FillSideTypeArray(h,C,3*g*2,3*g),this.BuildPoint(u.x,u.y,u.z,l.TempGeo3C,i.zMode)}}}},{key:"FillBottomTypedArr",value:function(t,e,i,r,s,o,n){for(var a=0;a<i;a++)this.BuildPoint(t[2*a],t[2*a+1],e[a],o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+a))}},{key:"FillTopTypedArr",value:function(t,e,i,r,s,o,n,a){for(var h=0;h<i;h++)this.BuildPoint(t[2*h],t[2*h+1],e[h]+a,o,n),this.tempArr[0]=o.x-this.Cell.FCellGeoWPs.x,this.tempArr[1]=o.y-this.Cell.FCellGeoWPs.y,this.tempArr[2]=o.z-this.Cell.FCellGeoWPs.z,r.set(this.tempArr,3*(s+h))}},{key:"FillSideTypeArray",value:function(t,e,i,r){for(var s=0;s<e;s++){var o=6*s,n=o/2;this.sideVertTypedArr[i+o]=this.bottomVertTypedArr[r+n],this.sideVertTypedArr[i+o+1]=this.bottomVertTypedArr[r+n+1],this.sideVertTypedArr[i+o+2]=this.bottomVertTypedArr[r+n+2],this.sideVertTypedArr[i+o+3]=this.topVertTypedArr[r+n],this.sideVertTypedArr[i+o+4]=this.topVertTypedArr[r+n+1],this.sideVertTypedArr[i+o+5]=this.topVertTypedArr[r+n+2]}}},{key:"BuildPoint",value:function(t,e,i,r,s){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),s===l.u.Z_MSL?c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||c.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"GetTotalcoordLen",value:function(){for(var t=0,e=this.objects.length;e--;)t+=3*this.objects[e]._coordsZ.length;return t}},{key:"FillPolyTypedArr",value:function(){for(var t=0,e=this.FilterTriIndexCountArr.length,i=0;i<e;i++)for(var r=this.FilterTriIndexCountArr[i].length,s=0;s<r;s++)this.bottomVertTypedArr[this.totalCoordLen+3*t]=this.bottomVertTypedArr[3*this.FilterTriIndexCountArr[i][s]],this.bottomVertTypedArr[this.totalCoordLen+3*t+1]=this.bottomVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+1],this.bottomVertTypedArr[this.totalCoordLen+3*t+2]=this.bottomVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+2],this.topVertTypedArr[this.totalCoordLen+3*t]=this.topVertTypedArr[3*this.FilterTriIndexCountArr[i][s]],this.topVertTypedArr[this.totalCoordLen+3*t+1]=this.topVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+1],this.topVertTypedArr[this.totalCoordLen+3*t+2]=this.topVertTypedArr[3*this.FilterTriIndexCountArr[i][s]+2],t++}},{key:"FillPolyStartCountArr",value:function(t){this.PolyStartCountArr.length=0,this.FilterTriIndexCountArr[0].length&&this.PolyStartCountArr.push({start:0,count:this.FilterTriIndexCountArr[0].length,style:t});for(var e=this.FilterTriIndexCountArr[0].length,i=this.FilterTriIndexCountArr.length,r=1;r<i;r++)this.FilterTriIndexCountArr[r].length&&(this.PolyStartCountArr.push({start:e,count:this.FilterTriIndexCountArr[r].length,style:t.filter[r-1].style}),e+=this.FilterTriIndexCountArr[r].length)}},{key:"FillLineStartCountArr",value:function(t){this.LineStartCountArr.length=0,this.FilterLineStartCountArr[0].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[0].start,count:this.FilterLineStartCountArr[0].count,lStart:this.FilterLineStartCountArr[0].lStart,polyStart:this.FilterLineStartCountArr[0].polyStart,style:t});for(var e=this.FilterLineStartCountArr.length,i=1;i<e;i++)this.FilterLineStartCountArr[i].count.length&&this.LineStartCountArr.push({start:this.FilterLineStartCountArr[i].start,count:this.FilterLineStartCountArr[i].count,lStart:this.FilterLineStartCountArr[i].lStart,polyStart:this.FilterLineStartCountArr[i].polyStart,style:t.filter[i-1].style})}},{key:"BuildTriangle",value:function(){var t=null,e=0;this.totalTriIndexCnt=0;for(var i=function(t){return t+e},r=this.objects.length,s=0;s<r;s++){for(var o=(t=(t=m(this.objects[s]._coords,null,2)).map(i)).length,n=0;n<o;n++)this.FilterTriIndexCountArr[this.objects[s].ruleIndex+1].push(t[n]);e+=this.objects[s]._coordsZ.length,this.totalTriIndexCnt+=t.length}}},{key:"FindFilterTriIndexCount",value:function(t){var e=t.filter;if(this.FilterTriIndexCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterTriIndexCountArr[r]=[];else this.FilterTriIndexCountArr[0]=[]}},{key:"FindFilterLineStartCount",value:function(t){var e=t.filter;if(this.FilterLineStartCountArr.length=0,e&&e.length)for(var i=e.length+1,r=0;r<i;r++)this.FilterLineStartCountArr[r]={start:[],count:[],lStart:[],polyStart:[]};else this.FilterLineStartCountArr[0]={start:[],count:[],lStart:[],polyStart:[]}}},{key:"CheckFilled",value:function(t,e){var i=e.filter;if(t.filled||t.bottomFilled||t.sideFilled)return!0;if(i&&i.length)for(var r=i.length,s=0;s<r;s++)if(i[s].style.filled||i[s].style.bottomFilled||i[s].style.sideFilled)return!0;return!1}},{key:"Build",value:function(t,e,i,r){var s=this.FGlobe.gl;if(e){for(var o=t.length;o--;)t[o]._coords=[],t[o]._coordsZ=[],this.FixedAnglesAndFindCoordLength(t[o]),this.FillArcAreaGeo(t[o],t[o].radius,t[o].radius),t[o].polyStart=t[o]._coords.length,this.AddPolyCoords(t[o],t[o].polyCoords),Object(f.b)(t[o].center,t[o]._coords,t[o].center.z),this.AddFirstCoordsToLast(t[o]),t[o]._coordsZ.length=t[o]._coords.length/2,t[o]._coordsZ.fill(t[o].coordsZ[0]),Object(f.d)(t[o].obj.Limit,t[o]._coords);this.isFilled=this.CheckFilled(i,r),this.isFilled&&(this.FindFilterTriIndexCount(r),this.BuildTriangle(),this.FillPolyStartCountArr(r)),this.bottomVertBuffer||(this.bottomVertBuffer=s.createBuffer()),this.topVertBuffer||(this.topVertBuffer=s.createBuffer()),this.sideVertBuffer||(this.sideVertBuffer=s.createBuffer()),this.totalCoordLen=this.GetTotalcoordLen();var n=3*this.totalTriIndexCnt+this.totalCoordLen;this.bottomVertTypedArr=new Float32Array(n),this.topVertTypedArr=new Float32Array(n),this.sideVertTypedArr=new Float32Array(2*this.totalCoordLen),this.FindFilterLineStartCount(r)}this.FillLineTypedArr(t,e,i),this.FillPolyTypedArr(),e&&this.FillLineStartCountArr(r),s.bindBuffer(s.ARRAY_BUFFER,this.bottomVertBuffer),s.bufferData(s.ARRAY_BUFFER,this.bottomVertTypedArr,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.topVertBuffer),s.bufferData(s.ARRAY_BUFFER,this.topVertTypedArr,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.sideVertBuffer),s.bufferData(s.ARRAY_BUFFER,this.sideVertTypedArr,s.STATIC_DRAW)}},{key:"Draw",value:function(t){if(this.objects.length){var e=this.PolyStartCountArr.length,i=this.LineStartCountArr.length;this.DrawBottom(t,e,i),this.DrawSide(t,i),this.DrawTop(t,e,i)}}},{key:"DrawBottom",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.bottomVertBuffer),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.bottomFilled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__bottomFillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawTop",value:function(t,e,i){var r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.bindBuffer(n.ARRAY_BUFFER,this.topVertBuffer),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),r=0;r<e;r++)this.PolyStartCountArr[r].style.filled&&this.PolyStartCountArr[r].style.active&&(n.uniform4fv(h,this.PolyStartCountArr[r].style.__fillColor),n.drawArrays(n.TRIANGLES,this.totalCoordLen/3+this.PolyStartCountArr[r].start,this.PolyStartCountArr[r].count));for(r=0;r<i;r++)if(this.LineStartCountArr[r].style.border&&this.LineStartCountArr[r].style.active&&(n.uniform4fv(h,this.LineStartCountArr[r].style.__borderColor),t)){var l=this.LineStartCountArr[r].start.length;for(s=0;s<l;s++)this.FGlobe.layerPolygonCount++,n.drawArrays(n.LINE_LOOP,this.LineStartCountArr[r].start[s],this.LineStartCountArr[r].count[s])}}},{key:"DrawSide",value:function(t,e){var i,r,s,o=this.FGlobe,n=o.gl,a=o.P3DvertexPosForLayer,h=o.P3DOpacityLocForLayer;for(n.enable(n.POLYGON_OFFSET_FILL),n.polygonOffset(1,1),n.bindBuffer(n.ARRAY_BUFFER,this.sideVertBuffer),n.vertexAttribPointer(a,3,n.FLOAT,!1,0,0),i=0;i<e;i++)if(this.LineStartCountArr[i].style.sideFilled&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__sideColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++)n.drawArrays(n.TRIANGLE_STRIP,2*this.LineStartCountArr[i].start[r],2*this.LineStartCountArr[i].count[r]);for(i=0;i<e;i++)if(this.LineStartCountArr[i].style.border&&this.LineStartCountArr[i].style.active&&(n.uniform4fv(h,this.LineStartCountArr[i].style.__borderColor),t))for(s=this.LineStartCountArr[i].start.length,r=0;r<s;r++){var l=2*this.LineStartCountArr[i].start[r];n.drawArrays(n.LINES,l,2),n.drawArrays(n.LINES,l+this.LineStartCountArr[i].polyStart[r]-2,2);for(var u=2*this.LineStartCountArr[i].count[r]-this.LineStartCountArr[i].polyStart[r],d=l+this.LineStartCountArr[i].polyStart[r],c=0;c<u;c+=2)n.drawArrays(n.LINES,d+c,2)}n.disable(n.POLYGON_OFFSET_FILL)}},{key:"FixedAnglesAndFindCoordLength",value:function(t){Math.abs(t.endAng-t.startAng)%360==0&&(t.endAng-=1e-7,t.fixedEAng=t.endAng),t.startAng>0&&t.endAng<0?(t.fixedSAng=t.startAng%360,t.fixedEAng=t.endAng%360+360):t.startAng<0&&t.endAng>0?(t.fixedSAng=t.startAng%360+360,t.fixedEAng=t.endAng%360):t.startAng<0&&t.endAng<0?(t.fixedSAng=t.startAng%360+360,t.fixedEAng=t.endAng%360+360):(t.fixedSAng=t.startAng%360,t.fixedEAng=t.endAng%360),t.fixedSAng>t.fixedEAng&&(t.fixedEAng+=360),t.fixedSAng+=90,t.fixedEAng+=90,t.stepCount=Math.floor((t.fixedEAng-t.fixedSAng)/t.stepAng),t.overageAng=(t.fixedEAng-t.fixedSAng)%t.stepAng}},{key:"RotateNorth",value:function(t,e,i,r){var s=new c.w(0,0,0),o=new c.u(0,0);return c.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),c.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+c.b.DegreeToRadyan(r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),c.b.CarToSpher2(s,o),o}},{key:"FillArcAreaGeo",value:function(t,e,i){var r,s,o,n,a;e*=l.z.GLOBE_RADIUS_K,i*=l.z.GLOBE_RADIUS_K;var h=new c.u(0,0),u=new c.w(0,0,0),d=new c.u(0,0),f=new c.u(0,0),p=[];for(h.SetV(c.b.DegreeToRadyan(t.coords[0]),c.b.DegreeToRadyan(t.coords[1])),c.b.GeoTo3DP(h,l.z.GLOBE_RADIUS,u),u.Normalize(),s=0;s<=t.stepCount;s++)r=c.b.DegreeToRadyan(s*t.stepAng+t.fixedSAng),o=e*Math.cos(r),n=i*Math.sin(r),a=Math.sqrt(o*o+n*n),r=c.b.DegreeToRadyan(-c.b.CSAngleV2(o,n)),Object.assign(f,h),c.b.X7UX4S(f,a,l.z.GLOBE_RADIUS),d=this.RotateNorth(f,u,r,0),f.SetV(c.b.RadyanToDegree(d.x),c.b.RadyanToDegree(d.y)),p[2*s]=f.x,p[2*s+1]=f.y;for(t.overageAng&&(r=c.b.DegreeToRadyan((s-1)*t.stepAng+t.fixedSAng+t.overageAng),o=e*Math.cos(r),n=i*Math.sin(r),a=Math.sqrt(o*o+n*n),r=c.b.DegreeToRadyan(-c.b.CSAngleV2(o,n)),Object.assign(f,h),c.b.X7UX4S(f,a,l.z.GLOBE_RADIUS),d=this.RotateNorth(f,u,r,0),f.SetV(c.b.RadyanToDegree(d.x),c.b.RadyanToDegree(d.y)),p[2*s]=f.x,p[2*s+1]=f.y),s=0;s<p.length-1;s+=2)t._coords.push(p[s]),t._coords.push(p[s+1])}},{key:"AddPolyCoords",value:function(t,e){for(var i=0;i<e.length;i++)t._coords.push(e[i])}},{key:"AddFirstCoordsToLast",value:function(t){t._coords.push(t._coords[0]),t._coords.push(t._coords[1])}},{key:"StyleChanged",value:function(t,e){var i=this.FGlobe.gl;this.FindFilterTriIndexCount(e),this.BuildTriangle(),this.FillPolyStartCountArr(e),this.FindFilterLineStartCount(e),this.FillLineTypedArr(this.objects,!0,t),this.FillPolyTypedArr(),this.FillLineStartCountArr(e),i.bindBuffer(i.ARRAY_BUFFER,this.bottomVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.bottomVertTypedArr,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.topVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.topVertTypedArr,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.sideVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.sideVertTypedArr,i.STATIC_DRAW)}}]),t}(),V=function(){function t(e,i,r,o,n){s()(this,t),this.objects=e,this.clusterObjects=i,this.FCityLayer=r,this.gl=o.gl,this.CreateIconTitleandGeoDrawer(o,n)}return n()(t,[{key:"CreateIconTitleandGeoDrawer",value:function(t,e){this.FCityLayer.objectType===l.j.OBJECT_3D?this.CreateDrawerClassFor3D(t,e):this.CreateDrawerClassFor2D(t,e)}},{key:"CreateDrawerClassFor2D",value:function(t,e){this.ITDrawer=new S(this.objects,this.FCityLayer,t,e),this.CLSDrawerArr=[];for(var i=0;i<this.clusterObjects.length;i++)this.FCityLayer.clusterStyle?this.CLSDrawerArr.push(new x(this.clusterObjects[i],this.FCityLayer,t,e)):this.CLSDrawerArr.push(new _);this.FCityLayer.objectType===l.j.LINE?this.GeoDrawer=new R(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.FCityLayer.objectType===l.j.POLYGON?this.GeoDrawer=new D(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.FCityLayer.objectType===l.j.SHAPE?this.GeoDrawer=new E(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.FCityLayer.objectType===l.j.ARCAREA?this.GeoDrawer=new P(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.GeoDrawer=new _}},{key:"CreateDrawerClassFor3D",value:function(t,e){this.ITDrawer=[],this.GeoDrawer=[];for(var i=this.FCityLayer.data.length,r=0;r<i;r++)switch(this.ITDrawer[r]=new S(this.objects[r],this.FCityLayer,t,e),this.FCityLayer.data[r].shapeName){case l.i.POINT:this.GeoDrawer[r]=new I(this.objects[r],this.FCityLayer,t,e);break;case l.i.LINE:this.GeoDrawer[r]=new B(this.objects[r],this.FCityLayer,t,e);break;case l.i.POLYGON:case l.i.RECTANGLE:case l.i.CORRIDOR:case l.i.TRACK:this.GeoDrawer[r]=new G(this.objects[r],this.FCityLayer,t,e);break;case l.i.ELLIPSE:case l.i.CIRCLE:this.GeoDrawer[r]=new w(this.objects[r],this.FCityLayer,t,e);break;case l.i.ARCAREA:this.GeoDrawer[r]=new M(this.objects[r],this.FCityLayer,t,e);break;case l.i.ORBIT:this.GeoDrawer[r]=new U(this.objects[r],this.FCityLayer,t,e);break;case l.i.POLYARC:this.GeoDrawer[r]=new k(this.objects[r],this.FCityLayer,t,e);break;default:this.GeoDrawer[r]=new _}}},{key:"Clear",value:function(){if(this.FCityLayer.objectType===l.j.OBJECT_3D)for(var t=this.ITDrawer.length,e=0;e<t;e++)this.ITDrawer[e].Clear(this.FCityLayer._style),this.GeoDrawer[e].Clear();else{this.ITDrawer.Clear(this.FCityLayer._style),this.GeoDrawer.Clear();for(e=0;e<this.CLSDrawerArr.length;e++){var i=this.CLSDrawerArr[e].FCityLayer._clusterStyle;this.CLSDrawerArr[e].Clear(i[e]._style)}}}},{key:"StyleChanged",value:function(){if(this.FCityLayer.objectType===l.j.OBJECT_3D)for(var t=this.FCityLayer.data.length,e=0;e<t;e++)this.ITDrawer[e].StyleChanged(this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer[e].StyleChanged(this.FCityLayer.style,this.FCityLayer._style);else this.ITDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style)}},{key:"Build",value:function(t,e){if(this.FCityLayer.objectType===l.j.OBJECT_3D)for(var i=this.FCityLayer.data.length,r=0;r<i;r++)this.ITDrawer[r].Build(this.objects[r],t,this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer[r].Build(this.objects[r],t,this.FCityLayer.style,this.FCityLayer._style);else{this.ITDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style);for(r=0;r<this.CLSDrawerArr.length;r++){var s=this.CLSDrawerArr[r].FCityLayer,o=s._clusterStyle,n=s.clusterStyle;this.CLSDrawerArr[r].Build(this.clusterObjects[r],t,n[r].cluster.style,o[r]._style)}if(this.GeoDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style),e)for(r=0;r<this.CLSDrawerArr.length;r++){for(var a=this.CLSDrawerArr[r].FCityLayer,h=(o=a._clusterStyle,n=a.clusterStyle,[]),u=0;u<this.clusterObjects[r].length;u++)this.clusterObjects[r][u].obj.superCluster&&h.push(this.clusterObjects[r][u]);this.CLSDrawerArr[r].Build(h,t,n[r].cluster.style,o[r]._style)}}}},{key:"Draw2d",value:function(t){if(this.FCityLayer.objectType===l.j.OBJECT_3D)for(var e=this.FCityLayer.data.length,i=0;i<e;i++)this.ITDrawer[i].Draw(t,this.FCityLayer.style,this.FCityLayer._style);else{this.ITDrawer.Draw(t,this.FCityLayer.style,this.FCityLayer._style);for(i=0;i<this.CLSDrawerArr.length;i++){var r=this.CLSDrawerArr[i].FCityLayer,s=r._clusterStyle,o=r.clusterStyle;this.CLSDrawerArr[i].Draw2d(o[i].cluster.style,s[i]._style)}}}},{key:"Draw3d",value:function(t){if(this.FCityLayer.objectType===l.j.OBJECT_3D){this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND);for(var e=this.FCityLayer.data.length,i=0;i<e;i++)this.GeoDrawer[i].Draw(t);this.gl.enable(this.gl.CULL_FACE)}else this.GeoDrawer.Draw(t,this.FCityLayer.style)}}]),t}(),j=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.CreateIconTitleandGeoDrawer(r,o)}return n()(t,[{key:"CreateIconTitleandGeoDrawer",value:function(t,e){this.ITDrawer=new S(this.objects,this.FCityLayer,t,e),this.FCityLayer.objectType===l.j.LINE?this.GeoDrawer=new R(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.FCityLayer.objectType===l.j.POLYGON?this.GeoDrawer=new D(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.GeoDrawer=new _}},{key:"Clear",value:function(){this.ITDrawer.Clear(this.FCityLayer._style),this.GeoDrawer.Clear()}},{key:"StyleChanged",value:function(){this.ITDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style)}},{key:"Build",value:function(t){this.ITDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style)}},{key:"Draw2d",value:function(t){this.ITDrawer.Draw(t,this.FCityLayer.style,this.FCityLayer._style)}},{key:"Draw3d",value:function(t){this.GeoDrawer.Draw(t,this.FCityLayer.style)}}]),t}(),N=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.CreateIconTitleandGeoDrawer(r,o)}return n()(t,[{key:"CreateIconTitleandGeoDrawer",value:function(t,e){if(Array.isArray(this.FCityLayer.style)){this.GeoDrawer=[],this.ITDrawer=[];for(var i=this.FCityLayer.style.length,r=0;r<i;r++)this.GeoDrawer[r]=[],this.ITDrawer[r]=[],this.ITDrawer[r]=new S(this.objects[r],this.FCityLayer,t,e),this.FCityLayer.style[r].objectType===l.j.LINE?this.GeoDrawer[r]=new R(this.objects[r],this.FCityLayer,t,e,this.FCityLayer.style[r].objectType):this.FCityLayer.style[r].objectType===l.j.POLYGON?this.GeoDrawer[r]=new D(this.objects[r],this.FCityLayer,t,e,this.FCityLayer.style[r].objectType):this.GeoDrawer[r]=new _}else this.ITDrawer=new S(this.objects,this.FCityLayer,t,e),this.FCityLayer.objectType===l.j.LINE?this.GeoDrawer=new R(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.FCityLayer.objectType===l.j.POLYGON?this.GeoDrawer=new D(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.GeoDrawer=new _}},{key:"Clear",value:function(){if(Array.isArray(this.FCityLayer.style))for(var t=this.FCityLayer.style.length,e=0;e<t;e++)this.ITDrawer[e].Clear(this.FCityLayer._style[e]),this.GeoDrawer[e].Clear();else this.ITDrawer.Clear(this.FCityLayer._style),this.GeoDrawer.Clear()}},{key:"StyleChanged",value:function(){if(Array.isArray(this.FCityLayer.style))for(var t=this.FCityLayer.style.length,e=0;e<t;e++)this.ITDrawer[e].StyleChanged(this.FCityLayer.style[e],this.FCityLayer._style[e]),this.GeoDrawer[e].StyleChanged(this.FCityLayer.style[e],this.FCityLayer._style[e]);else this.ITDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style)}},{key:"Build",value:function(t){if(Array.isArray(this.FCityLayer.style))for(var e=this.FCityLayer.style.length,i=0;i<e;i++)this.ITDrawer[i].Build(this.objects[i],t,this.FCityLayer.style[i],this.FCityLayer._style[i]),this.GeoDrawer[i].Build(this.objects[i],t,this.FCityLayer.style[i],this.FCityLayer._style[i]);else this.ITDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style)}},{key:"Draw2d",value:function(t){if(Array.isArray(this.FCityLayer.style))for(var e=this.FCityLayer.style.length,i=0;i<e;i++)this.ITDrawer[i].Draw(t,this.FCityLayer.style[i],this.FCityLayer._style[i]);else this.ITDrawer.Draw(t,this.FCityLayer.style,this.FCityLayer._style)}},{key:"Draw3d",value:function(t){if(Array.isArray(this.FCityLayer.style))for(var e=this.FCityLayer.style.length,i=0;i<e;i++)this.GeoDrawer[i].Draw(t,this.FCityLayer.style[i]);else this.GeoDrawer.Draw(t,this.FCityLayer.style)}}]),t}(),z=function(){function t(e,i,r,o){s()(this,t),this.objects=e,this.FCityLayer=i,this.CreateIconTitleandGeoDrawer(r,o)}return n()(t,[{key:"CreateIconTitleandGeoDrawer",value:function(t,e){this.ITDrawer=new S(this.objects,this.FCityLayer,t,e),this.FCityLayer.objectType===l.j.LINE?this.GeoDrawer=new R(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.FCityLayer.objectType===l.j.POLYGON?this.GeoDrawer=new D(this.objects,this.FCityLayer,t,e,this.FCityLayer.objectType):this.GeoDrawer=new _}},{key:"Clear",value:function(){this.ITDrawer.Clear(this.FCityLayer._style),this.GeoDrawer.Clear()}},{key:"StyleChanged",value:function(){this.ITDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.StyleChanged(this.FCityLayer.style,this.FCityLayer._style)}},{key:"Build",value:function(t){this.ITDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style),this.GeoDrawer.Build(this.objects,t,this.FCityLayer.style,this.FCityLayer._style)}},{key:"Draw2d",value:function(t){this.ITDrawer.Draw(t,this.FCityLayer.style,this.FCityLayer._style)}},{key:"Draw3d",value:function(t){this.GeoDrawer.Draw(t,this.FCityLayer.style)}}]),t}();i.d(e,"a",function(){return W}),i.d(e,"b",function(){return Z});var Z=[-.5,-.5,0,.5,.5,0,.5,-.5,0,.5,.5,0,-.5,-.5,0,-.5,.5,0],W=function(){function t(e,i){s()(this,t),this.Cell=e,this.FGlobe=e.FGlobe,this.FCityLayer=i,this.FRequested=!1,this.FStateReady=!1,this.objects=[],this.tempp2d=new c.u(0,0),this.IconWorld=new c.E(0,0,0,0),this.RBush=new h.a,this.Geo2D=new c.u(0,0),this.clusterObjects=[],this.clusterArr=void 0}return n()(t,[{key:"Clear",value:function(){this.Layer&&(this.Layer.Clear(),this.clusterObjects.length=0,this.clusterArr&&(this.clusterArr.length=0,this.clusterArr=void 0)),this.FRequested=!1,this.FStateReady=!1}},{key:"StyleChanged",value:function(){this.Layer&&this.Layer.StyleChanged()}},{key:"AfterXMLRequest",value:function(t){if(t.response)switch(this.FCityLayer.layerType){case this.FGlobe.api_LAYER_TYPE_OGC_WFS():this.ParseOGCWFS(t.response);break;case this.FGlobe.api_LAYER_TYPE_CAS_LAYER():this.ParseCAS(t.response)}else this.WFSOrCasError(t);this.FGlobe.DrawRender()}},{key:"WFSOrCasError",value:function(t){this.CancelRequest(),t.noData?this.NoDataForWFSOrCAS():l.z.RETRY_AT_LAYER_TIMEOUT?this.SetRequest():(this.NoDataForWFSOrCAS(),this.FGlobe.LayerTimeoutOrErrorCallback())}},{key:"NoDataForWFSOrCAS",value:function(){switch(this.FCityLayer.layerType){case this.FGlobe.api_LAYER_TYPE_OGC_WFS():this.Layer=new j(this.objects,this.FCityLayer,this.FGlobe,this.Cell);break;case this.FGlobe.api_LAYER_TYPE_CAS_LAYER():this.Layer=new z(this.objects,this.FCityLayer,this.FGlobe,this.Cell)}this.Layer.Build(!0),this.FillRBush(),this.FStateReady=!0,this.FGlobe.checkReduction=!0,this.FGlobe.LoadingVector=!1,this.FGlobe.DrawRender()}},{key:"AfterArrBufferRequest",value:function(t){t.response?this.ParseMVT(t.response,this.x,this.y,this.z):this.MVTError(t),this.FGlobe.DrawRender()}},{key:"MVTError",value:function(t){this.CancelRequest(),t.noData?this.NoData():l.z.RETRY_AT_LAYER_TIMEOUT?this.SetRequest():(this.NoData(),this.FGlobe.LayerTimeoutOrErrorCallback())}},{key:"NoData",value:function(){if(Array.isArray(this.FCityLayer.style))for(var t=this.FCityLayer.style.length,e=0;e<t;e++)this.objects[e]=[];this.Layer=new N(this.objects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FillRBush(),this.FStateReady=!0,this.FGlobe.checkReduction=!0,this.CheckRasterize(),this.FGlobe.LoadingVector=!1,this.FGlobe.DrawRender()}},{key:"SetRequest",value:function(){this.FRequested=!1,this.FGlobe.checkReduction=!0,this.FGlobe.LoadingVector=!1,this.FGlobe.DrawRender()}},{key:"CancelRequest",value:function(){this.xhttpForLayer&&(this.FGlobe.vectorLayerLoader.processCount--,this.xhttpForLayer.abort(),delete this.xhttpForLayer)}},{key:"CheckLayerType",value:function(){this.FCityLayer.layerType!==l.g.CS_OBJECT_ARRAY&&(this.FGlobe.LoadingVector=!1)}},{key:"Parse",value:function(t){this.FCityLayer.layerType===l.g.OGC_WFS||this.FCityLayer.layerType===l.g.CAS?this.AfterXMLRequest(t):this.FCityLayer.layerType===l.g.MVT_XYZ?this.AfterArrBufferRequest(t):this.FCityLayer.layerType===l.g.CS_OBJECT_ARRAY&&t.cellVectorLayer.FCityLayer._objects&&(Array.isArray(this.FCityLayer._kdIndex)?this.SetObjToTileForObject3D(t.cellVectorLayer.FCityLayer._objects):this.SetObjToTile(t.cellVectorLayer.FCityLayer._objects,l.g.CS_OBJECT_ARRAY))}},{key:"GetUrl",value:function(){var t=this.FCityLayer.url;switch(this.FCityLayer.layerType){case l.g.OGC_WFS:t+="&BBOX=".concat(this.Cell.FCellTGW.LL.y.toFixed(12),",").concat(this.Cell.FCellTGW.LL.x.toFixed(12),",").concat(this.Cell.FCellTGW.UR.y.toFixed(12),",").concat(this.Cell.FCellTGW.UR.x.toFixed(12)),t+="&TYPENAME=".concat(this.FCityLayer.wfsLayerName);break;case l.g.CAS:t+="/SEARCHGEO?TABLE=".concat(this.FCityLayer.CASTable),t+="&XML=1&STYPE=0",t+="&REGION=".concat(this.Cell.FCellTGW.LL.y.toFixed(12),",").concat(this.Cell.FCellTGW.LL.x.toFixed(12),",").concat(this.Cell.FCellTGW.UR.y.toFixed(12),",").concat(this.Cell.FCellTGW.UR.x.toFixed(12));break;case l.g.MVT_XYZ:this.z=this.Cell.FLevel,this.y=this.FGlobe.mercator.getTileY(this.Cell.FCenterLatDeg,this.z),this.x=this.FGlobe.mercator.getTileX(this.Cell.FCenterLonDeg,this.z),t=this.GetMVTUrl(t,this.x,this.y,this.z)}return t}},{key:"ParseOGCWFSXML",value:function(t){var e,i,r,s;if(this.FCityLayer.wkbGeom?(i=t.getElementsByTagName(this.FCityLayer.wkbGeom)).length||(i=t.getElementsByTagName("WKB_".concat(this.FCityLayer.wkbGeom))):i=t.getElementsByTagName("WKB_GEOM"),i.length)if((s=i[0].getElementsByTagName("gml:Polygon")).length||(s=i[0].getElementsByTagName("Polygon")||i[0].getElementsByTagName("gml:MultiPolygon")||i[0].getElementsByTagName("gml:polygonMember")),e=i[0].getElementsByTagName("gml:LinearRing"),s.length||e.length){if(e.length||(e=s[0].getElementsByTagName("gml:outerBoundaryIs")||s[0].getElementsByTagName("gml:LinearRing")).length||(e=s[0].getElementsByTagName("gml:exterior")||s[0].getElementsByTagName("gml:LinearRing")),e.length&&((r=e[0].getElementsByTagName("gml:coordinates")).length||(r=e[0].getElementsByTagName("gml:posList"))),r.length)return r=r[0].innerHTML.replace(/\s/g,","),r="[".concat(r,"]"),JSON.parse(r)||!1}else if((s=i[0].getElementsByTagName("gml:LineString")).length||(s=i[0].getElementsByTagName("gml:MultiLineString")||i[0].getElementsByTagName("gml:lineStringMember")||i[0].getElementsByTagName("gml:LineString")),s.length){if((r=s[0].getElementsByTagName("gml:coordinates")).length||(r=s[0].getElementsByTagName("gml:posList")),r.length)return r=r[0].innerHTML.replace(/\s/g,","),r="[".concat(r,"]"),JSON.parse(r)||!1}else if((s=i[0].getElementsByTagName("gml:Point")).length||(s=i[0].getElementsByTagName("gml:MultiPoint")||i[0].getElementsByTagName("gml:pointMember")||i[0].getElementsByTagName("gml:Point")),s.length&&((r=s[0].getElementsByTagName("gml:coordinates")).length||(r=s[0].getElementsByTagName("gml:pos")),r.length))return r=r[0].innerHTML.replace(/\s/g,","),r="[".concat(r,"]"),JSON.parse(r)||!1;return!1}},{key:"ParseOGCWFS",value:function(t){var e=t.getElementsByTagName("gml:featureMember");if(e.length){var i,r,s,o,n=t.getElementsByTagName(e[0].childNodes[0].nodeName);for(r=n.length;r--;)if(i=this.ParseOGCWFSXML(n[r])){var a=this.FindCenterCoord(i);if(this.Cell.FCellTGW.CSIsCommonRegionV(a[0],a[1],a[0],a[1])){o=n[r].children;var h={},l=n[r].attributes[0];for(-1===l.nodeValue.indexOf(".")?h[l.nodeName]=l.nodeValue.split(".")[0]:h[l.nodeName]=l.nodeValue.split(".")[1],s=o.length;s--;)"WKB_GEOM"!==o[s].tagName&&(h[o[s].tagName]=o[s].innerHTML);if(this.IsLayerStillExist()){var u=this.FCityLayer.filter;u?d.a.GetResult(JSON.parse(JSON.stringify(u)),h)&&this.AddObjToUserObj(i,h,this.objects,this.FCityLayer.objectType):this.AddObjToUserObj(i,h,this.objects,this.FCityLayer.objectType)}}}this.Layer=new j(this.objects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FillRBush(),this.FStateReady=!0,this.FGlobe.checkReduction=!0}this.FGlobe.LoadingVector=!1,this.FGlobe.DrawRender()}},{key:"SetObjToTile",value:function(t,e){if(this.FCityLayer.clusterStyle&&this.FCityLayer.objectType===l.j.POINT&&e===l.g.CS_OBJECT_ARRAY){this.clusterArr=[],this.clusterObjects.length=this.FCityLayer._superClusterIndex.length;var i=this.clusterObjects.length;for(u=0;u<i;u++)this.clusterObjects[u]=[];var r=this.FCityLayer._superClusterIndex.length;for(u=0;u<r;u++)this.clusterArr[u]=this.FCityLayer._superClusterIndex[u].getClusters(this.Cell.FCellTGW,this.Cell.FLevel);for(var s=this.clusterArr.length,o=0;o<s;o++)for(var n=this.clusterArr[o].length,a=0;a<n;a++)this.clusterArr[o][a].properties?this.clusterObjects[o].push(p.a.ClusterPoint(this.clusterArr[o][a],this.FCityLayer._superClusterIndex[o])):this.objects.push(this.clusterArr[o][a]);this.Layer=new V(this.objects,this.clusterObjects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FStateReady=!0}else{for(var h=this.FCityLayer._kdIndex.range(this.Cell.FLLLonDeg,this.Cell.FLLLatDeg,this.Cell.FURLonDeg,this.Cell.FURLatDeg),u=h.length;u--;)t[h[u]]&&this.objects.push(t[h[u]]);if(this.objects.length){switch(e){case l.g.CS_OBJECT_ARRAY:this.Layer=new V(this.objects,this.clusterObjects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FStateReady=!0}this.FillRBush()}}this.FGlobe.checkReduction=!0,this.FGlobe.DrawRender()}},{key:"SetObjToTileForObject3D",value:function(t){for(var e=t.length,i=0;i<e;i++){this.objects[i]=[];for(var r=this.FCityLayer._kdIndex[i].range(this.Cell.FLLLonDeg,this.Cell.FLLLatDeg,this.Cell.FURLonDeg,this.Cell.FURLatDeg),s=r.length;s--;)t[i][r[s]]&&this.objects[i].push(t[i][r[s]])}this.Layer=new V(this.objects,this.clusterObjects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FStateReady=!0,this.FillRBush(),this.FGlobe.checkReduction=!0,this.FGlobe.DrawRender()}},{key:"ParseCASXML",value:function(t){var e,i;if((e=t.getElementsByTagName("Geo")).length){return i=e[0].innerHTML,i="[".concat(i,"]"),JSON.parse(i)||!1}}},{key:"ParseCAS",value:function(t){var e,i,r,s,o=t.getElementsByTagName("Obj");if(o.length){for(e=o.length;e--;)if(s=this.ParseCASXML(o[e])){var n,a={};for(i=(r=o[e].children).length;i--;)"geo"===r[i].tagName.toLowerCase()||("fid"===r[i].tagName.toLowerCase()?a[r[i].tagName]=r[i].innerHTML:a[(n=(n=r[i].innerHTML).split("="))[0]]=n[1]);this.IsLayerStillExist()&&(this.FCityLayer.filter?d.a.GetResult(JSON.parse(JSON.stringify(this.FCityLayer.filter)),a)&&this.AddObjToUserObj(s,a,this.objects,this.FCityLayer.objectType):this.AddObjToUserObj(s,a,this.objects,this.FCityLayer.objectType))}this.Layer=new z(this.objects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FillRBush(),this.FStateReady=!0,this.FGlobe.checkReduction=!0}this.FGlobe.LoadingVector=!1,this.FGlobe.DrawRender()}},{key:"GetMVTUrl",value:function(t,e,i,r){return t=(t=(t=t.replace("{z}",r)).replace("{x}",e)).replace("{y}",i)}},{key:"CreateObjMVT",value:function(t,e,i,r){if(this.IsLayerStillExist())if(this.FCityLayer.filter){d.a.GetResult(JSON.parse(JSON.stringify(this.FCityLayer.filter)),{})&&this.AddObjToUserObj(t,e,i,r)}else this.AddObjToUserObj(t,e,i,r)}},{key:"FillObjMVT",value:function(t,e,i,r,s,o,n){var a,h,u,d,c,f=[],p=t.layers[s].length;if(o===l.j.POINT){for(d=0;d<p;d++)if("Point"===(c=t.layers[s].feature(d).toGeoJSON(e,i,r)).geometry.type)this.CreateObjMVT(c.geometry.coordinates,c.properties,n,o);else if("MultiPoint"===c.geometry.type)for(h=c.geometry.coordinates.length,a=0;a<h;a++)this.CreateObjMVT(c.geometry.coordinates[a],c.properties,n,o)}else if(o===l.j.LINE){for(d=0;d<p;d++)if("LineString"===(c=t.layers[s].feature(d).toGeoJSON(e,i,r)).geometry.type){for(f.length=0,h=c.geometry.coordinates.length,a=0;a<h;a++){var F=c.geometry.coordinates[a];f.push(F[0],F[1])}this.CreateObjMVT(f,c.properties,n,o)}else if("MultiLineString"===c.geometry.type)for(h=c.geometry.coordinates.length,a=0;a<h;a++){f.length=0,u=c.geometry.coordinates[a].length;for(var y=0;y<u;y++){var A=c.geometry.coordinates[a][y];f.push(A[0],A[1])}this.CreateObjMVT(f,c.properties,n,o)}}else if(o===l.j.POLYGON)for(d=0;d<p;d++)if("Polygon"===(c=t.layers[s].feature(d).toGeoJSON(e,i,r)).geometry.type)for(h=c.geometry.coordinates.length,a=0;a<h;a++){f.length=0,u=c.geometry.coordinates[a].length;for(y=0;y<u;y++){var g=c.geometry.coordinates[a][y];f.push(g[0],g[1])}this.CreateObjMVT(f,c.properties,n,o)}else if("MultiPolygon"===c.geometry.type)for(h=c.geometry.coordinates.length,a=0;a<h;a++){u=c.geometry.coordinates[a].length;for(var C=0;C<u;C++){f.length=0;for(var b=c.geometry.coordinates[a][C].length,T=0;T<b;T++){var v=c.geometry.coordinates[a][C][T];f.push(v[0],v[1])}this.CreateObjMVT(f,c.properties,n,o)}}}},{key:"ContinueToParseMVT",value:function(t,e,i,r,s,o,n,a){e&&this.FillObjMVT(t,i,r,s,o,n,a)}},{key:"ParseMVT",value:function(t,e,i,r){var s,o=this.FGlobe.CSPBF.GetTile(t);if(Array.isArray(this.FCityLayer.style))for(var n=this.FCityLayer.style.length,a=0;a<n;a++)this.objects[a]=[],this.Cell.FLevel>=this.FCityLayer._style[a].startLod&&this.Cell.FLevel<=this.FCityLayer._style[a].endLod&&(s=o.layers[this.FCityLayer.style[a].MVTXYZName],this.ContinueToParseMVT(o,s,e,i,r,this.FCityLayer.style[a].MVTXYZName,this.FCityLayer.style[a].objectType,this.objects[a]));else s=o.layers[this.FCityLayer.MVTXYZName],this.ContinueToParseMVT(o,s,e,i,r,this.FCityLayer.MVTXYZName,this.FCityLayer.objectType,this.objects);this.Layer=new N(this.objects,this.FCityLayer,this.FGlobe,this.Cell),this.Layer.Build(!0),this.FillRBush(),this.FStateReady=!0,this.FGlobe.checkReduction=!0,this.CheckRasterize(),this.FGlobe.LoadingVector=!1,this.FGlobe.DrawRender()}},{key:"FindCenterCoord",value:function(t){for(var e=[],i=0,r=0,s=t.length/2;s--;)i+=t[2*s],r+=t[2*s+1];return e[0]=i/(t.length/2),e[1]=r/(t.length/2),e}},{key:"CheckParam",value:function(t){return null!=t}},{key:"CheckForSingleCoords",value:function(t,e,i){this.CheckParam(e.Fid)&&(t.Fid=u.c.EvalObjectParams(l.n.STRING,e.Fid,i)),this.CheckParam(e.Z)&&(t.coordsZ[0]=u.c.EvalObjectParams(l.n.NUMBER,e.Z,i)),this.CheckParam(e.X)&&(t.coords[0]=u.c.EvalObjectParams(l.n.NUMBER,e.X,i)),this.CheckParam(e.Y)&&(t.coords[1]=u.c.EvalObjectParams(l.n.NUMBER,e.Y,i))}},{key:"CheckForMultiCoords",value:function(t,e,i){if(this.CheckParam(e.Fid)&&(t.Fid=u.c.EvalObjectParams(l.n.STRING,e.Fid,i)),this.CheckParam(e.Z))for(var r=u.c.EvalObjectParams(l.n.NUMBER,e.Z,i),s=0;s<t.coordsZ.length;s++)t.coordsZ[s]=r}},{key:"CheckRasterize",value:function(){this.FCityLayer.rasterize&&this.Cell.SetCellRasterizeTexture()}},{key:"SetObjectParamsPoint",value:function(t,e,i){this.CheckForSingleCoords(t,e,i)}},{key:"SetObjectParamsLine",value:function(t,e,i){this.CheckForMultiCoords(t,e,i)}},{key:"SetObjectParamsPolygon",value:function(t,e,i){this.CheckForMultiCoords(t,e,i),t.heights=u.c.EvalObjectArray(e.heights,i)}},{key:"SetObjectParamsModel",value:function(t,e,i){this.CheckForSingleCoords(t,e,i),t.sx=u.c.EvalObjectParams(l.n.INTEGER,e.sx,i)*l.z.GLOBE_RADIUS_K,t.sy=u.c.EvalObjectParams(l.n.INTEGER,e.sy,i)*l.z.GLOBE_RADIUS_K,t.sz=u.c.EvalObjectParams(l.n.INTEGER,e.sz,i)*l.z.GLOBE_RADIUS_K,t.rotXY=u.c.EvalObjectParams(l.n.NUMBER,e.rotXY,i),t.rotZ=u.c.EvalObjectParams(l.n.NUMBER,e.rotZ,i),t.rotRoll=u.c.EvalObjectParams(l.n.NUMBER,e.rotRoll,i),t.objUrl=u.c.EvalObjectParams(l.n.STRING,e.objUrl,i)}},{key:"SetObjectParamsShape",value:function(t,e,i){this.CheckForSingleCoords(t,e,i),t.radius1=u.c.EvalObjectParams(l.n.STRING,e.radius1,i),t.radius2=u.c.EvalObjectParams(l.n.STRING,e.radius2,i),t.rotDeg=u.c.EvalObjectParams(l.n.STRING,e.rotDeg,i),t.shapeType=u.c.EValShapeType(e.shapeType,i),t.heights=u.c.EvalObjectArray(e.heights,i)}},{key:"SetObjectParamsArc",value:function(t,e,i){this.CheckForSingleCoords(t,e,i),t.radius1=u.c.EvalObjectParams(l.n.STRING,e.radius1,i),t.radius2=u.c.EvalObjectParams(l.n.STRING,e.radius2,i),t.startAng=u.c.EvalObjectParams(l.n.STRING,e.startAng,i),t.endAng=u.c.EvalObjectParams(l.n.STRING,e.endAng,i),t.stepAng=u.c.EvalObjectParams(l.n.STRING,e.stepAng,i),t.heights=u.c.EvalObjectArray(e.heights,i)}},{key:"AddObjToUserObj",value:function(t,e,i,r){switch(r){case l.j.POINT:if(t.length>=2){var s=p.a.Point(l.b.DEFAULT,e,t);this.FCityLayer.objectParams&&Object.keys(this.FCityLayer.objectParams).length&&this.SetObjectParamsPoint(s,this.FCityLayer.objectParams,e),i.push(s)}else l.z.VECTOR_DEBUG&&console.log("Yetersiz koordinat says");break;case l.j.LINE:if(t.length>=4){var o=p.a.Line(l.b.DEFAULT,e,t,null);this.FCityLayer.objectParams&&Object.keys(this.FCityLayer.objectParams).length&&this.SetObjectParamsLine(o,this.FCityLayer.objectParams,e),i.push(o)}else l.z.VECTOR_DEBUG&&console.log("Yetersiz koordinat says");break;case l.j.POLYGON:if(t.length>=6){var n=p.a.Polygon(l.b.DEFAULT,e,t,null);this.FCityLayer.objectParams&&Object.keys(this.FCityLayer.objectParams).length&&this.SetObjectParamsPolygon(n,this.FCityLayer.objectParams,e),i.push(n)}else l.z.VECTOR_DEBUG&&console.log("Yetersiz koordinat says")}}},{key:"Draw3d",value:function(t){this.FCityLayer._FActive&&t<=this.FCityLayer.endLod&&this.FStateReady&&this.Layer.Draw3d(this.FStateReady)}},{key:"Draw2d",value:function(t){this.FCityLayer._FActive&&this.FStateReady&&this.Layer.Draw2d(t)}},{key:"IsLayerStillExist",value:function(){for(var t=this.FGlobe.FLayers.length;t--;)if(this.FCityLayer===this.FGlobe.FLayers[t])return!0;return!1}},{key:"X7N6TB",value:function(t,e,i,r,s,o){if(this.FCityLayer.clusterStyle){this.Layer.Build(!1,!0)}else{var n,a=[],h=this.RBush.search({minX:t.LL.y,minY:t.LL.x,maxX:t.UR.y,maxY:t.UR.x}),l=h.length;for(n=0;n<l;n++)e[h[n].index]&&a.push(e[h[n].index]);s.Build(a,!1,i,r),this.FCityLayer.rasterize||o.Build(a,!1,i,r)}}},{key:"BuildCluster",value:function(){this.Layer.Build(!1)}},{key:"ContinueToFillRBush",value:function(t,e){var i,r;if(e===l.j.POLYGON||e===l.j.LINE){var s=t.length;for(i=0;i<s;i++){var o=t[i].OuterPolyArr.length;for(r=0;r<o;r++){var n=Object(f.d)(new c.E(0,0,0,0),t[i].OuterPolyArr[r]);this.RBush.insert({minX:n.LL.y,minY:n.LL.x,maxX:n.UR.y,maxY:n.UR.x,index:i})}}}else{var a=t.length;for(i=0;i<a;i++){var h=Object(f.d)(new c.E(0,0,0,0),t[i].coords);this.RBush.insert({minX:h.LL.y,minY:h.LL.x,maxX:h.UR.y,maxY:h.UR.x,index:i})}}}},{key:"FillRBush",value:function(){if(Array.isArray(this.FCityLayer.style))for(var t=this.FCityLayer.style.length,e=0;e<t;e++)this.ContinueToFillRBush(this.objects[e],this.FCityLayer.style[e].objectType);else if(this.FCityLayer.objectType===l.j.OBJECT_3D){var i=this.FCityLayer.data.length;for(e=0;e<i;e++)this.ContinueToFillRBush(this.objects[e],this.FCityLayer.data[e].shapeName)}else this.ContinueToFillRBush(this.objects,this.FCityLayer.objectType)}},{key:"Build",value:function(){if(this.FStateReady){var t=!!this.FCityLayer.clusterStyle;this.Layer.Build(!1,t)}}},{key:"OpacityChanged",value:function(){if(this.FStateReady)if(Array.isArray(this.FCityLayer.style))for(var t=this.FCityLayer.style.length,e=0;e<t;e++)this.Layer.ITDrawer[e].OpacityChanged(this.FCityLayer.style[e].opacity,this.objects[e],this.FCityLayer.style[e]);else if(this.FCityLayer.objectType===l.j.OBJECT_3D){var i=this.objects.length;for(e=0;e<i;e++)this.Layer.ITDrawer[e].OpacityChanged(this.FCityLayer.style.opacity,this.objects[e],this.FCityLayer.style)}else this.Layer.ITDrawer.OpacityChanged(this.FCityLayer.style.opacity,this.objects,this.FCityLayer.style)}},{key:"QueryCityLayerObjects",value:function(t,e,i,r,s,o){if(t.isValid&&e.isValid){var n=this.FCityLayer,a=this.FGlobe;if(o===l.j.LINE&&s.border){for(var h=0;h<r.length;h++)t:if(r[h].obj.Limit.IsPointInRegion(this.Geo2D)&&a.ObjectIsNotInAskObjArr(i,r[h]))for(var u=r[h]._coords,d=0;d<u.length;d++)for(var f=0;f<u[d].length-2;f+=2)if(c.b.CSSegmentIntersect(t.MouseLong,t.MouseLat,e.MouseLong,e.MouseLat,u[d][f],u[d][f+1],u[d][f+2],u[d][f+3])){i.push({obj:r[h],owner:n,ownerType:l.m.VECTOR_LAYER});break t}}else if(o!==l.j.POLYGON&&o!==l.i.RECTANGLE&&o!==l.i.CORRIDOR&&o!==l.i.TRACK||!s.border){if(o!==l.j.SHAPE&&o!==l.i.ELLIPSE&&o!==l.i.CIRCLE&&o!==l.i.ORBIT&&o!==l.i.POLYARC||!s.border){if(o===l.j.ARCAREA&&s.border)for(h=r.length;h--;)if(a.ObjectIsNotInAskObjArr(i,r[h])){var p=r[h],F=p.coords,y=p._coords,A=p._coordsZ,g=[y[A.length],y[A.length+1],F[0],F[1],y[y.length-2],y[y.length-1]],C=[y[0],y[1],y[y.length-2],y[y.length-1]];this.FindVectorLayerIntersect(r[h],g,i,t,e)||this.FindVectorLayerIntersect(r[h],C,i,t,e)||this.FindVectorLayerIntersect(r[h],y,i,t,e)}}else for(h=r.length;h--;)if(a.ObjectIsNotInAskObjArr(i,r[h])){var b=r[h]._coords;this.FindVectorLayerIntersect(r[h],b,i,t,e)}}else for(var h=0;h<r.length;h++)t:if(r[h].obj.Limit.IsPointInRegion(this.Geo2D)&&a.ObjectIsNotInAskObjArr(i,r[h])){var T=r[h].OuterPolyArr;for(d=0;d<T.length;d++)for(f=0;f<T[d].length;f+=2)if(c.b.CSSegmentIntersect(t.MouseLong,t.MouseLat,e.MouseLong,e.MouseLat,T[d][f],T[d][f+1],T[d][f+2],T[d][f+3])){i.push({obj:r[h],owner:n,ownerType:l.m.VECTOR_LAYER});break t}}}}},{key:"QueryCityLayerInPoly",value:function(t,e,i,r,s){var o,n,a=this.FCityLayer,h=this.FGlobe;if(s!==l.j.POLYGON&&s!==l.i.RECTANGLE&&s!==l.i.CORRIDOR&&s!==l.i.TRACK||!r.filled&&!r.border)if(s!==l.j.SHAPE&&s!==l.i.ELLIPSE&&s!==l.i.CIRCLE&&s!==l.i.ORBIT&&s!==l.i.POLYARC||!r.filled&&!r.border){if(s===l.j.ARCAREA&&(r.filled||r.border))for(o=0;o<i.length;o++)h.ObjectIsNotInAskObjArr(e,i[o])&&c.b.CSPointInPolygon(t.MouseLong,t.MouseLat,i[o]._coords)&&e.push({obj:i[o],owner:a,ownerType:l.m.VECTOR_LAYER})}else for(o=0;o<i.length;o++)h.ObjectIsNotInAskObjArr(e,i[o])&&c.b.CSPointInPolygon(t.MouseLong,t.MouseLat,i[o]._coords)&&e.push({obj:i[o],owner:a,ownerType:l.m.VECTOR_LAYER});else for(o=0;o<i.length;o++)t:if(i[o].obj.Limit.IsPointInRegion(this.Geo2D)&&h.ObjectIsNotInAskObjArr(e,i[o])
/*! this.containsObject(objects[i].coords, objects[i].attribs, resultList)*/)for(n=0;n<i[o].OuterPolyArr.length;n++)if(c.b.CSPointInPolygon(t.MouseLong,t.MouseLat,i[o].OuterPolyArr[n])){e.push({obj:i[o],owner:a,ownerType:l.m.VECTOR_LAYER});break t}}},{key:"FindVectorLayerIntersect",value:function(t,e,i,r,s){for(var o=e.length,n=0;n<o;n+=2)if(c.b.CSSegmentIntersect(r.MouseLong,r.MouseLat,s.MouseLong,s.MouseLat,e[n],e[n+1],e[n+2],e[n+3]))return i.push({obj:t,owner:this.FCityLayer,ownerType:l.m.VECTOR_LAYER}),!0;return!1}},{key:"GetOverlaped",value:function(t,e){for(var i=[],r=e.length,s=0;s<r;s++){var o=e[s].obj.Limit;t.CSIsCommonRegionT(o)&&i.push(e[s])}return i}},{key:"QueryGeometryLayerObjects",value:function(t,e,i,r,s,o){for(var n=this.FGlobe,a=this.GetOverlaped(t,o),h=(a=n.QueryEliminatedObj(e,s,a,r,t)).length,u=0;u<h;u++)i.push({obj:a[u],owner:this.FCityLayer,ownerType:l.m.VECTOR_LAYER})}},{key:"AskObject",value:function(t,e,i,r,s,o,n,a){var h,u=this.FCityLayer,d=this.FGlobe,f=s.iconType,p=s.__hasFont,F=l.z.GLOBE_SYMBOL_SIZE/2;if(p||f!==l.e.NOICON){var y=null;for(h=(y=o.symbolReduction?a.reductionObjects:r).length;h--;){var A=y[h];s.icon;if(A.cp.length&&(f===l.e.NOICON?this.IconWorld.SetV(A.cp[0]-F,A.cp[1]-F,A.cp[0]+F,A.cp[1]+F):this.IconWorld.SetV(A.cp[0]-A.style.icon.__sizeX/2,A.cp[1]-A.style.icon.__sizeY/2,A.cp[0]+A.style.icon.__sizeX/2,A.cp[1]+A.style.icon.__sizeY/2),this.IconWorld.IsPointInRegionV(t,e)&&d.ObjectIsNotInAskObjArr(i,A))){var g={obj:A,owner:u,ownerType:l.m.VECTOR_LAYER};i.push(g)}}}var C=this.FCityLayer.clusterStyle;if(C&&d.minLod===this.Cell.FLevel){var b=C.length;for(h=0;h<b;h++){var T=C[h].cluster.style;if(T.__hasFont||T.iconType!==l.e.NOICON){T.icon;for(var v=this.clusterObjects[h].length,L=0;L<v;L++){var S=this.clusterObjects[h][L];if(S.cp.length&&(T.iconType===l.e.NOICON?this.IconWorld.SetV(S.cp[0]-F,S.cp[1]-F,S.cp[0]+F,S.cp[1]+F):this.IconWorld.SetV(S.cp[0]-S.style.icon.__sizeX/2,S.cp[1]-S.style.icon.__sizeY/2,S.cp[0]+S.style.icon.__sizeX/2,S.cp[1]+S.style.icon.__sizeY/2),this.IconWorld.IsPointInRegionV(t,e)&&d.ObjectIsNotInAskObjArr(i,S))){var x={obj:S,owner:u,ownerType:l.m.VECTOR_LAYER};i.push(x)}}}}}var O=d.tempmouseForSeg11,R=d.tempmouseForSeg12,m=d.tempmouseForSeg21,D=d.tempmouseForSeg22,E=d.tempmouseForCenter;this.Geo2D.x=c.b.RadyanToDegree(d.tempmouse.MouseLong),this.Geo2D.y=c.b.RadyanToDegree(d.tempmouse.MouseLat),this.QueryCityLayerObjects(O,R,i,r,o,n),this.QueryCityLayerObjects(m,D,i,r,o,n),this.QueryCityLayerInPoly(E,i,r,o,n)}},{key:"containsObject",value:function(t,e,i){for(var r=i.length,s=0;s<r;s++)if(t.length===i[s].obj.coords.length&&this.isEqualAllCoords(t,i[s].obj.coords)){var o=Object.keys(e),n=Object.keys(i[s].obj.attribs);if(o.length===n.length&&this.isEqualAllAttribs(e,i[s].obj.attribs,o,n,o.length))return!0}return!1}},{key:"isEqualAllCoords",value:function(t,e){for(var i=t.length,r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}},{key:"isEqualAllAttribs",value:function(t,e,i,r,s){for(var o=0;o<s;o++)if(t[i[o]]!==e[r[o]])return!1;return!0}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(){s()(this,t)}return n()(t,null,[{key:"CreateProgramGlobe",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"precision mediump float;\n    attribute vec3 vertexPos;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    attribute vec4 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\t\tattribute vec3 vertexNormal;\n    varying vec2 vTextureCoord;\n    varying vec4 viewSpace;\n    uniform vec3 translation;\n\t\tvarying vec3 fragNormal;\n\t\tvarying vec3 vertPos;\n    vec3 finalPos;\n\t\tmat4 world=mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);\n    void main(void) {\n      finalPos = vertexPos+translation;\n      gl_Position= projectionMatrix*modelViewMatrix*vec4(finalPos, 1.0);\n      vTextureCoord= aTextureCoord;\n\t\t\tfragNormal= (world*vec4(vertexNormal,0.0)).xyz;  //fragNormal'e farkl eyler verilmi rneklerde, baz yerlerde modelViewMatrix verilmi world yerine\n\t\t\tvertPos= finalPos;\n      viewSpace= modelViewMatrix*vec4(finalPos, 1.0);\n    }\n    "),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"\n    precision lowp float;\n    varying vec2 vTextureCoord;\n    uniform sampler2D uSampler;\n    uniform vec4 u_fogColor;\n    uniform float fogNear;\n    uniform float fogFar;\n    varying vec4 viewSpace;\n    uniform int setFogEnable;\n    uniform vec3 color;\n    uniform float opacity;\n\n\t\tvarying vec3 vertPos; // Vertex position\n\t\tuniform vec3 sunPos;\n\t\tuniform vec3 moonPos;\n\t\tvarying vec3 fragNormal;\n\n\t\tuniform int setSunEnable;\n\t\tuniform int setMoonEnable;\n\t\tuniform float moonIllum;\n\n\n    void main() {\n      if(setFogEnable==1) {\n        float dist=abs(viewSpace.z);\n        float fogFactor= clamp((fogFar-dist)/(fogFar-fogNear),0.0,1.0);\n        gl_FragColor= mix(u_fogColor,texture2D(uSampler, vTextureCoord)*vec4(color.rgb, opacity),fogFactor);\n      }\n      else{\n\t\t\t\tif(setSunEnable==1 && setMoonEnable==1){\n\t\t\t\t\t\tvec3 NSun= normalize(fragNormal);\n\t\t\t\t\t\tvec3 LSun= normalize(sunPos-vertPos); //bu bize n pozisyonunu veriyor\n\t\t\t\t\t\t// Lamberts cosine law\n\t\t\t\t\t\tfloat lambertianSun= max(dot(LSun, NSun), 0.0);\n\t\t\t\t\t\tfloat specularSun = 0.0;\n\t\t\t\t\t\tif(lambertianSun > 0.0) {\n\t\t\t\t\t\t\tvec3 RSun = reflect(-LSun, NSun);      // Reflected light vector\n\t\t\t\t\t\t\tvec3 VSun = normalize(-vertPos); // Vector to viewer\n\t\t\t\t\t\t\t// Compute the specular term\n\t\t\t\t\t\t\tfloat specAngle = max(dot(RSun, VSun), 0.0);\n\t\t\t\t\t\t\tspecularSun = pow(specAngle, 100.0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 NMoon= normalize(fragNormal);\n\t\t\t\t\t\tvec3 LMoon= normalize(moonPos-vertPos); //bu bize n pozisyonunu veriyor\n\t\t\t\t\t\t// Lamberts cosine law\n\t\t\t\t\t\tfloat lambertianMoon= max(dot(LMoon, NMoon), 0.0);\n\t\t\t\t\t\tfloat specularMoon = 0.0;\n\t\t\t\t\t\tif(lambertianMoon > 0.0) {\n\t\t\t\t\t\t\tvec3 RMoon = reflect(-LMoon, NMoon);      // Reflected light vector\n\t\t\t\t\t\t\tvec3 VMoon = normalize(-vertPos); // Vector to viewer\n\t\t\t\t\t\t\t// Compute the specular term\n\t\t\t\t\t\t\tfloat specAngle = max(dot(RMoon, VMoon), 0.0);\n\t\t\t\t\t\t\tspecularMoon = pow(specAngle, 100.0);\n\t\t\t\t\t  }\n\t\t\t\t\t\tfloat totalLightColor = 0.15 + (lambertianSun+(lambertianMoon*0.5*moonIllum))+ (0.02*(specularSun+specularMoon));\n\t\t\t\t\t\tgl_FragColor=texture2D(uSampler, vTextureCoord)*vec4( totalLightColor*color , opacity);\n\t\t\t\t}\n\t\t\t\telse if(setSunEnable==1){\n\t\t\t\t\tvec3 N= normalize(fragNormal);\n\t\t\t\t\tvec3 L= normalize(sunPos-vertPos); //bu bize n pozisyonunu veriyor\n\t\t\t\t\t// Lamberts cosine law\n\t\t\t\t\tfloat lambertian= max(dot(L, N), 0.0);\n\t\t\t\t\tfloat specular = 0.0;\n\t\t\t\t\tif(lambertian > 0.0) {\n\t\t\t\t\t\tvec3 R = reflect(-L, N);      // Reflected light vector\n\t\t\t\t\t\tvec3 V = normalize(-vertPos); // Vector to viewer\n\t\t\t\t\t\t// Compute the specular term\n\t\t\t\t\t\tfloat specAngle = max(dot(R, V), 0.0);\n\t\t\t\t\t\tspecular = pow(specAngle, 100.0);\n\t\t\t\t\t}\n\t\t\t\t\tfloat totalLightColor = 0.15+lambertian+(0.01*specular);\n\t\t\t\t\tgl_FragColor=texture2D(uSampler, vTextureCoord)*vec4(totalLightColor*color , opacity);\n\t\t\t\t}\n\t\t\t\telse if(setMoonEnable==1){\n\t\t\t\t\tvec3 N= normalize(fragNormal);\n\t\t\t\t\tvec3 L= normalize(moonPos-vertPos); //bu bize n pozisyonunu veriyor\n\t\t\t\t\t// Lamberts cosine law\n\t\t\t\t\tfloat lambertian= max(dot(L, N), 0.0);\n\t\t\t\t\tfloat specular = 0.0;\n\t\t\t\t\tif(lambertian > 0.0) {\n\t\t\t\t\t\tvec3 R = reflect(-L, N);      // Reflected light vector\n\t\t\t\t\t\tvec3 V = normalize(-vertPos); // Vector to viewer\n\t\t\t\t\t\t// Compute the specular term\n\t\t\t\t\t\tfloat specAngle = max(dot(R, V), 0.0);\n\t\t\t\t\t\tspecular = pow(specAngle, 100.0);\n\t\t\t\t\t}\n\t\t\t\t\tfloat totalLightColor = (lambertian*0.5*moonIllum)+ (0.01*specular);\n\t\t\t\t\tgl_FragColor=texture2D(uSampler, vTextureCoord)*vec4( totalLightColor*color, opacity);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tgl_FragColor= texture2D(uSampler, vTextureCoord)*vec4(color.rgb, opacity);\n\t\t\t\t}\n      }\n    }\n    "),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgram3D",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"\n    precision mediump float;\n    attribute vec3 vertexPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform vec4 v2;\n    uniform float pointSize;\n    varying vec4 viewSpace;\n    varying vec4 vv22;\n    void main(void) {\n      gl_Position= projectionMatrix*modelViewMatrix*vec4(vertexPos, 1.0);\n      vv22=v2;\n      gl_PointSize=pointSize;\n      viewSpace= modelViewMatrix*vec4(vertexPos, 1.0);\n    }\n    "),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision mediump float;\n    varying vec4 vv22;\n    uniform int isPoint;\n    uniform vec4 u_fogColor;\n    uniform float fogNear;\n    uniform float fogFar;\n    varying vec4 viewSpace;\n    uniform int setFogEnable;\n    void main() {\n      if(setFogEnable==1){\n        float dist=abs(viewSpace.z);\n        float fogFactor= clamp((fogFar-dist)/(fogFar-fogNear),0.0,1.0);\n        if(isPoint==1) {\n          float r= 0.0;\n          vec2 cxy= 2.0 * gl_PointCoord - 1.0;\n          r= dot(cxy, cxy);\n          if(r > 1.0 ){\n            discard;\n          }\n        }\n        gl_FragColor= mix(u_fogColor,vv22.rgba,fogFactor);\n      } else {\n        if(isPoint==1) {\n          float r= 0.0;\n          vec2 cxy= 2.0 * gl_PointCoord - 1.0;\n          r= dot(cxy, cxy);\n          if(r > 1.0 ) {\n            discard;\n          }\n        }\n        gl_FragColor= vv22;\n      }\n    }"),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgram2D",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"\n    precision mediump float;\n    attribute vec3 vertexPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    attribute vec2 aTextureCoord;\n    varying vec2 vTextureCoord;\n\n    void main(void) {\n      gl_Position= projectionMatrix*modelViewMatrix*vec4(vertexPos, 1.0);\n      vTextureCoord= aTextureCoord;\n    }"),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision lowp float;\n    varying vec2 vTextureCoord;\n    uniform sampler2D uSampler;\n    uniform vec4 v;\n    void main() {\n      gl_FragColor= texture2D(uSampler, vTextureCoord)*v;\n    }\n    "),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgramModel",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"precision mediump float;\n    attribute vec3 vertexPos;\n    varying vec3 fragNormal;\n    varying vec3 vertPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    attribute vec2 aTextureCoord;\n    attribute vec3 vertexNormal;\n    varying vec2 vTextureCoord;\n    varying vec4 viewSpace;\n    void main(void) {\n      gl_Position=  projectionMatrix*modelViewMatrix*vec4(vertexPos, 1.0);\n      vTextureCoord= aTextureCoord;\n      fragNormal= (modelViewMatrix*vec4(vertexNormal,0.0)).xyz;\n      vertPos= vertexPos;\n      viewSpace= modelViewMatrix*vec4(vertexPos, 1.0);\n    }\n    "),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision lowp float;\n    uniform vec4 color;\n    varying vec2 vTextureCoord;\n    uniform sampler2D uSampler;\n    varying vec3 vertPos; // Vertex position\n    uniform int texturecontrol;\n    uniform int modelwireframe;\n    // ns\n    uniform float nS;\n    // Ka\n    uniform vec3 ambientColor;\n    // Ks\n    uniform vec3 specularColor;\n    varying vec3 fragNormal;\n    uniform vec4 u_fogColor;\n    uniform float fogNear;\n    uniform float fogFar;\n    varying vec4 viewSpace;\n    uniform int setFogEnable;\n    void main() {\n      if(setFogEnable==1)\n      {\n        float dist=abs(viewSpace.z);\n        float fogFactor= clamp((fogFar-dist)/(fogFar-fogNear),0.0,1.0);\n        vec3 N= normalize(fragNormal);\n        vec3 L= normalize(vec3(1000,1000,1000) - vertPos); // normalde vec3(1000,1000,1000) deeri lightPos olacak\n        // Lamberts cosine law\n        float lambertian= max(dot(N, L), 0.0);\n\n        if(modelwireframe== 0 )\n        {\n          if(texturecontrol !=0 )\n          {\n            gl_FragColor=mix(u_fogColor,texture2D(uSampler, vTextureCoord)*vec4( ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a),fogFactor);\n          }\n          else{\n            gl_FragColor= mix(u_fogColor, vec4(   ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a),fogFactor);\n          }\n        }\n        else{\n          gl_FragColor=mix(u_fogColor,texture2D(uSampler, vTextureCoord),fogFactor);\n        }\n      }\n\n      else{\n        vec3 N= normalize(fragNormal);\n        vec3 L= normalize(vec3(1000,1000,1000) - vertPos); // normalde vec3(1000,1000,1000) deeri lightPos olacak\n        // Lamberts cosine law\n        float lambertian= max(dot(N, L), 0.0);\n\n        if(modelwireframe== 0 )\n        {\n          if(texturecontrol !=0 )\n          {\n            gl_FragColor=texture2D(uSampler, vTextureCoord)*vec4( ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a);\n          }\n          else{\n            gl_FragColor= vec4(   ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a);\n          }\n        }\n        else{\n          gl_FragColor=texture2D(uSampler, vTextureCoord);\n        }\n      }\n    }"),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgram3DForLayer",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"\n\t\tprecision highp float;\n    attribute vec3 vertexPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform vec4 v2;\n    uniform vec3 translation;\n    varying vec4 viewSpace;\n    varying vec4 vv22;\n        void main(void) {\n        gl_Position= projectionMatrix*modelViewMatrix*vec4((vertexPos.x)+translation.x, (vertexPos.y)+translation.y, (vertexPos.z)+translation.z, 1.0);\n\t\t    gl_PointSize=8.0;\n        vv22=v2;\n        viewSpace= modelViewMatrix*vec4((vertexPos.x)+translation.x, (vertexPos.y)+translation.y, (vertexPos.z)+translation.z, 1.0);\n    }\n\t\t"),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"\n    precision mediump float;\n    varying vec4 vv22;\n\t\tuniform int isPoint;\n    uniform vec4 u_fogColor;\n    uniform float fogNear;\n    uniform float fogFar;\n    varying vec4 viewSpace;\n    uniform int setFogEnable;\n    void main() {\n\t\t\tif(isPoint==1){\n\t\t\t  float r= 0.0;\n\t\t\t  vec2 cxy= 2.0 * gl_PointCoord - 1.0;\n\t\t\t  r= dot(cxy, cxy);\n\t\t\t  if(r > 1.0){\n\t\t\t  \t\tdiscard;\n\t\t\t  }\n\t\t\t}\n      if(setFogEnable==1){\n        float dist=abs(viewSpace.z);\n        float fogFactor= clamp((fogFar-dist)/(fogFar-fogNear),0.0,1.0);\n        gl_FragColor= mix(u_fogColor,vv22.rgba,fogFactor);\n      }\n      else{\n        gl_FragColor= vv22;\n      }\n    }"),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgramModelForLayer",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"precision mediump float;\nattribute vec3 vertexPos;\nvarying vec3 fragNormal;\nvarying vec3 vertPos;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nattribute vec2 aTextureCoord;\nattribute vec3 vertexNormal;\nvarying vec2 vTextureCoord;\nvarying vec4 viewSpace;\nuniform vec3 translation;uniform vec3 scale;    void main(void) {\n    gl_Position=  projectionMatrix*modelViewMatrix*vec4((vertexPos.x*scale.x)+translation.x, (vertexPos.y*scale.y)+translation.y,  (vertexPos.z*scale.z)+translation.z, 1.0); \n    vTextureCoord= aTextureCoord;\n    fragNormal= (modelViewMatrix*vec4(vertexNormal,0.0)).xyz;\n    vertPos= vertexPos;\n    viewSpace= modelViewMatrix*vec4((vertexPos.x)+translation.x, (vertexPos.y)+translation.y,  (vertexPos.z)+translation.z, 1.0);}\n"),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision lowp float;uniform vec4 color;varying vec2 vTextureCoord;uniform sampler2D uSampler;varying vec3 vertPos;uniform int texturecontrol;uniform float nS;uniform vec3 ambientColor;uniform vec3 specularColor;varying vec3 fragNormal;uniform vec4 u_fogColor;uniform float fogNear;uniform float fogFar;varying vec4 viewSpace;uniform int setFogEnable;void main() { if(setFogEnable==1){float dist=abs(viewSpace.z);float fogFactor= clamp((fogFar-dist)/(fogFar-fogNear),0.0,1.0);vec3 N= normalize(fragNormal);vec3 L= normalize(vec3(1000,1000,1000) - vertPos);float lambertian= max(dot(N, L), 0.0); if(texturecontrol !=0 ) {  gl_FragColor=mix(u_fogColor,texture2D(uSampler, vTextureCoord)*vec4( ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a),fogFactor); } else{  gl_FragColor= mix(u_fogColor, vec4(   ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a),fogFactor); }} else{vec3 N= normalize(fragNormal);vec3 L= normalize(vec3(1000,1000,1000) - vertPos);float lambertian= max(dot(N, L), 0.0); if(texturecontrol !=0 ) {  gl_FragColor=texture2D(uSampler, vTextureCoord)*vec4( ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a); } else{  gl_FragColor= vec4( ambientColor.r + (lambertian*color.r )+  (specularColor.r), ambientColor.g + (lambertian*color.g) +  (specularColor.g),ambientColor.b + (lambertian*color.b)  +  (specularColor.b) , color.a); } }}"),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgram2DForLayerIcon",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"\n    precision mediump float;\n    attribute vec3 vertexPos;\n    attribute vec2 offset;\n    uniform vec2 orthoValues;\n    attribute vec2 aTextureCoord;\n    varying vec2 vTextureCoord;\n    uniform vec2 scale;\n    uniform float fRotation;\n    uniform lowp float opacity;\n    varying lowp float op;\n    vec2 uPosition = vec2(0.0,0.0);\n    mat4 curProjMat=mat4(vec4(0.0),vec4(0.0),0.0,0.0,-0.05,0.0,-1.0,1.0,0.0,1.0);\n\n    void main(void) {\n      curProjMat[0][0] = 2.0  /  orthoValues.x;\n      curProjMat[1][1] = -2.0  / orthoValues.y;\n      if(abs(fRotation) > 0.01) {\n        uPosition.x = (cos(fRotation)*(vertexPos.x))-(sin(fRotation)*(vertexPos.y));\n        uPosition.y = (cos(fRotation)*(vertexPos.y))+(sin(fRotation)*(vertexPos.x));\n      } else {\n        uPosition.x = vertexPos.x;\n        uPosition.y = vertexPos.y;\n      }\n      op = opacity;\n      gl_Position= curProjMat*vec4((uPosition.x*scale.x)+offset.x, (uPosition.y*scale.y)+offset.y, 1.0, 1.0);\n      vTextureCoord= aTextureCoord;\n    }\n\n    "),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision lowp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;varying float op;void main() { gl_FragColor= texture2D(uSampler, vTextureCoord)*op;}"),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgramForLayerLabels",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"precision mediump float;attribute vec2 vertexPos;\nuniform vec2 orthoValues;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;uniform vec2 scale;uniform vec4 v2; uniform vec2 translation;varying vec4 vv22;mat4 curProjMat=mat4(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.05,0.0,-1.0,1.0,0.0,1.0);    void main(void) {\n           curProjMat[0][0] = 2.0  /  orthoValues.x;           curProjMat[1][1] = -2.0  / orthoValues.y;           gl_Position= curProjMat*vec4((vertexPos.x*scale.x)+translation.x, (vertexPos.y*scale.y)+translation.y, 1.0, 1.0); \n           vTextureCoord= aTextureCoord;\n           vv22=v2;}\n"),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"\n    precision lowp float;\n    varying vec2 vTextureCoord;\n    uniform sampler2D uSampler;\n    varying vec4 vv22;\n    uniform vec4 haloColor;\n    vec4 sampColor;\n    uniform int isHalo;\n    void main() {\n\n      sampColor = texture2D(uSampler, vTextureCoord);\n      if(isHalo==1){\n        gl_FragColor = vec4(( ((vec3(1.0) - sampColor.rgb) * haloColor.rgb) + (sampColor.rgb) * vv22.rgb), sampColor.a*vv22.a);\n      }\n      else{\n        gl_FragColor = sampColor * vv22;\n      }\n    }\n    "),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}},{key:"CreateProgram2DForLayerCircle",value:function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"\n    precision mediump float;\n    attribute vec3 vertexPos;\n    //uniform vec2 translation;\n    uniform vec2 orthoValues;\n    attribute vec2 offset;\n    mat4 curProjMat=mat4(vec4(0.0),vec4(0.0),0.0,0.0,-0.05,0.0,-1.0,1.0,0.0,1.0);\n\n    varying float varR1;\n    varying float varR2;\n    varying float varR3;\n    varying float varR4;\n    varying vec4 varColor;\n\n    uniform vec4 fillColor;\n    uniform float radius;\n    uniform float borderWidth;\n\n    const float fading = 0.5;\n\n    void main(void) {\n      float r4 = 1.0;\n      float r3 = 1.0 - (fading / radius);\n      float r2 = 1.0 - (borderWidth / radius);\n      float r1 = r2 - (fading / radius);\n\n      varR4 = r4 * r4 * 0.25;\n      varR3 = r3 * r3 * 0.25;\n      varR2 = r2 * r2 * 0.25;\n      varR1 = r1 * r1 * 0.25;\n\n      varColor = fillColor;\n\n      gl_PointSize = 2.0 * radius;\n      curProjMat[0][0] = 2.0  /  orthoValues.x;\n      curProjMat[1][1] = -2.0  / orthoValues.y;\n      gl_Position= curProjMat*vec4(vertexPos.x+offset.x, vertexPos.y+offset.y, 1.0, 1.0);\n    }"),t.compileShader(e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision lowp float;\n\n    varying float varR1;\n    varying float varR2;\n    varying float varR3;\n    varying float varR4;\n    varying vec4 varColor;\n\n    uniform vec4 borderColor;\n    const vec4 TRANSPARENT = vec4(1, 1, 1, 0);\n\n    void main() {\n      float x = gl_PointCoord.x - 0.5;\n      float y = gl_PointCoord.y - 0.5;\n      float radius = x * x + y * y;\n\n      if( radius < varR1 )\n      gl_FragColor = varColor;\n      else if( radius < varR2 )\n      gl_FragColor = mix(varColor, borderColor, (radius - varR1) / (varR2 - varR1));\n      else if( radius < varR3 )\n      gl_FragColor = borderColor;\n      else\n      gl_FragColor = mix(borderColor, TRANSPARENT, (radius - varR3) / (varR4 - varR3));\n    }\n    "),t.compileShader(i);var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),r}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(11),h=i(0),l=function(){function t(e){s()(this,t),this.IconMap=e,this.MapCacheObj={}}return n()(t,[{key:"GetMapIndexFromCache",value:function(t){return this.MapCacheObj.hasOwnProperty(t.IconStr)?this.IconMap[this.MapCacheObj[t.IconStr]]:null}},{key:"AddMapIndexToCache",value:function(t,e){this.MapCacheObj[t.IconStr]=e}},{key:"ClearCache",value:function(){this.MapCacheObj={}}}]),t}();i.d(e,"a",function(){return u});var u=new(function(){function t(){s()(this,t),this.MapNames=[],this.MilIconMap=[],this.DrawPromises=[]}return n()(t,[{key:"SetParameters",value:function(t){this.FGlobe=t,this.IconMap=t.IconMap,this.MilCache=new l(this.IconMap)}},{key:"SetMilSymbol",value:function(t){this.ms=t}},{key:"AddIcon",value:function(t){t.IconStr||(t.IconStr="empty"),t.IconMap=this.MilCache.GetMapIndexFromCache(t),t.IconMap||this.AddToIconMap(t)}},{key:"AddToIconMap",value:function(t){this.AddToMapJson(t)?this.DrawPromises.push(this.DrawToCanvas(t,t.IconMap)):this.AddMap(t)}},{key:"IsMapJsonOK",value:function(t,e){var i=e.map;if(!e.map)return e.map={},e.map[t]={},e.map[t].x=0,e.map[t].y=0,e.map[t].width=h.z.AUTO_MILITARY_ICON_SIZE,e.map[t].height=h.z.AUTO_MILITARY_ICON_SIZE,!0;if(!i[t]){var r=Object.keys(i),s=h.z.AUTO_MILITARY_MAP_SIZE/h.z.AUTO_MILITARY_ICON_SIZE,o=s*s;if(r.length<o){var n=i[r[r.length-1]],a=n.x,l=n.y;return l+h.z.AUTO_MILITARY_ICON_SIZE<=h.z.AUTO_MILITARY_MAP_SIZE&&(a+h.z.AUTO_MILITARY_ICON_SIZE>=h.z.AUTO_MILITARY_MAP_SIZE?(i[t]={},i[t].x=0,i[t].y=l+h.z.AUTO_MILITARY_ICON_SIZE,i[t].width=h.z.AUTO_MILITARY_ICON_SIZE,i[t].height=h.z.AUTO_MILITARY_ICON_SIZE,!0):(i[t]={},i[t].x=a+h.z.AUTO_MILITARY_ICON_SIZE,i[t].y=l,i[t].width=h.z.AUTO_MILITARY_ICON_SIZE,i[t].height=h.z.AUTO_MILITARY_ICON_SIZE,!0))}return!1}return!0}},{key:"AddToMapJson",value:function(t){var e=t.IconStr;if(this.MilIconMap.length){if(t.IconMap)return this.IsMapJsonOK(e,t.IconMap);if(this.IsMapJsonOK(e,this.MilIconMap[this.MilIconMap.length-1]))return t.IconMap=this.MilIconMap[this.MilIconMap.length-1],!0}return!1}},{key:"CreateIconMap",value:function(t){var e={mapIndex:this.IconMap.length,canvas:document.createElement("canvas"),texture:-1,mapW:h.z.AUTO_MILITARY_MAP_SIZE,mapH:h.z.AUTO_MILITARY_MAP_SIZE,url:null,milMap:!0};e.canvas.width=h.z.AUTO_MILITARY_MAP_SIZE,e.canvas.height=h.z.AUTO_MILITARY_MAP_SIZE,e.ctx=e.canvas.getContext("2d"),t.IconMap=e,0===this.MilIconMap.length&&(e.map={empty:{x:0,y:0,width:h.z.AUTO_MILITARY_ICON_SIZE,height:h.z.AUTO_MILITARY_ICON_SIZE}},this.MilCache.AddMapIndexToCache({IconStr:"empty"},e.mapIndex),this.AddEmptyIconToFirst(e.ctx)),this.IconMap.push(e),this.MilIconMap.push(e)}},{key:"PrepareImage",value:function(t){var e,i=0,r=0;t.width>=t.height?r=((e=t.width)-t.height)/2:i=((e=t.height)-t.width)/2;var s=document.createElement("canvas");return s.width=e,s.height=e,s.getContext("2d").drawImage(t,i,r),s}},{key:"DrawToCanvas",value:function(t){var e=this;return new Promise(function(i){var r=t.IconMap,s=new e.ms.Symbol(t.IconStr).asSVG();if(r.map[t.IconStr]&&s){e.MilCache.AddMapIndexToCache(t,r.mapIndex);var o=r.map[t.IconStr],n=o.x,a=o.y,l=window.URL||window.webkitURL||window,u=new Image,d=new Blob([s],{type:"image/svg+xml"}),c=l.createObjectURL(d);u.onload=function(){r.ctx.drawImage(e.PrepareImage(u),n+2,a+2,h.z.AUTO_MILITARY_ICON_SIZE-4,h.z.AUTO_MILITARY_ICON_SIZE-4),l.revokeObjectURL(c),r.changed=!0,i(!0)},u.crossOrigin="",u.src=c}})}},{key:"AddMap",value:function(t){this.CreateIconMap(t),this.AddToMapJson(t),this.DrawPromises.push(this.DrawToCanvas(t))}},{key:"AddEmptyIconToFirst",value:function(t){var e=new Image;e.onload=function(){t.drawImage(e,0,0,h.z.AUTO_MILITARY_ICON_SIZE,h.z.AUTO_MILITARY_ICON_SIZE)},e.crossOrigin="",e.src=a.e}},{key:"CreateTextureAfterPromises",value:function(){var t=this;Promise.all(this.DrawPromises).then(function(){for(var e=t.MilIconMap.length,i=0;i<e;i++)t.MilIconMap[i].changed&&(t.CreateMapTexture(t.MilIconMap[i]),t.MilIconMap[i].changed=!1)})}},{key:"CreateMapTexture",value:function(t){var e=this.FGlobe.gl,i=e.createTexture();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.canvas),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),t.texture=i}},{key:"ParseIconCode",value:function(t,e){if(t.length){for(var i=e[t[0]],r=t.length,s=1;s<r;s++)i=i[t[s]];return i}return null}}]),t}())},function(t,e,i){"use strict";function r(t,e,i,o,n,a){if(n-o<=i)return;const h=o+n>>1;!function t(e,i,r,o,n,a){for(;n>o;){if(n-o>600){const s=n-o+1,h=r-o+1,l=Math.log(s),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(s-u)/s)*(h-s/2<0?-1:1),c=Math.max(o,Math.floor(r-h*u/s+d)),f=Math.min(n,Math.floor(r+(s-h)*u/s+d));t(e,i,r,c,f,a)}const h=i[2*r+a];let l=o,u=n;for(s(e,i,o,r),i[2*n+a]>h&&s(e,i,o,n);l<u;){for(s(e,i,l,u),l++,u--;i[2*l+a]<h;)l++;for(;i[2*u+a]>h;)u--}i[2*o+a]===h?s(e,i,o,u):s(e,i,++u,n),u<=r&&(o=u+1),r<=u&&(n=u-1)}}(t,e,h,o,n,a),r(t,e,i,o,h-1,1-a),r(t,e,i,h+1,n,1-a)}function s(t,e,i,r){o(t,i,r),o(e,2*i,2*r),o(e,2*i+1,2*r+1)}function o(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function n(t,e,i,r){const s=t-i,o=e-r;return s*s+o*o}i.d(e,"a",function(){return l});const a=t=>t[0],h=t=>t[1];class l{constructor(t,e=a,i=h,s=64,o=Float64Array,n){this.nodeSize=s,this.points=t;const l=t.length<65536?Uint16Array:Uint32Array;let u,d;if(n){const e=[];for(let i=0;i<t.length/2;i++)e[i]=i;this.ids=u=new l(e),d=this.coords=new o(t)}else{u=this.ids=new l(t.length),d=this.coords=new o(2*t.length);for(let r=0;r<t.length;r++)u[r]=r,d[2*r]=e(t[r]),d[2*r+1]=i(t[r])}r(u,d,s,0,u.length-1,0)}range(t,e,i,r){return function(t,e,i,r,s,o,n){const a=[0,t.length-1,0],h=[];for(;a.length;){const l=a.pop(),u=a.pop(),d=a.pop();if(u-d<=n){for(let n=d;n<=u;n++){const a=e[2*n],l=e[2*n+1];a>=i&&a<=s&&l>=r&&l<=o&&h.push(t[n])}continue}const c=d+u>>1,f=e[2*c],p=e[2*c+1];f>=i&&f<=s&&p>=r&&p<=o&&h.push(t[c]),(0===l?i<=f:r<=p)&&(a.push(d),a.push(c-1),a.push(1-l)),(0===l?s>=f:o>=p)&&(a.push(c+1),a.push(u),a.push(1-l))}return h}(this.ids,this.coords,t,e,i,r,this.nodeSize)}within(t,e,i){return function(t,e,i,r,s,o){const a=[0,t.length-1,0],h=[],l=s*s;for(;a.length;){const u=a.pop(),d=a.pop(),c=a.pop();if(d-c<=o){for(let s=c;s<=d;s++)n(e[2*s],e[2*s+1],i,r)<=l&&h.push(t[s]);continue}const f=c+d>>1,p=e[2*f],F=e[2*f+1];n(p,F,i,r)<=l&&h.push(t[f]),(0===u?i-s<=p:r-s<=F)&&(a.push(c),a.push(f-1),a.push(1-u)),(0===u?i+s>=p:r+s>=F)&&(a.push(f+1),a.push(d),a.push(1-u))}return h}(this.ids,this.coords,t,e,i,this.nodeSize)}}},function(t,e,i){t.exports=i(95)},function(t,e,i){"use strict";function r(t,e,i,r,s){var o=["function ",t,"(a,l,h,",r.join(","),"){",s?"":"var i=",i?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return s?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),i?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),s?o.push("return -1};"):o.push("return i};"),o.join("")}function s(t,e,i,s){return new Function([r("A","x"+t+"y",e,["y"],s),r("P","c(x,y)"+t+"0",e,["y","c"],s),"function dispatchBsearch",i,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",i].join(""))()}t.exports={ge:s(">=",!1,"GE"),gt:s(">",!1,"GT"),lt:s("<",!0,"LT"),le:s("<=",!0,"LE"),eq:s("-",!0,"EQ",!0)}},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(6),h=function(){function t(e){s()(this,t),this.FGlobe=e,this.CurDistanceUnit=a.d[1],this.CurAreaUnit=a.c[2],this.CurAltitudeUnit=a.a[1],this.CurAngleUnit=a.b[0],this.CurVolumeUnit=a.e[1]}return n()(t,[{key:"MeterToUnit",value:function(t,e){return t*e.k}},{key:"UnitToMeter",value:function(t,e){return t/e.k}},{key:"DistanceMtoU",value:function(t){return t*this.CurDistanceUnit.k}},{key:"DistanceUtoM",value:function(t){return t/this.CurDistanceUnit.k}},{key:"DistanceUnitLabel",value:function(){return this.CurDistanceUnit.label}},{key:"DistanceUnitText",value:function(){return this.CurDistanceUnit.labelText}},{key:"DistanceAnyUtoM",value:function(t,e){return e/t.k}},{key:"AreaM2ToU2",value:function(t){return t*this.CurAreaUnit.k}},{key:"AreaU2ToM2",value:function(t){return t/this.CurAreaUnit.k}},{key:"AreaUnitLabel",value:function(){return this.CurAreaUnit.label}},{key:"AreaUnitText",value:function(){return this.CurAreaUnit.labelText}},{key:"AltitudeMtoU",value:function(t){return t*this.CurAltitudeUnit.k}},{key:"AltitudeUtoM",value:function(t){return t/this.CurAltitudeUnit.k}},{key:"AltitudeUnitLabel",value:function(){return this.CurAltitudeUnit.label}},{key:"AltitudeUnitText",value:function(){return this.CurAltitudeUnit.labelText}},{key:"AngleDegtoU",value:function(t){return t*this.CurAngleUnit.k}},{key:"AngleUtoDeg",value:function(t){return t/this.CurAngleUnit.k}},{key:"AngleUnitLabel",value:function(){return this.CurAngleUnit.label}},{key:"AngleUnitText",value:function(){return this.CurAngleUnit.labelText}},{key:"VolumeM3ToU3",value:function(t){return t*this.CurVolumeUnit.k}},{key:"VolumeU3ToM3",value:function(t){return t/this.CurVolumeUnit.k}},{key:"VolumeUnitLabel",value:function(){return this.CurVolumeUnit.label}},{key:"VolumeUnitText",value:function(){return this.CurVolumeUnit.labelText}},{key:"GetDistAsString",value:function(t){return"".concat(this.DistanceMtoU(t).toFixed(this.CurDistanceUnit.digits)," ").concat(this.DistanceUnitLabel())}},{key:"GetAltitudeAsString",value:function(t){return"".concat(this.AltitudeMtoU(t).toFixed(this.CurAltitudeUnit.digits)," ").concat(this.AltitudeUnitLabel())}},{key:"GetAngleAsString",value:function(t){return"".concat(this.AngleDegtoU(t).toFixed(this.CurAngleUnit.digits)," ").concat(this.AngleUnitLabel())}},{key:"GetVolumeAsString",value:function(t){return"".concat(this.VolumeM3ToU3(t).toFixed(this.CurVolumeUnit.digits)," ").concat(this.VolumeUnitLabel())}},{key:"GetAreaAsString",value:function(t){return"".concat(this.AreaM2ToU2(t).toFixed(this.CurAreaUnit.digits)," ").concat(this.AreaUnitLabel())}},{key:"UnitLabel",value:function(t){return t.label}},{key:"UnitText",value:function(t){return t.labelText}},{key:"FindUnit",value:function(t,e){for(var i=t.length;i--;)if(e===t[i].type)return t[i];return null}},{key:"ConvertUnitsOfUnitArr",value:function(t,e,i,r){var s=this.FindUnit(t,e),o=0;s&&(o=this.UnitToMeter(i,s));var n=this.FindUnit(t,r);return n?this.MeterToUnit(o,n):0}},{key:"DistanceUtoU",value:function(t,e,i){return this.ConvertUnitsOfUnitArr(a.d,t,e,i)}},{key:"AreaUtoU",value:function(t,e,i){return this.ConvertUnitsOfUnitArr(a.c,t,e,i)}},{key:"AngleUtoU",value:function(t,e,i){return this.ConvertUnitsOfUnitArr(a.b,t,e,i)}},{key:"AltitudeUtoU",value:function(t,e,i){return this.ConvertUnitsOfUnitArr(a.a,t,e,i)}},{key:"VolumeUtoU",value:function(t,e,i){return this.ConvertUnitsOfUnitArr(a.e,t,e,i)}},{key:"SetDistanceUnit",value:function(t){this.CurDistanceUnit=this.FindUnit(a.d,t.toLowerCase())}},{key:"SetAreaUnit",value:function(t){this.CurAreaUnit=this.FindUnit(a.c,t.toLowerCase())}},{key:"SetAltitudeUnit",value:function(t){this.CurAltitudeUnit=this.FindUnit(a.a,t.toLowerCase())}},{key:"SetAngleUnit",value:function(t){this.CurAngleUnit=this.FindUnit(a.b,t.toLowerCase())}},{key:"SetVolumeUnit",value:function(t){this.CurVolumeUnit=this.FindUnit(a.e,t.toLowerCase())}}]),t}()},function(t,e,i){var r=i(92),s=i(93),o=i(94);t.exports=function(t){return r(t)||s(t)||o()}},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(){s()(this,t)}return n()(t,[{key:"Parse",value:function(t,e,i,r){var s=t.type.toLowerCase();if("featurecollection"===s){if(t.features)for(var o=t.features.length,n=0;n<o;n++)this.Parse(t.features[n],e,i,r)}else if("geometrycollection"===s){if(t.geometries)for(var a=t.geometries.length,h=0;h<a;h++)this.ParseGeometryCollection(t.geometries[h],e,i,r)}else"feature"===s&&this.ParseFeature(t,e,i,r)}},{key:"ParseFeature",value:function(t,e,i,r){var s,o,n=t.geometry,a=t.properties;n&&(s=n.coordinates,o=n.type),o&&s&&this.ParseGeo(o,a,s,e,i,r)}},{key:"ParseGeometryCollection",value:function(t,e,i,r){var s=t.coordinates,o=t.type,n=t.properties;o&&s&&this.ParseGeo(o,n,s,e,i,r)}},{key:"ParseGeo",value:function(t,e,i,r,s,o){switch(t.toLowerCase()){case"point":this.Point(e,i,r);break;case"multipoint":this.MultiPoint(e,i,r);break;case"linestring":this.Line(e,i,s);break;case"multilinestring":this.MultiLine(e,i,s);break;case"polygon":this.Polygon(e,i,o);break;case"multipolygon":this.MultiPolygon(e,i,o)}}},{key:"Point",value:function(t,e,i){i.attribs.push(t),this.FillPointData(e,i)}},{key:"MultiPoint",value:function(t,e,i){for(var r=e.length,s=0;s<r;s++)i.attribs.push(t),this.FillPointData(e[s],i)}},{key:"FillPointData",value:function(t,e){e.coords.push(t[0],t[1]),3===t.length?e.coordsZ.push(t[2]):e.coordsZ.push(0)}},{key:"Line",value:function(t,e,i){i.attribs.push(t),this.FillLineData(e,i.coords,i.coordsZ)}},{key:"MultiLine",value:function(t,e,i){for(var r=e.length,s=0;s<r;s++)i.attribs.push(t),this.FillLineData(e[s],i.coords,i.coordsZ)}},{key:"FillLineData",value:function(t,e,i){var r;e[e.length]=[],i[i.length]=[];var s=t.length;if(3===t[0].length)for(r=0;r<s;r++){var o=t[r];e[e.length-1].push(o[0],o[1]),i[i.length-1].push(o[2])}else if(2===t[0].length)for(r=0;r<s;r++){var n=t[r];e[e.length-1].push(n[0],n[1]),i[i.length-1].push(0)}}},{key:"Polygon",value:function(t,e,i){var r=e.length;if(i.attribs.push(t),1===r)this.FillPolygonData(e[0],i.coords,i.coordsZ);else{var s=i.coords.length,o=i.coordsZ.length;i.coords[s]=[],i.coordsZ[o]=[];for(var n=0;n<r;n++)this.FillPolygonData(e[n],i.coords[s],i.coordsZ[o])}}},{key:"MultiPolygon",value:function(t,e,i){i.attribs.push(t);var r=i.coords.length,s=i.coordsZ.length;i.coords[r]=[],i.coordsZ[s]=[];for(var o=e.length,n=0;n<o;n++)for(var a=e[n].length,h=0;h<a;h++)this.FillPolygonData(e[n][h],i.coords[r],i.coordsZ[s])}},{key:"FillPolygonData",value:function(t,e,i){var r,s=[],o=[],n=t.length;if(3===t[0].length)for(r=0;r<n;r++){var a=t[r];s.push(a[0],a[1]),o.push(a[2])}else if(2===t[0].length)for(r=0;r<n;r++){var h=t[r];s.push(h[0],h[1]),o.push(0)}e.push(s),i.push(o)}}]),t}(),h=i(13),l=i(20),u=i(0),d=i(23),c=function(){function t(){s()(this,t)}return n()(t,[{key:"Parse2D",value:function(t,e){var i,r=t.data,s=t.filter,o=t._style.__milIcon;if(r){var n=r[0],a=n.coords,l=n.coordsZ,d=n.attribs;switch(t.objectType){case u.j.POINT:for(i=0;i<l.length;i++){var c=h.a.Point(u.b.CS_OBJECT_ARRAY,d[i],a,l,i);this.CheckMilIconAndFilter(e,d[i],c,s,o)}break;case u.j.POLYGON:for(i=0;i<a.length;i++){var f=h.a.Polygon(u.b.CS_OBJECT_ARRAY,d[i],a[i],l[i]);this.CheckMilIconAndFilter(e,d[i],f,s,o)}break;case u.j.LINE:for(i=0;i<a.length;i++){var p=h.a.Line(u.b.CS_OBJECT_ARRAY,d[i],a[i],l[i]);this.CheckMilIconAndFilter(e,d[i],p,s,o)}break;case u.j.SHAPE:for(i=0;i<l.length;i++){var F=h.a.Shape(u.b.CS_OBJECT_ARRAY,d[i],a,l,r[0].typeProps,i);this.CheckMilIconAndFilter(e,d[i],F,s,o)}break;case u.j.ARCAREA:for(i=0;i<l.length;i++){var y=h.a.ArcArea(u.b.CS_OBJECT_ARRAY,d[i],a,l,r[0].typeProps,i);this.CheckMilIconAndFilter(e,d[i],y,s,o)}}}}},{key:"Parse3D",value:function(t,e,i){var r,s=t.filter,o=t._style.__milIcon;if(e){var n=e.coords,a=e.zParams,l=e.attribs;switch(e.shapeName){case u.i.POINT:for(r=0;r<n.length/2;r++){var d=h.a.Point3D(l[r],n,a,r);this.CheckMilIconAndFilter(i,l[r],d,s,o)}break;case u.i.LINE:case u.i.POLYGON:for(r=0;r<n.length;r++){var c=h.a.PolyLine3D(l[r],n[r],a.minZ[r],a.minZMode[r],a.maxZ[r],a.maxZMode[r]);this.CheckMilIconAndFilter(i,l[r],c,s,o)}break;case u.i.ELLIPSE:case u.i.CIRCLE:for(r=0;r<n.length/2;r++){var f=h.a.EllipseCircle3D(l[r],n,a,e.typeProps,r,e.shapeName);this.CheckMilIconAndFilter(i,l[r],f,s,o)}break;case u.i.RECTANGLE:for(r=0;r<n.length;r++){var p=h.a.Rectangle3D(l[r],n[r],a.minZ[r],a.minZMode[r],a.maxZ[r],a.maxZMode[r]);this.CheckMilIconAndFilter(i,l[r],p,s,o)}break;case u.i.ARCAREA:for(r=0;r<n.length/2;r++){var F=h.a.ArcArea3D(l[r],n,a,e.typeProps,r);this.CheckMilIconAndFilter(i,l[r],F,s,o)}break;case u.i.ORBIT:for(r=0;r<n.length;r++){var y=h.a.Orbit3D(l[r],n[r],a,e.typeProps,r);this.CheckMilIconAndFilter(i,l[r],y,s,o)}break;case u.i.POLYARC:for(r=0;r<n.length;r++){var A=h.a.PolyArc3D(l[r],n,a,e.typeProps,r);this.CheckMilIconAndFilter(i,l[r],A,s,o)}break;case u.i.CORRIDOR:for(r=0;r<n.length;r++){var g=h.a.Corridor3D(l[r],n[r],a,e.typeProps,r);this.CheckMilIconAndFilter(i,l[r],g,s,o)}break;case u.i.TRACK:for(r=0;r<n.length;r++){var C=h.a.Track3D(l[r],n[r],a,e.typeProps,r);this.CheckMilIconAndFilter(i,l[r],C,s,o)}}}}},{key:"CheckMilIconAndFilter",value:function(t,e,i,r,s){if(s){var o=d.a.ParseIconCode(s,e);i.mil={IconStr:o},d.a.AddIcon(i.mil)}r?l.a.GetResult(JSON.parse(JSON.stringify(r)),e)&&t.push(i):t.push(i)}}]),t}();i.d(e,"b",function(){return f}),i.d(e,"a",function(){return p});var f=new a,p=new c},function(t,e){e.read=function(t,e,i,r,s){var o,n,a=8*s-r-1,h=(1<<a)-1,l=h>>1,u=-7,d=i?s-1:0,c=i?-1:1,f=t[e+d];for(d+=c,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+d],d+=c,u-=8);for(n=o&(1<<-u)-1,o>>=-u,u+=r;u>0;n=256*n+t[e+d],d+=c,u-=8);if(0===o)o=1-l;else{if(o===h)return n?NaN:1/0*(f?-1:1);n+=Math.pow(2,r),o-=l}return(f?-1:1)*n*Math.pow(2,o-r)},e.write=function(t,e,i,r,s,o){var n,a,h,l=8*o-s-1,u=(1<<l)-1,d=u>>1,c=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,F=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,n=u):(n=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-n))<1&&(n--,h*=2),(e+=n+d>=1?c/h:c*Math.pow(2,1-d))*h>=2&&(n++,h/=2),n+d>=u?(a=0,n=u):n+d>=1?(a=(e*h-1)*Math.pow(2,s),n+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),n=0));s>=8;t[i+f]=255&a,f+=p,a/=256,s-=8);for(n=n<<s|a,l+=s;l>0;t[i+f]=255&n,f+=p,n/=256,l-=8);t[i+f-p]|=128*F}},function(t,e,i){"use strict";t.exports=function(t,e,i){var s=t*e,o=r*t,n=o-(o-t),a=t-n,h=r*e,l=h-(h-e),u=e-l,d=a*u-(s-n*l-a*l-n*u);if(i)return i[0]=d,i[1]=s,i;return[d,s]};var r=+(Math.pow(2,27)+1)},function(t,e,i){t.exports=function(){"use strict";function t(t,r,s,o,n){!function t(i,r,s,o,n){for(;o>s;){if(o-s>600){var a=o-s+1,h=r-s+1,l=Math.log(a),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1),c=Math.max(s,Math.floor(r-h*u/a+d)),f=Math.min(o,Math.floor(r+(a-h)*u/a+d));t(i,r,c,f,n)}var p=i[r],F=s,y=o;for(e(i,s,r),n(i[o],p)>0&&e(i,s,o);F<y;){for(e(i,F,y),F++,y--;n(i[F],p)<0;)F++;for(;n(i[y],p)>0;)y--}0===n(i[s],p)?e(i,s,y):e(i,++y,o),y<=r&&(s=y+1),r<=y&&(o=y-1)}}(t,r,s||0,o||t.length-1,n||i)}function e(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function i(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function o(t,e){n(t,0,t.children.length,e,t)}function n(t,e,i,r,s){s||(s=p(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var o=e;o<i;o++){var n=t.children[o];a(s,t.leaf?r(n):n)}return s}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(e,i,r,s,o){for(var n=[i,r];n.length;)if(!((r=n.pop())-(i=n.pop())<=s)){var a=i+Math.ceil((r-i)/s/2)*s;t(e,a,i,r,o),n.push(i,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var r=this.toBBox,s=[];e;){for(var o=0;o<e.children.length;o++){var n=e.children[o],a=e.leaf?r(n):n;f(t,a)&&(e.leaf?i.push(n):c(t,a)?this._all(n,i):s.push(n))}e=s.pop()}return i},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var r=0;r<e.children.length;r++){var s=e.children[r],o=e.leaf?this.toBBox(s):s;if(f(t,o)){if(e.leaf||c(t,o))return!0;i.push(s)}}e=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var i,r,o,n=this.data,a=this.toBBox(t),h=[],l=[];n||h.length;){if(n||(n=h.pop(),r=h[h.length-1],i=l.pop(),o=!0),n.leaf){var u=s(t,n.children,e);if(-1!==u)return n.children.splice(u,1),h.push(n),this._condense(h),this}o||n.leaf||!c(n,a)?r?(i++,n=r.children[i],o=!1):n=null:(h.push(n),l.push(i),i=0,r=n,n=n.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},r.prototype._build=function(t,e,i,r){var s,n=i-e+1,a=this._maxEntries;if(n<=a)return o(s=p(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(a)),a=Math.ceil(n/Math.pow(a,r-1))),(s=p([])).leaf=!1,s.height=r;var h=Math.ceil(n/a),l=h*Math.ceil(Math.sqrt(a));F(t,e,i,l,this.compareMinX);for(var u=e;u<=i;u+=l){var d=Math.min(u+l-1,i);F(t,u,d,h,this.compareMinY);for(var c=u;c<=d;c+=h){var f=Math.min(c+h-1,d);s.children.push(this._build(t,c,f,r-1))}}return o(s,this.toBBox),s},r.prototype._chooseSubtree=function(t,e,i,r){for(;r.push(e),!e.leaf&&r.length-1!==i;){for(var s=1/0,o=1/0,n=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=u(h),d=(c=t,f=h,(Math.max(f.maxX,c.maxX)-Math.min(f.minX,c.minX))*(Math.max(f.maxY,c.maxY)-Math.min(f.minY,c.minY))-l);d<o?(o=d,s=l<s?l:s,n=h):d===o&&l<s&&(s=l,n=h)}e=n||e.children[0]}var c,f;return e},r.prototype._insert=function(t,e,i){var r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,e,s);for(o.children.push(t),a(o,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)},r.prototype._split=function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),a=p(i.children.splice(n,i.children.length-n));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},r.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,i){for(var r,s,o,a,h,l,d,c=1/0,f=1/0,p=e;p<=i-e;p++){var F=n(t,0,p,this.toBBox),y=n(t,p,i,this.toBBox),A=(s=F,o=y,a=void 0,h=void 0,l=void 0,d=void 0,a=Math.max(s.minX,o.minX),h=Math.max(s.minY,o.minY),l=Math.min(s.maxX,o.maxX),d=Math.min(s.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,d-h)),g=u(F)+u(y);A<c?(c=A,r=p,f=g<f?g:f):A===c&&g<f&&(f=g,r=p)}return r||i-e},r.prototype._chooseSplitAxis=function(t,e,i){var r=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,i,r){t.children.sort(r);for(var s=this.toBBox,o=n(t,0,e,s),h=n(t,i-e,i,s),l=d(o)+d(h),u=e;u<i-e;u++){var c=t.children[u];a(o,t.leaf?s(c):c),l+=d(o)}for(var f=i-e-1;f>=e;f--){var p=t.children[f];a(h,t.leaf?s(p):p),l+=d(h)}return l},r.prototype._adjustParentBBoxes=function(t,e,i){for(var r=i;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},function(t,e,i){t.exports.VectorTile=i(99),t.exports.VectorTileFeature=i(44),t.exports.VectorTileLayer=i(43)},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o);function a(t,e,i,r,s,o){if(s-r<=i)return;const n=r+s>>1;!function t(e,i,r,s,o,n){for(;o>s;){if(o-s>600){const a=o-s+1,h=r-s+1,l=Math.log(a),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1),c=Math.max(s,Math.floor(r-h*u/a+d)),f=Math.min(o,Math.floor(r+(a-h)*u/a+d));t(e,i,r,c,f,n)}const a=i[2*r+n];let l=s,u=o;for(h(e,i,s,r),i[2*o+n]>a&&h(e,i,s,o);l<u;){for(h(e,i,l,u),l++,u--;i[2*l+n]<a;)l++;for(;i[2*u+n]>a;)u--}i[2*s+n]===a?h(e,i,s,u):h(e,i,++u,o),u<=r&&(s=u+1),r<=u&&(o=u-1)}}(t,e,n,r,s,o%2),a(t,e,i,r,n-1,o+1),a(t,e,i,n+1,s,o+1)}function h(t,e,i,r){l(t,i,r),l(e,2*i,2*r),l(e,2*i+1,2*r+1)}function l(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function u(t,e,i,r){const s=t-i,o=e-r;return s*s+o*o}const d=t=>t[0],c=t=>t[1];class f{constructor(t,e=d,i=c,r=64,s=Float64Array){this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,n=this.ids=new o(t.length),h=this.coords=new s(2*t.length);for(let r=0;r<t.length;r++)n[r]=r,h[2*r]=e(t[r]),h[2*r+1]=i(t[r]);a(n,h,r,0,n.length-1,0)}range(t,e,i,r){return function(t,e,i,r,s,o,n){const a=[0,t.length-1,0],h=[];let l,u;for(;a.length;){const d=a.pop(),c=a.pop(),f=a.pop();if(c-f<=n){for(let n=f;n<=c;n++)l=e[2*n],u=e[2*n+1],l>=i&&l<=s&&u>=r&&u<=o&&h.push(t[n]);continue}const p=Math.floor((f+c)/2);l=e[2*p],u=e[2*p+1],l>=i&&l<=s&&u>=r&&u<=o&&h.push(t[p]);const F=(d+1)%2;(0===d?i<=l:r<=u)&&(a.push(f),a.push(p-1),a.push(F)),(0===d?s>=l:o>=u)&&(a.push(p+1),a.push(c),a.push(F))}return h}(this.ids,this.coords,t,e,i,r,this.nodeSize)}within(t,e,i){return function(t,e,i,r,s,o){const n=[0,t.length-1,0],a=[],h=s*s;for(;n.length;){const l=n.pop(),d=n.pop(),c=n.pop();if(d-c<=o){for(let s=c;s<=d;s++)u(e[2*s],e[2*s+1],i,r)<=h&&a.push(t[s]);continue}const f=Math.floor((c+d)/2),p=e[2*f],F=e[2*f+1];u(p,F,i,r)<=h&&a.push(t[f]);const y=(l+1)%2;(0===l?i-s<=p:r-s<=F)&&(n.push(c),n.push(f-1),n.push(y)),(0===l?i+s>=p:r+s>=F)&&(n.push(f+1),n.push(d),n.push(y))}return a}(this.ids,this.coords,t,e,i,this.nodeSize)}}i.d(e,"a",function(){return F});var p={minZoom:0,maxZoom:6,minPoints:2,radius:40,extent:256,nodeSize:64,generateId:!1,reduce:null,map:function(t){return t}},F=function(){function t(e){s()(this,t),this.options=this.extend(Object.create(p),e),this.trees=new Array(this.options.maxZoom+1)}return n()(t,[{key:"load",value:function(t){var e=this.options,i=e.minZoom,r=e.maxZoom,s=e.nodeSize;this.objects=t;for(var o=[],n=t.length,a=0;a<n;a++)o.push(this.createPointCluster(t[a],a));this.trees[r+1]=new f(o,this.getX,this.getY,s,Float64Array);for(var h=r;h>=i;h--)o=this._cluster(o,h),this.trees[h]=new f(o,this.getX,this.getY,s,Float64Array);return this}},{key:"getClusters",value:function(t,e){var i=t.LL.y,r=t.LL.x,s=t.UR.y,o=t.UR.x;t.UR.y-t.LL.y>=360&&(i=-180,s=180);var n=this.trees[this._limitZoom(e)],a=n.range(this.lngX(i),this.latY(o),this.lngX(s),this.latY(r)),h=[],l=!0,u=!1,d=void 0;try{for(var c,f=a[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value,F=n.points[p];if(F.id)var y=this.getLeaves(F.id,1/0,0);h.push(F.numPoints?this.getClusterJSON(F,y):this.objects[F.index])}}catch(t){u=!0,d=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}return h}},{key:"getChildren",value:function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",s=this.trees[i];if(!s)throw new Error(r);var o=s.points[e];if(!o)throw new Error(r);var n=this.options.radius/(this.options.extent*Math.pow(2,i-1)),a=s.within(o.x,o.y,n),h=[],l=!0,u=!1,d=void 0;try{for(var c,f=a[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value,F=s.points[p];F.parentId===t&&h.push(F.numPoints?this.getClusterJSON(F):this.objects[F.index])}}catch(t){u=!0,d=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}if(0===h.length)throw new Error(r);return h}},{key:"getLeaves",value:function(t,e,i){e=e||10,i=i||0;var r=[];return this._appendLeaves(r,t,e,i,0),r}},{key:"getTile",value:function(t,e,i){var r=this.trees[this._limitZoom(t)],s=Math.pow(2,t),o=this.options,n=o.extent,a=o.radius/n,h=(i-a)/s,l=(i+1+a)/s,u={features:[]};return this._addTileFeatures(r.range((e-a)/s,h,(e+1+a)/s,l),r.points,e,i,s,u),0===e&&this._addTileFeatures(r.range(1-a/s,h,1,l),r.points,s,i,s,u),e===s-1&&this._addTileFeatures(r.range(0,h,a/s,l),r.points,-1,i,s,u),u.features.length?u:null}},{key:"getClusterExpansionZoom",value:function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}},{key:"createPointCluster",value:function(t,e){return{x:this.lngX(t.coords[0]),y:this.latY(t.coords[1]),zoom:1/0,index:e,parentId:-1}}},{key:"getClusterJSON",value:function(t,e){return{id:t.id,properties:this.getClusterProperties(t),coordinates:[this.xLng(t.x),this.yLat(t.y)],objects:e}}},{key:"getClusterProperties",value:function(t){var e=t.numPoints,i=e>=1e4?"".concat(Math.round(e/1e3),"k"):e>=1e3?"".concat(Math.round(e/100)/10,"k"):e;return this.extend(this.extend({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}},{key:"lngX",value:function(t){return t/360+.5}},{key:"latY",value:function(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}},{key:"xLng",value:function(t){return 360*(t-.5)}},{key:"yLat",value:function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}},{key:"extend",value:function(t,e){for(var i in e)t[i]=e[i];return t}},{key:"createCluster",value:function(t,e,i,r,s){return{x:t,y:e,zoom:1/0,id:i,parentId:-1,numPoints:r,properties:s}}},{key:"getX",value:function(t){return t.x}},{key:"getY",value:function(t){return t.y}},{key:"_cluster",value:function(t,e){for(var i=[],r=this.options,s=r.radius,o=r.extent,n=r.reduce,a=r.minPoints,h=s/(o*Math.pow(2,e)),l=0;l<t.length;l++){var u=t[l];if(!(u.zoom<=e)){u.zoom=e;var d=this.trees[e+1],c=d.within(u.x,u.y,h),f=u.numPoints||1,p=f,F=!0,y=!1,A=void 0;try{for(var g,C=c[Symbol.iterator]();!(F=(g=C.next()).done);F=!0){var b=g.value,T=d.points[b];T.zoom>e&&(p+=T.numPoints||1)}}catch(t){y=!0,A=t}finally{try{F||null==C.return||C.return()}finally{if(y)throw A}}if(p>=a){var v=u.x*f,L=u.y*f,S=n&&f>1?this._map(u,!0):null,x=(l<<5)+(e+1)+this.objects.length,O=!0,R=!1,m=void 0;try{for(var D,E=c[Symbol.iterator]();!(O=(D=E.next()).done);O=!0){var P=D.value,_=d.points[P];if(!(_.zoom<=e)){_.zoom=e;var I=_.numPoints||1;v+=_.x*I,L+=_.y*I,_.parentId=x,n&&(S||(S=this._map(u,!0)),n(S,this._map(_)))}}}catch(t){R=!0,m=t}finally{try{O||null==E.return||E.return()}finally{if(R)throw m}}u.parentId=x,i.push(this.createCluster(v/p,L/p,x,p,S))}else if(i.push(u),p>1){var B=!0,G=!1,w=void 0;try{for(var M,U=c[Symbol.iterator]();!(B=(M=U.next()).done);B=!0){var k=M.value,V=d.points[k];V.zoom<=e||(V.zoom=e,i.push(V))}}catch(t){G=!0,w=t}finally{try{B||null==U.return||U.return()}finally{if(G)throw w}}}}}return i}},{key:"_appendLeaves",value:function(t,e,i,r,s){var o=this.getChildren(e),n=!0,a=!1,h=void 0;try{for(var l,u=o[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var d=l.value,c=d.properties;if(c&&c.cluster?s+c.point_count<=r?s+=c.point_count:s=this._appendLeaves(t,c.cluster_id,i,r,s):s<r?s++:t.push(d),t.length===i)break}}catch(t){a=!0,h=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw h}}return s}},{key:"_addTileFeatures",value:function(t,e,i,r,s,o){var n=!0,a=!1,h=void 0;try{for(var l,u=t[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var d=e[l.value],c=d.numPoints,f={type:1,geometry:[[Math.round(this.options.extent*(d.x*s-i)),Math.round(this.options.extent*(d.y*s-r))]],tags:c?this.getClusterProperties(d):this.objects[d.index].properties},p=void 0;c?p=d.id:this.options.generateId?p=d.index:this.objects[d.index].id&&(p=this.objects[d.index].id),void 0!==p&&(f.id=p),o.features.push(f)}}catch(t){a=!0,h=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw h}}}},{key:"_getOriginId",value:function(t){return t-this.objects.length>>5}},{key:"_getOriginZoom",value:function(t){return(t-this.objects.length)%32}},{key:"_map",value:function(t,e){if(t.numPoints)return e?this.extend({},t.properties):t.properties;var i=this.objects[t.index].properties,r=this.options.map(i);return e&&r===i?this.extend({},r):r}},{key:"_limitZoom",value:function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}}]),t}()},function(t,e,i){"use strict";var r=6,s="AJSAJS",o="AFAFAF",n=65,a=73,h=79,l=86,u=90;function d(t){return t*(Math.PI/180)}function c(t){return t/Math.PI*180}function f(t){var e=t.northing,i=t.easting,r=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var o,n,a,h,l,u,d,p,F=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),A=i-5e5,g=e;r<"N"&&(g-=1e7),u=6*(s-1)-180+3,p=(d=g/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),o=F/Math.sqrt(1-.00669438*Math.sin(p)*Math.sin(p)),n=Math.tan(p)*Math.tan(p),a=.006739496752268451*Math.cos(p)*Math.cos(p),h=.99330562*F/Math.pow(1-.00669438*Math.sin(p)*Math.sin(p),1.5),l=A/(.9996*o);var C=p-o*Math.tan(p)/h*(l*l/2-(5+3*n+10*a-4*a*a-.06065547077041606)*l*l*l*l/24+(61+90*n+298*a+45*n*n-1.6983531815716497-3*a*a)*l*l*l*l*l*l/720);C=c(C);var b,T=(l-(1+2*n+a)*l*l*l/6+(5-2*a+28*n-3*a*a+.05391597401814761+24*n*n)*l*l*l*l*l/120)/Math.cos(p);if(T=u+c(T),t.accuracy){var v=f({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:v.lat,right:v.lon,bottom:C,left:T}}else b={lat:C,lon:T};return b}function p(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function F(t){var e=t%r;return 0===e&&(e=r),e}function y(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,r=null,d="",c=0;!/[A-Z]/.test(e=t.charAt(c));){if(c>=2)throw"MGRSPoint bad conversion from: "+t;d+=e,c++}var f=parseInt(d,10);if(0===c||c+3>i)throw"MGRSPoint bad conversion from: "+t;var p=t.charAt(c++);if(p<="A"||"B"===p||"Y"===p||p>="Z"||"I"===p||"O"===p)throw"MGRSPoint zone letter "+p+" not handled: "+t;r=t.substring(c,c+=2);for(var y=F(f),g=function(t,e){var i=s.charCodeAt(e-1),r=1e5,o=!1;for(;i!==t.charCodeAt(0);){if(++i===a&&i++,i===h&&i++,i>u){if(o)throw"Bad character: "+t;i=n,o=!0}r+=1e5}return r}(r.charAt(0),y),C=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=o.charCodeAt(e-1),r=0,s=!1;for(;i!==t.charCodeAt(0);){if(++i===a&&i++,i===h&&i++,i>l){if(s)throw"Bad character: "+t;i=n,s=!0}r+=1e5}return r}(r.charAt(1),y);C<A(p);)C+=2e6;var b=i-c;if(b%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var T,v,L,S=b/2,x=0,O=0;return S>0&&(T=1e5/Math.pow(10,S),v=t.substring(c,c+S),x=parseFloat(v)*T,L=t.substring(c+S),O=parseFloat(L)*T),{easting:x+g,northing:O+C,zoneLetter:p,zoneNumber:f,accuracy:T}}function A(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}e.a={forward:function(t,e){return e=e||5,function(t,e){var i="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(T=t.easting,v=t.northing,L=t.zoneNumber,S=F(L),x=Math.floor(T/1e5),O=Math.floor(v/1e5)%20,d=x,c=O,f=S,p=f-1,y=s.charCodeAt(p),A=o.charCodeAt(p),g=y+d-1,C=A+c,b=!1,g>u&&(g=g-u+n-1,b=!0),(g===a||y<a&&g>a||(g>a||y<a)&&b)&&g++,(g===h||y<h&&g>h||(g>h||y<h)&&b)&&++g===a&&g++,g>u&&(g=g-u+n-1),C>l?(C=C-l+n-1,b=!0):b=!1,(C===a||A<a&&C>a||(C>a||A<a)&&b)&&C++,(C===h||A<h&&C>h||(C>h||A<h)&&b)&&++C===a&&C++,C>l&&(C=C-l+n-1),String.fromCharCode(g)+String.fromCharCode(C))+i.substr(i.length-5,e)+r.substr(r.length-5,e);var d,c,f,p,y,A,g,C,b;var T,v,L,S,x,O}(function(t){var e,i,r,s,o,n,a,h=t.lat,l=t.lon,u=6378137,c=d(h),f=d(l);a=Math.floor((l+180)/6)+1,180===l&&(a=60);h>=56&&h<64&&l>=3&&l<12&&(a=32);h>=72&&h<84&&(l>=0&&l<9?a=31:l>=9&&l<21?a=33:l>=21&&l<33?a=35:l>=33&&l<42&&(a=37));n=d(6*(a-1)-180+3),.006739496752268451,e=u/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),i=Math.tan(c)*Math.tan(c),r=.006739496752268451*Math.cos(c)*Math.cos(c),s=Math.cos(c)*(f-n),o=u*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c));var F=.9996*e*(s+(1-i+r)*s*s*s/6+(5-18*i+i*i+72*r-.39089081163157013)*s*s*s*s*s/120)+5e5,y=.9996*(o+e*Math.tan(c)*(s*s/2+(5-i+9*r+4*r*r)*s*s*s*s/24+(61-58*i+i*i+600*r-2.2240339282485886)*s*s*s*s*s*s/720));h<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(F),zoneNumber:a,zoneLetter:p(h)}}({lat:t[1],lon:t[0]}),e)},inverse:function(t){var e=f(y(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:function(t){var e=f(y(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat];return[(e.left+e.right)/2,(e.top+e.bottom)/2]}}},function(t,e){function i(t,e,i,r,s,o,n){try{var a=t[o](n),h=a.value}catch(t){return void i(t)}a.done?e(h):Promise.resolve(h).then(r,s)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(s,o){var n=t.apply(e,r);function a(t){i(n,s,o,a,h,"next",t)}function h(t){i(n,s,o,a,h,"throw",t)}a(void 0)})}}},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=function(){function t(e){s()(this,t),this.FGlobe=e,this.FActive,this.OrjBMPWidth=0,this.OrjBMPHeight=0,this.Fwrad=new a.E(-180,-90,180,90),this.FRotwrad=new a.E(0,0,0,0),this.FRotationRad,this.FRotateExists=!1,this.FRotationOrg=new a.u(0,0),this.FRotationCenter=new a.w(0,0,0),this.FViewBoundScale=.75,this.FColor=new Float32Array([1,1,1]),this.opacity=1,this.FClearBelowAlfa=0,this.FProjText=null,this.OrjBMP=null,this.temp2d=new a.u(0,0),this.imgOk=!1}return n()(t,[{key:"Create",value:function(t,e,i,r,s){if(this.FActive=e,this.FClearBelowAlfa=s,this.FRotationRad=a.b.DegreeToRadyan(r),i?(this.Fwrad.LL.x=a.b.DegreeToRadyan(i.ll.y),this.Fwrad.LL.y=a.b.DegreeToRadyan(i.ll.x),this.Fwrad.UR.x=a.b.DegreeToRadyan(i.ur.y),this.Fwrad.UR.y=a.b.DegreeToRadyan(i.ur.x)):this.Fwrad.DegreeToRadyan(),this.imgOk){var o=document.createElement("canvas");o.width=t.width,o.height=t.height;var n=o.getContext("2d");n.drawImage(t,0,0);for(var h=n.getImageData(0,0,o.width,o.height),l=h.data,u=o.width;u--;)l[4*u+3]=0,l[4*u+(o.height-1)*o.width*4+3]=0;for(u=o.height;u--;)l[u*o.width*4+3]=0,l[4*(u*o.width+o.width-1)+3]=0;this.OrjBMP=h,this.OrjBMPWidth=t.width,this.OrjBMPHeight=t.height,this.UpdateCellInfos(),this.FActive&&this.LoadTexture()}else this.FActive=!1}},{key:"UpdateCellInfos",value:function(){this.FRotateExists=!a.b.CSVerySuperZero(a.b.RadyanToDegree(this.FRotationRad)),a.b.CSExpandGeoRegion(this.Fwrad,(this.Fwrad.UR.y-this.Fwrad.LL.y)/this.OrjBMPWidth,(this.Fwrad.UR.x-this.Fwrad.LL.x)/this.OrjBMPHeight),this.FRotationOrg.x=(this.Fwrad.LL.y+this.Fwrad.UR.y)/2,this.FRotationOrg.y=(this.Fwrad.LL.x+this.Fwrad.UR.x)/2,a.b.GeoTo3DP(this.FRotationOrg,h.z.GLOBE_RADIUS,this.FRotationCenter),this.FRotationCenter.Normalize(),this.CalcRotationWorld(),this.FGlobe.AddRasterOverlayToCells(this)}},{key:"LoadTexture",value:function(){this.OrjBMP&&(this.FProjText=this.FGlobe.XNPtRY(!1,!0,this.OrjBMP)),this.OrjBMP=null}},{key:"CalcRotationWorld",value:function(){this.FRotateExists?(this.FRotwrad.Clear(),this.temp2d.SetV(this.Fwrad.LL.y,this.Fwrad.LL.x),this.FRotwrad.CSGrowGeoWorld(this.Getp(this.temp2d)),this.temp2d.SetV(this.Fwrad.UR.y,this.Fwrad.LL.x),this.FRotwrad.CSGrowGeoWorld(this.Getp(this.temp2d)),this.temp2d.SetV(this.Fwrad.UR.y,this.Fwrad.UR.x),this.FRotwrad.CSGrowGeoWorld(this.Getp(this.temp2d)),this.temp2d.SetV(this.Fwrad.LL.y,this.Fwrad.UR.x),this.FRotwrad.CSGrowGeoWorld(this.Getp(this.temp2d))):(this.FRotwrad.LL.x=this.Fwrad.LL.x,this.FRotwrad.LL.y=this.Fwrad.LL.y,this.FRotwrad.UR.x=this.Fwrad.UR.x,this.FRotwrad.UR.y=this.Fwrad.UR.y)}},{key:"Getp",value:function(t){var e=new a.w(0,0,0),i=new a.u(0,0);return a.b.GeoTo3DP(t,h.z.GLOBE_RADIUS,e),e.Normalize(),a.b.RotatePointAroundVector(e,this.FRotationCenter.x,this.FRotationCenter.y,this.FRotationCenter.z,this.FRotationRad),e.DotProductSetP(e,h.z.GLOBE_RADIUS),a.b.CarToSpher2(e,i),i}},{key:"RemoveTexture",value:function(){this.FProjText&&this.FGlobe.gl.deleteTexture(this.FProjText),this.FProjText=null}},{key:"SetActive",value:function(t,e){t!==this.FActive&&(this.FActive=t,t?this.LoadTexture():this.RemoveTexture(),e&&this.FGlobe.DrawRender())}}]),t}()},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=i(81),s=i(30),o=i(82);function n(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return l(this,t,e,i)}function l(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,r){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=c(t,e);return t}(t,e,i,r):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,i),s=(t=a(t,r)).write(e,i);s!==r&&(t=t.slice(0,s));return t}(t,e,i):function(t,e){if(h.isBuffer(e)){var i=0|f(e.length);return 0===(t=a(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):c(t,e);if("Buffer"===e.type&&o(e.data))return c(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function c(t,e){var i=e.length<0?0:0|f(e.length);t=a(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return N(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function F(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,i);case"utf8":case"utf-8":return O(this,e,i);case"ascii":return m(this,e,i);case"latin1":case"binary":return D(this,e,i);case"base64":return x(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function A(t,e,i,r,s){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:g(t,e,i,r,s);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):g(t,[e],i,r,s);throw new TypeError("val must be string, number or Buffer")}function g(t,e,i,r,s){var o,n=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;n=2,a/=2,h/=2,i/=2}function l(t,e){return 1===n?t[e]:t.readUInt16BE(e*n)}if(s){var u=-1;for(o=i;o<a;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===h)return u*n}else-1!==u&&(o-=o-u),u=-1}else for(i+h>a&&(i=a-h),o=i;o>=0;o--){for(var d=!0,c=0;c<h;c++)if(l(t,o+c)!==l(e,c)){d=!1;break}if(d)return o}return-1}function C(t,e,i,r){i=Number(i)||0;var s=t.length-i;r?(r=Number(r))>s&&(r=s):r=s;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var n=0;n<r;++n){var a=parseInt(e.substr(2*n,2),16);if(isNaN(a))return n;t[i+n]=a}return n}function b(t,e,i,r){return z(j(e,t.length-i),t,i,r)}function T(t,e,i,r){return z(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function v(t,e,i,r){return T(t,e,i,r)}function L(t,e,i,r){return z(N(e),t,i,r)}function S(t,e,i,r){return z(function(t,e){for(var i,r,s,o=[],n=0;n<t.length&&!((e-=2)<0);++n)i=t.charCodeAt(n),r=i>>8,s=i%256,o.push(s),o.push(r);return o}(e,t.length-i),t,i,r)}function x(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function O(t,e,i){i=Math.min(t.length,i);for(var r=[],s=e;s<i;){var o,n,a,h,l=t[s],u=null,d=l>239?4:l>223?3:l>191?2:1;if(s+d<=i)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[s+1]))&&(h=(31&l)<<6|63&o)>127&&(u=h);break;case 3:o=t[s+1],n=t[s+2],128==(192&o)&&128==(192&n)&&(h=(15&l)<<12|(63&o)<<6|63&n)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:o=t[s+1],n=t[s+2],a=t[s+3],128==(192&o)&&128==(192&n)&&128==(192&a)&&(h=(15&l)<<18|(63&o)<<12|(63&n)<<6|63&a)>65535&&h<1114112&&(u=h)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),s+=d}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=R));return i}(r)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return l(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return function(t,e,i,r){return u(e),e<=0?a(t,e):void 0!==i?"string"==typeof r?a(t,e).fill(i,r):a(t,e).fill(i):a(t,e)}(null,t,e,i)},h.allocUnsafe=function(t){return d(null,t)},h.allocUnsafeSlow=function(t){return d(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,s=0,o=Math.min(i,r);s<o;++s)if(t[s]!==e[s]){i=t[s],r=e[s];break}return i<r?-1:r<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=h.allocUnsafe(e),s=0;for(i=0;i<t.length;++i){var n=t[i];if(!h.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(r,s),s+=n.length}return r},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):F.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,r,s){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),e<0||i>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&e>=i)return 0;if(r>=s)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(s>>>=0)-(r>>>=0),n=(i>>>=0)-(e>>>=0),a=Math.min(o,n),l=this.slice(r,s),u=t.slice(e,i),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],n=u[d];break}return o<n?-1:n<o?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return A(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return A(this,t,e,i,!1)},h.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return C(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return T(this,t,e,i);case"latin1":case"binary":return v(this,t,e,i);case"base64":return L(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function m(t,e,i){var r="";i=Math.min(t.length,i);for(var s=e;s<i;++s)r+=String.fromCharCode(127&t[s]);return r}function D(t,e,i){var r="";i=Math.min(t.length,i);for(var s=e;s<i;++s)r+=String.fromCharCode(t[s]);return r}function E(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var s="",o=e;o<i;++o)s+=V(t[o]);return s}function P(t,e,i){for(var r=t.slice(e,i),s="",o=0;o<r.length;o+=2)s+=String.fromCharCode(r[o]+256*r[o+1]);return s}function _(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,i,r,s,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function B(t,e,i,r){e<0&&(e=65535+e+1);for(var s=0,o=Math.min(t.length-i,2);s<o;++s)t[i+s]=(e&255<<8*(r?s:1-s))>>>8*(r?s:1-s)}function G(t,e,i,r){e<0&&(e=4294967295+e+1);for(var s=0,o=Math.min(t.length-i,4);s<o;++s)t[i+s]=e>>>8*(r?s:3-s)&255}function w(t,e,i,r,s,o){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,r,o){return o||w(t,0,i,4),s.write(t,e,i,r,23,4),i+4}function U(t,e,i,r,o){return o||w(t,0,i,8),s.write(t,e,i,r,52,8),i+8}h.prototype.slice=function(t,e){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=h.prototype;else{var s=e-t;i=new h(s,void 0);for(var o=0;o<s;++o)i[o]=this[o+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=this[t],s=1,o=0;++o<e&&(s*=256);)r+=this[t+o]*s;return r},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=this[t+--e],s=1;e>0&&(s*=256);)r+=this[t+--e]*s;return r},h.prototype.readUInt8=function(t,e){return e||_(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||_(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||_(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||_(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||_(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=this[t],s=1,o=0;++o<e&&(s*=256);)r+=this[t+o]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=e,s=1,o=this[t+--r];r>0&&(s*=256);)o+=this[t+--r]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return e||_(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||_(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||_(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||_(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||_(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||_(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||_(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||_(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||_(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||I(this,t,e,i,Math.pow(2,8*i)-1,0);var s=1,o=0;for(this[e]=255&t;++o<i&&(s*=256);)this[e+o]=t/s&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||I(this,t,e,i,Math.pow(2,8*i)-1,0);var s=i-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):G(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e|=0,!r){var s=Math.pow(2,8*i-1);I(this,t,e,i,s-1,-s)}var o=0,n=1,a=0;for(this[e]=255&t;++o<i&&(n*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/n>>0)-a&255;return e+i},h.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e|=0,!r){var s=Math.pow(2,8*i-1);I(this,t,e,i,s-1,-s)}var o=i-1,n=1,a=0;for(this[e+o]=255&t;--o>=0&&(n*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/n>>0)-a&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):G(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,r){if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var s,o=r-i;if(this===t&&i<e&&e<r)for(s=o-1;s>=0;--s)t[s+e]=this[s+i];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},h.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var s=t.charCodeAt(0);s<256&&(t=s)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var n=h.isBuffer(t)?t:j(new h(t,r).toString()),a=n.length;for(o=0;o<i-e;++o)this[o+e]=n[o%a]}return this};var k=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var i;e=e||1/0;for(var r=t.length,s=null,o=[],n=0;n<r;++n){if((i=t.charCodeAt(n))>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(n+1===r){(e-=3)>-1&&o.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&o.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function N(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(k,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,i,r){for(var s=0;s<r&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}}).call(this,i(80))},function(t,e,i){"use strict";t.exports=function(t,e){var i=0|t.length,r=0|e.length;if(1===i&&1===r)return function(t,e){var i=t+e,r=i-t,s=t-(i-r)+(e-r);if(s)return[s,i];return[i]}(t[0],e[0]);var s,o,n=new Array(i+r),a=0,h=0,l=0,u=Math.abs,d=t[h],c=u(d),f=e[l],p=u(f);c<p?(o=d,(h+=1)<i&&(d=t[h],c=u(d))):(o=f,(l+=1)<r&&(f=e[l],p=u(f)));h<i&&c<p||l>=r?(s=d,(h+=1)<i&&(d=t[h],c=u(d))):(s=f,(l+=1)<r&&(f=e[l],p=u(f)));var F,y,A=s+o,g=A-s,C=o-g,b=C,T=A;for(;h<i&&l<r;)c<p?(s=d,(h+=1)<i&&(d=t[h],c=u(d))):(s=f,(l+=1)<r&&(f=e[l],p=u(f))),(C=(o=b)-(g=(A=s+o)-s))&&(n[a++]=C),b=T-((F=T+A)-(y=F-T))+(A-y),T=F;for(;h<i;)(C=(o=b)-(g=(A=(s=d)+o)-s))&&(n[a++]=C),b=T-((F=T+A)-(y=F-T))+(A-y),T=F,(h+=1)<i&&(d=t[h]);for(;l<r;)(C=(o=b)-(g=(A=(s=f)+o)-s))&&(n[a++]=C),b=T-((F=T+A)-(y=F-T))+(A-y),T=F,(l+=1)<r&&(f=e[l]);b&&(n[a++]=b);T&&(n[a++]=T);a||(n[a++]=0);return n.length=a,n}},function(t,e,i){"use strict";var r=i(31),s=i(85);t.exports=function(t,e){var i=t.length;if(1===i){var o=r(t[0],e);return o[0]?o:[o[1]]}var n=new Array(2*i),a=[.1,.1],h=[.1,.1],l=0;r(t[0],e,a),a[0]&&(n[l++]=a[0]);for(var u=1;u<i;++u){r(t[u],e,h);var d=a[1];s(d,h[0],a),a[0]&&(n[l++]=a[0]);var c=h[1],f=a[1],p=c+f,F=p-c,y=f-F;a[1]=p,y&&(n[l++]=y)}a[1]&&(n[l++]=a[1]);0===l&&(n[l++]=0);return n.length=l,n}},function(t,e,i){"use strict";t.exports=function(t,e){var i=0|t.length,r=0|e.length;if(1===i&&1===r)return function(t,e){var i=t+e,r=i-t,s=t-(i-r)+(e-r);if(s)return[s,i];return[i]}(t[0],-e[0]);var s,o,n=new Array(i+r),a=0,h=0,l=0,u=Math.abs,d=t[h],c=u(d),f=-e[l],p=u(f);c<p?(o=d,(h+=1)<i&&(d=t[h],c=u(d))):(o=f,(l+=1)<r&&(f=-e[l],p=u(f)));h<i&&c<p||l>=r?(s=d,(h+=1)<i&&(d=t[h],c=u(d))):(s=f,(l+=1)<r&&(f=-e[l],p=u(f)));var F,y,A=s+o,g=A-s,C=o-g,b=C,T=A;for(;h<i&&l<r;)c<p?(s=d,(h+=1)<i&&(d=t[h],c=u(d))):(s=f,(l+=1)<r&&(f=-e[l],p=u(f))),(C=(o=b)-(g=(A=s+o)-s))&&(n[a++]=C),b=T-((F=T+A)-(y=F-T))+(A-y),T=F;for(;h<i;)(C=(o=b)-(g=(A=(s=d)+o)-s))&&(n[a++]=C),b=T-((F=T+A)-(y=F-T))+(A-y),T=F,(h+=1)<i&&(d=t[h]);for(;l<r;)(C=(o=b)-(g=(A=(s=f)+o)-s))&&(n[a++]=C),b=T-((F=T+A)-(y=F-T))+(A-y),T=F,(l+=1)<r&&(f=-e[l]);b&&(n[a++]=b);T&&(n[a++]=T);a||(n[a++]=0);return n.length=a,n}},function(t,e,i){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,s=i*this.x+e*this.y;return this.x=r,this.y=s,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),s=e.x+i*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=s,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},function(t,e,i){"use strict";var r=i(44);function s(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){var e=null,i=t.readVarint()+t.pos;for(;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}t.exports=s,s.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e,i){"use strict";var r=i(42);function s(t,e,i,r,s){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=s,t.readFields(o,this,e)}function o(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){var i=t.readVarint()+t.pos;for(;t.pos<i;){var r=e._keys[t.readVarint()],s=e._values[t.readVarint()];e.properties[r]=s}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function n(t){for(var e,i,r=0,s=0,o=t.length,n=o-1;s<o;n=s++)e=t[s],r+=((i=t[n]).x-e.x)*(e.y+i.y);return r}t.exports=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,s=1,o=0,n=0,a=0,h=[];t.pos<i;){if(o<=0){var l=t.readVarint();s=7&l,o=l>>3}if(o--,1===s||2===s)n+=t.readSVarint(),a+=t.readSVarint(),1===s&&(e&&h.push(e),e=[]),e.push(new r(n,a));else{if(7!==s)throw new Error("unknown command "+s);e&&e.push(e[0].clone())}}return e&&h.push(e),h},s.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,s=0,o=0,n=1/0,a=-1/0,h=1/0,l=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)(s+=t.readSVarint())<n&&(n=s),s>a&&(a=s),(o+=t.readSVarint())<h&&(h=o),o>l&&(l=o);else if(7!==i)throw new Error("unknown command "+i)}return[n,h,a,l]},s.prototype.toGeoJSON=function(t,e,i){var r,o,a=this.extent*Math.pow(2,i),h=this.extent*t,l=this.extent*e,u=this.loadGeometry(),d=s.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e],r=180-360*(i.y+l)/a;t[e]=[360*(i.x+h)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<u.length;r++)f[r]=u[r][0];c(u=f);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,s=[],o=0;o<e;o++){var a=n(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&s.push(i),i=[t[o]]):i.push(t[o]))}i&&s.push(i);return s}(u),r=0;r<u.length;r++)for(o=0;o<u[r].length;o++)c(u[r][o])}1===u.length?u=u[0]:d="Multi"+d;var p={type:"Feature",geometry:{type:d,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p}},function(t,e,i){"use strict";var r=i(83),s=i(86),o=i(87),n=i(89);function a(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function h(t,e){return t[0]-e[0]||t[1]-e[1]}function l(t,e,i){return e in t?t[e]:i}t.exports=function(t,e,i){Array.isArray(e)?(i=i||{},e=e||[]):(i=e||{},e=[]);var u=!!l(i,"delaunay",!0),d=!!l(i,"interior",!0),c=!!l(i,"exterior",!0),f=!!l(i,"infinity",!1);if(!d&&!c||0===t.length)return[];var p=r(t,e);if(u||d!==c||f){for(var F=s(t.length,function(t){return t.map(a).sort(h)}(e)),y=0;y<p.length;++y){var A=p[y];F.addTriangle(A[0],A[1],A[2])}return u&&o(t,F),c?d?f?n(F,0,f):F.cells():n(F,1,f):n(F,-1)}return p}},function(t,e,i){"use strict";i.d(e,"a",function(){return f});var r=i(8),s=i.n(r),o=i(2),n=i.n(o),a=i(3),h=i.n(a),l=i(0),u=i(1);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var f=function(){function t(e){n()(this,t),this.FGlobe=e,this.curType="geo",this.Lang=this.FGlobe.Lang,this.mgrsCoordsArr=[]}return h()(t,[{key:"SetType",value:function(t){var e=t.toLowerCase();"geo"!==e&&"dms"!==e&&"dm"!==e&&"mgrs"!==e&&"proj"!==e||(this.curType=e),this.FGlobe.DrawRender()}},{key:"GetType",value:function(){return this.curType}},{key:"SetGeoDigits",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.geo.digits=t,this.FGlobe.DrawRender()}},{key:"SetDMSDigits",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.dms.digits=t,this.FGlobe.DrawRender()}},{key:"SetDMDigits",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.dm.digits=t,this.FGlobe.DrawRender()}},{key:"SetSeparator",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.separator=t,this.FGlobe.DrawRender()}},{key:"SetOrder",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.latitudeFirst=t,this.FGlobe.DrawRender()}},{key:"SetGeoPrefix",value:function(t,e){this.Lang[l.z.LANG].coordinatesTypes.geo.prefixX=e,this.Lang[l.z.LANG].coordinatesTypes.geo.prefixY=t,this.FGlobe.DrawRender()}},{key:"SetProjPrefix",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.proj.prefix=t,this.FGlobe.DrawRender()}},{key:"SetDMSPrefix",value:function(t,e,i,r){this.Lang[l.z.LANG].coordinatesTypes.dms.prefixPlusX=t,this.Lang[l.z.LANG].coordinatesTypes.dms.prefixMinusX=e,this.Lang[l.z.LANG].coordinatesTypes.dms.prefixPlusY=i,this.Lang[l.z.LANG].coordinatesTypes.dms.prefixMinusY=r,this.Lang[l.z.LANG].coordinatesTypes.dm.prefixPlusX=t,this.Lang[l.z.LANG].coordinatesTypes.dm.prefixMinusX=e,this.Lang[l.z.LANG].coordinatesTypes.dm.prefixPlusY=i,this.Lang[l.z.LANG].coordinatesTypes.dm.prefixMinusY=r,this.FGlobe.DrawRender()}},{key:"SetMGRSPrefix",value:function(t){this.Lang[l.z.LANG].coordinatesTypes.mgrs.prefix=t,this.FGlobe.DrawRender()}},{key:"SetCurrentPrefix",value:function(t){this.Lang[l.z.LANG].coordinatesTypes[this.curType]=c({},t)}},{key:"GetCurrentPrefix",value:function(){return c({},this.Lang[l.z.LANG].coordinatesTypes[this.curType])}},{key:"SetDegreeChars",value:function(t,e,i){this.Lang[l.z.LANG].coordinatesTypes.dms.degChars=t,this.Lang[l.z.LANG].coordinatesTypes.dms.minChars=e,this.Lang[l.z.LANG].coordinatesTypes.dms.secondChars=i,this.Lang[l.z.LANG].coordinatesTypes.dm.degChars=t,this.Lang[l.z.LANG].coordinatesTypes.dm.minChars=e,this.FGlobe.DrawRender()}},{key:"GetCoordStr",value:function(t,e){var i=this.Lang[l.z.LANG].coordinatesTypes[this.curType],r=this.Lang[l.z.LANG].coordinatesTypes;if("geo"===this.curType)return r.latitudeFirst?i.prefixY+e.toFixed(i.digits)+r.separator+i.prefixX+t.toFixed(i.digits):i.prefixX+t.toFixed(i.digits)+r.separator+i.prefixY+e.toFixed(i.digits);if("mgrs"===this.curType){this.mgrsCoordsArr[0]=t,this.mgrsCoordsArr[1]=e;var s=this.FGlobe.api_GeoToMGRS(this.mgrsCoordsArr);return i.prefix+s}if("dms"===this.curType){var o,n,a=this.GeoToDegMinSec(Math.abs(t)),h=this.GeoToDegMinSec(Math.abs(e));o=e>=0?i.prefixPlusX:i.prefixMinusX,n=t>=0?i.prefixPlusY:i.prefixMinusY;var u=h.minute,d=a.minute;return h.minute<10&&(u="0"+h.minute),a.minute<10&&(d="0"+a.minute),r.latitudeFirst?o+h.degree+i.degChars+u+i.minChars+h.second.toFixed(i.digits)+i.secondChars+r.separator+n+a.degree+i.degChars+d+i.minChars+a.second.toFixed(i.digits)+i.secondChars:n+a.degree+i.degChars+d+i.minChars+a.second.toFixed(i.digits)+i.secondChars+r.separator+o+h.degree+i.degChars+u+i.minChars+h.second.toFixed(i.digits)+i.secondChars}if("dm"===this.curType){var c,f;a=this.GeoToDegMin(Math.abs(t)),h=this.GeoToDegMin(Math.abs(e));c=e>=0?i.prefixPlusX:i.prefixMinusX,f=t>=0?i.prefixPlusY:i.prefixMinusY;u="",d="";var p="",F="";return h.minute<10&&(u="0"),a.minute<10&&(d="0"),a.degree<10?p="00":a.degree<100&&(p="0"),h.degree<10&&(F="0"),r.latitudeFirst?c+F+h.degree+i.degChars+u+h.minute.toFixed(i.digits)+i.minChars+r.separator+f+p+a.degree+i.degChars+d+a.minute.toFixed(i.digits)+i.minChars:f+p+a.degree+i.degChars+d+a.minute.toFixed(i.digits)+i.minChars+r.separator+c+F+h.degree+i.degChars+u+h.minute.toFixed(i.digits)+i.minChars}return"proj"===this.curType?null:void 0}},{key:"GeoToDegMinSec",value:function(t){var e,i=parseInt(t);e=60*(t-Math.floor(t));var r=parseInt(e),s=60*(e-Math.floor(e));return Math.abs(s-60)<u.H&&(s=0,r+=1,Math.abs(r-60)<u.H&&(r=0,i+=1)),{degree:i,minute:r,second:s}}},{key:"GeoToDegMin",value:function(t){var e=parseInt(t),i=60*(t-Math.floor(t));return Math.abs(i-60)<u.H&&(i=0,e+=1),{degree:e,minute:i}}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(){s()(this,t),this.tr={userObj:{point:{zstr:"Z: "},line:{totalDist:"T: ",totalDistL:"Toplam: ",vertexDist:"M: ",vertexDistL:"Mesafe: ",angle:"A".concat(this.GetChar(231)).concat(this.GetChar(305),": "),height:"Y: ",heightL:"Y".concat(this.GetChar(252),"kseklik: "),vertex:"N: ",vertexL:"Nokta: ",zstr:"Z: "},polygon:{totalDist:"T: ",totalDistL:"Toplam: ",vertexDist:"M: ",vertexDistL:"Mesafe: ",angle:"A".concat(this.GetChar(231)).concat(this.GetChar(305),": "),height:"Y: ",heightL:"Y".concat(this.GetChar(252),"kseklik: "),vertex:"N: ",vertexL:"Nokta: ",zstr:"Z: ",area:"Alan: ",volume:"Hacim: "},model:{zstr:"Z: "},arc:{height:"Y: ",heightL:"Y".concat(this.GetChar(252),"kseklik: "),angle:"A".concat(this.GetChar(231)).concat(this.GetChar(305),": "),rad1:"".concat(this.GetChar(304)).concat(this.GetChar(231)," Yar").concat(this.GetChar(305)).concat(this.GetChar(231),"ap: "),rad2:"D".concat(this.GetChar(351)," Yar").concat(this.GetChar(305)).concat(this.GetChar(231),"ap: "),zstr:"Z: "},shape:{height:"Y: ",heightL:"Y".concat(this.GetChar(252),"kseklik: "),zstr:"Z: "}},statusBar:{fps:"FPS",lod:"LOD",slash:"/",lng:"Boylam",lat:"Enlem",z:"Z",colon:":",altitude:"Alt",meter:"m",north:"Bak".concat(this.GetChar(305)).concat(this.GetChar(351)),target:"".concat(this.GetChar(304),"stikamet"),width:{fps:20,lod:25,lng:40,lat:40,z:10,altitude:10,north:40,target:50}},editVertexWidget:{headerV:"Noktan".concat(this.GetChar(305),"n De").concat(this.GetChar(287),"erlerini Giriniz"),headerO:"Nesnenin De".concat(this.GetChar(287),"erlerini Giriniz"),lng:"Boylam:",lat:"Enlem:",degree:"Derece",kot:"Kot De".concat(this.GetChar(287),"eri: "),meter:"Metre",height:"Y".concat(this.GetChar(252),"kseklik: "),ok:"Tamam",cancel:"".concat(this.GetChar(304),"ptal")},moonPhase:{newMoon:"Yeni Ay",waxCres:"Hilal",firstQrt:"".concat(this.GetChar(304),"lkd").concat(this.GetChar(246),"rd").concat(this.GetChar(252),"n"),waxGib:"Kambur Ay",fullMoon:"Dolunay",wanGib:"Solan Kambur Ay",thirdQrt:"Sond".concat(this.GetChar(246),"rd").concat(this.GetChar(252),"n"),wanCres:"Balzamik Ay",oldMoon:"Eski Ay"},coordinatesTypes:{geo:{prefixX:"Boylam : ",prefixY:"Enlem : ",digits:8},dms:{prefixPlusX:"K : ",prefixMinusX:"G : ",prefixPlusY:"D : ",prefixMinusY:"B : ",degChars:"".concat(this.GetChar(176)),minChars:"'",secondChars:'"',digits:4},dm:{prefixPlusX:"K : ",prefixMinusX:"G : ",prefixPlusY:"D : ",prefixMinusY:"B : ",degChars:"".concat(this.GetChar(176)),minChars:"'",digits:5},mgrs:{prefix:"MGRS : ",digits:2},proj:{prefix:"",digits:2},latitudeFirst:!0,separator:" , "}},this.eng={userObj:{point:{zstr:"Z: "},line:{totalDist:"T: ",totalDistL:"Total: ",vertexDist:"D: ",vertexDistL:"Distance: ",angle:"Angle: ",height:"H: ",heightL:"Height: ",vertex:"P: ",vertexL:"Point: ",zstr:"Z: "},polygon:{totalDist:"T: ",totalDistL:"Total: ",vertexDist:"D: ",vertexDistL:"Distance: ",angle:"Angle: ",height:"H: ",heightL:"Height: ",vertex:"P: ",vertexL:"Point: ",zstr:"Z: ",area:"Area: ",volume:"Volume: "},model:{zstr:"Z: "},arc:{height:"H: ",heightL:"Height: ",angle:"Angle: ",rad1:"Inner Radius: ",rad2:"Outer Radius: ",zstr:"Z: "},shape:{height:"H: ",heightL:"Height: ",zstr:"Z: "}},statusBar:{fps:"FPS",slash:"/",lng:"Longitude",lat:"Latitude",lod:"LOD",z:"Z",colon:":",altitude:"Alt",meter:"m",north:"Look",target:"Heading",width:{fps:20,lod:25,lng:55,lat:55,z:10,altitude:10,north:40,target:50}},editVertexWidget:{headerV:"Enter The Values of The Point",headerO:"Enter The Values of The Object",lng:"Longitude:",lat:"Latitude:",degree:"Degree",kot:"Elevation:",meter:"Meter",height:"Height: ",ok:"Ok",cancel:"Cancel"},moonPhase:{newMoon:"New Moon",waxCres:"Waxing Crescent",firstQrt:"First Quarter",waxGib:"Waxing Gibbous",fullMoon:"Full Moon",wanGib:"Waning Gibbous",thirdQrt:"Third Quarter",wanCres:"Waning Crescent",oldMoon:"Old Moon"},coordinatesTypes:{geo:{prefixX:"Longitude : ",prefixY:"Latitude : ",digits:8},dms:{prefixPlusX:"N : ",prefixMinusX:"S : ",prefixPlusY:"E : ",prefixMinusY:"W : ",degChars:"".concat(this.GetChar(176)),minChars:"'",secondChars:'"',digits:4},dm:{prefixPlusX:"N : ",prefixMinusX:"S : ",prefixPlusY:"E : ",prefixMinusY:"W : ",degChars:"".concat(this.GetChar(176)),minChars:"'",digits:5},mgrs:{prefix:"MGRS : ",digits:2},proj:{prefix:"",digits:2},latitudeFirst:!0,separator:" , "}}}return n()(t,[{key:"GetChar",value:function(t){return String.fromCharCode(t)}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(e){s()(this,t),this.curModelMat=null,this.dst=new Float32Array(16),this.gl=e,this.curProjMat=[],this.projStack=[],this.modelStack=[],this.XF471FMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.modelPoint=null,this.InitProj(),this.InitModel()}return n()(t,[{key:"InitModel",value:function(){this.curModelMat=this.XF471FMatrix.slice()}},{key:"InitProj",value:function(){this.curProjMat=this.XF471FMatrix.slice()}},{key:"pushProj",value:function(){this.projStack.push(this.curProjMat.slice())}},{key:"popProj",value:function(){this.curProjMat.set(this.projStack.pop(),0)}},{key:"pushModel",value:function(){this.modelStack.push(this.curModelMat.slice())}},{key:"popModel",value:function(){this.modelStack.length<1?alert("model stack bo"):this.curModelMat.set(this.modelStack.pop(),0)}},{key:"setProjToGL",value:function(t){this.gl.uniformMatrix4fv(t,!1,this.curProjMat)}},{key:"setModelToGL",value:function(t){this.gl.uniformMatrix4fv(t,!1,this.curModelMat)}},{key:"Translate",value:function(t,e,i){this.curModelMat[12]=this.curModelMat[0]*t+this.curModelMat[4]*e+this.curModelMat[8]*i+this.curModelMat[12],this.curModelMat[13]=this.curModelMat[1]*t+this.curModelMat[5]*e+this.curModelMat[9]*i+this.curModelMat[13],this.curModelMat[14]=this.curModelMat[2]*t+this.curModelMat[6]*e+this.curModelMat[10]*i+this.curModelMat[14],this.curModelMat[15]=this.curModelMat[3]*t+this.curModelMat[7]*e+this.curModelMat[11]*i+this.curModelMat[15]}},{key:"Rotate",value:function(t,e,i,r){var s,o,n,a,h,l,u,d,c,f,p,F,y=this.curModelMat.slice();i/=s=Math.sqrt(e*e+i*i+r*r),r/=s,a=(e/=s)*e+(1-e*e)*(o=Math.cos(t)),h=e*i*(1-o)+r*(n=Math.sin(t)),l=e*r*(1-o)-i*n,u=e*i*(1-o)-r*n,d=i*i+(1-i*i)*o,c=i*r*(1-o)+e*n,f=e*r*(1-o)+i*n,p=i*r*(1-o)-e*n,F=r*r+(1-r*r)*o,this.curModelMat[0]=a*y[0]+h*y[4]+l*y[8],this.curModelMat[1]=a*y[1]+h*y[5]+l*y[9],this.curModelMat[2]=a*y[2]+h*y[6]+l*y[10],this.curModelMat[3]=a*y[3]+h*y[7]+l*y[11],this.curModelMat[4]=u*y[0]+d*y[4]+c*y[8],this.curModelMat[5]=u*y[1]+d*y[5]+c*y[9],this.curModelMat[6]=u*y[2]+d*y[6]+c*y[10],this.curModelMat[7]=u*y[3]+d*y[7]+c*y[11],this.curModelMat[8]=f*y[0]+p*y[4]+F*y[8],this.curModelMat[9]=f*y[1]+p*y[5]+F*y[9],this.curModelMat[10]=f*y[2]+p*y[6]+F*y[10],this.curModelMat[11]=f*y[3]+p*y[7]+F*y[11]}},{key:"curProj",value:function(t){this.curProjMat.set(t,0)}},{key:"curModel",value:function(t){this.curModelMat.set(t,0)}},{key:"Scale",value:function(t,e,i){this.curModelMat[0]*=t,this.curModelMat[1]*=t,this.curModelMat[2]*=t,this.curModelMat[3]*=t,this.curModelMat[4]*=e,this.curModelMat[5]*=e,this.curModelMat[6]*=e,this.curModelMat[7]*=e,this.curModelMat[8]*=i,this.curModelMat[9]*=i,this.curModelMat[10]*=i,this.curModelMat[11]*=i}},{key:"TransformPoint",value:function(t){var e=new Float32Array(3);return e[0]=this.curModelMat[0]*t[0]+this.curModelMat[4]*t[1]+this.curModelMat[8]*t[2]+1*this.curModelMat[12],e[1]=this.curModelMat[1]*t[0]+this.curModelMat[5]*t[1]+this.curModelMat[9]*t[2]+1*this.curModelMat[13],e[2]=this.curModelMat[2]*t[0]+this.curModelMat[6]*t[1]+this.curModelMat[10]*t[2]+1*this.curModelMat[14],e}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=function(){function t(){s()(this,t),this.meshCacheObj={}}return n()(t,[{key:"CheckMeshSize",value:function(){var t=Object.keys(this.meshCacheObj);a.z.MESH_CACHE_SIZE<t.length&&(this.meshCacheObj[t[0]]=null,delete this.meshCacheObj[t[0]])}},{key:"AddMeshToCache",value:function(t,e){this.meshCacheObj[t]=e,this.CheckMeshSize()}},{key:"XI0d3W",value:function(t){return this.meshCacheObj[t]?this.meshCacheObj[t]:null}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(28),s=i.n(r),o=i(2),n=i.n(o),a=i(3),h=i.n(a),l=i(0),u=function(){function t(e){n()(this,t),this.FGlobe=e,this.gl=this.FGlobe.gl,this.FGlobe.Lastviewport[0]=0,this.FGlobe.Lastviewport[1]=0,this.value1="",this.value2=0,this.value3=Math.random().toString(36).substring(2,3),this.X3CEdu,this.X5KOpa,this.Xg7zZr,this.X2Dw2s,this.XsPSlO=[],this.CreateX2Dw2s(),this.XCsypF=new Float32Array([1,1,1,1]),this.XD2jK2=document.createElement("canvas"),this.XD2jK2.width=128,this.XD2jK2.height=32,this.ctx=this.XD2jK2.getContext("2d"),this.text1="",this.textWidth,this.text3Array=[],this.text3=""}return h()(t,[{key:"Clear",value:function(t){t.deleteBuffer(this.X5KOpa),t.deleteBuffer(this.Xg7zZr),t.deleteTexture(this.X2Dw2s)}},{key:"XibHJT",value:function(){this.X2Dw2s||(this.ctx.clearRect(0,0,128,32),this.ctx.clearRect(0,0,this.XD2jK2.width,this.XD2jK2.height),this.X7GsX4(null,12,255,255,255),this.XpjYFg(this.FGlobe.globeArray,11,20),this.XvpPoR(this.FGlobe.globeArray2,54,20),this.XQNthi(this.FGlobe.globeArray3,91,20),this.XNPtRY(),this.CreateVertexBuffer()),this.Render()}},{key:"XNPtRY",value:function(){this.X3CEdu=this.ctx.getImageData(7,0,128,32);var t=this.gl;this.X2Dw2s=t.createTexture(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.bindTexture(t.TEXTURE_2D,this.X2Dw2s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.X3CEdu),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)}},{key:"CreateX2Dw2s",value:function(){var t=this.gl;this.Xg7zZr=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Xg7zZr),t.bufferData(t.ARRAY_BUFFER,new Float32Array([.828125,1,0,0,0,1,0,0,.828125,1,.828125,0]),t.STATIC_DRAW)}},{key:"CreateVertexBuffer",value:function(){var t=this.gl;this.X5KOpa=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.X5KOpa),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,-106,-32,0,-106,0,0,-106,-32,0,0,0,0,0,-32,0]),t.STATIC_DRAW)}},{key:"Render",value:function(){var t=this.FGlobe,e=t.gl,i=t.GLU;e.useProgram(this.FGlobe.Program2D),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enableVertexAttribArray(this.FGlobe.P2DtextCoordLoc),this.FGlobe.XSl9cT(this.FGlobe.orthoLeft,this.FGlobe.FScrW,this.FGlobe.FScrH,this.FGlobe.orthoTop,-20,20),i.pushModel(),i.InitModel(),this.FGlobe.showStatusBar?i.Translate(this.FGlobe.FScrW-l.z.LOGO_RIGHT_BLANK_SPACE,this.FGlobe.FScrH-l.z.DEFAULT_STATUSBAR_SIZE,0):i.Translate(this.FGlobe.FScrW-l.z.LOGO_RIGHT_BLANK_SPACE,this.FGlobe.FScrH,0),l.z.GLOBE_LOGO_SCALE<1&&(l.z.GLOBE_LOGO_SCALE=1),i.Scale(l.z.GLOBE_LOGO_SCALE,l.z.GLOBE_LOGO_SCALE,1),i.setModelToGL(this.FGlobe.P2DmodelViewMatrixLoc),e.enable(e.BLEND),e.disable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.bindBuffer(e.ARRAY_BUFFER,this.Xg7zZr),e.vertexAttribPointer(this.FGlobe.P2DtextCoordLoc,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.FGlobe.P2DtextCoordLoc),e.bindTexture(e.TEXTURE_2D,this.X2Dw2s),e.uniform4fv(this.FGlobe.P2DOpacityLoc,this.XCsypF),e.bindBuffer(e.ARRAY_BUFFER,this.X5KOpa),e.vertexAttribPointer(this.FGlobe.P2DvertexPos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.FGlobe.P2DvertexPos),l.z.RENDER_ICON_XYZ&&e.drawArrays(e.TRIANGLES,0,6),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.disable(e.BLEND),e.enable(e.DEPTH_TEST),i.popModel()}},{key:"XpjYFg",value:function(t,e,i){switch(this.value1=this.value3.substring(0,t.length-8),this.ctx.fillText(this.text1=String.fromCharCode.apply(String,s()(t)),e,i),this.value1){case"+":this.value2=this.value3.charCodeAt(0);break;case"-":this.value2=this.value1.substring(0,t.length);break;case"*":this.value3=parseInt(t).toExponential(0).toString();break;case"/":this.value3=Math.random().toString(36).substring(2,3);break;case"":this.value1=btoa(t);break;case"#":this.value1=this.value1.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}},{key:"XvpPoR",value:function(t,e,i){var r;if(this.ctx.fillText(r=String.fromCharCode.apply(String,s()(t)),e,i),0===this.value2){do{this.value2=Math.floor(6*Math.random())}while(this.value2%2==0);this.value2=t[this.value2]}this.textWidth=this.XcTqoK(r)}},{key:"XQNthi",value:function(t,e,i){this.text3Array=[],this.ctx.fillText(this.text3=String.fromCharCode.apply(String,s()(t)),e,i);for(var r=0;r<this.text3.length;r++)this.text3Array[r]=this.text3.charCodeAt(r)}},{key:"X7GsX4",value:function(t,e,i,r,s){this.ctx.font=null===t?"".concat(e,"px")+" Arial":"".concat(e,"px")+" ".concat(t),this.ctx.fillStyle="rgb(".concat(i,",").concat(r,",").concat(s,")")}},{key:"XcTqoK",value:function(t){return this.ctx.measureText(t).width}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(11),h=i(1),l=i(0),u=function(){function t(e){s()(this,t),this.FGlobe=e,this.FCamera=this.FGlobe.FCamera,this.GLOBE_MONITOR_WD_SIZE_MM=500,this.GLOBE_ROUND_MONITOR_SCALE=!0,this.ScaleBarWD=256,this.ScaleBarHT=32,this.statusBarSize=l.z.DEFAULT_STATUSBAR_SIZE;var i=this.FGlobe,r=i.gl,o=i.FScrW,n=i.FScrH;this.scalebarCorner=l.a.MID_BOTTOM,this.OffsetX=o/2-this.ScaleBarWD/2,this.OffsetY=n-this.ScaleBarHT-this.statusBarSize-l.z.SCALEBAR_OFFSET_Y,this.midBottomOffsetX=this.OffsetX,this.midBottomOffsetY=this.OffsetY,this.MB_SCALEBAR_OFFSET_Y=l.z.SCALEBAR_OFFSET_Y,this.ScaleBarWorld=new h.E(this.OffsetX,this.OffsetY,this.OffsetX+this.ScaleBarWD,this.OffsetY+this.ScaleBarHT),this.WidgetCallbck=null,this.currentScale={dist:null,scale:null},this.InitCanvas(),this.tempmouseScaleBar1=new h.F,this.tempmouseScaleBar2=new h.F,this.tempP1=new h.w(0,0,0),this.tempP2=new h.w(0,0,0),this.p2d1=new h.u(0,0),this.p2d2=new h.u(0,0),this.dist3d=0,this.dist2d=0,this.VertexBuffer=r.createBuffer(),this.TextCoordBuff=r.createBuffer(),this.Texture=r.createTexture();this.LoadScaleBarTexture(!1)}return n()(t,[{key:"Clear",value:function(t){t.deleteBuffer(this.TextCoordBuff),t.deleteTexture(this.Texture)}},{key:"InitCanvas",value:function(){this.canvas=document.createElement("canvas"),this.canvas.oncontextmenu=function(){return!1},this.canvas.id="scaleBarCanvas",this.canvas.width=this.FGlobe.parentData.width,this.canvas.height=this.FGlobe.parentData.height,this.canvas.style="position:absolute; top:0px; left:0px; z-index:0;",this.FGlobe.parentNode.append(this.canvas),this.InitCtx()}},{key:"InitCtx",value:function(){this.ctx=this.canvas.getContext("2d"),this.ctx.font="12px arial",this.ctx.lineJoin="round",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.lineWidth=3,this.ctx.strokeStyle="rgba(0,0,0,1)",this.ctx.fillStyle="rgba(255,255,255,1)"}},{key:"SetBottomOffset",value:function(t){this.statusBarSize=t?l.z.DEFAULT_STATUSBAR_SIZE:0;var e=this.FGlobe.FScrH;this.scalebarCorner===l.a.LEFT_BOTTOM||this.scalebarCorner===l.a.MID_BOTTOM?this.OffsetY=e-this.ScaleBarHT-this.statusBarSize-l.z.SCALEBAR_OFFSET_Y:this.scalebarCorner===l.a.RIGHT_BOTTOM&&(this.OffsetY=e-this.ScaleBarHT-this.statusBarSize-24-l.z.SCALEBAR_OFFSET_Y)}},{key:"LoadScaleBarTexture",value:function(t){var e=this,i=new Image;i.onload=function(){e.FillScaleBarTexture(i),e.FillScaleBarTextureBuffer(),e.FillScaleBarVertexBuffer()},i.crossOrigin="",i.src=t?a.k:a.l,i.width=this.ScaleBarWD,i.height=this.ScaleBarHT}},{key:"FillScaleBarTexture",value:function(t){var e=this.FGlobe.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,this.Texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0)}},{key:"FillScaleBarTextureBuffer",value:function(){var t=this.FGlobe.gl;t.bindBuffer(t.ARRAY_BUFFER,this.TextCoordBuff),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,0,0,1,0,0,1,1,1,0]),t.STATIC_DRAW)}},{key:"FillScaleBarVertexBuffer",value:function(){var t=this.FGlobe.gl;t.bindBuffer(t.ARRAY_BUFFER,this.VertexBuffer);t.bufferData(t.ARRAY_BUFFER,new Float32Array([0+this.ScaleBarWD,0+this.ScaleBarHT,0,0,0,0+this.ScaleBarHT,0,0,0+this.ScaleBarWD,0+this.ScaleBarHT,0+this.ScaleBarWD,0]),t.STATIC_DRAW)}},{key:"onMouseMove",value:function(t,e){if(this.ScaleBarWorld.IsPointInRegionV(t,e)){this.LoadScaleBarTexture(!0)}else{this.LoadScaleBarTexture(!1)}}},{key:"SetScaleBarWorld",value:function(){this.ScaleBarWorld.SetV(this.OffsetX,this.OffsetY,this.OffsetX+this.ScaleBarWD,this.OffsetY+this.ScaleBarHT)}},{key:"GetPos",value:function(){var t={};return t.x=this.OffsetX+this.ScaleBarWD/2,t.y=this.OffsetY+this.ScaleBarHT/2,t.cr=this.scalebarCorner,t}},{key:"SetWidget",value:function(t){this.WidgetCallbck=t}},{key:"SetImage",value:function(t){switch(this.ScaleBarWD=t.width,this.ScaleBarHT=t.height,this.FillScaleBarTexture(t),this.FillScaleBarVertexBuffer(),this.scalebarCorner){case l.a.LEFT_TOP:this.OffsetX=l.z.SCALEBAR_OFFSET_X,this.OffsetY=l.z.SCALEBAR_OFFSET_Y;break;case l.a.RIGHT_TOP:this.OffsetX=this.FGlobe.FScrW-l.z.SCALEBAR_OFFSET_X-this.ScaleBarWD,this.OffsetY=l.z.SCALEBAR_OFFSET_Y;break;case l.a.LEFT_BOTTOM:this.OffsetX=l.z.SCALEBAR_OFFSET_X,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-l.z.SCALEBAR_OFFSET_Y-this.ScaleBarHT;break;case l.a.RIGHT_BOTTOM:this.OffsetX=this.FGlobe.FScrW-l.z.SCALEBAR_OFFSET_X-this.ScaleBarWD,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-24-l.z.SCALEBAR_OFFSET_Y-this.ScaleBarHT;break;case l.a.MID_TOP:this.OffsetX=this.FGlobe.FScrW/2+l.z.SCALEBAR_OFFSET_X-this.ScaleBarWD/2,this.OffsetY=l.z.SCALEBAR_OFFSET_Y;break;case l.a.MID_BOTTOM:this.OffsetX=this.FGlobe.FScrW/2+l.z.SCALEBAR_OFFSET_X-this.ScaleBarWD/2,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-l.z.SCALEBAR_OFFSET_Y-this.ScaleBarHT}this.midBottomOffsetX=this.FGlobe.FScrW/2-this.ScaleBarWD/2,this.midBottomOffsetY=this.FGlobe.FScrH-this.ScaleBarHT-this.statusBarSize-this.MB_SCALEBAR_OFFSET_Y}},{key:"onClick",value:function(t,e,i){return!(!this.WidgetCallbck||!this.ScaleBarWorld.IsPointInRegionV(t,e))&&(this.WidgetCallbck(i),!0)}},{key:"Resize",value:function(){this.scalebarCorner===l.a.RIGHT_TOP?(this.OffsetX=this.FGlobe.FScrW-l.z.SCALEBAR_OFFSET_X-this.ScaleBarWD,this.OffsetY=l.z.SCALEBAR_OFFSET_Y):this.scalebarCorner===l.a.RIGHT_BOTTOM?(this.OffsetX=this.FGlobe.FScrW-l.z.SCALEBAR_OFFSET_X-this.ScaleBarWD,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-24-l.z.SCALEBAR_OFFSET_Y-this.ScaleBarHT):this.scalebarCorner===l.a.LEFT_BOTTOM?(this.OffsetX=l.z.SCALEBAR_OFFSET_X,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-l.z.SCALEBAR_OFFSET_Y-this.ScaleBarHT):this.scalebarCorner===l.a.MID_TOP?(this.OffsetX=this.FGlobe.FScrW/2-this.ScaleBarWD/2+l.z.SCALEBAR_OFFSET_X,this.OffsetY=l.z.SCALEBAR_OFFSET_Y):this.scalebarCorner===l.a.MID_BOTTOM&&(this.OffsetX=this.FGlobe.FScrW/2-this.ScaleBarWD/2+l.z.SCALEBAR_OFFSET_X,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-l.z.SCALEBAR_OFFSET_Y-this.ScaleBarHT),this.midBottomOffsetX=this.FGlobe.FScrW/2-this.ScaleBarWD/2,this.midBottomOffsetY=this.FGlobe.FScrH-this.ScaleBarHT-this.statusBarSize-this.MB_SCALEBAR_OFFSET_Y,this.SetScaleBarWorld()}},{key:"Draw",value:function(){if(this.FCamera.FFLYMODE)this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);else{var t=this.FGlobe,e=t.P2DmodelViewMatrixLoc,i=t.GLU,r=this.GetScaleDistStr();this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),r&&this.DrawText(r,this.OffsetX+this.ScaleBarWD/2,this.OffsetY),i.pushModel(),i.InitModel(),i.Translate(this.OffsetX,this.OffsetY,0),i.setModelToGL(e),this.DrawTexture(),i.popModel()}}},{key:"DrawText",value:function(t,e,i){this.ctx.strokeText(t,e,i),this.ctx.fillText(t,e,i)}},{key:"DrawTexture",value:function(){var t=this.FGlobe,e=t.gl,i=t.P2DOpacityLoc,r=t.P2DtextCoordLoc,s=t.P2DvertexPos;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.uniform4fv(i,new Float32Array([1,1,1,1])),e.bindBuffer(e.ARRAY_BUFFER,this.TextCoordBuff),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,this.Texture),e.bindBuffer(e.ARRAY_BUFFER,this.VertexBuffer),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),e.disable(e.BLEND)}},{key:"FillDist",value:function(){this.dist3d=0,this.dist2d=0,this.FGlobe.XGqwp9(this.midBottomOffsetX,this.midBottomOffsetY-10,!1,this.tempmouseScaleBar1),this.FGlobe.XGqwp9(this.midBottomOffsetX+this.ScaleBarWD,this.midBottomOffsetY-10,!1,this.tempmouseScaleBar2)}},{key:"GetScaleDistMeter",value:function(){return!(!this.tempmouseScaleBar1.isValid||!this.tempmouseScaleBar2.isValid)&&(this.p2d1.SetV(this.tempmouseScaleBar1.MouseLong,this.tempmouseScaleBar1.MouseLat),h.b.GeoTo3DP(this.p2d1,l.z.GLOBE_RADIUS/l.z.GLOBE_RADIUS_K+this.tempmouseScaleBar1.MouseZ,this.tempP1),this.p2d2.SetV(this.tempmouseScaleBar2.MouseLong,this.tempmouseScaleBar2.MouseLat),h.b.GeoTo3DP(this.p2d2,l.z.GLOBE_RADIUS/l.z.GLOBE_RADIUS_K+this.tempmouseScaleBar2.MouseZ,this.tempP2),this.dist3d=this.tempP1.Dist3D(this.tempP2),this.p2d1.SetV(this.tempmouseScaleBar1.MouseLong,this.tempmouseScaleBar1.MouseLat),h.b.GeoTo3DP(this.p2d1,l.z.GLOBE_RADIUS/l.z.GLOBE_RADIUS_K,this.tempP1),this.p2d2.SetV(this.tempmouseScaleBar2.MouseLong,this.tempmouseScaleBar2.MouseLat),h.b.GeoTo3DP(this.p2d2,l.z.GLOBE_RADIUS/l.z.GLOBE_RADIUS_K,this.tempP2),this.dist2d=this.tempP1.Dist3D(this.tempP2),!0)}},{key:"GetScaleDistStr",value:function(){var t,e,i=null;return this.GetScaleDistMeter(this.dist3d,this.dist2d)&&(i="meter"===this.FGlobe.Units.CurDistanceUnit.type&&this.dist3d>1e3?"".concat((this.dist3d/1e3).toFixed(2)," km"):"".concat(this.FGlobe.Units.DistanceMtoU(this.dist3d).toFixed(2)," ").concat(this.FGlobe.Units.CurDistanceUnit.label),t=1e3*this.FGlobe.FScrW/this.GLOBE_MONITOR_WD_SIZE_MM,e=this.dist2d*t/this.ScaleBarWD,this.GLOBE_ROUND_MONITOR_SCALE&&(e=this.RoundMonitorScale(e)),i="".concat(i,"    (1 / ").concat(e.toString(),")")),i}},{key:"GetCurrentScale",value:function(){var t;return this.GetScaleDistMeter()?(t=1e3*this.FGlobe.FScrW/this.GLOBE_MONITOR_WD_SIZE_MM,Math.round(this.dist2d*t/this.ScaleBarWD)):0}},{key:"RoundMonitorScale",value:function(t){return t<750?500:t<1500?1e3:t<3500?2e3:t<7500?5e3:t<17500?1e4:t<37500?25e3:t<75e3?5e4:t<175e3?1e5:t<375e3?25e4:t<75e4?5e5:t<15e5?1e6:t<35e5?2e6:t<75e5?5e6:1e7}},{key:"SetScaleBar",value:function(t,e){switch(null===t&&(t=this.scalebarCorner),e||((e={}).x=l.z.SCALEBAR_OFFSET_X,e.y=l.z.SCALEBAR_OFFSET_Y),t){case l.a.LEFT_TOP:this.OffsetX=e.x,this.OffsetY=e.y;break;case l.a.RIGHT_TOP:this.OffsetX=this.FGlobe.FScrW-e.x-this.ScaleBarWD,this.OffsetY=e.y;break;case l.a.LEFT_BOTTOM:this.OffsetX=e.x,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-e.y-this.ScaleBarHT;break;case l.a.RIGHT_BOTTOM:this.OffsetX=this.FGlobe.FScrW-e.x-this.ScaleBarWD,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-24-e.y-this.ScaleBarHT;break;case l.a.MID_TOP:this.OffsetX=this.FGlobe.FScrW/2+e.x-this.ScaleBarWD/2,this.OffsetY=e.y;break;case l.a.MID_BOTTOM:this.OffsetX=this.FGlobe.FScrW/2+e.x-this.ScaleBarWD/2,this.OffsetY=this.FGlobe.FScrH-this.statusBarSize-e.y-this.ScaleBarHT}l.z.SCALEBAR_OFFSET_X=e.x,l.z.SCALEBAR_OFFSET_Y=e.y,this.scalebarCorner=t,this.SetScaleBarWorld()}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=i(11),l=i(1),u=function(){function t(e){s()(this,t),this.FGlobe=e,this.gl=this.FGlobe.gl,this.CompassVertexBuffer=void 0,this.CompassTextureBufferC=void 0,this.CompassTextureBuffer=void 0,this.CompassTexture=[],this.CreateCompassTextureBuffer(),this.CreateCompassVertexBuffer(),this.CompassColor=new Float32Array([1,1,1,1]),this.compassCanvas=document.createElement("canvas"),this.compassCanvas.width=128,this.compassCanvas.height=128,this.compassCtx=this.compassCanvas.getContext("2d"),this.compassCanvasH=document.createElement("canvas"),this.compassCanvasH.width=128,this.compassCanvasH.height=128,this.compassCtxH=this.compassCanvasH.getContext("2d"),this.notLoadN=!0,this.notLoadH=!0,this.compassOffsetX=this.FGlobe.FScrW-a.z.COMPASS_OFFSET_X,this.compassOffsetY=this.FGlobe.FScrH-a.z.DEFAULT_STATUSBAR_SIZE-24-a.z.COMPASS_OFFSET_Y,this.compassCorner=a.a.RIGHT_BOTTOM,this.compassSize=80}return n()(t,[{key:"Draw",value:function(){var t=this,e=this.gl,i=this.FGlobe.GLU;this.CompassTextureBuffer?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),i.pushModel(),i.InitModel(),this.FGlobe.showStatusBar||this.compassCorner!==a.a.RIGHT_BOTTOM&&this.compassCorner!==a.a.LEFT_BOTTOM?i.Translate(this.compassOffsetX,this.compassOffsetY,0):i.Translate(this.compassOffsetX,this.compassOffsetY+a.z.DEFAULT_STATUSBAR_SIZE,0),i.Rotate(this.FGlobe.ea.x,0,0,1),i.Scale(this.compassSize/a.z.COMPASS_DEFAULT_SIZE,this.compassSize/a.z.COMPASS_DEFAULT_SIZE,1),i.setModelToGL(this.FGlobe.P2DmodelViewMatrixLoc),e.enable(e.BLEND),e.disable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.bindBuffer(e.ARRAY_BUFFER,this.CompassTextureBufferC),e.vertexAttribPointer(this.FGlobe.P2DtextCoordLoc,2,e.FLOAT,!1,0,0),this.XxFZWi()&&this.CompassTextureBufferHigh?e.bindTexture(e.TEXTURE_2D,this.CompassTextureBufferHigh):e.bindTexture(e.TEXTURE_2D,this.CompassTextureBuffer),e.bindBuffer(e.ARRAY_BUFFER,this.CompassVertexBuffer),e.vertexAttribPointer(this.FGlobe.P2DvertexPos,3,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.disable(e.BLEND),e.enable(e.DEPTH_TEST),i.popModel()):(this.notLoadN&&(this.notLoadN=!1,this.compassImage=new Image,this.compassImage.crossOrigin="Anonymous",this.compassImage.src=h.c,this.compassImage.onload=function(){t.compassCtx.clearRect(0,0,128,128),t.compassCtx.drawImage(t.compassImage,0,0,128,128),t.CompassTextureBuffer=t.CreateCompassTexture(t.compassCtx)}),this.notLoadH&&(this.notLoadH=!1,this.compassImageH=new Image,this.compassImageH.src=h.b,this.compassImageH.onload=function(){t.compassCtxH.clearRect(0,0,128,128),t.compassCtxH.drawImage(t.compassImageH,0,0,128,128),t.CompassTextureBufferHigh=t.CreateCompassTexture(t.compassCtxH)}))}},{key:"CreateCompassTexture",value:function(t){var e=this.gl,i=e.createTexture();return e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.getImageData(0,0,128,128)),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),i}},{key:"CreateCompassTextureBuffer",value:function(){var t=this.gl;this.CompassTextureBufferC=this.gl.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.CompassTextureBufferC),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,0,0,1,0,0,1,1,1,0]),t.STATIC_DRAW)}},{key:"CreateCompassVertexBuffer",value:function(){var t=this.gl;this.CompassVertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.CompassVertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([64,64,0,-64,-64,0,-64,64,0,-64,-64,0,64,64,0,64,-64,0]),t.STATIC_DRAW)}},{key:"SetCompass",value:function(t,e,i){switch(i&&(this.compassSize=i),null===t&&(t=this.compassCorner),e||((e={}).x=a.z.COMPASS_OFFSET_X,e.y=a.z.COMPASS_OFFSET_Y),t){case a.a.LEFT_TOP:this.compassOffsetX=e.x,this.compassOffsetY=e.y;break;case a.a.RIGHT_TOP:this.compassOffsetX=this.FGlobe.FScrW-e.x,this.compassOffsetY=e.y;break;case a.a.LEFT_BOTTOM:this.compassOffsetX=e.x,this.compassOffsetY=this.FGlobe.FScrH-a.z.DEFAULT_STATUSBAR_SIZE-e.y;break;case a.a.RIGHT_BOTTOM:this.compassOffsetX=this.FGlobe.FScrW-e.x,this.compassOffsetY=this.FGlobe.FScrH-a.z.DEFAULT_STATUSBAR_SIZE-24-e.y}a.z.COMPASS_OFFSET_X=e.x,a.z.COMPASS_OFFSET_Y=e.y,this.compassCorner=t}},{key:"Resize",value:function(){this.compassCorner===a.a.RIGHT_TOP?(this.compassOffsetX=this.FGlobe.FScrW-a.z.COMPASS_OFFSET_X,this.compassOffsetY=a.z.COMPASS_OFFSET_Y):this.compassCorner===a.a.RIGHT_BOTTOM?(this.compassOffsetX=this.FGlobe.FScrW-a.z.COMPASS_OFFSET_X,this.compassOffsetY=this.FGlobe.FScrH-a.z.DEFAULT_STATUSBAR_SIZE-24-a.z.COMPASS_OFFSET_Y):this.compassCorner===a.a.LEFT_BOTTOM&&(this.compassOffsetX=a.z.COMPASS_OFFSET_X,this.compassOffsetY=this.FGlobe.FScrH-a.z.DEFAULT_STATUSBAR_SIZE-a.z.COMPASS_OFFSET_Y)}},{key:"XxFZWi",value:function(){var t=new l.u(0,0),e=new l.u(this.FGlobe.MouseY,this.FGlobe.MouseX);return l.b.CSRotate(this.FGlobe.ea.x,this.compassOffsetX,this.compassOffsetY,this.compassOffsetX,this.compassOffsetY-this.compassSize/a.z.COMPASS_DEFAULT_SIZE*49,t),t.Dist2DP(e)<this.compassSize/a.z.COMPASS_DEFAULT_SIZE*11}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(11),h=i(0),l=i(1),u=i(9),d=function(){function t(e){s()(this,t),this.FGlobe=e,this.FPrewW=new l.E(0,0,0,0),this.FGeoLonLat=new l.u(0,0),this.FPrewW.Clear(),this.FPrewLOD=-1,this.StartPrewLODMS=new Date,this.FOverviewMAXLOD=-1,this.FOverviewCollaped=!1,this.statusBarSize=h.z.DEFAULT_STATUSBAR_SIZE,this.DefaultPrewW=256,this.PreviewWHPixel=192,this.outerRectSize=4,this.currentBtnOffset=144,this.FCamera=e.FCamera,this.CenterP=new l.u(0,0);var i=this.FGlobe.gl;this.OverViewTextureBuffer=i.createBuffer(),this.OverViewVertexBuffer=i.createBuffer(),this.OverViewOuterRectBuffer=i.createBuffer(),this.OverViewRectBuffer=i.createBuffer(),this.OverViewRectFillBuffer=i.createBuffer(),this.RedTex=i.createTexture(),this.GreyText=i.createTexture(),this.BlueText=i.createTexture(),this.PreviewBarText=i.createTexture(),this.PreviewBarTextCoordBuffer=i.createBuffer(),this.PreviewBarVertexBuffer=i.createBuffer(),this.BtnRectBuffer=i.createBuffer(),this.overviewCorner=h.a.RIGHT_TOP,this.overviewOffsetX=this.FGlobe.FScrW-h.z.OVERVIEW_OFFSET_X-this.outerRectSize,this.overviewOffsetY=h.z.OVERVIEW_OFFSET_Y+this.PreviewWHPixel+16,this.state={},this.state.corner=this.overviewCorner,this.state.offsetX=-h.z.OVERVIEW_OFFSET_X-this.outerRectSize,this.state.offsetY=this.overviewOffsetY,this.state.csgOffsetX=h.z.OVERVIEW_OFFSET_X,this.state.csgOffsetY=h.z.OVERVIEW_OFFSET_Y,this.OverViewWorld=new l.E(0,0,0,0),this.SetOverviewWorld(),this.OverViewBtn=new l.E(0,0,0,0),this.OverviewReqLis=[],this.LoadPreviewBarImage(),this.FillVertexBuffer(),this.CreateColorTextures()}return n()(t,[{key:"Clear",value:function(t){t.deleteBuffer(this.OverViewTextureBuffer),t.deleteBuffer(this.OverViewVertexBuffer),t.deleteBuffer(this.OverViewOuterRectBuffer),t.deleteBuffer(this.OverViewRectBuffer),t.deleteBuffer(this.OverViewRectFillBuffer),t.deleteTexture(this.RedTex),t.deleteTexture(this.GreyText),t.deleteTexture(this.BlueText),t.deleteTexture(this.PrevBarText),t.deleteBuffer(this.PrevBarTextCoord),t.deleteBuffer(this.PreviewVertCoord)}},{key:"Draw",value:function(){this.OverviewReqLis.length=0;var t=0;if(!this.FCamera.FFLYMODE&&h.z.SHOW_OVERVIEW_PANEL){var e=this.FGlobe.FDrawedWorldMercOverview,i=e.UR,r=e.LL;(t=Math.min(this.FindObjectLODWD(Math.abs(i.y-r.y)),this.FindObjectLODHT(Math.abs(i.x-r.x)))-2)<0&&(t=0),-1!==this.FOverviewMAXLOD&&t>this.FOverviewMAXLOD&&(t=this.FOverviewMAXLOD);var s=new Date;-1!==this.FPrewLOD?s-this.StartPrewLODMS>2e3?(this.FPrewLOD=t,this.StartPrewLODMS=s):t>this.FPrewLOD?t=this.FPrewLOD:this.FPrewLOD=t:(this.FPrewLOD=t,this.StartPrewLODMS=s),-1!==this.FOverviewMAXLOD&&t>this.FOverviewMAXLOD&&(t=this.FOverviewMAXLOD);var o=u.c/Math.pow(2,t),n=o/2;this.FGlobe.FDrawedWorldMercOverview.GetCenterPoint(this.CenterP),this.FPrewW.CSMakeGeoW(this.CenterP,n,n),this.FPrewW.LL.y<-u.b&&(this.FPrewW.LL.y=-u.b,this.FPrewW.UR.y=-u.b+o),this.FPrewW.UR.y>u.b&&(this.FPrewW.UR.y=u.b,this.FPrewW.LL.y=u.b-o),this.FPrewW.LL.x<-u.b&&(this.FPrewW.LL.x=-u.b,this.FPrewW.UR.x=-u.b+o),this.FPrewW.UR.x>u.b&&(this.FPrewW.UR.x=u.b,this.FPrewW.LL.x=u.b-o),this.DrawOverviewBMP(t,this.FOverText,this.FOverBarText,this.FPrewW,this.FGlobe.FDrawedWorldMercOverview)}}},{key:"DrawOverviewBMP",value:function(t,e,i,r,s){var o,n,a,l,d,c,f=1/h.z.GLOBE_IMAGE_SIZE,p=this.FGlobe,F=p.gl,y=p.P2DmodelViewMatrixLoc,A=p.P2DOpacityLoc,g=p.P2DtextCoordLoc,C=p.P2DvertexPos,b=p.GLU,T=p.FRasters,v=p.FCells,L=p.FRNum,S=p.FCNum;if(d=Math.abs(r.UR.y-r.LL.y),c=Math.abs(r.UR.x-r.LL.x),F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),b.pushModel(),b.InitModel(),b.Translate(this.overviewOffsetX,this.overviewOffsetY,0),b.setModelToGL(y),F.enable(F.BLEND),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA),this.PreviewBarText&&(F.bindBuffer(F.ARRAY_BUFFER,this.PreviewBarTextCoordBuffer),F.vertexAttribPointer(g,2,F.FLOAT,!1,0,0),F.bindTexture(F.TEXTURE_2D,this.PreviewBarText),F.bindBuffer(F.ARRAY_BUFFER,this.PreviewBarVertexBuffer),F.vertexAttribPointer(C,2,F.FLOAT,!1,0,0),F.drawArrays(F.TRIANGLES,0,6)),!this.FOverviewCollaped){var x=(r.UR.y+u.b)/u.c,O=(r.LL.y+u.b)/u.c,R=(r.LL.x+u.b)/u.c,m=(r.UR.x+u.b)/u.c;if(F.uniform4fv(A,new Float32Array([1,1,1,1])),F.bindTexture(F.TEXTURE_2D,this.GreyText),F.bindBuffer(F.ARRAY_BUFFER,this.OverViewOuterRectBuffer),F.vertexAttribPointer(C,2,F.FLOAT,!1,0,0),F.drawArrays(F.TRIANGLES,0,6),F.bindTexture(F.TEXTURE_2D,this.FGlobe.FOverviewText),F.bindBuffer(F.ARRAY_BUFFER,this.OverViewTextureBuffer),F.bufferData(F.ARRAY_BUFFER,new Float32Array([x,R,O,m,O,R,O,m,x,R,x,m]),F.STATIC_DRAW),F.vertexAttribPointer(g,2,F.FLOAT,!1,0,0),F.bindBuffer(F.ARRAY_BUFFER,this.OverViewVertexBuffer),F.bufferData(F.ARRAY_BUFFER,new Float32Array([0,0,-this.PreviewWHPixel,-this.PreviewWHPixel,-this.PreviewWHPixel,0,-this.PreviewWHPixel,-this.PreviewWHPixel,0,0,0,-this.PreviewWHPixel]),F.STATIC_DRAW),F.vertexAttribPointer(C,2,F.FLOAT,!1,0,0),F.drawArrays(F.TRIANGLES,0,6),t>1)for(var D=T.length;D--;)if(T[D]._FActive){this.RasterID=D;for(var E=0;E<L;E++)for(var P=0;P<S;P++)v[E][P].isPole||this.DrawOverVisDepth(D,v[E][P],r,f,t,d,c);break}F.disable(F.BLEND);var _=this.PreviewWHPixel-1;o=(s.LL.y-r.LL.y)/d*_,a=(s.LL.x-r.LL.x)/c*_,n=(s.UR.y-r.LL.y)/d*_,l=(s.UR.x-r.LL.x)/c*_,Math.abs(o-n)<6&&(o-=3,n+=3),Math.abs(a-l)<6&&(a-=3,l+=3),this.DrawWorld(!1,o,a,n,l,F,C),this.DrawPrevBarRect(F,C)}F.enable(F.DEPTH_TEST),F.enable(F.CULL_FACE),b.popModel()}},{key:"DrawWorld",value:function(t,e,i,r,s,o,n){if(t)o.bindTexture(o.TEXTURE_2D,this.greytext),o.bindBuffer(o.ARRAY_BUFFER,this.OverViewRectFillBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-e,-i,-r,-s,-r,-i,-r,-s,-e,-i,-e,-s]),o.STATIC_DRAW),o.vertexAttribPointer(n,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,6),o.bindTexture(o.TEXTURE_2D,this.RedTex),o.bindBuffer(o.ARRAY_BUFFER,this.OverViewRectBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-e,-i,-r,-i,-r,-s,-e,-s]),o.STATIC_DRAW),o.vertexAttribPointer(n,2,o.FLOAT,!1,0,0),o.drawArrays(o.LINE_LOOP,0,4);else{var a=e-this.PreviewWHPixel,h=r-this.PreviewWHPixel,l=-i,u=-s;o.bindTexture(o.TEXTURE_2D,this.RedTex),o.bindBuffer(o.ARRAY_BUFFER,this.OverViewRectBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array([a,l,h,l,h,u,a,u]),o.STATIC_DRAW),o.vertexAttribPointer(n,2,o.FLOAT,!1,0,0),o.drawArrays(o.LINE_LOOP,0,4)}}},{key:"DrawPrevBarRect",value:function(t,e){t.bindTexture(t.TEXTURE_2D,this.BlueText),t.bindBuffer(t.ARRAY_BUFFER,this.BtnRectBuffer),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),t.drawArrays(t.LINE_LOOP,0,4)}},{key:"DrawOverVisDepth",value:function(t,e,i,r,s,o,n){var a,l,u,d=this.FGlobe,c=d.gl,f=d.P2DtextCoordLoc,p=d.P2DvertexPos;if(e.FLevel<=s){var F=e.mercatorRect.CSGetCommonRegion(i);if(F.res){if(e.FTextures[t].FTextName&&-1!==e.FTextures[t].FTextName){var y=F.reg,A=(y.LL.y-i.LL.y)/o*this.PreviewWHPixel,g=(y.LL.x-i.LL.x)/n*this.PreviewWHPixel,C=(y.UR.y-i.LL.y)/o*this.PreviewWHPixel,b=(y.UR.x-i.LL.x)/n*this.PreviewWHPixel,T=e.mercatorRect.UR.y-e.mercatorRect.LL.y;u=h.z.GLOBE_IMAGE_SIZE*(y.UR.y-y.LL.y)/T,l=Math.abs(C-A)>u;var v=(y.UR.y-e.mercatorRect.LL.y)/T-r,L=(y.LL.y-e.mercatorRect.LL.y)/T+r,S=(y.LL.x-e.mercatorRect.LL.x)/T-r,x=(y.UR.x-e.mercatorRect.LL.x)/T+r,O=-this.PreviewWHPixel+C,R=-this.PreviewWHPixel+A,m=-g,D=-b;c.bindTexture(c.TEXTURE_2D,e.FTextures[t].FTextName),c.bindBuffer(c.ARRAY_BUFFER,this.OverViewTextureBuffer),c.bufferData(c.ARRAY_BUFFER,new Float32Array([v,S,L,x,L,S,L,x,v,S,v,x]),c.STATIC_DRAW),c.vertexAttribPointer(f,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.OverViewVertexBuffer),c.bufferData(c.ARRAY_BUFFER,new Float32Array([O,m,R,D,R,m,R,D,O,m,O,D]),c.STATIC_DRAW),c.vertexAttribPointer(p,2,c.FLOAT,!1,0,0),c.drawArrays(c.TRIANGLES,0,6)}else l=!0,h.z.GLOBE_RASTER_LOD_PRIORITY&&!e.FTextures[t].FTextureRequested&&(e.FCurrentRequestRasterID=t,this.OverviewReqLis.push(e));if(l&&e.FActive)for(a=0;a<4;a++)e.FChilds[a]&&this.DrawOverVisDepth(t,e.FChilds[a],i,r,s,o,n)}}}},{key:"FillVertexBuffer",value:function(){var t=this.FGlobe.gl;this.FillOverviewBuffer(this.PreviewWHPixel,this.PreviewWHPixel,t),this.FillOuterRectBuffer(this.PreviewWHPixel,this.PreviewWHPixel,t),this.FillPreviewBarVertexBuffer(this.PreviewWHPixel,this.PreviewWHPixel,t),this.SetOverviewBtn(this.currentBtnOffset),this.FillBtnRectBuffer()}},{key:"FillOverviewBuffer",value:function(t,e,i){i.bindBuffer(i.ARRAY_BUFFER,this.OverViewVertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,-t,-e,-t,0,-t,-e,0,0,0,-e]),i.STATIC_DRAW)}},{key:"FillOuterRectBuffer",value:function(t,e,i){i.bindBuffer(i.ARRAY_BUFFER,this.OverViewOuterRectBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array([this.outerRectSize,this.outerRectSize,-t-this.outerRectSize,-e,-t-this.outerRectSize,this.outerRectSize,-t-this.outerRectSize,-e,this.outerRectSize,this.outerRectSize,this.outerRectSize,-e]),i.STATIC_DRAW)}},{key:"FillPreviewBarVertexBuffer",value:function(t,e,i){i.bindBuffer(i.ARRAY_BUFFER,this.PreviewBarVertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array([this.outerRectSize,-e,-t-this.outerRectSize,-e-16,-t-this.outerRectSize,-e,-t-this.outerRectSize,-e-16,this.outerRectSize,-e,this.outerRectSize,-e-16]),i.STATIC_DRAW)}},{key:"SetCollapse",value:function(){this.FOverviewCollaped=!this.FOverviewCollaped}},{key:"isDblClick",value:function(t,e){if(h.z.SHOW_OVERVIEW_PANEL&&!this.FOverviewCollaped&&(this.OverViewWorld.LL.y=this.overviewOffsetX-this.PreviewWHPixel,this.OverViewWorld.LL.x=this.overviewOffsetY-this.PreviewWHPixel,this.OverViewWorld.UR.y=this.OverViewWorld.LL.y+this.PreviewWHPixel,this.OverViewWorld.UR.x=this.OverViewWorld.LL.x+this.PreviewWHPixel,this.OverViewWorld.IsPointInRegionV(t,e))){var i=this.FPrewW.LL.y+(t-this.OverViewWorld.LL.y)*(this.FPrewW.UR.y-this.FPrewW.LL.y)/(this.PreviewWHPixel-1),r=this.FPrewW.LL.x+(this.PreviewWHPixel-(e-this.OverViewWorld.LL.x))*(this.FPrewW.UR.x-this.FPrewW.LL.x)/(this.PreviewWHPixel-1);return this.FGlobe.mercator.mercatorToLonLat(i,r,this.FGeoLonLat),this.FCamera.X2Uggv(this.FGeoLonLat.y,this.FGeoLonLat.x,this.FCamera.XcttbF(),0,0,null),!0}return!1}},{key:"SetOverviewBtn",value:function(t){t*=this.PreviewWHPixel/this.DefaultPrewW;var e=this.OverViewBtn,i=e.LL,r=e.UR;i.y=this.overviewOffsetX-this.PreviewWHPixel+t,i.x=this.overviewOffsetY-this.PreviewWHPixel-16,r.y=i.y+this.PreviewWHPixel/this.DefaultPrewW*18,r.x=i.x+14}},{key:"SetOverview",value:function(t,e,i){switch(i&&(this.PreviewWHPixel=i<64?64:i>512?512:i),null===t&&(t=this.overviewCorner),e||((e={}).x=h.z.OVERVIEW_OFFSET_X,e.y=h.z.OVERVIEW_OFFSET_Y),t){case h.a.LEFT_TOP:this.overviewOffsetX=e.x+this.PreviewWHPixel+this.outerRectSize,this.overviewOffsetY=e.y+this.PreviewWHPixel+16,this.state.offsetX=this.overviewOffsetX,this.state.offsetY=this.overviewOffsetY;break;case h.a.RIGHT_TOP:this.overviewOffsetX=this.FGlobe.FScrW-e.x-this.outerRectSize,this.overviewOffsetY=e.y+this.PreviewWHPixel+16,this.state.offsetX=-e.x-this.outerRectSize,this.state.offsetY=this.overviewOffsetY;break;case h.a.LEFT_BOTTOM:this.overviewOffsetX=e.x+this.PreviewWHPixel+this.outerRectSize,this.overviewOffsetY=this.FGlobe.FScrH-this.statusBarSize-e.y-this.outerRectSize,this.state.offsetX=e.x+this.PreviewWHPixel+this.outerRectSize,this.state.offsetY=-this.statusBarSize-e.y-this.outerRectSize;break;case h.a.RIGHT_BOTTOM:this.overviewOffsetX=this.FGlobe.FScrW-e.x-this.outerRectSize,this.overviewOffsetY=this.FGlobe.FScrH-this.statusBarSize-24-e.y-this.outerRectSize,this.state.offsetX=-e.x-this.outerRectSize,this.state.offsetY=-this.statusBarSize-24-e.y-this.outerRectSize}h.z.OVERVIEW_OFFSET_X=e.x,h.z.OVERVIEW_OFFSET_Y=e.y,this.overviewCorner=t,this.state.corner=this.overviewCorner,this.state.csgOffsetX=h.z.OVERVIEW_OFFSET_X,this.state.csgOffsetY=h.z.OVERVIEW_OFFSET_Y,this.CheckBoundry(),this.SetOverviewWorld(),this.FillOuterRectBuffer(this.PreviewWHPixel,this.PreviewWHPixel,this.FGlobe.gl),this.FillPreviewBarVertexBuffer(this.PreviewWHPixel,this.PreviewWHPixel,this.FGlobe.gl),this.SetOverviewBtn(this.currentBtnOffset),this.FillBtnRectBuffer()}},{key:"SetOverviewWorld",value:function(){this.OverViewWorld.LL.y=this.overviewOffsetX-this.PreviewWHPixel,this.OverViewWorld.LL.x=this.overviewOffsetY-this.PreviewWHPixel,this.OverViewWorld.UR.y=this.OverViewWorld.LL.y+this.PreviewWHPixel,this.OverViewWorld.UR.x=this.OverViewWorld.LL.x+this.PreviewWHPixel}},{key:"IsMouseInBtn",value:function(t,e,i,r){return!!this.OverViewBtn.IsPointInRegionV(t,e)&&(-2===i?this.SetCollapse():-3===i?h.z.SHOW_OVERVIEW_PANEL=!1:(this.currentBtnOffset=r,this.FOverviewMAXLOD=i,this.FPrewLOD=-1,this.FillBtnRectBuffer()),!0)}},{key:"onMouseDown",value:function(t,e,i){if(i===h.C){if(this.clickedOverviewMap=!1,!this.FCamera.FFLYMODE&&h.z.SHOW_OVERVIEW_PANEL){if(this.SetOverviewBtn(7),this.IsMouseInBtn(t,e,0,7))return!0;if(this.SetOverviewBtn(34),this.IsMouseInBtn(t,e,4,34))return!0;if(this.SetOverviewBtn(63),this.IsMouseInBtn(t,e,8,63))return!0;if(this.SetOverviewBtn(90),this.IsMouseInBtn(t,e,12,90))return!0;if(this.SetOverviewBtn(117),this.IsMouseInBtn(t,e,16,117))return!0;if(this.SetOverviewBtn(144),this.IsMouseInBtn(t,e,-1,144))return!0;if(this.SetOverviewBtn(212),this.IsMouseInBtn(t,e,-2,212))return!0;if(this.SetOverviewBtn(236),this.IsMouseInBtn(t,e,-3,236))return!0;if(!this.FOverviewCollaped&&this.OverViewWorld.IsPointInRegionV(t,e))return this.clickedOverviewMap=!0,this.mouse={x:t,y:e},!0}}else if(i===h.E&&!this.FCamera.FFLYMODE&&h.z.SHOW_OVERVIEW_PANEL&&this.OverViewWorld.IsPointInRegionV(t,e)){switch(h.z.OVERVIEW_OFFSET_X=this.state.csgOffsetX,h.z.OVERVIEW_OFFSET_Y=this.state.csgOffsetY,this.state.corner){case h.a.LEFT_TOP:this.overviewOffsetX=this.state.offsetX,this.overviewOffsetY=this.state.offsetY;break;case h.a.RIGHT_TOP:this.overviewOffsetX=this.FGlobe.FScrW+this.state.offsetX,this.overviewOffsetY=this.state.offsetY;break;case h.a.LEFT_BOTTOM:this.overviewOffsetX=this.state.offsetX,this.overviewOffsetY=this.FGlobe.FScrH+this.state.offsetY;break;case h.a.RIGHT_BOTTOM:this.overviewOffsetX=this.FGlobe.FScrW+this.state.offsetX,this.overviewOffsetY=this.FGlobe.FScrH+this.state.offsetY}return this.CheckBoundry(),this.SetOverviewWorld(),!0}return!1}},{key:"onMouseMove",value:function(t,e){var i,r;switch(this.overviewCorner){case h.a.LEFT_TOP:i=this.mouse.x-t-h.z.OVERVIEW_OFFSET_X,r=e-this.mouse.y+h.z.OVERVIEW_OFFSET_Y,this.overviewOffsetX=-i+this.PreviewWHPixel+this.outerRectSize,this.overviewOffsetY=r+this.PreviewWHPixel+16;break;case h.a.RIGHT_TOP:i=this.mouse.x-t+h.z.OVERVIEW_OFFSET_X,r=e-this.mouse.y+h.z.OVERVIEW_OFFSET_Y,this.overviewOffsetX=this.FGlobe.FScrW-i-this.outerRectSize,this.overviewOffsetY=r+this.PreviewWHPixel+16;break;case h.a.LEFT_BOTTOM:i=this.mouse.x-t-h.z.OVERVIEW_OFFSET_X,r=e-this.mouse.y-h.z.OVERVIEW_OFFSET_Y,this.overviewOffsetX=-i+this.PreviewWHPixel+this.outerRectSize,this.overviewOffsetY=this.FGlobe.FScrH-this.statusBarSize+r-this.outerRectSize;break;case h.a.RIGHT_BOTTOM:i=this.mouse.x-t+h.z.OVERVIEW_OFFSET_X,r=e-this.mouse.y-h.z.OVERVIEW_OFFSET_Y,this.overviewOffsetX=this.FGlobe.FScrW-i-this.outerRectSize,this.overviewOffsetY=this.FGlobe.FScrH-this.statusBarSize-24+r-this.outerRectSize}this.CheckBoundry()}},{key:"CheckBoundry",value:function(){this.overviewOffsetX>this.FGlobe.FScrW?this.overviewOffsetX=this.FGlobe.FScrW-this.outerRectSize:this.overviewOffsetX<this.PreviewWHPixel+this.outerRectSize&&(this.overviewOffsetX=this.PreviewWHPixel+this.outerRectSize),this.overviewOffsetY<this.PreviewWHPixel+16?this.overviewOffsetY=this.PreviewWHPixel+16:this.overviewOffsetY+24>this.FGlobe.FScrH&&(this.overviewOffsetY=this.FGlobe.FScrH-24),h.z.OVERVIEW_OFFSET_X<0?h.z.OVERVIEW_OFFSET_X=0:h.z.OVERVIEW_OFFSET_X>this.FGlobe.FScrW-2*this.outerRectSize-this.PreviewWHPixel&&(h.z.OVERVIEW_OFFSET_X=this.FGlobe.FScrW-this.PreviewWHPixel-2*this.outerRectSize),h.z.OVERVIEW_OFFSET_Y<0?h.z.OVERVIEW_OFFSET_Y=0:h.z.OVERVIEW_OFFSET_Y>this.FGlobe.FScrH-24-this.outerRectSize-this.PreviewWHPixel-16&&(h.z.OVERVIEW_OFFSET_Y=this.FGlobe.FScrH-24-this.PreviewWHPixel-16-this.outerRectSize)}},{key:"onMouseUp",value:function(){switch(this.overviewCorner){case h.a.LEFT_TOP:h.z.OVERVIEW_OFFSET_X=-this.mouse.x+this.FGlobe.MouseX+h.z.OVERVIEW_OFFSET_X,h.z.OVERVIEW_OFFSET_Y=this.FGlobe.MouseY-this.mouse.y+h.z.OVERVIEW_OFFSET_Y;break;case h.a.RIGHT_TOP:h.z.OVERVIEW_OFFSET_X=this.mouse.x-this.FGlobe.MouseX+h.z.OVERVIEW_OFFSET_X,h.z.OVERVIEW_OFFSET_Y=this.FGlobe.MouseY-this.mouse.y+h.z.OVERVIEW_OFFSET_Y;break;case h.a.LEFT_BOTTOM:h.z.OVERVIEW_OFFSET_X=-this.mouse.x+this.FGlobe.MouseX+h.z.OVERVIEW_OFFSET_X,h.z.OVERVIEW_OFFSET_Y=-this.FGlobe.MouseY+this.mouse.y+h.z.OVERVIEW_OFFSET_Y;break;case h.a.RIGHT_BOTTOM:h.z.OVERVIEW_OFFSET_X=this.mouse.x-this.FGlobe.MouseX+h.z.OVERVIEW_OFFSET_X,h.z.OVERVIEW_OFFSET_Y=-this.FGlobe.MouseY+this.mouse.y+h.z.OVERVIEW_OFFSET_Y}h.z.OVERVIEW_OFFSET_X<0?h.z.OVERVIEW_OFFSET_X=0:h.z.OVERVIEW_OFFSET_X>this.FGlobe.FScrW-2*this.outerRectSize-this.PreviewWHPixel&&(h.z.OVERVIEW_OFFSET_X=this.FGlobe.FScrW-this.PreviewWHPixel-2*this.outerRectSize),h.z.OVERVIEW_OFFSET_Y<0?h.z.OVERVIEW_OFFSET_Y=0:h.z.OVERVIEW_OFFSET_Y>this.FGlobe.FScrH-24-this.outerRectSize-this.PreviewWHPixel-16&&(h.z.OVERVIEW_OFFSET_Y=this.FGlobe.FScrH-24-this.PreviewWHPixel-16-this.outerRectSize),this.SetOverviewWorld()}},{key:"FillBtnRectBuffer",value:function(){var t=this.FGlobe.gl,e=this.OverViewBtn,i=e.LL,r=e.UR;t.bindBuffer(t.ARRAY_BUFFER,this.BtnRectBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([i.y-this.overviewOffsetX,i.x-this.overviewOffsetY,r.y-this.overviewOffsetX,i.x-this.overviewOffsetY,r.y-this.overviewOffsetX,r.x-this.overviewOffsetY,i.y-this.overviewOffsetX,r.x-this.overviewOffsetY]),t.STATIC_DRAW)}},{key:"CreateColorTextures",value:function(){var t=this.FGlobe.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.bindTexture(t.TEXTURE_2D,this.RedTex),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),t.bindTexture(t.TEXTURE_2D,this.GreyText),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([180,180,180,255])),t.bindTexture(t.TEXTURE_2D,this.BlueText),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,204,255])),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0)}},{key:"CreatePreviewBarTextureBuffer",value:function(){var t=this.FGlobe.gl;t.bindBuffer(t.ARRAY_BUFFER,this.PreviewBarTextCoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,0,0,1,0,0,1,1,1,0]),t.STATIC_DRAW)}},{key:"LoadPreviewBarImage",value:function(){var t=this,e=new Image;e.onload=function(){t.CreatePreviewBarTexture(e),t.CreatePreviewBarTextureBuffer()},e.crossOrigin="",e.src=a.j,e.width=256,e.height=16}},{key:"CreatePreviewBarTexture",value:function(t){var e=this.FGlobe.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,this.PreviewBarText),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.generateMipmap(e.TEXTURE_2D)}},{key:"FindObjectLODWD",value:function(t){var e,i,r;if(r=t,l.b.CSVerySuperZero(r))return h.z.GLOBE_MIN_CELL_LEVEL;for(i=u.c,e=0;r<i;)i/=2,e++;return e}},{key:"FindObjectLODHT",value:function(t){var e,i,r;if(r=t,l.b.CSVerySuperZero(r))return h.z.GLOBE_MIN_CELL_LEVEL;for(i=u.c,e=0;r<i;)i/=2,e++;return e}},{key:"Resize",value:function(){this.overviewCorner===h.a.RIGHT_TOP?(this.overviewOffsetX=this.FGlobe.FScrW-h.z.OVERVIEW_OFFSET_X-this.outerRectSize,this.overviewOffsetY=h.z.OVERVIEW_OFFSET_Y+this.PreviewWHPixel+16):this.overviewCorner===h.a.RIGHT_BOTTOM?(this.overviewOffsetX=this.FGlobe.FScrW-h.z.OVERVIEW_OFFSET_X-this.outerRectSize,this.overviewOffsetY=this.FGlobe.FScrH-this.statusBarSize-24-h.z.OVERVIEW_OFFSET_Y-this.outerRectSize):this.overviewCorner===h.a.LEFT_BOTTOM&&(this.overviewOffsetX=h.z.OVERVIEW_OFFSET_X+this.PreviewWHPixel+this.outerRectSize,this.overviewOffsetY=this.FGlobe.FScrH-this.statusBarSize-h.z.OVERVIEW_OFFSET_Y-this.outerRectSize),this.CheckBoundry(),this.SetOverviewWorld()}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(){s()(this,t),this.V=new Int32Array(5e5),this.TriIndex=[],this.result=!1}return n()(t,[{key:"InsideTriangle",value:function(t,e,i,r,s,o,n,a){return(s-i)*(a-r)-(o-r)*(n-i)>=0&&(t-s)*(a-o)-(e-o)*(n-s)>=0&&(i-t)*(a-e)-(r-e)*(n-t)>=0}},{key:"Snip",value:function(t,e,i,r,s){var o,n,a,h,l,u,d,c,f;if(n=t[2*this.V[e]],a=t[2*this.V[e]+1],h=t[2*this.V[i]],l=t[2*this.V[i]+1],u=t[2*this.V[r]],1e-10>(h-n)*((d=t[2*this.V[r]+1])-a)-(l-a)*(u-n))return!1;for(o=0;o<s;o++)if(o!==e&&o!==i&&o!==r&&(c=t[2*this.V[o]],f=t[2*this.V[o]+1],this.InsideTriangle(n,a,h,l,u,d,c,f)))return!1;return!0}},{key:"Triangulate",value:function(t,e){var i;this.TriIndex.length=0;for(var r=i=e?t.length/2-1:t.length/2;r--;)this.V[r]=r;var s=i,o=2*s,n=0,a=0;for(r=s-1;s>2;){if(--o<=0)return n;var h=r;s<=h&&(h=0),s<=(r=h+1)&&(r=0);var l=r+1;if(s<=l&&(l=0),this.Snip(t,h,r,l,s)){if(++a>i-2)return n;var u,d;for(this.TriIndex[n++]=this.V[h],this.TriIndex[n++]=this.V[r],this.TriIndex[n++]=this.V[l],u=r,d=r+1;d<s;u++,d++)this.V[u]=this.V[d];o=2*--s}}return n}},{key:"CSPointInPolygon",value:function(t,e,i){var r,s=0,o=0,n=0;for(i.length<4&&(o=0,n=1),r=i.length/2-1,s=n;n<r;s++)(i[2*s+1]<=e&&e<i[2*o+1]||i[2*o+1]<=e&&e<i[2*s+1])&&t-i[2*s]<(i[2*o]-i[2*s])*(e-i[2*s+1])/(i[2*o+1]-i[2*s+1])&&(this.result=!this.result),o=s}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=function(){function t(e,i){s()(this,t),this.parentNode=i,this.FGlobe=e,this.editWidgetLang=this.FGlobe.Lang[a.z.LANG].editVertexWidget,this.statusBarLang=this.FGlobe.Lang[a.z.LANG].statusBar,this.sbWidth=this.statusBarLang.width}return n()(t,[{key:"XEmB0A",value:function(){var t=this,e=this.parentNode.getBoundingClientRect();this.editWidget=document.createElement("div"),this.editWidget.style.zIndex=3,this.editWidget.style.top="10px",this.editWidget.style.left="".concat(e.width/2-62.5,"px"),this.editWidget.style.backgroundColor="#ffffff",this.editWidget.style.width="168px",this.editWidget.style.height="50px",this.editWidget.style.position="absolute",this.editWidget.style.borderRadius="10px",this.editWidget.style.overflow="hidden",this.editWidget.style.position="absolute",this.editWidget.style.visibility="hidden",this.dragbar=document.createElement("div"),this.dragbar.style.width="168px",this.dragbar.style.height="20px",this.dragbar.style.backgroundColor="#e2b7b5",this.dragbar.style.cursor="move";var i=document.createElement("style");i.appendChild(document.createTextNode(" .btnimg:hover{ cursor:pointer; background-color:bisque;} .btndef{  width:42px; } ")),document.body.appendChild(i);var r=document.createElement("img");r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABtwAAAbcB4ZtslQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAK5SURBVEiJxZbNS1RRGMZ/77ljYxSl9qHOBLawv6C2VuqUIUHgqrLaOBaKCREEIZFUSERE3+RXkiV9LYpWUTO4iHZF/4BUxjhjFqOVlI4z920xaePgfDBKPbtznuee3znvufeeI2TQxsG+/CnbrrRse6cKZSAlcUdHVeQjyosVkZ+DQ7Wt0+nGkVTGhuc9RTEHbQKHgZUZ5jOJcsuRH+n4VNE8njWo1NdbL+g1oDADIFlh0Oagp/FhsmHmtVTF5es9I+jdHCAARSD3Xf7e06jOW4SV2HBVbLgAnCRNSbOQANtXfXi37Ef/M39iZxzi796HysAiIYlSUdk7sqPh0RzI7buzRpkZAgqWCDKrcROlPLDLG/6zRzPHFwVROYFSDzKW5BTG8jgGIJvfdOaFJqyx3EH6JOhprANwv+ipVoMvKRAOWoFiE5rI25Y7hK9RaJpDGuoWyBS5bfdWg9o1OUIQoXnM0/gZwOW77SEBmihVqTEIZTlB4N5ItfcxxP8iYPeT+o0tM0BpDpyAU2Mtsw11cCXDOC6DpvlulNfGYhPwIMk5+n7HkW8Abl/XboUDmWZmEIIpKL+mZvJrA5XeoaAVOAg8hnjJgh7vU4iXTDFdmSBA0KAML+zJcqdzag8Ale3R0oJYPXDTckZaZxO2JdfJrvTD4vZ3V6mKP0VAFZpCHm9nsuF62bMfYSALCLZttpuS1fYrYCJFRgRuuHw9exM71/u6izFczgYChEfzPr02b7ccmQGupglawID7Ze8hAFTFgdxFWZcl6AqV7VEB2DjYVxCJxYaANWkeiCJyDlvXIrSkyf2V8GVqOr88XHvg+z87JuZO2GB1430RPbVEEBTaZiHzQAAjVd4OkLPx3CIYIu2h6obziZ3/6XLyRyFPw4CJUq5wCZjMAjCJctHhjJQvBIEsNn6pLpC/AfLPDov9tCnKAAAAAElFTkSuQmCC";var s=document.createElement("button");s.append(r),s.classList.add("btnimg"),s.classList.add("btndef");var o=document.createElement("img");o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABtwAAAbcB4ZtslQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAALcSURBVEiJtZbPb0xRFMc/50yLhiZU0nkzIjb1F0iImJnWgkbNJCQkxNKPhY2IWCBCkBIRGxvCTkTowmKmlVpQr1P+CUL86BtdlKRTwnTesWiH9vW9zqTqu3rnfk/O55777n3vCnX0rqtrxYrWynZBd2K2wRAHQLASZu99k2eT1vpi49OnPxeqI1HGx+6tbU3NsXPAMWBVnfmUMbn9C+vd0F/82jBoNLvtkCC3gDV1AEGNC3bcKYw8Cho6OzAQL5e+JMj9RUAA2gx56GVTFyzQxJzAy267DnJ6EYB5MuRqsjB8dh6olEsdNONBEP5vLDuQyI88/gP6tHfz2qbKsjcGq5cIUtPXqUq1Y/3g63EF0MryUxGQqhiHzWcXMBniT5rPLhE7AlRD/DXNzbGTAGKbNjV/SbSMhYFE5KiTH74HMNqTyYj6A8DKvxDtSQ64LkAplz5iZndDYONOuSmuY05LZ9SSme+/rT0nB1wXkd0znc2BBHMDavvS6mfUR7ojEkDliZdNb66FifzwS0R2ByGlntQWVJ5ElTHzu8XLpR5j7I+ETXeQTRSKQ2Gml011AQX+LmmI5JFiJBaAMFOgMFNwERAAS6pYQ+dGRFTnD6rS4LlTg891cibUdIeTd58HDSfvPlfTHcBEnRqfFeTDAgnfRXRPvN99VRvwcunO0Z5MphbH+91XIroH+L5AnQ+q2GCkLbZvdideLt2JWb+oPzAbNp1jkRtKRAe1vfTjpcC30ARIBiFMv/iVQZiIJsNqAOPxCXUFYDSb7hXsTEhSVYxjpuZh0sf83TVpPvs0ZuvM5A4QC5nsFadQPC8AY/u7VlV/TL0B4lHtL1KlWEvTxva+obICtPcNlUU4CdgSQgyxE+19Q2WY9Yd18sWHJpxfKopg52r/ojkggES+2IvIZf6tMwMuxgsj1+aCQ/TfLyc1JQsjD6Yq1Q7gJlBuAFDG5MYvoyMMAg18p5bqAvkbSgw4pYbwtWoAAAAASUVORK5CYII=";var n=document.createElement("button");n.append(o),n.classList.add("btnimg"),n.classList.add("btndef");var a=document.createElement("img");a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABtwAAAbcB4ZtslQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIfSURBVEiJzZU9a1NRGICf9zRqhyqRCiJ1KJSkFRGFRKqIUAcdLPUnOKgxmVwUJy2B4h+oQhO1BBUcpLrVxUUchLaJdNG0TSQWrCBYJaEdYu69r0O5Ett8WJMLPtM5L+ec53y+B/4r4mqGUoXOVobwNWtwcmKxp0L+2VpZuoEBT0ShZO5cRXkKdIMW/1VSXxRXE96fH0W5BXS0IqgrOpYq+H3l/GNgpB2CmqLj93OHtWy9AILtlACIWwgll4aNyhOFvXXaOsAnoIhSwlAEWRDHySr6oevrl3ev42es+qK4mvCB/G2UUcC0MOlV0OdiZHzuauD9FlE4kXsEXGxBsBlHYdL3kxsz1wIlN2gUcdooATACEXsnM4MPcgd/BzPRvksqOsrGGbSTAdvmpZtRDCKaiQbHHOU8sNqgowr8ANa3ITuyXrZuQtWtAzgxke21jW9KlVCNTsV0LOB3K6cmF3ZXKjv6HXUOCRxVYZjaKep71y5fj2yODqUKnWtl6x5wuZGoFoOJjwFb9DqqEapusMCFLSKXUDJ3RZS7gJu1m4pcwomlsyBTwJ4Nk96p+24y0cBDgzmNsPw3g1eTjgVfCToCWACq0tvwgc7G+tKmYoVAphHdlnAuFnwDjAMI4q+7de0glFzcJ2o+g0y3knKakon2fwPmFUpNf9iWEZkHZ8VzkaiTBVnxdOsAHCibDjvj/YqMWZ6NBAuer0hV3nrt+INfp728JNVGip4AAAAASUVORK5CYII=",this.btnimgUndo=document.createElement("button"),this.btnimgUndo.id="btnUndo",this.btnimgUndo.append(a),this.btnimgUndo.classList.add("btnimg"),this.btnimgUndo.classList.add("btndef");var h=document.createElement("img");h.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABtwAAAbcB4ZtslQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIVSURBVEiJ1ZLNS1RRGIef994rNUVotVCE6MNRDCuoGQNp4yqCajUtWxSCM+W4bhVN1KaFEkTUSBH9B61mJRRRBM5HHxuNGREV2olJBjPcmfO20Amt7jS3vEHP7rznd87zvocD/wODT+a2k1KrmWxTIS9WK9X30Y7Sy+P3ZjoDFQHtwCm7xf4QSRdPBymqs1eUTPRBMeX1lFslArARbkQ7Ss8i6dnWIEV1zouaqf6JYt/GojQ6MZh67qy2d54QkT4Vqxe0F6UN2AW0Age8mhVYVqyLuURXxlMUSc8eRc2oQAzY43+o7xiBm9l4+NYmUSQ92ypqxoDLXp3+CaL61Kkv+u+X9qmaSaBnqwR1VMRYAAPjiyG1NROApKbo9Vw8PGQBuKHyNeCIjwtWBZYBbZBZMsrZfKLnNiIqA+OLIXdH+RPQ9lNUmBZDBuGdYM20tLgfXw/1fqlvRx8WP7P2+zYfE/JV1469TR6ar9ecWqhy5geJAZkwNcYKI+GSjynXJMqjnduc0Rfxg+WNdUfRkxvWK2Lphexw96RfAVAGktkr3Y9/temoyP71p3ZVrHO54a5XvhXCvKlJrHA1nPeKOKC719N383HfkgWFedutXsolDy81CjpABahYVfeOTwm5RPexZrMWsAIUpn7T0d/ioMwJfA1SAuCIyLSBQKcBsGo18pZQCVxUGAmXUBYCFwEYkTdBi/4Z3wBun6/eNLCeBQAAAABJRU5ErkJggg==",this.btnimgRedo=document.createElement("button"),this.btnimgRedo.id="btnRedo",this.btnimgRedo.append(h),this.btnimgRedo.classList.add("btnimg"),this.btnimgRedo.classList.add("btndef");var l=document.createElement("div");l.style.float="left",l.appendChild(s),l.appendChild(n),l.appendChild(this.btnimgUndo),l.appendChild(this.btnimgRedo),this.editWidget.appendChild(this.dragbar),this.editWidget.appendChild(l),this.parentNode.append(this.editWidget),r.onclick=function(){t.FGlobe.api_StopEditObj(!1,!1)},o.onclick=function(){t.FGlobe.api_CancelEditObj()},this.btnimgUndo.onclick=function(e){t.FGlobe.api_UndoEdit(),t.FGlobe.api_CanUndoEdit()?(t.btnimgUndo.disabled=!1,t.btnimgUndo.style.backgroundColor="#f2f2f2"):(t.btnimgUndo.disabled=!0,t.btnimgUndo.style.backgroundColor="rgb(171, 171, 171)"),t.FGlobe.api_CanRedoEdit()?(t.btnimgRedo.disabled=!1,t.btnimgRedo.style.backgroundColor="#f2f2f2"):(t.btnimgRedo.disabled=!0,t.btnimgRedo.style.backgroundColor="rgb(171, 171, 171)")},this.btnimgRedo.onclick=function(e){t.FGlobe.api_RedoEdit(),t.FGlobe.api_CanRedoEdit()?(t.btnimgRedo.disabled=!1,t.btnimgRedo.style.backgroundColor="#f2f2f2"):(t.btnimgRedo.disabled=!0,t.btnimgRedo.style.backgroundColor="rgb(171, 171, 171)"),t.FGlobe.api_CanUndoEdit()?(t.btnimgUndo.disabled=!1,t.btnimgUndo.style.backgroundColor="#f2f2f2"):(t.btnimgUndo.disabled=!0,t.btnimgUndo.style.backgroundColor="rgb(171, 171, 171)")}}},{key:"CreateVertexEditWidget",value:function(){var t=this,e=this.parentNode.getBoundingClientRect();this.editVertexWidget=document.createElement("div"),this.editVertexWidget.style.zIndex=5,this.editVertexWidget.style.top="".concat(e.height/2-125,"px"),this.editVertexWidget.style.left="".concat(e.width/2-180,"px"),this.editVertexWidget.style.backgroundColor="#ffffff",this.editVertexWidget.style.width="max-content",this.editVertexWidget.style.height="max-content",this.editVertexWidget.style.position="absolute",this.editVertexWidget.style.paddingBottom="2px",this.editVertexWidget.style.borderRadius="10px",this.editVertexWidget.style.overflow="hidden",this.editVertexWidget.style.visibility="hidden",this.dragbarVertex=document.createElement("div"),this.dragbarVertex.style.width="auto",this.dragbarVertex.style.height="20px",this.dragbarVertex.style.backgroundColor="#e2b7b5",this.dragbarVertex.style.cursor="move",this.pVertex=document.createElement("p"),this.pVertex.style.marginTop="20px",this.pVertex.style.textAlign="center",this.bigDiv=document.createElement("div"),this.bigDiv.style.width="max-content",this.bigDiv.style.float="left",this.pForVertexEnlem=document.createElement("div"),this.pForVertexEnlem.style.width="max-content",this.pForVertexEnlem.style.height="max-content",this.pForVertexEnlem.style.float="left",this.pForVertexEnlem.style.marginLeft="10px",this.spanVertexEnlem=document.createElement("span"),this.spanVertexEnlem.style.marginTop="20px",this.spanVertexEnlem.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.lat,this.spanVertexEnlem.style.textAlign="right",this.spanVertexEnlem.style.display="block",this.spanVertexEnlem.style.height="20px",this.spanVertexBoylam=document.createElement("span"),this.spanVertexBoylam.style.marginTop="20px",this.spanVertexBoylam.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.lng,this.spanVertexBoylam.style.textAlign="right",this.spanVertexBoylam.style.display="block",this.spanVertexBoylam.style.height="20px",this.spanKot=document.createElement("span"),this.spanKot.style.marginTop="20px",this.spanKot.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.kot,this.spanKot.style.textAlign="right",this.spanKot.style.display="block",this.spanKot.style.height="20px",this.pYukseklik=document.createElement("span"),this.pYukseklik.style.marginTop="20px",this.pYukseklik.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.height,this.pYukseklik.style.textAlign="right",this.pYukseklik.style.display="block",this.pYukseklik.style.height="20px",this.pForVertexEnlem.appendChild(this.spanVertexEnlem),this.pForVertexEnlem.appendChild(this.spanVertexBoylam),this.pForVertexEnlem.appendChild(this.spanKot),this.pForVertexEnlem.appendChild(this.pYukseklik),this.textandinput=document.createElement("div"),this.textandinput.style.width="max-content",this.textandinput.style.height="max-content",this.textandinput.style.float="left",this.textandinput.style.marginLeft="10px",this.pAppend=document.createElement("div"),this.pAppend.style.marginLeft="20px",this.pAppend.innerHTML="",this.pAppend.style.width="max-content",this.pAppend.style.display="inline",this.pAppend.style.height="max-content",this.textBoxVertexEnlem=document.createElement("input"),this.textBoxVertexEnlem.style.width="130px",this.textBoxVertexEnlem.style.display="inline",this.textBoxVertexEnlem.style.marginTop="10px",this.textBoxVertexEnlem.style.height="20px",this.spanEnlemDerece=document.createElement("span"),this.spanEnlemDerece.style.marginLeft="5px",this.spanEnlemDerece.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.degree,this.spanEnlemDerece.style.marginRight="30px",this.spanEnlemDerece.style.height="20px",this.pAppend.appendChild(this.textBoxVertexEnlem),this.pAppend.appendChild(this.spanEnlemDerece),this.textandinput.appendChild(this.pAppend),this.sAppend=document.createElement("div"),this.sAppend.style.marginLeft="20px",this.sAppend.style.marginTop="20px",this.sAppend.innerHTML="",this.sAppend.style.display="table-caption",this.sAppend.style.width="max-content",this.sAppend.style.height="max-content",this.textBoxVertexBoylam=document.createElement("input"),this.textBoxVertexBoylam.style.width="130px",this.textBoxVertexBoylam.style.display="inline",this.textBoxVertexBoylam.style.height="20px",this.spanBoylamDerece=document.createElement("span"),this.spanBoylamDerece.style.marginLeft="5px",this.spanBoylamDerece.style.display="inline",this.spanBoylamDerece.style.marginRight="30px",this.spanBoylamDerece.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.degree,this.spanBoylamDerece.style.height="20px",this.sAppend.appendChild(this.textBoxVertexBoylam),this.sAppend.appendChild(this.spanBoylamDerece),this.textandinput.appendChild(this.sAppend),this.spanAppendKot=document.createElement("div"),this.spanAppendKot.style.marginTop="20px",this.spanAppendKot.style.marginLeft="20px",this.spanAppendKot.innerHTML="",this.spanAppendKot.style.width="max-content",this.spanAppendKot.style.height="max-content",this.textBoxVertexKot=document.createElement("input"),this.textBoxVertexKot.style.width="130px",this.textBoxVertexKot.style.display="inline",this.textBoxVertexKot.style.height="20px",this.spanKotMetre=document.createElement("span"),this.spanKotMetre.style.marginLeft="5px",this.spanKotMetre.style.display="inline",this.spanKotMetre.style.marginRight="30px",this.spanKotMetre.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.meter,this.spanKotMetre.style.height="20px",this.spanAppendKot.appendChild(this.textBoxVertexKot),this.spanAppendKot.appendChild(this.spanKotMetre),this.textandinput.appendChild(this.spanAppendKot),this.spanAppendYukseklik=document.createElement("div"),this.spanAppendYukseklik.style.marginTop="20px",this.spanAppendYukseklik.style.marginLeft="20px",this.spanAppendYukseklik.innerHTML="",this.spanAppendYukseklik.style.width="max-content",this.spanAppendYukseklik.style.height="max-content",this.textBoxVertexYukseklik=document.createElement("input"),this.textBoxVertexYukseklik.style.width="130px",this.textBoxVertexYukseklik.style.display="inline",this.textBoxVertexYukseklik.style.height="20px",this.spanYukseklikMetre=document.createElement("span"),this.spanYukseklikMetre.style.marginLeft="5px",this.spanYukseklikMetre.style.display="inline",this.spanYukseklikMetre.style.marginRight="30px",this.spanYukseklikMetre.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.meter,this.spanYukseklikMetre.style.height="20px",this.spanAppendYukseklik.appendChild(this.textBoxVertexYukseklik),this.spanAppendYukseklik.appendChild(this.spanYukseklikMetre),this.textandinput.appendChild(this.spanAppendYukseklik),this.bigDiv.appendChild(this.pForVertexEnlem),this.bigDiv.appendChild(this.textandinput),this.btnOk=document.createElement("button"),this.btnOk.style.width="100px",this.btnOk.style.height="35px",this.btnOk.style.marginTop="5px",this.btnOk.style.backgroundColor="#e2b7b5",this.btnOk.style.borderRadius="10px",this.btnOk.textContent=this.FGlobe.Lang[a.z.LANG].editVertexWidget.ok,this.btnCancel=document.createElement("button"),this.btnCancel.style.width="100px",this.btnCancel.style.height="35px",this.btnCancel.style.marginTop="5px",this.btnCancel.style.marginLeft="10px",this.btnCancel.style.backgroundColor="#e2b7b5",this.btnCancel.style.borderRadius="10px",this.btnCancel.textContent=this.FGlobe.Lang[a.z.LANG].editVertexWidget.cancel;var i=document.createElement("div");i.style.textAlign="center",i.style.float="center",i.appendChild(this.btnOk),i.appendChild(this.btnCancel),this.editVertexWidget.appendChild(this.dragbarVertex),this.editVertexWidget.appendChild(this.pVertex),this.editVertexWidget.appendChild(this.bigDiv),this.editVertexWidget.appendChild(i),this.parentNode.append(this.editVertexWidget),this.btnOk.onclick=function(){!t.FGlobe.FLastEditingObj.solid3D||t.FGlobe.FLastEditingObj.type!==a.j.POLYGON&&t.FGlobe.FLastEditingObj.type!==a.j.SHAPE&&t.FGlobe.FLastEditingObj.type!==a.j.ARCAREA||(t.FGlobe.FLastEditingObj.fixedHeights?t.FGlobe.FLastEditingObj.heights[0]=parseFloat(t.textBoxVertexYukseklik.value):t.FGlobe.FLastEditingObj.heights[t.vertexIndex]=parseFloat(t.textBoxVertexYukseklik.value)),t.FGlobe.FLastEditingObj.type===a.j.LINE||t.FGlobe.FLastEditingObj.type===a.j.POLYGON?(t.FGlobe.FLastEditingObj.coords[2*t.vertexIndex]=parseFloat(t.textBoxVertexEnlem.value),t.FGlobe.FLastEditingObj.coords[2*t.vertexIndex+1]=parseFloat(t.textBoxVertexBoylam.value),t.FGlobe.FLastEditingObj.coordsZ[t.vertexIndex]=parseFloat(t.textBoxVertexKot.value),t.FGlobe.FLastEditingObj.style.zMode===a.u.Z_GROUND_FOLLOW&&t.FGlobe.FLastEditingObj.coordsZ.fill(t.FGlobe.FLastEditingObj.coordsZ[t.vertexIndex])):(t.FGlobe.FLastEditingObj.coords[0]=parseFloat(t.textBoxVertexEnlem.value),t.FGlobe.FLastEditingObj.coords[1]=parseFloat(t.textBoxVertexBoylam.value),t.FGlobe.FLastEditingObj.coordsZ[0]=parseFloat(t.textBoxVertexKot.value)),t.FGlobe.FLastEditingObj.eVal.willDrawIcon=0,t.FGlobe.FLastEditingObj.eVal.lastSnapIndex=-1,t.FGlobe.FLastEditingObj.eVal.zPointSnapped=!1,t.FGlobe.FLastEditingObj.rebuild(),t.pYukseklik.style.visibility="hidden",t.spanAppendYukseklik.style.visibility="hidden",t.editVertexWidget.style.visibility="hidden"},this.btnCancel.onclick=function(){t.FGlobe.FLastEditingObj.eVal.willDrawIcon=0,t.FGlobe.FLastEditingObj.eVal.lastSnapIndex=-1,t.FGlobe.FLastEditingObj.eVal.zPointSnapped=!1,t.pYukseklik.style.visibility="hidden",t.spanAppendYukseklik.style.visibility="hidden",t.editVertexWidget.style.visibility="hidden"}}},{key:"ShowVertexWidget",value:function(t){this.vertexIndex=t,"tr"===a.z.LANG?this.pVertex.innerHTML="".concat(t+1,". ").concat(this.FGlobe.Lang[a.z.LANG].editVertexWidget.headerV):"eng"===a.z.LANG&&(this.pVertex.innerHTML="".concat(this.FGlobe.Lang[a.z.LANG].editVertexWidget.headerV," ").concat(t+1)),this.textBoxVertexEnlem.value=this.FGlobe.FLastEditingObj.coords[2*this.vertexIndex],this.textBoxVertexBoylam.value=this.FGlobe.FLastEditingObj.coords[2*this.vertexIndex+1],this.textBoxVertexKot.value=this.FGlobe.FLastEditingObj.coordsZ[this.vertexIndex],this.FGlobe.FLastEditingObj.solid3D&&this.FGlobe.FLastEditingCallback.can_change.height&&this.FGlobe.FLastEditingObj.type===a.j.POLYGON?(this.FGlobe.FLastEditingObj.fixedHeights?this.textBoxVertexYukseklik.value=this.FGlobe.FLastEditingObj.heights[0]:this.textBoxVertexYukseklik.value=this.FGlobe.FLastEditingObj.heights[t],this.pYukseklik.style.visibility="visible",this.spanAppendYukseklik.style.visibility="visible"):(this.spanAppendYukseklik.style.visibility="hidden",this.pYukseklik.style.visibility="hidden"),this.FGlobe.FLastEditingCallback.can_change.vertex?(this.textBoxVertexEnlem.disabled=!1,this.textBoxVertexBoylam.disabled=!1):(this.textBoxVertexEnlem.disabled=!0,this.textBoxVertexBoylam.disabled=!0),this.FGlobe.FLastEditingCallback.can_change.Z?this.textBoxVertexKot.disabled=!1:this.textBoxVertexKot.disabled=!0,this.editVertexWidget.style.visibility="visible"}},{key:"ShowVertexWidgetForPMAS",value:function(){this.vertexIndex=0,this.pVertex.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.headerO,this.textBoxVertexEnlem.value=this.FGlobe.FLastEditingObj.coords[0],this.textBoxVertexBoylam.value=this.FGlobe.FLastEditingObj.coords[1],this.textBoxVertexKot.value=this.FGlobe.FLastEditingObj.coordsZ[0],this.FGlobe.FLastEditingObj.solid3D&&this.FGlobe.FLastEditingCallback.can_change.height&&(this.FGlobe.FLastEditingObj.type===a.j.SHAPE||this.FGlobe.FLastEditingObj.type===a.j.ARCAREA)?(this.textBoxVertexYukseklik.value=this.FGlobe.FLastEditingObj.heights[0],this.pYukseklik.style.visibility="visible",this.spanAppendYukseklik.style.visibility="visible"):(this.pYukseklik.style.visibility="hidden",this.spanAppendYukseklik.style.visibility="hidden"),this.FGlobe.FLastEditingCallback.can_change.vertex?(this.textBoxVertexEnlem.disabled=!1,this.textBoxVertexBoylam.disabled=!1):(this.textBoxVertexEnlem.disabled=!0,this.textBoxVertexBoylam.disabled=!0),this.FGlobe.FLastEditingCallback.can_change.Z?this.textBoxVertexKot.disabled=!1:this.textBoxVertexKot.disabled=!0,this.editVertexWidget.style.visibility="visible"}},{key:"SetPopupValues",value:function(){this.spanVertexEnlem.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.lat,this.spanEnlemDerece.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.degree,this.spanVertexBoylam.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.lng,this.spanBoylamDerece.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.degree,this.spanKot.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.kot,this.spanKotMetre.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.meter,this.pYukseklik.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.height,this.spanYukseklikMetre.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.meter,this.btnOk.textContent=this.FGlobe.Lang[a.z.LANG].editVertexWidget.ok,this.btnCancel.textContent=this.FGlobe.Lang[a.z.LANG].editVertexWidget.cancel,this.FGlobe.FLastEditingObj&&(this.FGlobe.FLastEditingObj.type===a.j.POLYGON||this.FGlobe.FLastEditingObj.type===a.j.LINE?"tr"===a.z.LANG?this.pVertex.innerHTML="".concat(this.vertexIndex+1,". ").concat(this.FGlobe.Lang[a.z.LANG].editVertexWidget.headerV):"eng"===a.z.LANG&&(this.pVertex.innerHTML="".concat(this.FGlobe.Lang[a.z.LANG].editVertexWidget.headerV," ").concat(this.vertexIndex+1)):this.pVertex.innerHTML=this.FGlobe.Lang[a.z.LANG].editVertexWidget.headerO)}},{key:"XDD5V3",value:function(t){this.editWidget.offsetLeft<=0?this.editWidget.style.left="0px":this.editWidget.offsetLeft>=t.right-168-t.left&&(this.editWidget.style.left="".concat(t.right-168-t.left,"px")),this.editWidget.offsetTop<0?this.editWidget.style.top="0px":this.editWidget.offsetTop>=t.bottom-50&&(this.editWidget.style.top="".concat(t.bottom-50,"px"))}},{key:"EditVertexWidgetResize",value:function(t){this.editVertexWidget.offsetLeft<=0?this.editVertexWidget.style.left="0px":this.editVertexWidget.offsetLeft>=t.right-this.editVertexWidget.clientWidth-t.left&&(this.editVertexWidget.style.left="".concat(t.right-this.editVertexWidget.clientWidth-t.left,"px")),this.editVertexWidget.offsetTop<0?this.editVertexWidget.style.top="0px":this.editVertexWidget.offsetTop>=t.bottom-this.editVertexWidget.clientHeight&&(this.editVertexWidget.style.top="".concat(t.bottom-this.editVertexWidget.clientHeight,"px"))}},{key:"CreateStatusBarWidGet",value:function(t,e){this.statusBarLang=this.FGlobe.Lang[a.z.LANG].statusBar,this.sbWidth=this.statusBarLang.width;var i=document.getElementById("statusWidget"),r=null,s=parseInt(t.bottom)-e;return i?(i.innerHTML="",r=i):(r=document.createElement("div")).id="statusWidget",r.oncontextmenu=function(){return!1},r.append(this.StaticLabel("fps",this.statusBarLang.fps+this.statusBarLang.colon,"white","8px","5px",null,"12px","arial","".concat(this.sbWidth.fps,"px"))),r.append(this.ValueLabel("fpsVal","white","8px","5px","12px","arial","30px")),r.append(this.StaticLabel("lod",this.statusBarLang.lod+this.statusBarLang.colon,"white","8px","10px",null,"12px","arial","".concat(this.sbWidth.lod,"px"))),r.append(this.ValueLabel("lodVal","white","8px","5px","12px","arial","30px")),r.append(this.ValueLabel("ebVal","white","8px","5px","12px","arial","300px")),r.append(this.StaticLabel("Z",this.statusBarLang.z+this.statusBarLang.colon,"white","8px","10px",null,"12px","arial","".concat(this.sbWidth.z,"px"))),r.append(this.ValueLabel("zVal","white","8px","5px","12px","arial","80px")),r.append(this.StaticLabel("alt",this.statusBarLang.altitude+this.statusBarLang.colon,"white","8px","5px",null,"12px","arial","".concat(this.sbWidth.altitude,"px"))),r.append(this.ValueLabel("aVal","white","8px","10px","12px","arial","90px")),r.append(this.StaticLabel("bakis",this.statusBarLang.north+this.statusBarLang.colon,"white","8px","5px",null,"12px","arial","".concat(this.sbWidth.north,"px"))),r.append(this.ValueLabel("bakVal","white","8px","5px,","12px","arial","40px")),r.append(this.StaticLabel("is",this.statusBarLang.target+this.statusBarLang.colon,"white","8px","5px",null,"12px","arial","".concat(this.sbWidth.target,"px"))),r.append(this.ValueLabel("isVal","white","8px","5px","12px","arial","20px")),r.append(this.ValueLabel("DataPersecond","white","8px","5px","12px","arial","100px",null,null,"absolute","150px")),r.append(this.StaticLabel("version","v".concat(a.z.GLOBE_VERSION),"white","3px","5px","absolute","8px","arial",null,"15px")),r.append(this.ProgressBar(70,4)),this.ctx.clearRect(0,0,70,4),this.ctx.fillStyle="rgba(0,255,0,255)",this.ctx.fillRect(0,0,70,4),r.style="width:".concat(t.width,"px; height:").concat(e,"px ;position:absolute; top:").concat(s,"px; left:0px; z-index:2; background-color:rgba(126,126,180,0.4); float:left; display:flex; align-content:center; "),r}},{key:"CreateDebugWidget",value:function(){var t=document.createElement("div"),e=30;return t.append(this.StaticLabel("da","FDrawedMaxCell:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("va","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dp","FDrawedCell:","white","8px","5px","absolute","12px","arial","80px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vp","white","8px","5px","12px","arial","70px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("de","FTotal:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("ve","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("db","FLive:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vb","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dc","FDead:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vc","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("do","FTextureCells:","white","8px","5px","absolute","12px","arial","80px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vo","white","8px","5px","12px","arial","70px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dr","TextureSize:","white","8px","5px","absolute","12px","arial","80px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vr","white","8px","5px","12px","arial","70px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("ds","CellSize:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vs","white","8px","5px","12px","arial","100px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dm","Total Download:","white","8px","5px","absolute","12px","arial","100px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vm","white","8px","5px","12px","arial","80px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("df","FontDrawerLivePacket:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vf","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dg","FontDrawerDeadPacket:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vg","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dw","UserObjCount:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vw","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dl","LayerIconCount:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vl","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dn","LayerLineCount:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vn","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dv","LayerPolygonCount:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vv","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dmesh","MeshCacheLength:","white","8px","5px","absolute","12px","arial","30px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vmesh","white","8px","5px","12px","arial","20px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("drasterloadercache","RasterLoader CacheLength:","white","8px","5px","absolute","12px","arial","250px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vrasterloadercache","white","8px","5px","12px","arial","80px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("drasterloaderprocess","RasterLoader Process Count:","white","8px","5px","absolute","12px","arial","250px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vrasterloaderprocess","white","8px","5px","12px","arial","80px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("drastertimeoutcount","Raster Timeout Count:","white","8px","5px","absolute","12px","arial","250px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vrastertimeoutcount","white","8px","5px","12px","arial","80px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dlayerloadercache","LayerLoader CacheLength:","white","8px","5px","absolute","12px","arial","250px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vlayerloadercache","white","8px","5px","12px","arial","80px","175px","".concat(e,"px"),"absolute")),e+=20,t.append(this.StaticLabel("dlayerloaderprocess","LayerLoader Process Count:","white","8px","5px","absolute","12px","arial","250px",null,"10px","".concat(e,"px"))),t.append(this.ValueLabel("vlayerloaderprocess","white","8px","5px","12px","arial","80px","175px","".concat(e,"px"),"absolute")),e+=20,t.style="width:250px; height:"+e+"px; background-color:rgba(126,126,126,0.4); top: 200px; left:25px; position:absolute;",t}},{key:"StaticLabel",value:function(t,e,i,r,s,o,n,a,h,l,u,d){var c=document.createElement("label");return c.innerHTML=e,c.id=t,c.display="inline-block",c.style.color=i,c.style.fontSize=n,c.style.marginTop=r,c.style.marginLeft=s,c.style.fontFamaily=a,o&&(c.style.position=o),l&&(c.style.right=l),u&&(c.style.left=u),d&&(c.style.top=d),h&&(c.style.width=h),c}},{key:"ValueLabel",value:function(t,e,i,r,s,o,n,a,h,l,u){var d=document.createElement("label");return d.id=t,d.display="inline-block",d.style.color=e,d.style.fontSize=s,d.style.marginTop=i,d.style.marginLeft=r,d.style.fontFamily=o,a&&(d.style.left=a),u&&(d.style.right=u,d.style.textAlign="right"),h&&(d.style.top=h),l&&(d.style.position=l),n&&(d.style.width=n),d}},{key:"ProgressBar",value:function(t,e){var i=document.createElement("canvas");return this.ctx=i.getContext("2d"),i.width=t,i.height=e,i.style.marginTop="10px",i.style.position="absolute",i.style.right="15px",i}},{key:"GetProgressBarCtx",value:function(){return this.ctx}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(){s()(this,t),this.down=null,this.move=null,this.up=null,this.click=null,this.dblclick=null,this.zoomstart=null,this.zoomend=null,this.downArr=[],this.moveArr=[],this.upArr=[],this.clickArr=[],this.dblclickArr=[],this.zoomstartArr=[],this.zoomendArr=[]}return n()(t,[{key:"SetEvent",value:function(t,e){e?(this[t]=e,this[t+"Arr"].push(e)):this.DeleteEvent(t,this[t])}},{key:"GetEvent",value:function(t){var e=this[t];return this.DeleteEvent(t,this[t]),e}},{key:"DeleteEvent",value:function(t,e){var i=this[t+"Arr"].indexOf(e),r=this[t+"Arr"].length;i>-1&&(this[t+"Arr"].splice(i,1),r>1?r-1===i&&(this[t]=this[t+"Arr"][r-2]):this[t]=null)}},{key:"Clear",value:function(){this.down=null,this.move=null,this.up=null,this.click=null,this.dblclick=null,this.zoomstart=null,this.zoomend=null,this.downArr.length=0,this.moveArr.length=0,this.upArr.length=0,this.clickArr.length=0,this.dblclickArr.length=0,this.zoomstartArr.length=0,this.zoomendArr.length=0}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=function(){function t(e){s()(this,t),this.Definitions={},this.Definitions[h.r.PERPENDICULAR_TRIANGLE]={vert:[-1,1,-1,-1,1,-1],triIndis:null,triIndexCnt:null},this.Definitions[h.r.ISOSCELES_TRIANGLE]={vert:[-1,-.8,0,1,1,-.8],triIndis:null,triIndexCnt:null},this.Definitions[h.r.EQUILATERAL_TRIANGLE]={vert:[0,1,.866,-.5,-.866,-.5],triIndis:null,triIndexCnt:null},this.Definitions[h.r.RECTANGLE]={vert:[-1,-1,1,-1,1,1,-1,1],triIndis:null,triIndexCnt:null},this.Definitions[h.r.PENTAGON]={vert:[0,1,.9511,.309,.5878,-.809,-.5878,-.809,-.9511,.309],triIndis:null,triIndexCnt:null},this.Definitions[h.r.HEXAGON]={vert:[-1,0,-.5,1,.5,1,1,0,.5,-1,-.5,-1],triIndis:null,triIndexCnt:null},this.Definitions[h.r.OCTAGON]={vert:[0,1,.7071,.7071,1,0,.7071,-.7071,0,-1,-.7071,-.7071,-1,0,-.7071,.7071],triIndis:null,triIndexCnt:null},this.Definitions[h.r.PLUS]={vert:[-1,-.2,-1,.2,-.2,.2,-.2,1,.2,1,.2,.2,1,.2,1,-.2,.2,-.2,.2,-1,-.2,-1,-.2,-.2],triIndis:null,triIndexCnt:null},this.Definitions[h.r.TRISTAR]={vert:[0,1,.2165,.125,.866,-.5,0,-.25,-.866,-.5,-.2165,.125],triIndis:null,triIndexCnt:null},this.Definitions[h.r.RECSTAR]={vert:[0,1,.2113,.2113,1,0,.2113,-.2113,0,-1,-.2113,-.2113,-1,0,-.2113,.2113],triIndis:null,triIndexCnt:null},this.Definitions[h.r.PENTASTAR]={vert:[0,1,.2245,.309,.9511,.309,.3633,-.118,.5878,-.809,0,-.382,-.5878,-.809,-.3633,-.118,-.9511,.309,-.2245,.309],triIndis:null,triIndexCnt:null},this.Definitions[h.r.SPEECH_BUBBLE]={vert:[-1,-.5,-1,1,1,1,1,-.5,-.3,-.5,-1,-1,-.7,-.5],triIndis:null,triIndexCnt:null},this.Definitions[h.r.LONG_RIGHT_ARROW]={vert:[-1,-.2,-1,.2,.4,.2,.4,.5,1,0,.4,-.5,.4,-.2],triIndis:null,triIndexCnt:null},this.Definitions[h.r.SHORT_RIGHT_ARROW]={vert:[-1,-.2,-1,.2,0,.2,0,.5,1,0,0,-.5,0,-.2],triIndis:null,triIndexCnt:null},this.Definitions[h.r.LEFT_RIGHT_ARROW]={vert:[-1,0,-.4,.5,-.4,.2,.4,.2,.4,.5,1,0,.4,-.5,.4,-.2,-.4,-.2,-.4,-.5],triIndis:null,triIndexCnt:null},this.DisplayName=[{name:"Perpendicular Triangle",type:h.r.PERPENDICULAR_TRIANGLE},{name:"Isosceles Triangle",type:h.r.ISOSCELES_TRIANGLE},{name:"Equilateral Triangle",type:h.r.EQUILATERAL_TRIANGLE},{name:"Rectangle",type:h.r.RECTANGLE},{name:"Pentagon",type:h.r.PENTAGON},{name:"Hexagon",type:h.r.HEXAGON},{name:"Octagon",type:h.r.OCTAGON},{name:"Ellipse",type:h.r.ELLIPSE},{name:"Plus",type:h.r.PLUS},{name:"Tri Star",type:h.r.TRISTAR},{name:"Rec Star",type:h.r.RECSTAR},{name:"Penta Star",type:h.r.PENTASTAR},{name:"Speech Bubble",type:h.r.SPEECH_BUBBLE},{name:"Short Right Arrow",type:h.r.SHORT_RIGHT_ARROW},{name:"Long Right Arrow",type:h.r.LONG_RIGHT_ARROW},{name:"Left Right Arrow",type:h.r.LEFT_RIGHT_ARROW}],this.triangulateDefinitions(e)}return n()(t,[{key:"triangulateDefinitions",value:function(t){for(var e=Object.keys(this.Definitions),i=e.length;i--;){a.b.PolyMakeCCW(this.Definitions[e[i]].vert);for(var r=this.Definitions[e[i]].vert.length;r--;)this.Definitions[e[i]].vert[r]*=1e4;for(r=0;r<this.Definitions[e[i]].vert.length-1;r+=2)this.Definitions[e[i]].vert[r]===this.Definitions[e[i]].vert[r+2]&&this.Definitions[e[i]].vert[r+1]===this.Definitions[e[i]].vert[r+3]&&this.Definitions[e[i]].vert.splice(r,2);var s=Math.sqrt((this.Definitions[e[i]].vert[0]-this.Definitions[e[i]].vert[this.Definitions[e[i]].vert.length-2])*(this.Definitions[e[i]].vert[0]-this.Definitions[e[i]].vert[this.Definitions[e[i]].vert.length-2])+(this.Definitions[e[i]].vert[1]-this.Definitions[e[i]].vert[this.Definitions[e[i]].vert.length-1])*(this.Definitions[e[i]].vert[1]-this.Definitions[e[i]].vert[this.Definitions[e[i]].vert.length-1]))<a.f;this.Definitions[e[i]].triIndexCnt=t.Triangulate(this.Definitions[e[i]].vert,s);for(r=this.Definitions[e[i]].vert.length;r--;)this.Definitions[e[i]].vert[r]/=1e4;this.Definitions[e[i]].triIndexCnt&&(this.Definitions[e[i]].triIndis=new Uint16Array(t.TriIndex))}}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(e,i){s()(this,t),this.Operations=[],this.curPointer=-1,this.maxRecordNum=i,this.FGlobe=e,this.changedCallback=null}return n()(t,[{key:"XF471F",value:function(t){this.Operations.length=0,this.curPointer=-1;var e=this.FGlobe.CSWidgets,i=e.btnimgUndo,r=e.btnimgRedo;i.disabled=!0,i.style.backgroundColor="rgb(171, 171, 171)",r.disabled=!0,r.style.backgroundColor="rgb(171, 171, 171)"}},{key:"Undo",value:function(t){this.CanUndo()&&(t.eVal.undo(this.Operations[this.curPointer]),this.curPointer--),this.changedCallback&&this.changedCallback()}},{key:"Redo",value:function(t){this.CanRedo()&&(this.curPointer++,t.eVal.redo(this.Operations[this.curPointer])),this.changedCallback&&this.changedCallback()}},{key:"CanUndo",value:function(){return this.curPointer>-1}},{key:"CanRedo",value:function(){return this.curPointer<this.Operations.length-1}},{key:"SaveOpr",value:function(t){if(this.curPointer++,this.Operations[this.curPointer]=t,this.Operations.length-1>this.curPointer&&(this.Operations.length=this.curPointer+1),-1!==this.maxRecordNum&&this.Operations.length>this.maxRecordNum&&(this.Operations.shift(),this.curPointer--),this.FGlobe.FLastEditingCallback&&this.FGlobe.FLastEditingCallback.show_editwidget){var e=this.FGlobe.CSWidgets,i=e.btnimgUndo,r=e.btnimgRedo;this.FGlobe.api_CanUndoEdit()?(i.disabled=!1,i.style.backgroundColor="#f2f2f2"):(i.disabled=!0,i.style.backgroundColor="rgb(171, 171, 171)"),this.FGlobe.api_CanRedoEdit()?(r.disabled=!1,r.style.backgroundColor="#f2f2f2"):(r.disabled=!0,r.style.backgroundColor="rgb(171, 171, 171)")}else this.changedCallback&&this.changedCallback()}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=new Float32Array([1,1,1,1]),l=new(function(){function t(){s()(this,t)}return n()(t,[{key:"DrawEditTexture",value:function(t,e,i,r){var s=t.GLU,o=t.gl;s.pushModel(),s.Translate(e.eVal.editCanvasPoint.x,e.eVal.editCanvasPoint.y,0);s.Scale(1,1,1),r&&-2===e.eVal.lastSnapIndex&&s.Scale(1.5,1.5,1.5),s.setModelToGL(t.P2DmodelViewMatrixLoc),o.bindBuffer(o.ARRAY_BUFFER,t.EditTexCoordBuff),o.vertexAttribPointer(t.P2DtextCoordLoc,2,o.FLOAT,!1,0,0),o.bindTexture(o.TEXTURE_2D,i),o.uniform4fv(t.P2DOpacityLoc,h),o.bindBuffer(o.ARRAY_BUFFER,t.EditTexVertexBuff),o.vertexAttribPointer(t.P2DvertexPos,3,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,6),s.popModel()}},{key:"DrawEditIcons",value:function(t){var e=t.eVal;if(e)switch(t.type){case a.j.POINT:e.FHighlight&&this.DrawSingle(t);break;case a.j.LINE:e.FHighlight&&t.coordsZ.length>2&&this.DrawMulti(t);break;case a.j.POLYGON:e.FHighlight&&t.coordsZ.length>3&&this.DrawMulti(t);break;case a.j.SHAPE:e.FHighlight&&!e.isFreeDrawing&&this.DrawMulti(t);break;case a.j.MODEL:e.FHighlight&&this.DrawSingle(t);break;case a.j.ARCAREA:e.FHighlight&&!e.isFreeDrawing&&this.DrawMulti(t)}}},{key:"DrawSingle",value:function(t){var e=t.eVal,i=t.obj.FGlobe;e.createEditCanvasPoint(e.editGeo3D,e.editGeo3C),e.editCanvasPoint.isValid&&e.editTexture&&this.DrawEditTexture(i,t,e.editTexture,!1)}},{key:"DrawMulti",value:function(t){var e=t.eVal,i=t.obj.FGlobe;!e.editTexture||0!==e.willDrawIcon&&1!==e.willDrawIcon||(e.createEditCanvasPoint(e.editGeo3D,e.editGeo3C),e.editCanvasPoint.isValid&&this.DrawEditTexture(i,t,e.editTexture,!0)),!e.editMoveTexture||0!==e.willDrawIcon&&2!==e.willDrawIcon||(e.createEditCanvasPoint(e.editGeo3DForCZero,e.editGeo3CForCZero),e.editCanvasPoint.isValid&&this.DrawEditTexture(i,t,e.editMoveTexture,!1)),!e.editMoveTexture||0!==e.willDrawIcon&&3!==e.willDrawIcon||(e.createEditCanvasPoint(e.editGeo3DForC90,e.editGeo3CForC90),e.editCanvasPoint.isValid&&this.DrawEditTexture(i,t,e.editMoveTexture,!1)),!e.editRotateTexture||0!==e.willDrawIcon&&4!==e.willDrawIcon||(e.createEditCanvasPoint(e.editGeo3DForC180,e.editGeo3CForC180),e.editCanvasPoint.isValid&&this.DrawEditTexture(i,t,e.editRotateTexture,!1)),t.type!==a.j.ARCAREA||!e.editRotateTexture||0!==e.willDrawIcon&&5!==e.willDrawIcon||(e.createEditCanvasPoint(e.editGeo3DForC270,e.editGeo3CForC270),e.editCanvasPoint.isValid&&this.DrawEditTexture(i,t,e.editRotateTexture,!1))}}]),t}())},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=function(){function t(e){s()(this,t),this.FGlobe=e,this.offsetX=10,this.offsetY=-10,this.Units=this.FGlobe.Units,this.SetLang()}return n()(t,[{key:"SetLang",value:function(){var t=this.FGlobe.Lang[a.z.LANG].userObj;this.shapeLang=t.shape,this.arcLang=t.arc,this.modelLang=t.model,this.pointLang=t.point,this.polyLang=t.polygon}},{key:"DrawText",value:function(t,e,i){var r=e.obj,s=r.tempp2d,o=r.CanvasPoint,n=e.coords,h=e.coordsZ;this.uobj=e,e.type===a.j.SHAPE?(s.SetV(n[0],n[1]),s.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(s,this.FindZ(0),o),o.isValid&&this.DrawToCanvas2d(this.shapeLang.zstr+this.Units.GetDistAsString(h[0]),!0,i)):e.type===a.j.ARCAREA?(s.SetV(e.obj.midCoord.x,e.obj.midCoord.y),s.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(s,this.FindZ(0),o),o.isValid&&this.DrawToCanvas2d(this.arcLang.zstr+this.Units.GetDistAsString(h[0]),!0,i)):e.type===a.j.MODEL?(s.SetV(n[0],n[1]),s.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(s,this.FindZ(0),o),o.isValid&&this.DrawToCanvas2d(this.modelLang.zstr+this.Units.GetDistAsString(h[0]),!0,i)):e.type===a.j.POINT?(s.SetV(n[0],n[1]),s.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(s,this.FindZ(0),o),o.isValid&&this.DrawToCanvas2d(this.pointLang.zstr+this.Units.GetDistAsString(h[0]),!0,i)):(s.SetV(n[2*t],n[2*t+1]),s.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(s,this.FindZ(t),o),o.isValid&&this.DrawToCanvas2d(this.polyLang.zstr+this.Units.GetDistAsString(h[t]),!0,i))}},{key:"DrawToCanvas2d",value:function(t,e,i){var r=this.FGlobe.ctxForDistAndHeight,s=this.uobj.obj.CanvasPoint,o=this.uobj.style;if(e){r.lineJoin="round",r.textBaseline="middle";var n=12*a.z.GLOBE_TEXT_SCALE;r.font="bold "+n+"pt Arial",r.lineWidth=3,r.strokeStyle="rgba(0,0,0, ".concat(o.opacity/2,")"),r.strokeText(t,s.x+this.offsetX,s.y+this.offsetY),r.lineWidth=1.5,r.strokeStyle="rgba(0,0,0,".concat(o.opacity,")"),r.strokeText(t,s.x+this.offsetX,s.y+this.offsetY),r.fillStyle=i,r.fillStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),r.fillText(t,s.x+this.offsetX,s.y+this.offsetY)}}},{key:"FindZ",value:function(t){return this.uobj.style.zMode===a.u.Z_MSL?this.uobj.coordsZ[t]:this.FGlobe.XyecYr(this.uobj.obj.tempp2d,!0)+this.uobj.coordsZ[t]}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(12),s=i.n(r),o=i(2),n=i.n(o),a=i(3),h=i.n(a),l=i(1),u=function(){function t(e){n()(this,t),this.gl=e,this.chars=" \"!#$%&'()*+,-./\\0123456789:;<=>@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz",this.chars+=String.fromCharCode(287,286,304,305,351,350),this.chars+=String.fromCharCode(123,124,125,126),this.undefinedChar="?";for(var i=130;i<255;i++)this.chars+=String.fromCharCode(i);this.SDFFonts=[],this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.AddCustomFont(null,{name:"arial",chars:this.chars,undefinedChar:"?"})}return h()(t,[{key:"Clear",value:function(t){if(void 0===t){for(var e=Object.keys(this.SDFFonts),i=e.length;i--;)this.gl.deleteTexture(this.SDFFonts[e[i]].texture),delete this.SDFFonts[e[i]];return!0}return"object"===s()(this.SDFFonts[t])&&(this.gl.deleteTexture(this.SDFFonts[t].texture),delete this.SDFFonts[t],!0)}},{key:"DrawToCtx",value:function(t,e,i,r){r&&(this.ctx.lineWidth=i||3,this.ctx.strokeStyle="rgba(0,0,0,128)",this.ctx.strokeText(e,32*t.c+7,32*t.r+17),this.ctx.lineWidth=i/3||1,this.ctx.strokeStyle="rgba(0,0,0,255)",this.ctx.strokeText(e,32*t.c+7,32*t.r+17)),this.ctx.fillStyle="rgba(255,255,255,255)",this.ctx.fillText(e,32*t.c+7,32*t.r+17)}},{key:"PutSDFCharCooors",value:function(t,e,i){i.charCoords["".concat(e)]={},i.charCoords["".concat(e)].x=32*t.c/this.canvas.width,i.charCoords["".concat(e)].y=32*t.r/this.canvas.height,i.charCoords["".concat(e)].width=this.ctx.measureText(e).width}},{key:"CheckRowCollumn",value:function(t){t.c++,t.c>=this.canvas.width/32&&(t.r++,t.c=0)}},{key:"SetCtxFont",value:function(t){var e,i,r=t.italic,s=t.name||"sans-serif";return e=t.bold?"bold":"normal",i=r?"italic":"",this.ctx.textBaseline="middle",this.ctx.lineJoin="round",this.ctx.fillStyle="rgba(0,0,0,0)",this.ctx.font="".concat(i," ").concat(e," 16pt ").concat(s),{special:"".concat(i," ").concat(e," 16pt ").concat(s),normal:"".concat(i," ").concat(e," 14pt ").concat(s)}}},{key:"CreateCustomFont",value:function(t,e){var i={customName:t,name:e.name||"arial",hollow:e.hollow||!0,hollowWidth:e.hollowWidth||3,italic:e.italic||!1,bold:e.bold||!0};this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=l.b.NearestPowOfUpperForImageLayer(32*Math.sqrt(e.chars.length)),this.canvas.height=this.canvas.width;var r={font:i,chars:e.chars,undefinedChar:e.undefinedChar,charCoords:{},texture:null,cwidth:this.canvas.width,cheight:this.canvas.height};r.undefinedChar||(r.undefinedChar=this.undefinedChar);var s=this.SetCtxFont(i);this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);var o={r:0,c:0},n="",a=i.hollow,h=i.hollowWidth,u=h;h<1&&(u=1);for(var d=["@","_","(",")","[","]"],c=0;c<e.chars.length;c++)n=String.fromCharCode(e.chars.charCodeAt([c])),-1!==d.indexOf(n)?this.ctx.font=s.special:this.ctx.font=s.normal,this.DrawToCtx(o,n,u,a),this.PutSDFCharCooors(o,n,r),this.CheckRowCollumn(o);return n=String.fromCharCode(r.undefinedChar.charCodeAt([0])),this.DrawToCtx(o,n,u,a),this.PutSDFCharCooors(o,n,r),this.XNPtRY(r),r}},{key:"Create",value:function(t,e){var i={font:e,chars:t.chars,undefinedChar:e.undefinedChar,charCoords:{},texture:null,cwidth:t.cwidth,cheight:t.cheight};i.undefinedChar||(i.undefinedChar=this.undefinedChar);var r=this.SetCtxFont(e);this.ctx.fillRect(0,0,i.cwidth,i.cheight);var s={r:0,c:0},o="",n=e.hollow,a=e.hollowWidth,h=a;a<1&&(h=1);for(var l=["@","_","(",")","[","]"],u=0;u<i.chars.length;u++)o=String.fromCharCode(i.chars.charCodeAt([u])),-1!==l.indexOf(o)?this.ctx.font=r.special:this.ctx.font=r.normal,this.DrawToCtx(s,o,h,n),this.PutSDFCharCooors(s,o,i),this.CheckRowCollumn(s);return o=String.fromCharCode(i.undefinedChar.charCodeAt([0])),this.DrawToCtx(s,o,h,n),this.PutSDFCharCooors(s,o,i),this.XNPtRY(i),i}},{key:"XNPtRY",value:function(t){var e=new Uint8Array(this.ctx.getImageData(0,0,t.cwidth,t.cheight).data),i=this.gl,r=i.createTexture();i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.bindTexture(i.TEXTURE_2D,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.cwidth,t.cheight,0,i.RGBA,i.UNSIGNED_BYTE,e),i.generateMipmap(i.TEXTURE_2D),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.texture=r}},{key:"Add",value:function(t){for(var e=this.SDFFonts.length;e--;)if(t.customName){if(this.SDFFonts[e]&&this.SDFFonts[e].font.customName===t.customName)return e}else if(this.SDFFonts[e].font.name===t.name&&this.SDFFonts[e].font.bold===t.bold&&this.SDFFonts[e].font.italic===t.italic&&this.SDFFonts[e].font.hollow===t.hollow&&this.SDFFonts[e].font.hollowWidth===t.hollowWidth)return e;return t.hasOwnProperty("customName")&&!t.customName?0:(this.SDFFonts.push(this.Create(this.SDFFonts[0],t)),this.SDFFonts.length-1)}},{key:"AddCustomFont",value:function(t,e){for(var i=this.SDFFonts.length;i--;)if(this.SDFFonts[i]&&this.SDFFonts[i].font.customName===t)return void(this.SDFFonts[i]=this.CreateCustomFont(t,e));this.SDFFonts.push(this.CreateCustomFont(t,e))}},{key:"Update",value:function(t,e){return"object"===s()(this.SDFFonts[e])&&(this.Clear(this.SDFFonts.Id),this.SDFFonts[e]=this.Create(t),!0)}},{key:"Delete",value:function(t){return"object"===s()(this.SDFFonts[t])&&(this.Clear(this.SDFFonts.Id),delete this.SDFFonts[t],!0)}},{key:"Get",value:function(t){return this.SDFFonts[t]}},{key:"GetAllFonts",value:function(){return this.SDFFonts}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=function(){function t(e){s()(this,t),this.FGlobe=e,this.FColor=new Float32Array([1,1,1]),this.opacity=1,this.FRefreshTimer=null,this.FRasterId=null,this.WMSUrl=null,this.imageSize,this.FRefreshTimer=null,this.IntervalFRefreshTimer=this.IntervalFRefreshTimer.bind(this),this.FDrawedWorldDegObj={ll:{x:0,y:0},ur:{x:0,y:0}},this.w=new a.E(0,0,0,0)}return n()(t,[{key:"IntervalFRefreshTimer",value:function(){if(!this.FRasterId||!this.FGlobe.FCamera.IsScreenMoving()&&this.IsPrevWorldChanged()){var t=this.FRasterId;h.z.NEXT_WMS_OVERLAY_ID++,this.FRasterId="$$WMSOVERLAY$$"+h.z.NEXT_WMS_OVERLAY_ID.toString();var e=this.MakeWMSUrl(this.WMSUrl);this.FDrawedWorldDegObj.ll.y=this.FGlobe.FDrawedWorldDeg.LL.x,this.FDrawedWorldDegObj.ll.x=this.FGlobe.FDrawedWorldDeg.LL.y,this.FDrawedWorldDegObj.ur.y=this.FGlobe.FDrawedWorldDeg.UR.x,this.FDrawedWorldDegObj.ur.x=this.FGlobe.FDrawedWorldDeg.UR.y,this.FGlobe.AddImageOverlay(this.FRasterId,e,this.FDrawedWorldDegObj,this.FColor,this.opacity,0,t,this.zOrder,this.callback)}}},{key:"IsPrevWorldChanged",value:function(){var t,e,i,r="$$WMSOVERLAY$$"+h.z.NEXT_WMS_OVERLAY_ID.toString();this.FGlobe.api_GetImageOverlayBBOX(r,this.w);var s=this.FGlobe.FDrawedWorldDeg.CSGetCommonRegion(this.w);return!s.res||(t=this.w.CSGeoWorldArea(),e=this.FGlobe.FDrawedWorldDeg.CSGeoWorldArea(),i=s.reg.CSGeoWorldArea(),e>1.2*t||(t>1.2*e||i<.8*t))}},{key:"MakeWMSUrl",value:function(t){var e=this.FGlobe.FDrawedWorldDeg,i=this.imageSize.toString();return t+"&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&SRS=EPSG:4326&STYLES=&WIDTH="+i+"&HEIGHT="+i+"&FORMAT=image/jpeg"+"&BBOX=".concat(e.LL.y,",").concat(e.LL.x,",").concat(e.UR.y,",").concat(e.UR.x)}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return C});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=Math.PI,u=Math.sin,d=Math.cos,c=Math.tan,f=Math.asin,p=Math.atan2,F=Math.acos,y=Math.PI/180,A=23.4397*y,g=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]],C=function(){function t(e){s()(this,t),this.FGlobe=e,this.sun,this.moon,this.moonIllum,this.sunPath=[],this.sunPathTime=[],this.moonPath=[],this.moonPathTime=[],this.sunPoints=[],this.moonPoints=[],this.sunTimeCoords=[],this.moonTimeCoords=[]}return n()(t,[{key:"toJulian",value:function(t){return t.valueOf()/864e5-.5+2440588}},{key:"fromJulian",value:function(t){return new Date(864e5*(t+.5-2440588))}},{key:"toDays",value:function(t){return this.toJulian(t)-2451545}},{key:"rightAscension",value:function(t,e){return p(u(t)*d(A)-c(e)*u(A),d(t))}},{key:"declination",value:function(t,e){return f(u(e)*d(A)+d(e)*u(A)*u(t))}},{key:"azimuth",value:function(t,e,i){return p(u(t),d(t)*u(e)-c(i)*d(e))}},{key:"altitude",value:function(t,e,i){return f(u(e)*u(i)+d(e)*d(i)*d(t))}},{key:"siderealTime",value:function(t,e){return y*(280.16+360.9856235*t)-e}},{key:"astroRefraction",value:function(t){return t<0&&(t=0),2967e-7/Math.tan(t+.00312536/(t+.08901179))}},{key:"solarMeanAnomaly",value:function(t){return y*(357.5291+.98560028*t)}},{key:"eclipticLongitude",value:function(t){return t+y*(1.9148*u(t)+.02*u(2*t)+3e-4*u(3*t))+102.9372*y+l}},{key:"sunCoords",value:function(t){var e=this.solarMeanAnomaly(t),i=this.eclipticLongitude(e);return{dec:this.declination(i,0),ra:this.rightAscension(i,0)}}},{key:"julianCycle",value:function(t,e){return Math.round(t-9e-4-e/(2*l))}},{key:"approxTransit",value:function(t,e,i){return 9e-4+(t+e)/(2*l)+i}},{key:"solarTransitJ",value:function(t,e,i){return 2451545+t+.0053*u(e)-.0069*u(2*i)}},{key:"hourAngle",value:function(t,e,i){return F((u(t)-u(e)*u(i))/(d(e)*d(i)))}},{key:"getSetJ",value:function(t,e,i,r,s,o,n){var a=this.hourAngle(t,i,r),h=this.approxTransit(a,e,s);return this.solarTransitJ(h,o,n)}},{key:"getPosition",value:function(t,e,i){var r=y*-i,s=y*e,o=this.toDays(t),n=this.sunCoords(o),a=this.siderealTime(o,r)-n.ra;return{azimuth:this.azimuth(a,s,n.dec),altitude:this.altitude(a,s,n.dec)}}},{key:"addTime",value:function(t,e,i){g.push([t,e,i])}},{key:"getTimes",value:function(t,e,i){var r,s,o,n,a,h=y*-i,l=y*e,u=this.toDays(t),d=this.julianCycle(u,h),c=this.approxTransit(0,h,d),f=this.solarMeanAnomaly(c),p=this.eclipticLongitude(f),F=this.declination(p,0),A=this.solarTransitJ(c,f,p),C={solarNoon:this.fromJulian(A),nadir:this.fromJulian(A-.5)};for(r=0,s=g.length;r<s;r+=1)o=g[r],a=A-((n=this.getSetJ(o[0]*y,h,l,F,d,f,p))-A),C[o[1]]=this.fromJulian(a),C[o[2]]=this.fromJulian(n);return C}},{key:"moonCoords",value:function(t){var e=y*(134.963+13.064993*t),i=y*(93.272+13.22935*t),r=y*(218.316+13.176396*t)+6.289*y*u(e),s=5.128*y*u(i),o=385001-20905*d(e);return{ra:this.rightAscension(r,s),dec:this.declination(r,s),dist:o}}},{key:"getMoonPosition",value:function(t,e,i){var r=y*-i,s=y*e,o=this.toDays(t),n=this.moonCoords(o),a=this.siderealTime(o,r)-n.ra,h=this.altitude(a,s,n.dec),l=p(u(a),c(s)*d(n.dec)-u(n.dec)*d(a));return h+=this.astroRefraction(h),{azimuth:this.azimuth(a,s,n.dec),altitude:h,distance:n.dist,parallacticAngle:l}}},{key:"hoursLater",value:function(t,e){return new Date(t.valueOf()+864e5*e/24)}},{key:"getMoonTimes",value:function(t,e,i,r){var s=new Date(t);r?s.setUTCHours(0,0,0,0):s.setHours(0,0,0,0);for(var o,n,a,h,l,u,d,c,f,p,F,A,g,C=.133*y,b=this.getMoonPosition(s,e,i).altitude-C,T=1;T<=24&&(o=this.getMoonPosition(hoursLater(s,T),e,i).altitude-C,c=((l=(b+(n=this.getMoonPosition(hoursLater(s,T+1),e,i).altitude-C))/2-o)*(d=-(u=(n-b)/2)/(2*l))+u)*d+o,p=0,(f=u*u-4*l*o)>=0&&(F=d-(g=Math.sqrt(f)/(2*Math.abs(l))),A=d+g,Math.abs(F)<=1&&p++,Math.abs(A)<=1&&p++,F<-1&&(F=A)),1===p?b<0?a=T+F:h=T+F:2===p&&(a=T+(c<0?A:F),h=T+(c<0?F:A)),!a||!h);T+=2)b=n;var v={};return a&&(v.rise=this.hoursLater(s,a)),h&&(v.set=this.hoursLater(s,h)),a||h||(v[c>0?"alwaysUp":"alwaysDown"]=!0),v}},{key:"CalcSunPositionByLatLngZero",value:function(t){var e=this.ourSunCoords(t),i=(e.L+180)/15+(t.getHours()+t.getMinutes()/60+t.getSeconds()/3600),r=a.b.CSNormalizeAngle(15*i-180*e.ra/Math.PI);(r=-r)<-180&&(r+=360),r>180&&(r-=360),this.sun={lng:r,lat:180*e.dec/Math.PI}}},{key:"CalcMoonPositionByLatLngZero",value:function(t){var e=this.toDays(t),i=this.moonCoords(e),r=(a.b.CSNormalizeAngle(280.46+.9856474*e)+180)/15+(t.getHours()+t.getMinutes()/60+t.getSeconds()/3600),s=a.b.CSNormalizeAngle(15*r-180*i.ra/Math.PI);(s=-s)<-180&&(s+=360),s>180&&(s-=360),this.moon={lng:s,lat:180*i.dec/Math.PI}}},{key:"ourSunCoords",value:function(t){var e=this.toDays(t),i=Math.PI/180,r=23.4393-3.563e-7*e,s=a.b.CSNormalizeAngle(280.46+.9856474*e),o=a.b.CSNormalizeAngle(357.528+.9856003*e),n=s+1.915*Math.sin(o*i)+.02*Math.sin(2*o*i),h=Math.atan2(Math.cos(r*i)*Math.sin(n*i),Math.cos(n*i));return{dec:Math.asin(Math.sin(r*i)*Math.sin(n*i)),ra:h,L:s}}},{key:"CalcMoonIllumination",value:function(t){var e=this.toDays(t||new Date),i=this.sunCoords(e),r=this.moonCoords(e),s=F(u(i.dec)*u(r.dec)+d(i.dec)*d(r.dec)*d(i.ra-r.ra)),o=p(149598e3*u(s),r.dist-149598e3*d(s)),n=.5+.5*o*(p(d(i.dec)*u(i.ra-r.ra),u(i.dec)*d(r.dec)-d(i.dec)*u(r.dec)*d(i.ra-r.ra))<0?-1:1)/Math.PI,a=this.FindPhaseOfMoon(n);this.moonIllum={fraction:(1+d(o))/2,phase:a,phaseValue:n}}},{key:"FindPhaseOfMoon",value:function(t){var e=this.FGlobe.Lang[h.z.LANG].moonPhase;return t<.0625?e.newMoon:t<.1875?e.waxCres:t<.3125?e.firstQrt:t<.4375?e.waxGib:t<.5625?e.fullMoon:t<.6875?e.wanGib:t<.8125?e.thirdQrt:t<.9375?e.wanCres:e.oldMoon}},{key:"CalcPathsAndTimes",value:function(t,e){for(var i,r,s,o,n=[],a=[],h=[],l=[],u=0;u<144;u++)e?r=i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()+10*u,t.getSeconds()):(i=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()+10*u,t.getUTCSeconds()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()+10*u,t.getSeconds())),this.CalcSunPositionByLatLngZero(i),this.CalcMoonPositionByLatLngZero(i),this.CalcMoonIllumination(i),n.push(this.sun.lng),n.push(this.sun.lat),a.push(this.moon.lng),a.push(this.moon.lat),u%6==0&&(s=0===t.getMinutes()?r.getMinutes()+"0":r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),o=0===r.getHours()?"00":r.getHours()<10?"0"+r.getHours():r.getHours(),h.push(this.sun.lng,this.sun.lat,o+":"+s),l.push(this.moon.lng,this.moon.lat,o+":"+s));this.CalcSunPositionByLatLngZero(t),this.CalcMoonPositionByLatLngZero(t),this.sunPath=n.slice(),this.moonPath=a.slice(),this.sunTimeCoords=h.slice(),this.moonTimeCoords=l.slice()}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=function(){function t(){s()(this,t),this.mercatorTileCacheObj={}}return n()(t,[{key:"GetImageFromCache",value:function(t){return this.mercatorTileCacheObj.hasOwnProperty(t)?this.mercatorTileCacheObj[t]:null}},{key:"AddImageToCache",value:function(t,e){this.mercatorTileCacheObj[t]=e;var i=Object.keys(this.mercatorTileCacheObj);a.z.XYZ_MERCATOR_CACHE_SIZE<i.length&&(window.URL.revokeObjectURL(this.mercatorTileCacheObj[i[0]].src),this.mercatorTileCacheObj[i[0]]=null,delete this.mercatorTileCacheObj[i[0]])}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=function(){function t(){s()(this,t),this.MVTCacheObj={}}return n()(t,[{key:"GetArrBufferFromCache",value:function(t){return this.MVTCacheObj.hasOwnProperty(t)?this.MVTCacheObj[t]:null}},{key:"AddArrBufferToCache",value:function(t,e){this.MVTCacheObj[t]=e;var i=Object.keys(this.MVTCacheObj);a.z.MVT_CACHE_SIZE<i.length&&(this.MVTCacheObj[i[0]]=null,delete this.MVTCacheObj[i[0]])}},{key:"CalcMVTCacheSize",value:function(){for(var t=Object.keys(this.MVTCacheObj),e=0,i=0;i<t.length;i++)e+=this.MVTCacheObj[t[i]].byteLength;return"".concat((e/1048576).toFixed(1)," mb")}}]),t}()},function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return l});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=i(17),l=function(){function e(t){s()(this,e),this.FGlobe=t,this.processCount=0,this.cache=[],this.AfterXMLRequest=this.AfterXMLRequest.bind(this),this.AfterArrBufferRequest=this.AfterArrBufferRequest.bind(this)}return n()(e,[{key:"CheckDownloads",value:function(){!this.FGlobe.LoadingVector&&this.cache.length&&(this.FGlobe.LoadingVector=!0,this.cache[0].cellVectorLayer.Parse(this.cache[0]),this.cache.splice(0,1))}},{key:"StartDownload",value:function(t){t.FRequested=!0;var e=t.GetUrl();t.FCityLayer.layerType===a.g.OGC_WFS||t.FCityLayer.layerType===a.g.CAS?(this.processCount++,t.xhttpForLayer=new XMLHttpRequest,Object(h.d)(t.xhttpForLayer,e,a.z.LAYER_TIMEOUT,a.z.VECTOR_DEBUG,"WFS_CAS Timeout","WFS_CAS Error",null,t).then(this.AfterXMLRequest)):t.FCityLayer.layerType===a.g.MVT_XYZ?(this.processCount++,t.xhttpForLayer=new XMLHttpRequest,Object(h.c)(t.xhttpForLayer,e,a.z.LAYER_TIMEOUT,a.z.VECTOR_DEBUG,"MVT_XYZ Timeout","MVT_XYZ Error",t).then(this.AfterArrBufferRequest)):t.FCityLayer.layerType===a.g.CS_OBJECT_ARRAY&&t.Parse({cellVectorLayer:t})}},{key:"AfterXMLRequest",value:function(t){this.CalcDownloadWFSOrCASData(t),this.PutDataToCache(t)}},{key:"AfterArrBufferRequest",value:function(t){this.CalcDownloadMVTData(t),this.PutDataToCache(t)}},{key:"PutDataToCache",value:function(t){this.processCount--,this.FGlobe.FCellOrganizer.IsLiving(t.cellVectorLayer.Cell)&&this.IsVectorLayerExist(t.cellVectorLayer.FCityLayer)&&this.cache.push(t),delete t.cellVectorLayer.xhttpForLayer,this.FGlobe.DrawRender()}},{key:"CalcDownloadWFSOrCASData",value:function(e){var i;e.responseText&&(e.responseTime<1e3?(i=t.byteLength(e.responseText.toString(),"utf8"),this.FGlobe.DPSByteSize+=i):(i=t.byteLength(e.responseText.toString(),"utf8")/(e.responseTime/1e3),this.FGlobe.DPSByteSize+=i),this.FGlobe.TotalDownloadSize+=i)}},{key:"CalcDownloadMVTData",value:function(t){if(t.response){var e=t.response.byteLength;this.FGlobe.TotalDownloadSize+=e,t.responseTime<1e3?this.FGlobe.DPSByteSize+=e:this.FGlobe.DPSByteSize+=e/(t.responseTime/1e3)}}},{key:"IsVectorLayerExist",value:function(t){for(var e=this.FGlobe.FLayers.length,i=0;i<e;i++)if(t===this.FGlobe.FLayers[i])return!0;return!1}}]),e}()}).call(this,i(38).Buffer)},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=function(){function t(e){s()(this,t),this.FGlobe=e,this.processCount=0,this.cache=[],this.rasterTimeoutCount=0}return n()(t,[{key:"CheckDownloads",value:function(){!this.FGlobe.LoadingTextureCellMain&&this.cache.length&&(this.FGlobe.ApplyRaster(this.cache[0].cell,this.cache[0]),this.ClearImageSrc(this.cache[0].image,this.cache[0].supportImage),this.cache.splice(0,1))}},{key:"StartDownload",value:function(t,e){this.processCount++;var i=this.FGlobe.FRasters[e]._uniqRasterId;t.SetCellTextureRequest(e),t.CheckRasterBbox(e,i)}},{key:"ClearImageSrc",value:function(t,e){t&&t.src&&window.URL.revokeObjectURL(t.src),e&&e.src&&window.URL.revokeObjectURL(e.src)}},{key:"PreparePromise",value:function(t,e,i){var r=this.FGlobe.FRasters[e],s=t.GetRasterUrlByType(r);s?this.startPromise(t,r,s,i):this.PutImageToCache(t,this.FGlobe.emptyImage,i)}},{key:"PrepareSupportPromise",value:function(t,e,i){var r=t.GetRasterUrlByType(e),s=t.GetSupportUrlForOutOfBbox(e,r);s?this.StartSupportPromise(t,e,s,e.supportURL.outOfBBOXSupport,i):this.PutImageToCache(t,this.FGlobe.emptyImage,i)}},{key:"PutImageToCache",value:function(t,e,i){this.processCount--,this.cache.push({cell:t,image:e,uniqRasterId:i}),this.FGlobe.DrawRender()}},{key:"startPromise",value:function(t,e,i,r){var s,o=this,n=new Image,h=null;e.supportURL&&(e.supportURL.transparentPixelSupport||e.supportURL.emptyContentSupport)&&(h=new Image);var l=new Promise(function(t){s=setTimeout(function(){o.clearRasterTimeout(s),t("timeout")},a.z.RASTER_TIMEOUT_MS)}),u=new Promise(function(s){o.LoadImage(t,e,i,s,n,h,r)});Promise.race([l,u]).then(function(e){o.clearRasterTimeout(s),"error"===e?o.ImageOnError(t,r):"timeout"===e&&(o.rasterTimeoutCount++,o.processCount--,o.ImageLoadingCanceled(n,h),a.z.RETRY_AT_RASTER_TIMEOUT?t.TextureCellMain_NoInternet(r):(t.XYw15Q(r),o.FGlobe.RasterTimeoutCallback()))})}},{key:"StartSupportPromise",value:function(t,e,i,r,s){var o,n=this,h=new Image,l=new Promise(function(t){o=setTimeout(function(){n.clearRasterTimeout(o),t("timeout")},a.z.RASTER_TIMEOUT_MS)}),u=new Promise(function(o){n.LoadSupportImage(t,e,i,o,null,null,r,null,h,s)});Promise.race([l,u]).then(function(e){n.clearRasterTimeout(o),"error"===e?n.ImageOnError(t,s):"timeout"===e&&(n.rasterTimeoutCount++,n.processCount--,n.ImageLoadingCanceled(null,h),a.z.RETRY_AT_RASTER_TIMEOUT?t.TextureCellMain_NoInternet(s):(t.XYw15Q(s),n.FGlobe.RasterTimeoutCallback()))})}},{key:"ImageOnError",value:function(t,e){var i=this.FGlobe.FindRasterIndex(e);-1!==i?this.FGlobe.FRasters[i].noDatatoEmptyImage?this.PutImageToCache(t,this.FGlobe.emptyImage,e):(this.processCount--,t.TextureCellMain_OK_NoData(i)):(this.processCount--,t.FRequestCount--,this.FGlobe.DrawRender())}},{key:"ImageLoadingCanceled",value:function(t,e){t&&(window.URL.revokeObjectURL(t.src),t.onload=null,t.onerror=null),e&&(window.URL.revokeObjectURL(e.src),e.onload=null,e.onerror=null)}},{key:"clearRasterTimeout",value:function(t){clearTimeout(t),t=null}},{key:"CalcDownloadData",value:function(t){var e=t.width*t.height/4;this.FGlobe.TotalDownloadSize+=e,this.FGlobe.DPSByteSize+=e}},{key:"LoadImage",value:function(t,e,i,r,s,o,n){var a=this;s.onload=function(){a.CalcDownloadData(s),a.CheckTransparentPixelSupport(t,e,s,r,o,n),window.URL.revokeObjectURL(s.src)},s.onerror=function(){a.CheckEmptyContentSupport(t,e,o,r,n),window.URL.revokeObjectURL(s.src)},s.crossOrigin="",s.src=i}},{key:"CheckTransparentPixelSupport",value:function(t,e,i,r,s,o){if(e.supportURL&&e.supportURL.transparentPixelSupport){var n=t.GetSupportUrlByType(e);this.LoadSupportImage(t,e,n,r,i,e.supportURL.transparentPixelSupport,null,null,s,o)}else r(!0),this.PutImageToCache(t,i,o)}},{key:"CheckEmptyContentSupport",value:function(t,e,i,r,s){if(e.supportURL&&e.supportURL.emptyContentSupport){var o=t.GetSupportUrlByType(e);this.LoadSupportImage(t,e,o,r,null,null,null,e.supportURL.emptyContentSupport,i,s)}else r("error")}},{key:"LoadSupportImage",value:function(t,e,i,r,s,o,n,a,h,l){var u=this;h.onload=function(){r(!0),u.CalcDownloadData(h),u.processCount--,u.cache.push({cell:t,image:s,supportImage:h,uniqRasterId:l,transparentPixelSupport:o,outOfBBOXSupport:n,emptyContentSupport:a}),window.URL.revokeObjectURL(h.src),u.FGlobe.DrawRender()},h.onerror=function(){u.ExistMainImage(t,s,r,l),window.URL.revokeObjectURL(h.src),u.FGlobe.DrawRender()},h.crossOrigin="",h.src=i}},{key:"ExistMainImage",value:function(t,e,i,r){e?(i(!0),this.processCount--,this.cache.push({cell:t,image:e,uniqRasterId:r})):i("error")}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=(i(96),i(33)),h=i(69),l=i.n(h),u=function(){function t(){s()(this,t)}return n()(t,[{key:"GetTile",value:function(t){return Object.assign({},new a.VectorTile(new l.a(t)))}}]),t}()},function(t,e,i){"use strict";t.exports=s;var r=i(30);function s(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function n(t){return t.type===s.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function h(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var s=i.pos-1;s>=t;s--)i.buf[s+r]=i.buf[s]}function l(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function F(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function A(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function g(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function C(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}s.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),s=r>>3,o=this.pos;this.type=7&r,t(s,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=g(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=g(this.buf,this.pos)+4294967296*g(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=g(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,s,o=i.buf;if(s=o[i.pos++],r=(112&s)>>4,s<128)return a(t,r,e);if(s=o[i.pos++],r|=(127&s)<<3,s<128)return a(t,r,e);if(s=o[i.pos++],r|=(127&s)<<10,s<128)return a(t,r,e);if(s=o[i.pos++],r|=(127&s)<<17,s<128)return a(t,r,e);if(s=o[i.pos++],r|=(127&s)<<24,s<128)return a(t,r,e);if(s=o[i.pos++],r|=(1&s)<<31,s<128)return a(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,i){return o.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){var r="",s=e;for(;s<i;){var o,n,a,h=t[s],l=null,u=h>239?4:h>223?3:h>191?2:1;if(s+u>i)break;1===u?h<128&&(l=h):2===u?128==(192&(o=t[s+1]))&&(l=(31&h)<<6|63&o)<=127&&(l=null):3===u?(o=t[s+1],n=t[s+2],128==(192&o)&&128==(192&n)&&((l=(15&h)<<12|(63&o)<<6|63&n)<=2047||l>=55296&&l<=57343)&&(l=null)):4===u&&(o=t[s+1],n=t[s+2],a=t[s+3],128==(192&o)&&128==(192&n)&&128==(192&a)&&((l=(15&h)<<18|(63&o)<<12|(63&n)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,u=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),s+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==s.Bytes)return t.push(this.readVarint(e));var i=n(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==s.Bytes)return t.push(this.readSVarint());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==s.Bytes)return t.push(this.readBoolean());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==s.Bytes)return t.push(this.readFloat());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==s.Bytes)return t.push(this.readDouble());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==s.Bytes)return t.push(this.readFixed32());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==s.Bytes)return t.push(this.readSFixed32());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==s.Bytes)return t.push(this.readFixed64());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==s.Bytes)return t.push(this.readSFixed64());var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===s.Varint)for(;this.buf[this.pos++]>127;);else if(e===s.Bytes)this.pos=this.readVarint()+this.pos;else if(e===s.Fixed32)this.pos+=4;else{if(e!==s.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),C(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),C(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),C(this.buf,-1&t,this.pos),C(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),C(this.buf,-1&t,this.pos),C(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,s,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!s){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):s=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[i++]=239,t[i++]=191,t[i++]=189,s=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&h(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&h(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,s.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,F,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,A,e)},writeBytesField:function(t,e){this.writeTag(t,s.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,s.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,s.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,s.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,s.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,s.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,s.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,s.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,s.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,s.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){"use strict";var r=i(8),s=i.n(r),o=i(2),n=i.n(o),a=i(3),h=i.n(a),l=i(0),u=i(1),d=function(){function t(e){n()(this,t),this.UO=e,this.walker=!1,this.FHighlight=!0,this.editGeo3C=new u.w(0,0,0),this.editGeo3D=new u.w(0,0,0),this.editCanvasPoint=new u.v(0,0),this.editTexture=null,this.walkerGeo=new u.F,this.tempp2d=new u.u(0,0),this.tempp2dLL=new u.v(0,0),this.lastSnapIndex=-1,this.x=0,this.y=0,this.zPointSnapped=!1,this.tempp2d2=new u.u(0,0),this.editPointTypedArr=new Float32Array(3),this.editPointVertBuff=this.UO.obj.gl.createBuffer(),this.editGeo3CForZPoint=new u.w(0,0,0),this.editTempArr=new Float32Array(3)}return h()(t,[{key:"buildEditPoint",value:function(t){var e=this.UO.obj.userObj.tempp2d;this.UO.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+t*l.z.GLOBE_RADIUS_K,this.editGeo3C):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.obj.userObj.FGlobe.XyecYr(e,!1)+t*l.z.GLOBE_RADIUS_K,this.editGeo3C)}},{key:"addCoord",value:function(t){return this.UO.coords.length?(this.buildEditPoint(0,!1),!1):(this.UO.coords[0]=t.MouseLong,this.UO.coords[1]=t.MouseLat,this.UO.center.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.build(),this.UO.findLimits(),!1)}},{key:"setCoord",value:function(t,e){this.UO.coords[0]=e.MouseLong,this.UO.coords[1]=e.MouseLat,this.UO.center.SetV(e.MouseLong,e.MouseLat),this.UO.build(),this.UO.findLimits()}},{key:"setCoordForZSnap",value:function(){this.UO.findLimits(),this.UO.build()}},{key:"mouseDown",value:function(t,e){if(this.lastSnapIndex=-1,this.zPointSnapped=!1,this.walkerGeo.isValid){var i=this.UO.style.zMode===l.u.Z_MSL,r=this.UO.obj.FGlobe;if(this.x=t,this.y=e,this.prevCoord=this.UO.coords.slice(),r.keyCode===l.f.CTRL){if(r.FLastEditingCallback.can_change.Z&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],i,this.tempp2dLL)))return this.prevCoord=this.UO.coords.slice(),this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0;if(r.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,0,i,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=0,this.prevCoord=this.UO.coords.slice(),!0}else{if(r.FLastEditingCallback.can_move){if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,0,i,this.tempp2dLL)&&this.editTexture)return this.lastSnapIndex=0,this.prevCoord=this.UO.coords.slice(),!0;this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1])}if(r.FLastEditingCallback.can_change.Z&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],i,this.tempp2dLL)))return this.prevCoord=this.UO.coords.slice(),this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0}}return-1!==this.lastSnapIndex}},{key:"mouseDblClick",value:function(t,e){if(this.lastfreeDrawCount=0,this.walkerGeo.isValid){var i=this.UO.obj.FGlobe,r=i.FLastEditingCallback.can_change;if(this.x=t,this.y=e,(r.vertex||r.Z)&&this.mouseDown(t,e))return this.UO.onVertexClick?this.UO.onVertexClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidgetForPMAS(),!0}return!1}},{key:"mouseMove",value:function(t,e){this.UO.obj.userObj.FGlobe;-1!==this.lastSnapIndex?this.setCoord(this.lastSnapIndex,this.walkerGeo):this.zPointSnapped&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.tempp2d2.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.coordsZ[0]=this.UO.obj.FGlobe.XyhdDQ(this.tempp2d,this.tempp2d2,0,this.UO.coordsZ[0],this.UO.style.zMode===l.u.Z_MSL,this.UO.coordsZ[0],t,e),this.setCoordForZSnap()),this.checkWidget()}},{key:"checkWidget",value:function(){var t=this.UO.obj.userObj.FGlobe.CSWidgets;"visible"===t.editVertexWidget.style.visibility&&(-1!==this.lastSnapIndex?(t.textBoxVertexEnlem.value=this.UO.coords[0],t.textBoxVertexBoylam.value=this.UO.coords[1]):this.zPointSnapped&&(t.textBoxVertexKot.value=this.UO.coordsZ[0]))}},{key:"mouseUp",value:function(t,e){-1!==this.lastSnapIndex?(this.afterCoord=this.UO.coords.slice(),this.saveOperation(l.l.MOVEO),this.UO.onChanged(this.UO,l.k.MOVE_OBJ)):this.zPointSnapped&&(this.afterZ=this.UO.coordsZ[0],this.zPointSnapped=!1,this.saveOperation(l.l.MOVEZ)),this.lastSnapIndex=-1}},{key:"mouseAddCoord",value:function(t,e){return!0}},{key:"mouseDeleteCoord",value:function(t,e){return!1}},{key:"getSnapIndex",value:function(t,e){if(this.lastSnapIndex=-1,this.showZ=!1,this.walkerGeo.isValid){var i=this.UO.style.zMode===l.u.Z_MSL,r=this.UO.obj.FGlobe;if(r.FLastEditingCallback.can_change.Z&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],i,this.tempp2dLL)))return this.lastSnapIndex=0,this.showZ=!0,this.lastSnapIndex;if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,0,i,this.tempp2dLL)&&this.editTexture)return this.lastSnapIndex=0,this.lastSnapIndex}return this.lastSnapIndex}},{key:"setWalkerPoint",value:function(t,e,i){this.walkerGeo=i}},{key:"createEditCanvasPoint",value:function(t,e){var i=this.UO.obj.FGlobe;t.SetVecSub(this.UO.obj.Fp2T,e),i.Xh5WFD(t)?i.X9oM46(t,this.editCanvasPoint):this.editCanvasPoint.isValid=!1}},{key:"saveOperation",value:function(t){switch(t){case l.l.MOVEO:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEO,coord1:this.prevCoord.slice(),coord2:this.afterCoord.slice()});break;case l.l.MOVEZ:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEZ,prevZ:this.prevZ,afterZ:this.afterZ})}}},{key:"undo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord1[0],this.UO.coords[1]=t.coord1[1],this.UO.center.SetV(t.coord1[0],t.coord1[1]);break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.prevZ}this.UO.findLimits(),this.UO.build()}},{key:"redo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord2[0],this.UO.coords[1]=t.coord2[1],this.UO.center.SetV(t.coord2[0],t.coord2[1]);break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.afterZ}this.UO.findLimits(),this.UO.build()}},{key:"fillZPoint",value:function(){var t=this.UO.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.UO.obj.gl;e.SetP(this.UO.center),e.ConvertDegreeToRadyan(),this.UO.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.editGeo3CForZPoint):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K+i.XyecYr(e,!1),this.editGeo3CForZPoint),this.editTempArr[0]=this.editGeo3CForZPoint.x,this.editTempArr[1]=this.editGeo3CForZPoint.y,this.editTempArr[2]=this.editGeo3CForZPoint.z,this.editPointTypedArr.set(this.editTempArr,0),r.bindBuffer(r.ARRAY_BUFFER,this.editPointVertBuff),r.bufferData(r.ARRAY_BUFFER,this.editPointTypedArr,r.STATIC_DRAW)}},{key:"drawZPoint",value:function(){if(this.FHighlight){var t=this.UO.obj,e=t.gl,i=t.FGlobe;e.bindBuffer(e.ARRAY_BUFFER,this.editPointVertBuff),e.vertexAttribPointer(i.P3DvertexPos,3,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,1)}}}]),t}(),c=i(18),f=i(4);function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function F(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var y=new(function(){function t(){n()(this,t)}return h()(t,[{key:"CheckHasFontIcon",value:function(){var t=this.style,e=t.titleLT||t.titleLB||t.titleRT||t.titleRB||t.titleCN;t.icon.type===l.e.URL?e||t.icon.URL?this.hasFontIcon=!0:this.hasFontIcon=!1:t.icon.type===l.e.MARKER?e||"number"==typeof t.icon.shapeType?this.hasFontIcon=!0:this.hasFontIcon=!1:t.icon.type===l.e.NOICON&&(this.hasFontIcon=!!e)}},{key:"UpdateFont",value:function(){this.obj.FontPacket=null,this.build()}},{key:"Rebuild",value:function(){var t=this.obj,e=this.eVal,i=t.FGlobe,r=t.gl;if(t.FontPacket=null,this.type===l.j.POINT||this.type===l.j.MODEL)this.center.x=this.coords[0],this.center.y=this.coords[1],this.findLimits(),this.build();else{if(this.type===l.j.SHAPE)if(!this.shapeVertBuff&&(this.shapeIndexBuffer=r.createBuffer()),this.solid3D?(!t.shapeSideVertBuff&&(t.shapeSideVertBuff=r.createBuffer()),!t.shapeTopVertBuff&&(t.shapeTopVertBuff=r.createBuffer()),this.repairHeightsSingle()):(r.deleteBuffer(t.shapeSideVertBuff),r.deleteBuffer(t.shapeTopVertBuff),delete t.shapeSideVertBuff,delete t.shapeTopVertBuff,this.heights=null),this.style.zMode!==l.u.Z_GROUND_FOLLOW||this.FEditing){if(this._coords=[],this._coordsZ=[],t.cdt2dWorker&&(t.cdt2dWorker.terminate(),t.cdt2dWorker=null,delete t.cdt2dWorker,t.lastOverlapedCells=null),t.canDrawCenterOrSide=!1,t.buildForFollowGround=!1,this.shapeType===l.r.ELLIPSE)this._coordsZ.length=l.z.SHAPE_DIVISION+1,this.shapeTypedArr=new Float32Array(3*(l.z.SHAPE_DIVISION+1)),this.FEditing&&(e.editShapeTypedArr=new Float32Array(3*(l.z.SHAPE_DIVISION+1)));else{t.TriIndexCnt=i.Shapes.Definitions[this.shapeType].triIndexCnt,t.triIndis=i.Shapes.Definitions[this.shapeType].triIndis;s=i.Shapes.Definitions[this.shapeType].vert.length;this._coordsZ.length=s/2,this.shapeTypedArr=new Float32Array(s/2*3),this.FEditing&&(e.editShapeTypedArr=new Float32Array(s/2*3))}this.fillGeo(),this.coordsZ[0]?this._coordsZ.fill(parseFloat(this.coordsZ[0])):this._coordsZ.fill(0),this.setCoordLenForDraw(l.q.lowLod),this.FEditing?e.editBuildTriangle():((this.style.filled||this.style.border)&&!this.shapeVertBuff&&(this.shapeVertBuff=r.createBuffer()),this.style.filled&&(!this.shapeIndexBuffer&&(this.shapeIndexBuffer=r.createBuffer()),this.buildTriangle())),this.findLimitsAndCenter(),this.build()}else{if(this._coords=[],this._coordsZ=[],t.canDrawCenterOrSide=!1,this.shapeType===l.r.ELLIPSE)this._coordsZ.length=l.z.SHAPE_DIVISION+1,this.shapeTypedArr=new Float32Array(3*(l.z.SHAPE_DIVISION+1));else{t.TriIndexCnt=i.Shapes.Definitions[this.shapeType].triIndexCnt,t.triIndis=i.Shapes.Definitions[this.shapeType].triIndis;var s=i.Shapes.Definitions[this.shapeType].vert.length;this._coordsZ.length=s/2,this.shapeTypedArr=new Float32Array(s/2*3)}this.fillGeo(),this.coordsZ[0]?this._coordsZ.fill(parseFloat(this.coordsZ[0])):this._coordsZ.fill(0),this.setCoordLenForDraw(l.q.lowLod),(this.style.filled||this.style.border)&&!this.shapeVertBuff&&(this.shapeVertBuff=r.createBuffer()),this.style.filled&&!this.shapeIndexBuffer&&(this.shapeIndexBuffer=r.createBuffer()),t.lastOverlapedCells=null,this.reBuildReq();this.findLimitsAndCenter(),this.fontBuild(),this.build(!0)}else if(this.type===l.j.ARCAREA)if(this._coordsZ.length=0,this._coords.length=0,this.solid3D?(this.repairHeightsSingle(),!t.arcAreaSideVertBuff&&(t.arcAreaSideVertBuff=r.createBuffer()),!t.arcAreaTopVertBuff&&(t.arcAreaTopVertBuff=r.createBuffer()),!t.arcAreaCenterLineBuff&&(t.arcAreaCenterLineBuff=r.createBuffer())):(r.deleteBuffer(t.arcAreaSideVertBuff),r.deleteBuffer(t.arcAreaTopVertBuff),r.deleteBuffer(t.arcAreaCenterLineBuff),delete t.arcAreaSideVertBuff,delete t.arcAreaTopVertBuff,delete t.arcAreaCenterLineBuff,this.heights=null),this.fillGeo(),this._coordsZ.length=this._coords.length/2,this.coordsZ[0]?this._coordsZ.fill(parseFloat(this.coordsZ[0])):this._coordsZ.fill(0),t.arcAreaTypedArr=new Float32Array(3*this._coords.length),t.arcAreaTypedArr2=new Float32Array(9),this.style.filled&&(!t.arcAreaIndexBuffer&&(t.arcAreaIndexBuffer=r.createBuffer()),this.FEditing?(e.editArcAreaTypedArr2=new Float32Array(9),this.buildTriangle(e.editArcAreaIndexBuffer,null)):this.buildTriangle(t.arcAreaIndexBuffer,null)),this.style.zMode!==l.u.Z_GROUND_FOLLOW||this.FEditing)t.cdt2dWorker&&(t.cdt2dWorker.terminate(),t.cdt2dWorker=null,delete t.cdt2dWorker,t.lastOverlapedCells=null),t.canDrawCenterOrSide=!1,t.buildForFollowGround=!1,this.findLimitsAndCenter(),this.build();else{t.canDrawCenterOrSide=!1,this.setCoordLenForDraw(l.q.lowLod),t.lastOverlapedCells=null,this.reBuildReq();this.fontBuild(),this.build(!0)}if(this.type===l.j.LINE){if(this.style.zMode!==l.u.Z_GROUND_FOLLOW||this.FEditing){if(t.mainCoordLen=this.coords.length,this.lineTypedArr=new Float32Array(3*this.coordsZ.length),t.buildForFollowGround=!1,this.findSavedSubCoords(),this.findDistances(),this.style.showAngles)for(o=1;o<this.coordsZ.length;o++)this.obj.angleOfTwoPoint[o-1]=l.h.AzimuthOf2PointsOnSphereForAngText(this.coords[2*(o-1)],this.coords[2*(o-1)+1],this.coords[2*o],this.coords[2*o+1]);this.build()}else{if(this.prepareFollowGround(),this.findSavedSubCoords(),this.findDistances(),this.style.showAngles)for(var o=1;o<this.coordsZ.length;o++)this.obj.angleOfTwoPoint[o-1]=l.h.AzimuthOf2PointsOnSphereForAngText(this.coords[2*(o-1)],this.coords[2*(o-1)+1],this.coords[2*o],this.coords[2*o+1]);this.build(!0)}this.FEditing?(e.expandWithoutWalker(),e.findStartRadius(),e.updateAllSubVertexRebuild()):this.findLimitsAndCenter()}if(this.type===l.j.POLYGON){if(this.FEditing||(this._coords=this.coords.slice(),this._coordsZ=this.coordsZ.slice(),l.h.PolyMakeCCW(this._coords)?(t.ccw=!0,this._coordsZ.reverse()):t.ccw=!1),this.solid3D?(this.FEditing||(this._heights=this.heights.slice(),t.ccw&&this._heights.reverse()),!this.polygonSideVertBuff&&(this.polygonSideVertBuff=r.createBuffer()),!this.polygonTopVertBuff&&(this.polygonTopVertBuff=r.createBuffer()),this.polygonTypedArr=new Float32Array(3*this.coordsZ.length),this.polygonTopTypedArr=new Float32Array(3*this.coordsZ.length),this.polygonSideTypeArr=new Float32Array(3*(2*this.coordsZ.length+2))):(r.deleteBuffer(this.polygonSideVertBuff),r.deleteBuffer(this.polygonTopVertBuff),delete this.polygonSideVertBuff,delete this.polygonTopVertBuff,this.heights=null),(this.style.filled||this.style.border)&&!this.polygonVertBuff&&(this.polygonVertBuff=r.createBuffer()),this.style.filled?(!this.polygonIndexBuffer&&(this.polygonIndexBuffer=r.createBuffer()),this.buildTriangle()):(t.TriIndexCnt=0,this.polygonIndexBuffer&&(r.deleteBuffer(this.polygonIndexBuffer),this.polygonIndexBuffer=null)),this.style.zMode!==l.u.Z_GROUND_FOLLOW||this.FEditing)t.cdt2dWorker&&(t.cdt2dWorker.terminate(),t.cdt2dWorker=null,delete t.cdt2dWorker,t.lastOverlapedCells=null),t.buildForFollowGround=!1,this.setCoordLenForDraw(l.q.lowLod),t.lastOverlapedCells=null,this.polygonTypedArr=new Float32Array(3*this.coordsZ.length),this.repairHeights(),this.findSavedSubCoords(),this.findDistances(),this.build();else{this.setCoordLenForDraw(l.q.lowLod),t.lastOverlapedCells=null,this.polygonTypedArr=new Float32Array(3*this.coordsZ.length),this.findSavedSubCoords(),this.findDistances(),this.reBuildReq();this.build(!0)}if(this.FEditing){if(e.buildEditGeometry(),e.expandWithoutWalker(),e.findStartRadius(),e.updateAllSubVertexRebuild(),(this.style.showArea||this.style.showVolume)&&this.coordsZ.length>3){var n=this.coords.slice(0,this.coords.length-2);this.obj.totalArea=i.Math.CalcPolyAreaM2(n,!1),e.centerCoordZ=this.findCenterZ()}}else this.findLimitsAndCenter(),(this.style.showArea||this.style.showVolume)&&this.coordsZ.length>=3&&(this.style.zMode===l.u.Z_MSL?this.obj.totalArea=i.Math.CalcPolyAreaM2(this.coords,!1):this.obj.totalArea=i.Math.CalcPolyAreaM2(this.coords,!0,50),this.savedCenterZ=this.findCenterZ())}this.FEditing&&this.buildEditIcons(e)}i.DrawRender()}},{key:"BuildEditIcons",value:function(t){if(t.buildEditIcon(0,t.CZero,t.editGeo3CForCZero),t.buildEditIcon(0,t.C90,t.editGeo3CForC90),t.buildEditIcon(0,t.C180,t.editGeo3CForC180),this.type===l.j.ARCAREA){t.buildEditIcon(0,t.C270,t.editGeo3CForC270);var e=new l.w(this.coords[0],this.coords[1]);t.buildEditIcon(0,e,t.editGeo3C)}else if(this.type===l.j.SHAPE){var i=new l.w(this.coords[0],this.coords[1]);t.buildEditIcon(0,i,t.editGeo3C)}else this.type!==l.j.POLYGON&&this.type!==l.j.LINE||t.buildEditIcon(0,this.center,t.editGeo3C)}},{key:"BuildEditIcon",value:function(t,e,i){var r=this.UO.obj.userObj,s=r.tempp2d,o=r.FGlobe;s.SetV(l.h.DegreeToRadyan(e.x),l.h.DegreeToRadyan(e.y)),this.UO.style.zMode===l.u.Z_MSL?l.h.GeoTo3DP(s,l.z.GLOBE_RADIUS+t*l.z.GLOBE_RADIUS_K,i):l.h.GeoTo3DP(s,l.z.GLOBE_RADIUS+o.XyecYr(s,!1)+t*l.z.GLOBE_RADIUS_K,i)}},{key:"StyleChanged",value:function(){this.checkHasFontIcon(),c.a.FillColor(this.style),this.type===l.j.SHAPE&&this.filledChanged(),this.obj.FontPacket=null,this.type===l.j.POINT||this.type===l.j.MODEL?this.build():this.fontBuild(),this.type!==l.j.POLYGON&&this.type!==l.j.LINE||this.findDistances(),this.rebuild(),this.highlight&&(this.highlight=!1),this.obj.FGlobe.DrawRender()}},{key:"CheckFontPacket",value:function(){if(null===this.obj.FontPacket||this.obj.FontPacket.Owner!==this){var t={};this.style.titleRT&&(t.titleRT=f.c.EvalMacroText(this.style.titleRT,this.attribs)),this.style.titleRB&&(t.titleRB=f.c.EvalMacroText(this.style.titleRB,this.attribs)),this.style.titleLT&&(t.titleLT=f.c.EvalMacroText(this.style.titleLT,this.attribs)),this.style.titleLB&&(t.titleLB=f.c.EvalMacroText(this.style.titleLB,this.attribs)),this.style.titleCN&&(t.titleCN=f.c.EvalMacroText(this.style.titleCN,this.attribs)),this.obj.FontPacket=this.obj.FontDrawer.GetNewFontPacket(this,t)}this.obj.FontPacket.Update()}},{key:"GetStyle",value:function(t){var e={};return e.titleRT=t.titleRT,e.titleRB=t.titleRB,e.titleLT=t.titleLT,e.titleLB=t.titleLB,e.titleCN=t.titleCN,t.titleFont&&(e.titleFont=F({},t.titleFont)),t.distanceFont&&(e.distanceFont=F({},t.distanceFont)),t.heightFont&&(e.heightFont=F({},t.heightFont)),t.vertexFont&&(e.vertexFont=F({},t.vertexFont)),t.angleFont&&(e.angleFont=F({},t.angleFont)),t.icon&&(e.icon=F({},t.icon)),e.opacity=t.opacity,e.border=t.border,e.borderColor=t.borderColor,e.filled=t.filled,e.fillColor=t.fillColor,e.sideColor=t.sideColor,e.cullFace=t.cullFace,e.depthTest=t.depthTest,e.showDistances=t.showDistances,e.showHeights=t.showHeights,e.showVertex=t.showVertex,e.showAngles=t.showAngles,e.showArea=t.showArea,e.showVolume=t.showVolume,e.zMode=t.zMode,e}},{key:"FindSavedSubCoords",value:function(){var t=this.obj,e=t.FGlobe,i=t.tempp2d,r=e.FCamera.FArcBall,s=this.coords,o=this.coordsZ;if(this.coordsZ.length>1){for(var n=0;n<o.length-1;n++)r.XkHTjt(i,l.h.DegreeToRadyan(s[2*n]),l.h.DegreeToRadyan(s[2*n+1]),l.h.DegreeToRadyan(s[2*(n+1)]),l.h.DegreeToRadyan(s[2*(n+1)+1])),this.savedSubCoords[2*n]=i.x,this.savedSubCoords[2*n+1]=i.y,this.savedSubCoordsZ[n]=this.findSubZ(n);if(this.type===l.j.POLYGON){r.XkHTjt(i,l.h.DegreeToRadyan(s[0]),l.h.DegreeToRadyan(s[1]),l.h.DegreeToRadyan(s[s.length-2]),l.h.DegreeToRadyan(s[s.length-1])),this.savedSubCoords[2*(o.length-1)]=i.x,this.savedSubCoords[2*(o.length-1)+1]=i.y,i.SetV(s[0],s[1]),i.ConvertDegreeToRadyan();var a=e.XyecYr(i,!0)+o[0];i.SetV(s[s.length-2],s[s.length-1]),i.ConvertDegreeToRadyan();var h=e.XyecYr(i,!0)+o[o.length-1];this.savedSubCoordsZ[o.length-1]=(a+h)/2}}}},{key:"FindSubZ",value:function(t){var e=this.coords,i=this.coordsZ,r=this.obj,s=r.tempp2d,o=r.FGlobe;s.SetV(e[2*t],e[2*t+1]),s.ConvertDegreeToRadyan();var n=o.XyecYr(s,!0)+i[t];return s.SetV(e[2*t+2],e[2*t+3]),s.ConvertDegreeToRadyan(),(n+(o.XyecYr(s,!0)+i[t+1]))/2}},{key:"FindDistances",value:function(){var t=this.coords,e=this.coordsZ;switch(this.style.showDistances){case l.s.SHOW2D:for(var i=1;i<e.length;i++)this.obj.distanceOfTwoPoint[i-1]=this.find2DDistance(t[2*i],t[2*i+1],t[2*(i-1)],t[2*(i-1)+1],i);this.type===l.j.POLYGON&&e.length>1&&(this.obj.distanceOfTwoPoint[e.length-1]=this.find2DDistance(t[2*(e.length-1)],t[2*(e.length-1)+1],t[0],t[1],e.length-1));break;case l.s.SHOW3D:for(i=1;i<e.length;i++)this.obj.distanceOfTwoPoint[i-1]=this.find3DDistance(t[2*i],t[2*i+1],e[i],t[2*(i-1)],t[2*(i-1)+1],e[i-1]);this.type===l.j.POLYGON&&(this.obj.distanceOfTwoPoint[e.length-1]=this.find3DDistance(t[2*(e.length-1)],t[2*(e.length-1)+1],e[e.length-1],t[0],t[1],e[0]))}}},{key:"Find2DDistance",value:function(t,e,i,r){return l.h.CSDist3DGreatCircleDegree(t,e,i,r)}},{key:"Find3DDistance",value:function(t,e,i,r,s,o){var n=this.obj,a=n.TempGeo3C,h=n.TempGeo3C2;return this.coordToGeo3C(t,e,i,a),this.coordToGeo3C(r,s,o,h),a.Dist3D(h)/l.z.GLOBE_RADIUS_K}},{key:"CoordToGeo3C",value:function(t,e,i,r){var s=this.obj,o=s.tempp2d,n=s.FGlobe;o.SetV(t,e),o.ConvertDegreeToRadyan(),this.isMSL?l.h.GeoTo3DP(o,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,r):l.h.GeoTo3DP(o,l.z.GLOBE_RADIUS+n.XyecYr(o,!1)+i*l.z.GLOBE_RADIUS_K,r)}},{key:"RepairHeightsSingle",value:function(){Array.isArray(this.heights)?this.heights[0]||(this.heights[0]=0):this.heights=[0]}},{key:"FindLod",value:function(t){var e,i,r=l.h.Dist2DV(t.LL.x,t.LL.y,t.UR.x,t.UR.y);if(l.h.CSVerySuperZero(r))return l.z.GLOBE_MIN_CELL_LEVEL;for(i=180,e=0;r<i;)i/=2,e++;return l.h.Min(e,l.z.GLOBE_MIN_CELL_LEVEL)}},{key:"FindDistZ",value:function(t){if(this.style.zMode===l.u.Z_MSL)return this.coordsZ[t];var e=this.obj,i=e.tempp2d,r=e.FGlobe;return i.SetV(this.coords[2*t],this.coords[2*t+1]),i.ConvertDegreeToRadyan(),r.XyecYr(i,!0)+this.coordsZ[t]}},{key:"FindCenterZ",value:function(){if(this.style.zMode===l.u.Z_MSL)return this.center.z;var t=this.obj,e=t.tempp2d,i=t.FGlobe;return e.SetV(this.center.x,this.center.y),e.ConvertDegreeToRadyan(),i.XyecYr(e,!0)+this.center.z}}]),t}());function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var C=new Float32Array([.5,.5,.5,.8]),b=function(){function t(e,i){n()(this,t),this.editBuffer=i.createBuffer(),this.editSubVertBuffer=i.createBuffer(),this.editBufferForMainPoint=i.createBuffer(),this.walker=!1,this.walkerx=0,this.walkery=0,this.walkerGeo=new u.F,this.UO=e,this.subCoords=[],this.subCoordsZ=[],this.subVertCount=0,this.tempp2d=new u.u(0,0),this.lastSaveX=null,this.lastSaveY=null,this.editLineTypedArrSubVert=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.editLineTypedArr=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.editLineTypedMainPointArr=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.FHighlight=!0,this.lastSnapIndex=-1,this.tempp2dLL=new u.v(0,0),this.prevLimit=new u.E(0,0,0,0),this.prevCoords=[],this.prevfreeDrawIndex=0,this.lastfreeDrawIndex=0,this.lastfreeDrawCount=0,this.freeDrawprev=[],this.CZero=new u.u(0,0),this.C90=new u.u(0,0),this.C180=new u.u(0,0),this.editGeo3C=new u.w(0,0,0),this.editGeo3D=new u.w(0,0,0),this.editGeo3CForCZero=new u.w(0,0,0),this.editGeo3DForCZero=new u.w(0,0,0),this.editGeo3CForC90=new u.w(0,0,0),this.editGeo3DForC90=new u.w(0,0,0),this.editGeo3CForC180=new u.w(0,0,0),this.editGeo3DForC180=new u.w(0,0,0),this.editCanvasPoint=new u.v(0,0),this.editTexture=null,this.lastMouseLong=0,this.lastMouseLat=0,this.radius1=0,this.radius2=0,this.rotDeg=0,this.x=0,this.y=0,this.willDrawIcon=0,this.prevX,this.prevY,this.snapMainVertex=!1,this.zPointSnapped=!1,this.tempp2d2=new u.u(0,0),this.buildEditIcon=y.BuildEditIcon}return h()(t,[{key:"setCoord",value:function(t,e,i,r){this.UO.coords[2*t]=e,this.UO.coords[2*t+1]=i,this.UO.style.zMode===l.u.Z_GROUND_FOLLOW&&(r=this.UO.coordsZ[0]),this.UO.coordsZ[t]=r;var s=this.buildInputPoint(e,i,r,!1);this.editLineTypedArr.set(s,3*t);var o=this.buildInputPointForMainPoint(e,i,0,!1);this.editLineTypedMainPointArr.set(o,3*t);var n=this.UO.obj.gl;n.bindBuffer(n.ARRAY_BUFFER,this.editBuffer),n.bufferSubData(n.ARRAY_BUFFER,4*t*3,s),n.bindBuffer(n.ARRAY_BUFFER,this.editBufferForMainPoint),n.bufferSubData(n.ARRAY_BUFFER,4*t*3,o)}},{key:"setScaleCoord",value:function(t){this.setCoord(t,this.UO.coords[2*t],this.UO.coords[2*t+1],0),this.setSubGeo(t),this.setSubVertex(t)}},{key:"createSubVertex",value:function(t){this.addSubCoord(t),this.addSubVertBuffer(3*t,this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0),this.subVertCount++}},{key:"reBuildSubVertex",value:function(t){this.updateSubVertex(t)}},{key:"subCoordTo3D",value:function(){var t=this.subCoords.length-1;return this.buildInputPoint(this.subCoords[t-1],this.subCoords[t],0,!1)}},{key:"setSubVertex",value:function(t){if(t===this.UO.coordsZ.length-2){var e=this.UO.coordsZ.length-3;this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0)}else if(0===t){e=t;this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0)}else{e=t-1;this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0),this.addSubVertBuffer(3*(e+1),this.subCoords[2*e+2],this.subCoords[2*e+3],this.subCoordsZ[e+1],!0)}}},{key:"setSubGeo",value:function(t){var e=this.UO,i=e.coords,r=e.coordsZ,s=this.UO.obj.FGlobe.FCamera.FArcBall;if(t===r.length-2){var o=r.length-3;s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o)}else if(0===t){o=t;s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o)}else{o=t-1;s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o),o++,s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o)}}},{key:"updateSubVertex",value:function(t){var e=this.UO,i=e.coords,r=(e.coordsZ,this.UO.obj.FGlobe.FCamera.FArcBall);-1!==t&&t!==this.UO.coordsZ.length-2&&(r.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*t]),u.b.DegreeToRadyan(i[2*t+1]),u.b.DegreeToRadyan(i[2*(t+1)]),u.b.DegreeToRadyan(i[2*(t+1)+1])),this.subCoords[2*t]=this.tempp2d.x,this.subCoords[2*t+1]=this.tempp2d.y,this.subCoordsZ[t]=this.findSubZ(t),this.addSubVertBuffer(3*t,this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0))}},{key:"updateSubVertexRebuild",value:function(t){var e=this.UO,i=e.coords;e.coordsZ;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*t]),u.b.DegreeToRadyan(i[2*t+1]),u.b.DegreeToRadyan(i[2*(t+1)]),u.b.DegreeToRadyan(i[2*(t+1)+1])),this.subCoords[2*t]=this.tempp2d.x,this.subCoords[2*t+1]=this.tempp2d.y,this.subCoordsZ[t]=this.findSubZ(t),this.addSubVertBuffer(3*t,this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0)}},{key:"updateAllSubVertexRebuild",value:function(){var t=this.UO,e=t.coords,i=t.coordsZ,r=this.UO.obj.FGlobe.FCamera.FArcBall;this.subVertCount=i.length-1;for(var s=this.UO.coords.length,o=0;o<s;o++)r.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(e[2*o]),u.b.DegreeToRadyan(e[2*o+1]),u.b.DegreeToRadyan(e[2*(o+1)]),u.b.DegreeToRadyan(e[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o),this.addSubVertBuffer(3*o,this.subCoords[2*o],this.subCoords[2*o+1],this.subCoordsZ[o],!0)}},{key:"addCoord",value:function(t,e,i){return 2!==this.UO.coordsZ.length&&3!==this.UO.coordsZ.length||(this.expandLimit(null,null,!0),this.findStartRadius(),this.setDragPoints()),this.addToEditBuffer(t,e,i),this.UO.coordsZ.length-3>-1&&this.createSubVertex(this.subVertCount),this.expandLimit(t,e,!1),!0}},{key:"findSubZ",value:function(t){var e=this.UO.obj.FGlobe,i=this.UO,r=i.coords,s=i.style;this.tempp2d.SetV(r[2*t],r[2*t+1]),this.tempp2d.ConvertDegreeToRadyan();var o=0;s.zMode!==l.u.Z_MSL&&(o=e.XyecYr(this.tempp2d,!0)),this.tempp2d.SetV(r[2*t+2],r[2*t+3]),this.tempp2d.ConvertDegreeToRadyan();var n=0;return s.zMode!==l.u.Z_MSL&&(n=e.XyecYr(this.tempp2d,!0)),(o+n)/2}},{key:"addSubCoord",value:function(t){var e=this.UO.coords;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(e[2*t]),u.b.DegreeToRadyan(e[2*t+1]),u.b.DegreeToRadyan(e[2*(t+1)]),u.b.DegreeToRadyan(e[2*(t+1)+1])),this.subCoords[2*t]=this.tempp2d.x,this.subCoords[2*t+1]=this.tempp2d.y,this.subCoordsZ[t]=this.findSubZ(t)}},{key:"addToEditBuffer",value:function(t,e,i){this.UO.coords.push(t),this.UO.coords.push(e),this.UO.coordsZ.push(i),this.UO.obj.startP||(this.UO.obj.startP=new u.w(0,0,0),this.UO.buildStartPoint());var r=this.buildInputPoint(t,e,i,!1);this.editLineTypedArr.set(r,3*(this.UO.coordsZ.length-1));var s=this.buildInputPointForMainPoint(t,e,0,!1);this.editLineTypedMainPointArr.set(s,3*(this.UO.coordsZ.length-1));var o=this.UO.obj.gl;o.bindBuffer(o.ARRAY_BUFFER,this.editBuffer),o.bufferSubData(o.ARRAY_BUFFER,4*(this.UO.coordsZ.length-1)*3,r),o.bindBuffer(o.ARRAY_BUFFER,this.editBufferForMainPoint),o.bufferSubData(o.ARRAY_BUFFER,4*(this.UO.coordsZ.length-1)*3,s)}},{key:"addSubVertBuffer",value:function(t,e,i,r,s){var o=this.buildInputPoint(e,i,r,s);this.editLineTypedArrSubVert.set(o,t);var n=this.UO.obj.gl;n.bindBuffer(n.ARRAY_BUFFER,this.editSubVertBuffer),n.bufferSubData(n.ARRAY_BUFFER,4*t,o)}},{key:"getLastCoord",value:function(){return this.UO.coords.length?this.getCoord(this.UO.coordsZ.length-1):null}},{key:"getCoord",value:function(t){return new Float32Array([this.UO.coords[2*t],this.UO.coords[2*t+1],this.UO.coordsZ[t]])}},{key:"insertCoord",value:function(t,e,i,r){this.UO.coords.splice(2*t,0,e,i),this.UO.coordsZ.splice(t,0,r);var s=this.editLineTypedArr.slice(0,3*t),o=this.editLineTypedArr.slice(3*t,this.editLineTypedArr.length-3),n=this.buildInputPoint(e,i,r,!1);this.editLineTypedArr.set(s,0),this.editLineTypedArr.set(n,s.length),this.editLineTypedArr.set(o,s.length+3);var a=this.editLineTypedMainPointArr.slice(0,3*t),h=this.editLineTypedMainPointArr.slice(3*t,this.editLineTypedMainPointArr.length-3),l=this.buildInputPointForMainPoint(e,i,r,!1);this.editLineTypedMainPointArr.set(a,0),this.editLineTypedMainPointArr.set(l,a.length),this.editLineTypedMainPointArr.set(h,a.length+3);var u=this.UO.obj.gl;u.bindBuffer(u.ARRAY_BUFFER,this.editBuffer),u.bufferSubData(u.ARRAY_BUFFER,0,this.editLineTypedArr),u.bindBuffer(u.ARRAY_BUFFER,this.editBufferForMainPoint),u.bufferSubData(u.ARRAY_BUFFER,0,this.editLineTypedMainPointArr),this.setSubGeo(t-1),this.setSubVertex(t-1),t===this.subCoordsZ.length?this.createSubVertex(t):this.createMidSubVertex(t),this.lastSnapIndex++}},{key:"createMidSubVertex",value:function(t){var e=this.UO.coords;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(e[2*t]),u.b.DegreeToRadyan(e[2*t+1]),u.b.DegreeToRadyan(e[2*(t+1)]),u.b.DegreeToRadyan(e[2*(t+1)+1])),this.subCoords.splice(2*t,0,this.tempp2d.x,this.tempp2d.y),this.subCoordsZ.splice(t,0,this.findSubZ(t));var i=this.editLineTypedArrSubVert.slice(0,3*t),r=this.editLineTypedArrSubVert.slice(3*t,this.editLineTypedArrSubVert.length-3),s=this.buildInputPoint(this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0);this.editLineTypedArrSubVert.set(i,0),this.editLineTypedArrSubVert.set(s,i.length),this.editLineTypedArrSubVert.set(r,i.length+3);var o=this.UO.obj.gl;o.bindBuffer(o.ARRAY_BUFFER,this.editSubVertBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.editLineTypedArrSubVert),this.subVertCount++}},{key:"deleteCoord",value:function(t){this.UO.coords.splice(2*t,2),this.UO.coordsZ.splice(t,1);var e=this.editLineTypedArr.slice(0,3*t),i=this.editLineTypedArr.slice(3*t+3);this.editLineTypedArr.set(e,0),this.editLineTypedArr.set(i,e.length);var r=this.editLineTypedMainPointArr.slice(0,3*t),s=this.editLineTypedMainPointArr.slice(3*t+3);this.editLineTypedMainPointArr.set(r,0),this.editLineTypedMainPointArr.set(s,r.length);var o=this.UO.obj.gl;o.bindBuffer(o.ARRAY_BUFFER,this.editBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.editLineTypedArr),o.bindBuffer(o.ARRAY_BUFFER,this.editBufferForMainPoint),o.bufferSubData(o.ARRAY_BUFFER,0,this.editLineTypedMainPointArr),this.deleteDistance(t,null,null),this.deleteAngle(t,null,null)}},{key:"deleteDistance",value:function(t,e,i){null!==e&&null!==i?this.UO.obj.distanceOfTwoPoint.splice(e/2,i/2):(this.UO.obj.distanceOfTwoPoint.splice(t-1,1),t&&this.UO.findDistances())}},{key:"deleteAngle",value:function(t,e,i){this.UO.style.showAngles&&(null!==e&&null!==i?this.UO.obj.angleOfTwoPoint.splice(e/2,i/2):(0===t?this.UO.obj.angleOfTwoPoint.splice(0,1):this.UO.obj.angleOfTwoPoint.splice(t-1,1),t&&t!==this.UO.coordsZ.length&&(this.UO.obj.angleOfTwoPoint[t-1]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*(t-1)],this.UO.coords[2*(t-1)+1],this.UO.coords[2*t],this.UO.coords[2*t+1]))))}},{key:"deleteSubVertex",value:function(t){if(-1===t){t=0,this.subCoords.splice(2*t,2),this.subCoordsZ.splice(t,1);var e=this.editLineTypedArrSubVert.slice(3*t+3);this.editLineTypedArrSubVert.set(e,0)}else{this.subCoords.splice(2*t,2),this.subCoordsZ.splice(t,1);var i=this.editLineTypedArrSubVert.slice(0,3*t);e=this.editLineTypedArrSubVert.slice(3*t+3);this.editLineTypedArrSubVert.set(i,0),this.editLineTypedArrSubVert.set(e,i.length)}this.subVertCount&&this.subVertCount--,this.updateSubVertex(t);var r=this.UO.obj.gl;r.bindBuffer(r.ARRAY_BUFFER,this.editSubVertBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.editLineTypedArrSubVert)}},{key:"numberOfVertex",value:function(){return this.UO.coordsZ.length-1}},{key:"buildInputPoint",value:function(t,e,i,r){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan();var s=this.UO.style.zMode,o=this.UO.obj.TempGeo3C,n=this.UO.tempcoord;return s===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,o):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.UO.obj.userObj.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,o),o.SetVecSub(this.UO.obj.startP,o),n[0]=o.x,n[1]=o.y,n[2]=o.z,n}},{key:"buildInputPointForMainPoint",value:function(t,e,i,r){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan();var s=this.UO.style.zMode,o=this.UO.obj,n=o.TempGeo3C,a=o.startP,h=this.UO.tempcoord2;return s===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,n):s!==l.u.Z_GROUND_PERVERTEX&&s!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+this.UO.obj.userObj.FGlobe.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,n),n.SetVecSub(a,n),h[0]=n.x,h[1]=n.y,h[2]=n.z,h}},{key:"buildEditLine",value:function(t){var e=this.UO.obj.userObj,i=e.tempp2d,r=e.FGlobe;i.SetV(u.b.DegreeToRadyan(this.UO.center.x),u.b.DegreeToRadyan(this.UO.center.y)),this.UO.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(i,l.z.GLOBE_RADIUS+t*l.z.GLOBE_RADIUS_K,this.editGeo3C):u.b.GeoTo3DP(i,l.z.GLOBE_RADIUS+r.XyecYr(i,!1)+t*l.z.GLOBE_RADIUS_K,this.editGeo3C)}},{key:"mouseDown",value:function(t,e,i,r){if(this.lastfreeDrawCount=0,this.lastSnapIndex=-1,this.snapMainVertex=!1,this.zPointSnapped=!1,this.walkerGeo.isValid){var s,o=this.UO.obj.FGlobe,n=o.FLastEditingCallback.show_walker,a=this.UO.style.zMode;if(this.x=t,this.y=e,o.FLastEditingCallback.can_change.Z&&o.keyCode===l.f.CTRL&&this.groundDownSnapZ(t,e,s))return!0;if(o.FLastEditingCallback.can_change.vertex&&this.groundDownSnap(t,e,s))return!0;if(o.FLastEditingCallback.can_change.Z&&this.groundDownSnapZ(t,e,s))return!0;if(o.FLastEditingCallback.can_change.vertex&&this.subDownSnap(t,e,s,i))return!0;this.tempp2d.SetV(this.UO.center.x,this.UO.center.y);var h=a===l.u.Z_MSL;if(o.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editTexture)return this.prevX=this.walkerGeo.MouseLong,this.prevY=this.walkerGeo.MouseLat,this.willDrawIcon=1,this.lastSnapIndex=-2,!0;if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),o.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editMoveTexture)return this.firstDist=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.walkerGeo.MouseLong,this.UO.center.y),this.willDrawIcon=2,this.lastSnapIndex=-3,this.prevCZero=g({},this.CZero),!0;if(this.tempp2d.SetV(this.C90.x,this.C90.y),o.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editMoveTexture)return this.willDrawIcon=3,this.lastSnapIndex=-4,this.prevC90=g({},this.C90),!0;if(this.tempp2d.SetV(this.C180.x,this.C180.y),o.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editRotateTexture)return this.willDrawIcon=4,this.lastSnapIndex=-5,this.prevLimit.SetTW(this.UO.obj.Limit),this.rotDegSaved=this.rotDeg,!0;o.FLastEditingCallback.can_change.vertex&&r&&n&&(this.freeDrawAddCoordOndDown(),this.lastfreeDrawIndex=this.UO.coords.length-2)}return-1!==this.lastSnapIndex}},{key:"groundDownSnap",value:function(t,e,i){for(i=this.UO.coordsZ.length-1;i--;)if(this.tempp2d.SetV(this.UO.coords[2*i],this.UO.coords[2*i+1]),this.UO.obj.FGlobe.XG0gjf(t,e,this.tempp2d,0,this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL))return this.snapMainVertex=!0,this.prevX=this.walkerGeo.MouseLong,this.prevY=this.walkerGeo.MouseLat,this.lastSnapIndex=i,!0}},{key:"groundDownSnapZ",value:function(t,e,i){var r=this.UO.obj.FGlobe;this.UO.style.zMode;for(i=this.UO.coordsZ.length-1;i--;)if(this.tempp2d.SetV(this.UO.coords[2*i],this.UO.coords[2*i+1]),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[i],this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL))return this.prevZ=this.UO.coordsZ[i],this.zPointSnapped=!0,this.lastSnapIndex=i,!0}},{key:"subDownSnap",value:function(t,e,i,r){var s=this.UO.obj.FGlobe,o=this.UO.style.zMode;for(i=this.subCoordsZ.length;i--;)if(this.tempp2d.SetV(this.subCoords[2*i],this.subCoords[2*i+1]),s.XG0gjf(t,e,this.tempp2d,this.subCoordsZ[i],!0,this.tempp2dLL))return this.lastSnapIndex=i,o===l.u.Z_GROUND_FOLLOW?this.insertCoord(this.lastSnapIndex+1,this.subCoords[2*i],this.subCoords[2*i+1],this.UO.coordsZ[0]):this.insertCoord(this.lastSnapIndex+1,this.subCoords[2*i],this.subCoords[2*i+1],0),this.setDistanceForInsert(i),this.setAngleForInsert(i),r&&(this.snapMainVertex=!0,this.prevX=this.walkerGeo.MouseLong,this.prevY=this.walkerGeo.MouseLat,this.saveOperation(l.l.ADDSV),this.UO.onChanged(this.UO,l.k.INSERT_VERTEX)),!0}},{key:"mouseDblClick",value:function(t,e){if(this.lastfreeDrawCount=0,this.lastSnapIndex=-1,this.walkerGeo.isValid){var i;this.x=t,this.y=e;var r=this.UO.obj.FGlobe,s=r.FLastEditingCallback.can_change;if((s.vertex||s.Z)&&(this.groundDownSnapZ(t,e,i)||this.groundDownSnap(t,e,i,!0)))return this.UO.onVertexClick?this.UO.onVertexClick(this.UO,this.lastSnapIndex):r.CSWidgets.ShowVertexWidget(this.lastSnapIndex),!0}return!1}},{key:"mouseMove",value:function(t,e,i){var r=this.UO.obj.userObj.FGlobe.FLastEditingCallback.show_walker,s=this.UO.style.zMode;if(i&&-1===this.lastSnapIndex){if(!r)return;if(this.UO.obj.FGlobe.FLastEditingCallback.can_change.vertex){var o=Math.hypot(t-this.lastSaveX,e-this.lastSaveY);if((o>=25||isNaN(o))&&this.UO.coords[this.UO.coords.length-4]!==this.walkerGeo.MouseLong&&this.UO.coords[this.UO.coords.length-3]!==this.walkerGeo.MouseLat)return this.lastSaveX=t,this.lastSaveY=e,s===l.u.Z_GROUND_FOLLOW?this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,this.UO.coordsZ[0]):this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.lastfreeDrawCount++,this.lastfreeDrawCount++,2===this.UO.coordsZ.length&&this.createSubVertex(this.subVertCount),!0}}-1!==this.lastSnapIndex&&(-2===this.lastSnapIndex?(this.translateCoords(),this.expandLimit(null,null,!0),this.buildEditIcon(0,this.UO.center,this.editGeo3C)):-3===this.lastSnapIndex?(this.saveScaleVals(-3),this.scaleX(),this.setDistanceForScale(),this.findRadius(),this.setDragPoints(),this.buildEditIcon(0,this.CZero,this.editGeo3CForCZero)):-4===this.lastSnapIndex?(this.saveScaleVals(-4),this.scaleY(),this.setDistanceForScale(),this.findRadius(),this.setDragPoints(),this.buildEditIcon(0,this.C90,this.editGeo3CForC90)):-5===this.lastSnapIndex?(this.findStartRadius(),this.findRotDeg(),this.rotateCoords(),this.rotDegSaved=this.rotDeg,this.setDragPoints(),this.buildEditIcon(0,this.C180,this.editGeo3CForC180)):this.zPointSnapped?(this.tempp2d.SetV(this.UO.coords[2*this.lastSnapIndex],this.UO.coords[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(this.UO.coords[2*this.lastSnapIndex],this.UO.coords[2*this.lastSnapIndex+1]),this.UO.coordsZ[this.lastSnapIndex]=this.UO.obj.FGlobe.XyhdDQ(this.tempp2d,this.tempp2d2,0,this.UO.coordsZ[this.lastSnapIndex],this.UO.style.zMode===l.u.Z_MSL,this.UO.coordsZ[this.lastSnapIndex],t,e),this.UO.style.zMode===l.u.Z_GROUND_FOLLOW?this.setCoordZ(this.lastSnapIndex):this.setCoord(this.lastSnapIndex,this.UO.coords[2*this.lastSnapIndex],this.UO.coords[2*this.lastSnapIndex+1],this.UO.coordsZ[this.lastSnapIndex]),this.setDistanceForMove(this.lastSnapIndex),this.setAngleForMove(this.lastSnapIndex)):(this.setCoord(this.lastSnapIndex,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,this.UO.coordsZ[this.lastSnapIndex]),this.subCoordsZ.length&&2!==this.UO.coordsZ.length&&(this.setSubGeo(this.lastSnapIndex),this.setSubVertex(this.lastSnapIndex)),this.setDistanceForMove(this.lastSnapIndex),this.setAngleForMove(this.lastSnapIndex),this.expandLimit(null,null,!0),this.findStartRadius(),this.setDragPoints(),this.UO.buildEditIcons(this))),this.checkWidget()}},{key:"checkWidget",value:function(){var t=this.UO.obj.userObj.FGlobe.CSWidgets;"visible"===t.editVertexWidget.style.visibility&&(this.lastSnapIndex===t.vertexIndex?(t.textBoxVertexEnlem.value=this.UO.coords[2*this.lastSnapIndex],t.textBoxVertexBoylam.value=this.UO.coords[2*this.lastSnapIndex+1]):this.lastSnapIndex<-1&&(t.textBoxVertexEnlem.value=this.UO.coords[2*t.vertexIndex],t.textBoxVertexBoylam.value=this.UO.coords[2*t.vertexIndex+1]),!this.zPointSnapped||this.lastSnapIndex!==t.vertexIndex&&this.UO.style.zMode!==l.u.Z_GROUND_FOLLOW||(t.textBoxVertexKot.value=this.UO.coordsZ[this.lastSnapIndex]))}},{key:"setCoordZ",value:function(t){for(var e=0,i=0;i<this.UO.coordsZ.length;i++)e=2*i,this.UO.coordsZ[i]=this.UO.coordsZ[t],this.editLineTypedArr.set(this.buildInputPoint(this.UO.coords[e],this.UO.coords[e+1],this.UO.coordsZ[i]),3*i);var r=this.UO.obj.gl;r.bindBuffer(r.ARRAY_BUFFER,this.editBuffer),r.bufferData(r.ARRAY_BUFFER,this.editLineTypedArr,r.DYNAMIC_DRAW)}},{key:"mouseUp",value:function(t,e){if(this.isFreeDrawing&&-1===this.lastSnapIndex&&this.saveOperation(l.l.ADDFRD),-5===this.lastSnapIndex)this.afterRotDeg=this.rotDegSaved,this.saveOperation(l.l.ROTATEO),this.UO.onChanged(this.UO,l.k.ROTATE_OBJ);else if(-2===this.lastSnapIndex)this.saveOperation(l.l.MOVEO),this.UO.onChanged(this.UO,l.k.MOVE_VERTEX);else if(-3===this.lastSnapIndex){this.afterScaleInitialX=Math.abs(this.CZero.x-this.UO.center.x),this.afterCoords=this.UO.coords.slice(),this.afterCenter=g({},this.UO.center);for(var i=this.afterCoords.length,r=0;r<i;r+=2)this.afterCoords[r]-=this.afterCenter.x;this.afterCZero=g({},this.CZero),this.saveOperation(l.l.SCALEOX),this.UO.onChanged(this.UO,l.k.SCALE_OBJX)}else if(-4===this.lastSnapIndex){this.afterScaleInitialY=Math.abs(this.C90.y-this.UO.center.y),this.afterCoords=this.UO.coords.slice(),this.afterCenter=g({},this.UO.center);for(i=this.afterCoords.length,r=0;r<i;r+=2)this.afterCoords[r+1]-=this.afterCenter.y;this.afterC90=g({},this.C90),this.saveOperation(l.l.SCALEOY),this.UO.onChanged(this.UO,l.k.SCALE_OBJY)}this.rotDeg=0,this.expandWithoutWalker(),this.findStartRadius(),this.UO.buildEditIcons(this),this.willDrawIcon=0,this.zPointSnapped?(this.afterZ=this.UO.coordsZ[this.lastSnapIndex],this.zPointSnapped=!1,this.saveOperation(l.l.MOVEZ)):this.lastSnapIndex>=0&&(this.saveOperation(l.l.MOVEV),this.UO.onChanged(this.UO,l.k.MOVE_VERTEX)),this.lastSnapIndex=-1}},{key:"setDistanceForAdd",value:function(){this.UO.findDistances()}},{key:"setAngleForAdd",value:function(){if(this.UO.style.showAngles){var t=this.UO.coordsZ.length-2;t>=1&&(this.UO.obj.angleOfTwoPoint[t-1]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*(t-1)],this.UO.coords[2*(t-1)+1],this.UO.coords[2*t],this.UO.coords[2*t+1]))}}},{key:"setAngleForAddFreeDrawOrUndoRedo",value:function(){if(this.UO.style.showAngles)for(var t=1;t<this.UO.coordsZ.length;t++)this.UO.obj.angleOfTwoPoint[t-1]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*(t-1)],this.UO.coords[2*(t-1)+1],this.UO.coords[2*t],this.UO.coords[2*t+1])}},{key:"setDistanceForwalkers",value:function(t,e,i,r,s){switch(this.UO.style.showDistances){case l.s.SHOW2D:this.UO.obj.distanceOfTwoPoint[s]=this.UO.find2DDistance(t,e,i,r);break;case l.s.SHOW3D:this.UO.obj.distanceOfTwoPoint[s]=this.UO.find3DDistance(t,e,0,i,r,0);break;case l.s.NOTSHOW:}}},{key:"setAngleForwalkers",value:function(t,e,i,r,s){this.UO.obj.angleOfTwoPoint[s]=u.b.AzimuthOf2PointsOnSphereForAngText(t,e,i,r)}},{key:"setDistanceForWalkerRight",value:function(){if(-1===this.lastSnapIndex&&this.walkerGeo.isValid){var t=this.UO,e=t.coords,i=t.coordsZ;this.setDistanceForwalkers(e[e.length-4],e[e.length-3],e[e.length-2],e[e.length-1],i.length-2)}}},{key:"setAngleForWalkerRight",value:function(){if(this.UO.style.showAngles&&-1===this.lastSnapIndex&&this.walkerGeo.isValid){var t=this.UO,e=t.coords,i=t.coordsZ;this.setAngleForwalkers(e[e.length-4],e[e.length-3],e[e.length-2],e[e.length-1],i.length-2)}}},{key:"setDistanceForInsert",value:function(t){this.UO.findDistances()}},{key:"setAngleForInsert",value:function(){if(this.UO.style.showAngles)for(var t=1;t<this.UO.coordsZ.length;t++)this.UO.obj.angleOfTwoPoint[t-1]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*(t-1)],this.UO.coords[2*(t-1)+1],this.UO.coords[2*t],this.UO.coords[2*t+1])}},{key:"setDistanceForMove",value:function(t){0===t?this.UO.findDistances():(this.UO.coordsZ.length,this.UO.findDistances())}},{key:"setAngleForMove",value:function(t){this.UO.style.showAngles&&(0===t?this.UO.obj.angleOfTwoPoint[t]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[0],this.UO.coords[1],this.UO.coords[2],this.UO.coords[3]):t===this.UO.coordsZ.length-2?this.UO.obj.angleOfTwoPoint[t-1]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*t-2],this.UO.coords[2*t-1],this.UO.coords[2*t],this.UO.coords[2*t+1]):(this.UO.obj.angleOfTwoPoint[t-1]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*t-2],this.UO.coords[2*t-1],this.UO.coords[2*t],this.UO.coords[2*t+1]),this.UO.obj.angleOfTwoPoint[t]=u.b.AzimuthOf2PointsOnSphereForAngText(this.UO.coords[2*t],this.UO.coords[2*t+1],this.UO.coords[2*t+2],this.UO.coords[2*t+3])))}},{key:"setDistanceForScale",value:function(){this.UO.findDistances()}},{key:"mouseAddCoord",value:function(t,e){var i=this.UO.obj.FGlobe,r=this.UO.style.zMode;return!!(i.FLastEditingCallback.can_change.vertex&&l.z.CLICK_DISTANCE>=Math.hypot(t-this.x,e-this.y))&&(r===l.u.Z_GROUND_FOLLOW?this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,this.UO.coordsZ[0]):this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.setDistanceForAdd(),this.setAngleForAdd(),this.saveOperation(l.l.ADDV),2===this.UO.coordsZ.length&&(this.createSubVertex(this.subVertCount),this.UO.onChanged(this.UO,l.k.ADD_VERTEX)),!0)}},{key:"mouseDeleteCoord",value:function(t,e){return this.snapMainVertex=!1,!!this.mouseDown(t,e,0)&&(this.lastSnapIndex>-1&&(this.snapMainVertex&&(this.saveOperation(l.l.DELETEV),this.UO.onChanged(this.UO,l.k.DELETE_VERTEX)),this.deleteCoord(this.lastSnapIndex),this.deleteSubVertex(this.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius(),this.setDragPoints(),this.UO.buildEditIcons(this)),!0)}},{key:"getSnapIndex",value:function(t,e){var i;if(this.lastSnapIndex=-1,this.deleteScaleVals(),this.showZ=!1,this.walkerGeo.isValid){var r=this.UO.obj.FGlobe,s=this.UO.style.zMode,o=this.UO,n=o.coords,a=o.coordsZ,h=s===l.u.Z_MSL;if(this.UO.obj.FGlobe.FLastEditingCallback.can_change.Z)for(i=a.length-1;i--;)if(this.tempp2d.SetV(n[2*i],n[2*i+1]),r.XG0gjf(t,e,this.tempp2d,a[i],h,this.tempp2dLL))return this.lastSnapIndex=i,this.showZ=!0,this.lastSnapIndex;if(this.UO.obj.FGlobe.FLastEditingCallback.can_change.vertex){for(i=a.length-1;i--;)if(this.tempp2d.SetV(n[2*i],n[2*i+1]),r.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL))return this.lastSnapIndex=i,this.lastSnapIndex;if(a.length-2>0)for(i=a.length-2;i--;)if(this.tempp2d.SetV(this.subCoords[2*i],this.subCoords[2*i+1]),r.XG0gjf(t,e,this.tempp2d,this.subCoordsZ[i],!0,this.tempp2dLL))return this.lastSnapIndex=i,this.lastSnapIndex}if(a.length>1){if(this.tempp2d.SetV(this.UO.center.x,this.UO.center.y),r.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editTexture)return this.lastSnapIndex=-2,this.lastSnapIndex;if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),r.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-3,this.lastSnapIndex;if(this.tempp2d.SetV(this.C90.x,this.C90.y),r.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-4,this.lastSnapIndex;if(this.tempp2d.SetV(this.C180.x,this.C180.y),r.XG0gjf(t,e,this.tempp2d,0,h,this.tempp2dLL)&&this.editRotateTexture)return this.lastSnapIndex=-5,this.lastSnapIndex}}return this.lastSnapIndex}},{key:"freeDrawAddCoordOndDown",value:function(){this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.setDistanceForAdd(),this.setAngleForAdd(),2===this.UO.coordsZ.length&&this.createSubVertex(this.subVertCount),this.UO.onChanged(this.UO,l.k.ADD_VERTEX,this.UO.coordsZ.length-1),this.saveOperation(l.l.ADDV),this.freedRawPassFirst=!0}},{key:"createEditCanvasPoint",value:function(t,e){var i=this.UO.obj.FGlobe;t.SetVecSub(this.UO.obj.Fp2T,e),i.Xh5WFD(t)?i.X9oM46(t,this.editCanvasPoint):this.editCanvasPoint.isValid=!1}},{key:"setWalkerPoint",value:function(t,e,i){this.walkerx=t,this.walkery=e,this.walkerGeo=i}},{key:"updateWalkerPoint",value:function(){var t=this.UO.coordsZ,e=this.UO.obj.FGlobe.FLastEditingCallback.show_walker;if(this.walkerGeo.isValid){var i=this.UO.obj.FGlobe.FLastEditingCallback,r=i.can_change,s=i.show_walker;r.vertex||this.lastSnapIndex<0?(this.setCoord(t.length-1,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.subCoordsZ.length>=0&&(this.setSubGeo(t.length-1),this.setSubVertex(t.length-1))):1===t.length&&this.setCoord(t.length-1,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),s&&t.length>1&&(this.setDistanceForWalkerRight(),this.setAngleForWalkerRight())}else e&&t.length>2&&(this.setDistanceForWalkerRight(),this.setAngleForWalkerRight())}},{key:"expandLimit",value:function(t,e,i){var r=this.UO.obj.Limit,s=r.UR,o=r.LL;i?(this.UO.findLimitsAndCenter(),this.CZero.SetV(s.y,(o.x+s.x)/2),this.C90.SetV((o.y+s.y)/2,s.x),this.C180.SetV(o.y,(o.x+s.x)/2)):(r.ExpandXY(t,e),r.GetCenterPoint(this.UO.center),this.CZero.SetV(s.y,(o.x+s.x)/2),this.C90.SetV((o.y+s.y)/2,s.x),this.C180.SetV(o.y,(o.x+s.x)/2)),-3===this.lastSnapIndex&&-4===this.lastSnapIndex&&-5===this.lastSnapIndex||(this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y,this.C180.x=1.2*(this.C180.x-this.UO.center.x)+this.UO.center.x,this.UO.buildEditIcons(this))}},{key:"findRadius",value:function(){-3===this.lastSnapIndex?this.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat):-4===this.lastSnapIndex&&(this.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat))}},{key:"findStartRadius",value:function(){this.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.CZero.x,this.CZero.y),this.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.C90.x,this.C90.y)}},{key:"deleteScaleVals",value:function(){this.savedCoords&&(delete this.savedCoords,delete this.savedCenter,delete this.XF471FialX,delete this.XF471FialY)}},{key:"saveScaleVals",value:function(t){if(void 0===this.savedCoords){if(-3===t){this.savedCoords=this.UO.coords.slice(),this.savedCenter=g({},this.UO.center);for(var e=this.savedCoords.length,i=0;i<e;i+=2)this.savedCoords[i]-=this.savedCenter.x;this.XF471FialX=Math.abs(this.CZero.x-this.savedCenter.x),this.prevScaleInitialX=this.XF471FialX}else if(-4===t){this.savedCoords=this.UO.coords.slice(),this.savedCenter=g({},this.UO.center);for(e=this.savedCoords.length,i=0;i<e;i+=2)this.savedCoords[i+1]-=this.savedCenter.y;this.XF471FialY=Math.abs(this.C90.y-this.savedCenter.y),this.prevScaleInitialY=this.XF471FialY}this.prevCoords=this.savedCoords.slice(),this.prevCenter=g({},this.savedCenter)}}},{key:"scaleX",value:function(){for(var t=Math.abs(this.CZero.x-this.savedCenter.x)/this.XF471FialX,e=this.savedCoords.length,i=0;i<e;i+=2)this.UO.coords[i]=this.savedCoords[i]*t+this.savedCenter.x,this.setCoord(i/2,this.UO.coords[i],this.UO.coords[i+1],this.UO.coordsZ[i/2]),this.setSubGeo(i/2),this.setSubVertex(i/2)}},{key:"scaleY",value:function(){for(var t=Math.abs(this.C90.y-this.savedCenter.y)/this.XF471FialY,e=this.savedCoords.length,i=this.UO,r=i.coords,s=i.coordsZ,o=0;o<e;o+=2)this.UO.coords[o+1]=this.savedCoords[o+1]*t+this.savedCenter.y,this.setCoord(o/2,r[o],r[o+1],s[o/2]),this.setSubGeo(o/2),this.setSubVertex(o/2)}},{key:"translateCoords",value:function(){this.deltaX=this.walkerGeo.MouseLong-this.UO.center.x,this.deltaY=this.walkerGeo.MouseLat-this.UO.center.y;for(var t=this.UO.coords.length,e=this.UO,i=e.coords,r=e.coordsZ,s=0;s<t;s+=2)i[s]+=this.deltaX,i[s+1]+=this.deltaY,this.setCoord(s/2,i[s],i[s+1],r[s/2]),this.setSubGeo(s/2),this.setSubVertex(s/2)}},{key:"findRotDeg",value:function(){var t=new u.u(0,0),e=new u.u(0,0);t.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),t.ConvertDegreeToRadyan(),Object.assign(e,this.UO.center),e.ConvertDegreeToRadyan(),this.rotDeg=u.b.CSNormalizeAngle(270-u.b.AzimuthOf2PointsOnSphere(e,t))}},{key:"rotateCoords",value:function(){var t=new u.w(0,0,0),e=new u.u(0,0),i=new u.u(0,0),r=this.UO.coords.length;Object.assign(i,this.UO.center),i.ConvertDegreeToRadyan();for(var s=0;s<r;s+=2)e.SetV(this.UO.coords[s],this.UO.coords[s+1]),e.ConvertDegreeToRadyan(),u.b.GeoTo3D(i.x,i.y,l.z.GLOBE_RADIUS,t),t.Normalize(),e=u.b.RotatePoint(e,t,this.rotDeg-this.rotDegSaved),this.setCoord(s/2,e.x,e.y,this.UO.coordsZ[s/2]),this.setSubGeo(s/2),this.setSubVertex(s/2)}},{key:"rotateNorth",value:function(t,e,i,r){var s=new u.w(0,0,0),o=new u.u(0,0);return u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),u.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+u.b.DegreeToRadyan(r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),u.b.CarToSpher2(s,o),o}},{key:"setDragPoints",value:function(){var t,e,i,r,s=new u.u(0,0),o=new u.u(0,0),n=new u.w(0,0,0);o.SetV(u.b.DegreeToRadyan(this.UO.center.x),u.b.DegreeToRadyan(this.UO.center.y)),u.b.GeoTo3DP(o,l.z.GLOBE_RADIUS,n),n.Normalize(),t=u.b.DegreeToRadyan(180),e=this.radius1*Math.cos(t)*l.z.GLOBE_RADIUS_K,i=this.radius2*Math.sin(t)*l.z.GLOBE_RADIUS_K,r=Math.sqrt(e*e+i*i),t=u.b.DegreeToRadyan(u.b.CSAngleV2(e,i)),Object.assign(s,o),u.b.X7UX4S(s,r,l.z.GLOBE_RADIUS),this.CZero=this.rotateNorth(s,n,t,this.rotDeg),this.CZero.ConvertRadyanToDegree(),t=u.b.DegreeToRadyan(270),e=this.radius1*Math.cos(t)*l.z.GLOBE_RADIUS_K,i=this.radius2*Math.sin(t)*l.z.GLOBE_RADIUS_K,r=Math.sqrt(e*e+i*i),t=u.b.DegreeToRadyan(u.b.CSAngleV2(e,i)),Object.assign(s,o),u.b.X7UX4S(s,r,l.z.GLOBE_RADIUS),this.C90=this.rotateNorth(s,n,t,this.rotDeg),this.C90.ConvertRadyanToDegree(),t=u.b.DegreeToRadyan(0),e=this.radius1*Math.cos(t)*l.z.GLOBE_RADIUS_K,i=this.radius2*Math.sin(t)*l.z.GLOBE_RADIUS_K,r=Math.sqrt(e*e+i*i),t=u.b.DegreeToRadyan(u.b.CSAngleV2(e,i)),Object.assign(s,o),u.b.X7UX4S(s,r,l.z.GLOBE_RADIUS),this.C180=this.rotateNorth(s,n,t,this.rotDeg),this.C180.ConvertRadyanToDegree()}},{key:"setOffsetDragPoints",value:function(){this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y}},{key:"drawMainPoint",value:function(){var t=this.UO.obj.userObj.FGlobe,e=this.UO.obj.gl;e.bindBuffer(e.ARRAY_BUFFER,this.editBufferForMainPoint),e.vertexAttribPointer(t.P3DvertexPos,3,e.FLOAT,!1,0,0);var i=t.FLastEditingCallback,r=i.can_change,s=i.show_walker;r.vertex&&(-1===t.cursorIndex&&this.walkerGeo.isValid?s?e.drawArrays(e.POINTS,0,this.UO.coordsZ.length):e.drawArrays(e.POINTS,0,this.UO.coordsZ.length-1):this.UO.coordsZ.length-1>0&&e.drawArrays(e.POINTS,0,this.UO.coordsZ.length-1))}},{key:"drawShadowLine",value:function(){var t=this.UO.obj.userObj.FGlobe,e=this.UO.obj.gl;if(e.bindBuffer(e.ARRAY_BUFFER,this.editBufferForMainPoint),e.vertexAttribPointer(t.P3DvertexPos,3,e.FLOAT,!1,0,0),e.uniform4fv(t.P3DOpacityLoc,C),-1===t.cursorIndex&&this.walkerGeo.isValid){var i=t.FLastEditingCallback,r=i.show_walker;i.can_change.vertex?r?e.drawArrays(e.LINE_STRIP,0,this.UO.coordsZ.length):e.drawArrays(e.LINE_STRIP,0,this.UO.coordsZ.length-1):this.UO.coordsZ.length>2&&e.drawArrays(e.LINE_STRIP,0,this.UO.coordsZ.length-1)}else this.UO.coordsZ.length-1>0&&e.drawArrays(e.LINE_STRIP,0,this.UO.coordsZ.length-1)}},{key:"drawZPoint",value:function(){var t=this.UO.obj,e=t.gl,i=t.FGlobe;if(-1===i.cursorIndex&&this.walkerGeo.isValid){var r=i.FLastEditingCallback,s=r.show_walker,o=r.can_change;e.bindBuffer(e.ARRAY_BUFFER,this.editBuffer),e.vertexAttribPointer(i.P3DvertexPos,3,e.FLOAT,!1,0,0),o.Z&&(o.vertex&&s&&e.drawArrays(e.POINTS,0,this.UO.coordsZ.length),this.UO.coordsZ.length-1>0&&e.drawArrays(e.POINTS,0,this.UO.coordsZ.length-1))}else e.bindBuffer(e.ARRAY_BUFFER,this.editBuffer),e.vertexAttribPointer(i.P3DvertexPos,3,e.FLOAT,!1,0,0),this.UO.coordsZ.length-1>0&&e.drawArrays(e.POINTS,0,this.UO.coordsZ.length-1)}},{key:"drawSubPoint",value:function(){var t=this.UO.obj,e=t.gl,i=t.FGlobe,r=i.FLastEditingCallback,s=r.show_walker,o=r.can_change;this.subVertCount>0&&(-1===i.cursorIndex&&this.walkerGeo.isValid?(e.bindBuffer(e.ARRAY_BUFFER,this.editSubVertBuffer),e.vertexAttribPointer(i.P3DvertexPos,3,e.FLOAT,!1,0,0),o.vertex&&(s?e.drawArrays(e.POINTS,0,this.subVertCount):this.subVertCount>1&&e.drawArrays(e.POINTS,0,this.subVertCount-1))):(e.bindBuffer(e.ARRAY_BUFFER,this.editSubVertBuffer),e.vertexAttribPointer(i.P3DvertexPos,3,e.FLOAT,!1,0,0),this.subVertCount>1&&o.vertex&&e.drawArrays(e.POINTS,0,this.subVertCount-1)))}},{key:"saveOperation",value:function(t){var e=this.UO,i=e.coords,r=e.coordsZ,s=this.UO.style.zMode===l.u.Z_MSL;switch(t){case l.l.ADDV:this.UO.FUndoRedoEdit.SaveOpr({type:t,coord:[i[i.length-2],i[i.length-1]],isMSL:s,coordZ:r[r.length-1]});break;case l.l.ADDSV:this.UO.FUndoRedoEdit.SaveOpr({type:t,coord:[this.prevX,this.prevY],lastSnapIndex:this.lastSnapIndex,isMSL:s,coordZ:r[r.length-1]});break;case l.l.MOVEV:this.UO.FUndoRedoEdit.SaveOpr({type:t,coord1:[this.prevX,this.prevY],coord2:[i[i.length-2],i[i.length-1]],coordZ:r[r.length-1],lastSnapIndex:this.lastSnapIndex});break;case l.l.MOVEZ:this.UO.FUndoRedoEdit.SaveOpr({type:t,prevZ:this.prevZ,afterZ:this.afterZ,lastSnapIndex:this.lastSnapIndex,zMode:this.UO.style.zMode});break;case l.l.DELETEV:this.UO.FUndoRedoEdit.SaveOpr({type:t,coord:[i[i.length-2],i[i.length-1]],coordZ:r[r.length-1],lastSnapIndex:this.lastSnapIndex,isMSL:s,Z:this.UO.Z});break;case l.l.ROTATEO:var o=new u.E(0,0,0,0);o.SetTW(this.prevLimit),this.UO.FUndoRedoEdit.SaveOpr({type:t,afterRotDeg:this.afterRotDeg,prevLimit:o});break;case l.l.SCALEOX:this.UO.FUndoRedoEdit.SaveOpr({type:t,previnitialX:this.prevScaleInitialX,afterinitialX:this.afterScaleInitialX,prevCoords:this.prevCoords.slice(),afterCoords:this.afterCoords.slice(),prevCenter:this.prevCenter,afterCenter:this.afterCenter,prevCZero:this.prevCZero,afterCZero:this.afterCZero});break;case l.l.SCALEOY:this.UO.FUndoRedoEdit.SaveOpr({type:t,previnitialY:this.prevScaleInitialY,afterinitialY:this.afterScaleInitialY,prevCoords:this.prevCoords.slice(),afterCoords:this.afterCoords.slice(),prevCenter:this.prevCenter,afterCenter:this.afterCenter,prevC90:this.prevC90,afterC90:this.afterC90});break;case l.l.MOVEO:this.UO.FUndoRedoEdit.SaveOpr({type:t,deltaX:this.UO.center.x-this.prevX,deltaY:this.UO.center.y-this.prevY});break;case l.l.ADDFRD:this.lastfreeDrawCount&&this.UO.FUndoRedoEdit.SaveOpr({type:t,lastIndex:this.lastfreeDrawIndex,lastCount:this.lastfreeDrawCount,lastCoords:this.UO.coords.slice(this.lastfreeDrawIndex,this.lastfreeDrawIndex+this.lastfreeDrawCount),lastCoordsZ:this.UO.coordsZ.slice(this.lastfreeDrawIndex/2,(this.lastfreeDrawIndex+this.lastfreeDrawCount)/2)})}}},{key:"expandWithoutWalker",value:function(){if(2===this.UO.coords.length)this.expandLimit(null,null,!0);else{var t=this.UO.coords.pop(),e=this.UO.coords.pop(),i=this.UO.coordsZ.pop();this.expandLimit(null,null,!0),this.UO.coords.push(e),this.UO.coords.push(t),this.UO.coordsZ.push(i)}}},{key:"undo",value:function(t){switch(t.type){case l.l.ADDV:this.deleteCoord(this.UO.coordsZ.length-1),this.deleteSubVertex(this.UO.coordsZ.length-2),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ADDSV:this.deleteCoord(t.lastSnapIndex),this.deleteSubVertex(t.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEV:this.setCoord(t.lastSnapIndex,t.coord1[0],t.coord1[1],t.coordZ),this.subCoordsZ.length&&2!==this.UO.coordsZ.length&&(this.setSubGeo(t.lastSnapIndex),this.setSubVertex(t.lastSnapIndex)),this.setDistanceForMove(t.lastSnapIndex),this.setAngleForMove(t.lastSnapIndex),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEZ:t.zMode===l.u.Z_GROUND_FOLLOW?(this.UO.coordsZ[t.lastIndex]=t.prevZ,this.setCoordZ(t.lastIndex)):this.setCoord(t.lastSnapIndex,this.UO.coords[2*t.lastSnapIndex],this.UO.coords[2*t.lastSnapIndex+1],t.prevZ),this.setDistanceForMove(t.lastSnapIndex),this.setAngleForMove(t.lastSnapIndex),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.DELETEV:if(t.lastSnapIndex)this.insertCoord(t.lastSnapIndex,t.coord[0],t.coord[1],t.coordZ),this.setDistanceForInsert(t.lastSnapIndex-1);else{this.UO.coords.splice(2*t.lastSnapIndex,0,t.coord[0],t.coord[1]),this.UO.coordsZ.splice(t.lastSnapIndex,0,t.coordZ);var e=this.editLineTypedArr.slice(0,3*t.lastSnapIndex),i=this.editLineTypedArr.slice(3*t.lastSnapIndex,this.editLineTypedArr.length-3),r=this.buildInputPoint(t.coord[0],t.coord[1],t.coordZ,!1);this.editLineTypedArr.set(e,0),this.editLineTypedArr.set(r,e.length),this.editLineTypedArr.set(i,e.length+3),this.UO.obj.gl.bindBuffer(this.UO.obj.gl.ARRAY_BUFFER,this.editBuffer),this.UO.obj.gl.bufferSubData(this.UO.obj.gl.ARRAY_BUFFER,0,this.editLineTypedArr),t.lastSnapIndex===this.subCoordsZ.length?this.createSubVertex(t.lastSnapIndex):this.createMidSubVertex(t.lastSnapIndex)}this.setAngleForInsert(t.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ROTATEO:this.rotDeg=360-t.afterRotDeg,this.rotDegSaved=0,this.rotateCoords(),this.rotDegSaved=0,this.rotDeg=0;var s=this.UO.obj.Limit;s.SetTW(t.prevLimit),this.CZero.SetV(s.UR.y,(s.LL.x+s.UR.x)/2),this.C90.SetV((s.LL.y+s.UR.y)/2,s.UR.x),this.C180.SetV(s.LL.y,(s.LL.x+s.UR.x)/2),this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y,this.C180.x=1.2*(this.C180.x-this.UO.center.x)+this.UO.center.x,this.findStartRadius();break;case l.l.SCALEOX:this.XF471FialX=t.previnitialX,this.savedCoords=t.prevCoords.slice(),this.savedCenter=g({},t.prevCenter),this.CZero=g({},t.prevCZero),this.scaleX(),this.setDistanceForScale(),this.findStartRadius();break;case l.l.SCALEOY:this.XF471FialY=t.previnitialY,this.savedCoords=t.prevCoords.slice(),this.savedCenter=g({},t.prevCenter),this.C90=g({},t.prevC90),this.scaleY(),this.setDistanceForScale(),this.findStartRadius();break;case l.l.MOVEO:this.deltaX=-t.deltaX,this.deltaY=-t.deltaY;for(var o=this.UO.coords.length,n=0;n<o;n+=2)this.UO.coords[n]+=this.deltaX,this.UO.coords[n+1]+=this.deltaY,this.setCoord(n/2,this.UO.coords[n],this.UO.coords[n+1],this.UO.coordsZ[n/2]),this.setSubGeo(n/2),this.setSubVertex(n/2);this.expandWithoutWalker();break;case l.l.ADDFRD:this.deleteCoordForADDFRD(this.UO.coordsZ.length-1,t.lastIndex,t.lastCount),this.deleteSubVertexForADDFRD(this.UO.coordsZ.length-2,t.lastIndex,t.lastCount),this.deleteDistance(null,t.lastIndex,t.lastCount),this.deleteAngle(null,t.lastIndex,t.lastCount),this.expandWithoutWalker(),this.findStartRadius()}this.setDragPoints(),this.UO.buildEditIcons(this)}},{key:"redo",value:function(t){switch(t.type){case l.l.ADDV:(r=this.UO.coordsZ.length-1)?(this.insertCoord(r,t.coord[0],t.coord[1],t.coordZ),this.setDistanceForInsert(r-1),this.setAngleForInsert(r-1)):(this.UO.coords[0]=t.coord[0],this.UO.coords[1]=t.coord[1],this.setCoord(0,t.coord[0],t.coord[1],t.coordZ),this.addCoord(t.coord[0],t.coord[1],t.coordZ),this.createSubVertex(this.subVertCount),this.setDistanceForAdd(),this.setAngleForAddFreeDrawOrUndoRedo()),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ADDSV:t.lastSnapIndex?(this.insertCoord(t.lastSnapIndex,t.coord[0],t.coord[1],t.coordZ),this.setDistanceForInsert(t.lastSnapIndex-1),this.setAngleForInsert(t.lastSnapIndex-1)):(this.addCoord(t.coord[0],t.coord[1],t.coordZ),this.setDistanceForAdd(),this.setAngleForAddFreeDrawOrUndoRedo()),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEV:this.setCoord(t.lastSnapIndex,t.coord2[0],t.coord2[1],t.coordZ),this.subCoordsZ.length&&2!==this.UO.coordsZ.length&&(this.setSubGeo(t.lastSnapIndex),this.setSubVertex(t.lastSnapIndex)),this.setDistanceForMove(t.lastSnapIndex),this.setAngleForMove(t.lastSnapIndex),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEZ:t.zMode===l.u.Z_GROUND_FOLLOW?(this.UO.coordsZ[t.lastIndex]=t.afterZ,this.setCoordZ(t.lastIndex)):this.setCoord(t.lastSnapIndex,this.UO.coords[2*t.lastSnapIndex],this.UO.coords[2*t.lastSnapIndex+1],t.afterZ),this.setDistanceForMove(t.lastSnapIndex),this.setAngleForMove(t.lastSnapIndex),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.DELETEV:this.deleteCoord(t.lastSnapIndex),this.deleteSubVertex(t.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ROTATEO:this.rotDeg=t.afterRotDeg,this.rotDegSaved=0,this.rotateCoords(),this.rotDegSaved=0,this.rotDeg=0;var e=this.UO.obj.Limit;e.SetTW(t.prevLimit),this.CZero.SetV(e.UR.y,(e.LL.x+e.UR.x)/2),this.C90.SetV((e.LL.y+e.UR.y)/2,e.UR.x),this.C180.SetV(e.LL.y,(e.LL.x+e.UR.x)/2),this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y,this.C180.x=1.2*(this.C180.x-this.UO.center.x)+this.UO.center.x,this.findStartRadius();break;case l.l.SCALEOX:this.XF471FialX=t.afterinitialX,this.savedCoords=t.afterCoords.slice(),this.savedCenter=g({},t.afterCenter),this.CZero=g({},t.afterCZero),this.scaleX(),this.setDistanceForScale(),this.findStartRadius();break;case l.l.SCALEOY:this.XF471FialY=t.afterinitialY,this.savedCoords=t.afterCoords.slice(),this.savedCenter=g({},t.afterCenter),this.C90=g({},t.afterC90),this.scaleY(),this.setDistanceForScale(),this.findStartRadius();break;case l.l.MOVEO:this.deltaX=+t.deltaX,this.deltaY=+t.deltaY;for(var i=this.UO.coords.length,r=0;r<i;r+=2)this.UO.coords[r]+=this.deltaX,this.UO.coords[r+1]+=this.deltaY,this.setCoord(r/2,this.UO.coords[r],this.UO.coords[r+1],this.UO.coordsZ[r/2]),this.setSubGeo(r/2),this.setSubVertex(r/2);this.expandWithoutWalker();break;case l.l.ADDFRD:this.addCoordForADDFRD(t.lastCoords,t.lastCoordsZ);var s=this.subVertCount;this.subCoords.splice(this.subCoords.length-4,2),this.subCoordsZ.splice(this.subCoordsZ.length-2,1),s>0&&this.subVertCount--;for(r=0;r<t.lastCount/2;r++)this.createSubVertex(this.subVertCount);this.subCoords.push(NaN),this.subCoords.push(NaN),this.subCoordsZ.push(0),s>0&&this.subVertCount++,this.expandWithoutWalker(),this.findStartRadius()}this.setDragPoints(),this.UO.buildEditIcons(this)}},{key:"deleteCoordForADDFRD",value:function(t,e,i){this.UO.coords.splice(e,i),this.UO.coordsZ.splice(e/2,i/2);var r=this.editLineTypedArr.slice(0,e/2*3),s=this.editLineTypedArr.slice(e/2*3+i/2*3);this.editLineTypedArr.set(r,0),this.editLineTypedArr.set(s,r.length);var o=this.UO.obj.gl;o.bindBuffer(o.ARRAY_BUFFER,this.editBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.editLineTypedArr)}},{key:"deleteSubVertexForADDFRD",value:function(t,e,i){this.subCoords.splice(e,i),this.subCoordsZ.splice(e/2,i/2);var r=this.editLineTypedArrSubVert.slice(0,e/2*3),s=this.editLineTypedArrSubVert.slice(e/2*3+i/2*3);this.editLineTypedArrSubVert.set(r,0),this.editLineTypedArrSubVert.set(s,r.length),this.subVertCount&&(this.subVertCount-=i/2)}},{key:"addCoordForADDFRD",value:function(t,e){var i,r=e.length,s=this.UO,o=s.coords,n=s.coordsZ;o.pop(),o.pop(),n.pop();var a=n.length;i=this.buildInputPointForADDFRD(0,0,0,!1,t,e);for(var h=0;h<r;h++)o.push(t[2*h]),o.push(t[2*h+1]),n.push(e[h]),this.setDistanceForAdd(),this.setAngleForAddFreeDrawOrUndoRedo();o.push(o[o.length-2]),o.push(o[o.length-2]),n.push(n[n.length-1]),this.editLineTypedArr.set(i,3*a);var l=this.UO.obj.gl;l.bindBuffer(l.ARRAY_BUFFER,this.editBuffer),l.bufferSubData(l.ARRAY_BUFFER,4*a*3,i)}},{key:"buildInputPointForADDFRD",value:function(t,e,i,r,s,o){for(var n=new Float32Array(3*o.length),a=o.length,h=this.UO.obj,d=h.TempGeo3C,c=h.startP,f=h.FGlobe,p=0;p<a;p++)this.tempp2d.SetV(s[2*p],s[2*p+1]),this.tempp2d.ConvertDegreeToRadyan(),this.UO.style.zMode===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+o[p]*l.z.GLOBE_RADIUS_K,d):u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+f.XyecYr(this.tempp2d,!1)+o[p]*l.z.GLOBE_RADIUS_K,d),d.SetVecSub(c,d),n[3*p]=d.x,n[3*p+1]=d.y,n[3*p+2]=d.z;return n}},{key:"findMainZ",value:function(t,e){var i=this.UO.coords,r=this.UO.obj.FGlobe;return t?(this.tempp2d.SetV(i[2*e],i[2*e+1]),this.tempp2d.ConvertDegreeToRadyan(),r.XyecYr(this.tempp2d,!0)):(this.tempp2d.SetV(i[i.length-4],i[i.length-3]),this.tempp2d.ConvertDegreeToRadyan(),r.XyecYr(this.tempp2d,!0))}}]),t}();function T(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?T(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):T(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var L=new Float32Array([.5,.5,.5,.8]),S=function(){function t(e,i){n()(this,t),this.walker=!1,this.UO=e,this.editSubVertBuffer=i.createBuffer(),this.editBufferForMainPoint=i.createBuffer(),this.editPolygonTypedArrSubVert=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.subVertCount=0,this.editPolygonTypedArr=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.gl=i,this.editTopPolygonTypedArr=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.editSideVertBuffer=i.createBuffer(),this.editSidePolygonTypedArr=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.editPolygonTypedMainPointArr=new Float32Array(3*l.z.EDIT_LINE_TYPED_ARRAY),this.buildPointForSide=new Float32Array(6),this.CZero=new u.u(0,0),this.C90=new u.u(0,0),this.C180=new u.u(0,0),this.editGeo3C=new u.w(0,0,0),this.editGeo3D=new u.w(0,0,0),this.editGeo3CForCZero=new u.w(0,0,0),this.editGeo3DForCZero=new u.w(0,0,0),this.editGeo3CForC90=new u.w(0,0,0),this.editGeo3DForC90=new u.w(0,0,0),this.editGeo3CForC180=new u.w(0,0,0),this.editGeo3DForC180=new u.w(0,0,0),this.editCanvasPoint=new u.v(0,0),this.editTexture=null,this.willDrawIcon=0,this.subCoords=[],this.subCoordsZ=[],this.centerCoordZ=0,this.FHighlight=!0,this.mainColorHigh=new Float32Array([0,0,1,1]),this.mainHeightColorHigh=new Float32Array([1,1,1,1]),this.mainColorNormal=new Float32Array([1,1,0,1]),this.subColorHigh=new Float32Array([1,1,1,1]),this.subColorNormal=new Float32Array([1,0,0,1]),this.lastSnapIndex=-1,this.tempp2dLL=new u.v(0,0),this.tempp2d=new u.u(0,0),this.tempp2d2=new u.u(0,0),this.lastSaveX=null,this.lastSaveY=null,this.lastMouseLong=0,this.lastMouseLat=0,this.radius1=0,this.radius2=0,this.rotDeg=0,this.x=0,this.y=0,this.walkerx=0,this.walkery=0,this.editBuffer=i.createBuffer(),this.walkerGeo=new u.F,this.prevLimit=new u.E(0,0,0,0),this.prevCoords=[],this.prevX=void 0,this.prevY=void 0,this.snapMainVertex=!1,this.topSnapped=!1,this.topDown=!1,this.tempp2dForText=new u.u(0,0),this.lastfreeDrawIndex=0,this.lastfreeDrawCount=0,this.freedRawPassFirst=!0,this.upClick=0,this.zPointSnapped=!1,this.tempp2d2=new u.u(0,0),this.buildEditIcon=y.BuildEditIcon}return h()(t,[{key:"setCoord",value:function(t,e,i,r){var s=this.gl;this.UO.coords[2*t]=e,this.UO.coords[2*t+1]=i,this.UO.style.zMode===l.u.Z_GROUND_FOLLOW&&(r=this.UO.coordsZ[0]),this.UO.coordsZ[t]=r;var o=this.buildInputPoint(e,i,r,!1,!1);this.editPolygonTypedArr.set(o,3*t);var n=this.buildInputPointForMainPoint(e,i,0,!1);if(this.editPolygonTypedMainPointArr.set(n,3*t),s.bindBuffer(s.ARRAY_BUFFER,this.editBuffer),s.bufferSubData(s.ARRAY_BUFFER,4*t*3,o),s.bindBuffer(s.ARRAY_BUFFER,this.editBufferForMainPoint),s.bufferSubData(s.ARRAY_BUFFER,4*t*3,n),this.UO.polygonTopVertBuff){o=this.setHeightInputPoint(e,i,r,!1,this.UO.heights[t]);this.editTopPolygonTypedArr.set(o,3*t),s.bindBuffer(s.ARRAY_BUFFER,this.UO.polygonTopVertBuff),s.bufferSubData(s.ARRAY_BUFFER,4*t*3,o),this.buildPointForSide[0]=this.editPolygonTypedArr[3*t],this.buildPointForSide[1]=this.editPolygonTypedArr[3*t+1],this.buildPointForSide[2]=this.editPolygonTypedArr[3*t+2],this.buildPointForSide[3]=this.editTopPolygonTypedArr[3*t],this.buildPointForSide[4]=this.editTopPolygonTypedArr[3*t+1],this.buildPointForSide[5]=this.editTopPolygonTypedArr[3*t+2],this.editSidePolygonTypedArr.set(this.buildPointForSide,6*t),s.bindBuffer(s.ARRAY_BUFFER,this.editSideVertBuffer),s.bufferSubData(s.ARRAY_BUFFER,4*t*6,this.buildPointForSide)}}},{key:"setScaleCoord",value:function(t){this.setCoord(t,this.UO.coords[2*t],this.UO.coords[2*t+1],0),this.setSubGeo(t),this.setSubVertex(t)}},{key:"createSubVertex",value:function(t){this.addSubCoord(t),this.addSubVertBuffer(3*t,this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0),this.subVertCount++}},{key:"reBuildSubVertex",value:function(t){this.updateSubVertex(t)}},{key:"subCoordTo3D",value:function(){return this.buildInputPoint(this.subCoords[this.subCoords.length-1-2],this.subCoords[this.subCoords.length-1],0,!1)}},{key:"setSubVertex",value:function(t){if(t===this.UO.coordsZ.length-2){var e=this.UO.coordsZ.length-3;this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0)}else if(0===t){e=t;this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0)}else{e=t-1;this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0),this.addSubVertBuffer(3*(e+1),this.subCoords[2*e+2],this.subCoords[2*e+3],this.subCoordsZ[e+1],!0)}}},{key:"setSubGeo",value:function(t){var e=this.UO,i=e.coords,r=e.coordsZ,s=this.UO.obj.FGlobe.FCamera.FArcBall;if(t===this.UO.coordsZ.length-2){var o=r.length-3;s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o)}else if(0===t){o=t;s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o)}else{o=t-1;s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o),o++,s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*o]),u.b.DegreeToRadyan(i[2*o+1]),u.b.DegreeToRadyan(i[2*(o+1)]),u.b.DegreeToRadyan(i[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o)}}},{key:"updateSubVertex",value:function(t){var e=this.UO,i=e.coords,r=e.coordsZ,s=this.UO.obj.FGlobe.FCamera.FArcBall;-1!==t&&t!==r.length-2&&(s.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(i[2*t]),u.b.DegreeToRadyan(i[2*t+1]),u.b.DegreeToRadyan(i[2*(t+1)]),u.b.DegreeToRadyan(i[2*(t+1)+1])),this.subCoords[2*t]=this.tempp2d.x,this.subCoords[2*t+1]=this.tempp2d.y,this.subCoordsZ[t]=this.findSubZ(t),this.addSubVertBuffer(3*t,this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0))}},{key:"updateSubVertexRebuild",value:function(t){var e=this.UO.coords;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(e[2*t]),u.b.DegreeToRadyan(e[2*t+1]),u.b.DegreeToRadyan(e[2*(t+1)]),u.b.DegreeToRadyan(e[2*(t+1)+1])),this.subCoords[2*t]=this.tempp2d.x,this.subCoords[2*t+1]=this.tempp2d.y,this.subCoordsZ[t]=this.findSubZ(t),this.addSubVertBuffer(3*t,this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0)}},{key:"updateLastSubVertexForNoWalker",value:function(){var t=this.UO.coords;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(t[0]),u.b.DegreeToRadyan(t[1]),u.b.DegreeToRadyan(t[t.length-4]),u.b.DegreeToRadyan(t[t.length-3])),this.subCoords[this.subCoords.length-4]=this.tempp2d.x,this.subCoords[this.subCoords.length-3]=this.tempp2d.y;var e=(this.subCoords.length-4)/2;this.subCoordsZ[e]=this.findSubZForNoWalker(),this.addSubVertBuffer(3*e,this.subCoords[2*e],this.subCoords[2*e+1],this.subCoordsZ[e],!0)}},{key:"updateAllSubVertexRebuild",value:function(){var t=this.UO,e=t.coords,i=t.coordsZ,r=this.UO.obj.FGlobe.FCamera.FArcBall;this.subVertCount=i.length-1;for(var s=this.UO.coords.length,o=0;o<s;o++)r.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(e[2*o]),u.b.DegreeToRadyan(e[2*o+1]),u.b.DegreeToRadyan(e[2*(o+1)]),u.b.DegreeToRadyan(e[2*(o+1)+1])),this.subCoords[2*o]=this.tempp2d.x,this.subCoords[2*o+1]=this.tempp2d.y,this.subCoordsZ[o]=this.findSubZ(o),this.addSubVertBuffer(3*o,this.subCoords[2*o],this.subCoords[2*o+1],this.subCoordsZ[o],!0)}},{key:"addCoord",value:function(t,e,i){var r=this.UO,s=r.coords,o=r.coordsZ;return!!this.walker&&(3===o.length&&(this.expandLimit(null,null,!0),this.findStartRadius(),this.setDragPoints()),s.push(t),s.push(e),o.push(i),this.UO.obj.startP||(this.UO.obj.startP=new u.w(0,0,0),this.UO.buildStartPoint()),this.addToEditBuffer(t,e,i),o.length-3>-1&&this.createSubVertex(this.subVertCount),this.expandLimit(t,e,!1),!0)}},{key:"findSubZForNoWalker",value:function(){var t=this.UO.obj.userObj.FGlobe,e=this.UO.coords;this.tempp2d.SetV(e[0],e[1]),this.tempp2d.ConvertDegreeToRadyan();var i=this.UO.style.zMode!==l.u.Z_MSL,r=0;i&&(r=t.XyecYr(this.tempp2d,!0)),this.tempp2d.SetV(e[e.length-4],e[e.length-3]),this.tempp2d.ConvertDegreeToRadyan();var s=0;return i&&(s=t.XyecYr(this.tempp2d,!0)),(r+s)/2}},{key:"findSubZ",value:function(t){var e=this.UO.obj.userObj.FGlobe,i=this.UO.coords;this.tempp2d.SetV(i[2*t],i[2*t+1]),this.tempp2d.ConvertDegreeToRadyan();var r=this.UO.style.zMode!==l.u.Z_MSL,s=0;r&&(s=e.XyecYr(this.tempp2d,!0)),this.tempp2d.SetV(i[2*t+2],i[2*t+3]),this.tempp2d.ConvertDegreeToRadyan();var o=0;return r&&(o=e.XyecYr(this.tempp2d,!0)),(s+o)/2}},{key:"addSubCoord",value:function(t){var e=this.UO.coords;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(e[2*t]),u.b.DegreeToRadyan(e[2*t+1]),u.b.DegreeToRadyan(e[2*(t+1)]),u.b.DegreeToRadyan(e[2*(t+1)+1])),this.subCoords[2*t]=this.tempp2d.x,this.subCoords[2*t+1]=this.tempp2d.y,this.subCoordsZ[t]=this.findSubZ(t)}},{key:"addSubCoordForNoWalker",value:function(){var t=this.UO.coords;this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(t[0]),u.b.DegreeToRadyan(t[1]),u.b.DegreeToRadyan(t[t.length-4]),u.b.DegreeToRadyan(t[t.length-3])),this.subCoords[this.subCoords.length]=this.tempp2d.x,this.subCoords[this.subCoords.length]=this.tempp2d.y;var e=(t.length-4)/2;this.subCoordsZ[e]=this.findSubZ(e)}},{key:"addToEditBuffer",value:function(t,e,i){var r=this.gl,s=this.buildInputPoint(t,e,i,!1,!1);this.editPolygonTypedArr.set(s,3*(this.UO.coordsZ.length-1));var o=this.buildInputPointForMainPoint(t,e,0,!1);this.editPolygonTypedMainPointArr.set(o,3*(this.UO.coordsZ.length-1)),r.bindBuffer(r.ARRAY_BUFFER,this.editBuffer),r.bufferSubData(r.ARRAY_BUFFER,4*(this.UO.coordsZ.length-1)*3,s),r.bindBuffer(r.ARRAY_BUFFER,this.editBufferForMainPoint),r.bufferSubData(r.ARRAY_BUFFER,4*(this.UO.coordsZ.length-1)*3,o)}},{key:"addSubVertBuffer",value:function(t,e,i,r,s){var o=this.buildInputPoint(e,i,r,s),n=this.gl;this.editPolygonTypedArrSubVert.set(o,t),n.bindBuffer(n.ARRAY_BUFFER,this.editSubVertBuffer),n.bufferSubData(n.ARRAY_BUFFER,4*t,o)}},{key:"getLastCoord",value:function(){return this.UO.coords.length?this.getCoord(this.UO.coordsZ.length-1):null}},{key:"getCoord",value:function(t){return new Float32Array([this.UO.coords[2*t],this.UO.coords[2*t+1],this.UO.coordsZ[t]])}},{key:"insertHeightToeditBuffer",value:function(t,e,i,r){if(this.UO.polygonTopVertBuff){var s=this.gl,o=this.editTopPolygonTypedArr.slice(0,3*t),n=this.editTopPolygonTypedArr.slice(3*t,this.editTopPolygonTypedArr.length-3),a=this.setHeightInputPoint(e,i,r,!1,this.UO.heights[t]);this.editTopPolygonTypedArr.set(o,0),this.editTopPolygonTypedArr.set(a,o.length),this.editTopPolygonTypedArr.set(n,o.length+3),s.bindBuffer(s.ARRAY_BUFFER,this.UO.polygonTopVertBuff),s.bufferSubData(s.ARRAY_BUFFER,0,this.editTopPolygonTypedArr);o=this.editSidePolygonTypedArr.slice(0,6*t),n=this.editSidePolygonTypedArr.slice(6*t,this.editSidePolygonTypedArr.length-6);this.buildPointForSide[0]=this.editPolygonTypedArr[3*t],this.buildPointForSide[1]=this.editPolygonTypedArr[3*t+1],this.buildPointForSide[2]=this.editPolygonTypedArr[3*t+2],this.buildPointForSide[3]=this.editTopPolygonTypedArr[3*t],this.buildPointForSide[4]=this.editTopPolygonTypedArr[3*t+1],this.buildPointForSide[5]=this.editTopPolygonTypedArr[3*t+2],this.editSidePolygonTypedArr.set(o,0),this.editSidePolygonTypedArr.set(this.buildPointForSide,o.length),this.editSidePolygonTypedArr.set(n,o.length+6),s.bindBuffer(s.ARRAY_BUFFER,this.editSideVertBuffer),s.bufferSubData(s.ARRAY_BUFFER,0,this.editSidePolygonTypedArr)}}},{key:"insertToEditBuffer",value:function(t,e,i,r){var s=this.gl;this.UO.coords.splice(2*t,0,e,i),this.UO.coordsZ.splice(t,0,r);var o=this.editPolygonTypedArr.slice(0,3*t),n=this.editPolygonTypedArr.slice(3*t,this.editPolygonTypedArr.length-3),a=this.buildInputPoint(e,i,r,!1,!1);this.editPolygonTypedArr.set(o,0),this.editPolygonTypedArr.set(a,o.length),this.editPolygonTypedArr.set(n,o.length+3);var h=this.editPolygonTypedMainPointArr.slice(0,3*t),l=this.editPolygonTypedMainPointArr.slice(3*t,this.editPolygonTypedMainPointArr.length-3),u=this.buildInputPointForMainPoint(e,i,r,!1);this.editPolygonTypedMainPointArr.set(h,0),this.editPolygonTypedMainPointArr.set(u,h.length),this.editPolygonTypedMainPointArr.set(l,h.length+3),s.bindBuffer(s.ARRAY_BUFFER,this.editBuffer),s.bufferSubData(s.ARRAY_BUFFER,0,this.editPolygonTypedArr),s.bindBuffer(s.ARRAY_BUFFER,this.editBufferForMainPoint),s.bufferSubData(s.ARRAY_BUFFER,0,this.editPolygonTypedMainPointArr)}},{key:"insertCoord",value:function(t,e,i,r,s){this.insertToEditBuffer(t,e,i,r),this.insertHeightToeditBuffer(t,e,i,r),s||(this.setSubGeo(t-1),this.setSubVertex(t-1)),t===this.subCoordsZ.length?this.createSubVertex(t):this.createMidSubVertex(t),this.lastSnapIndex++,"visible"===this.UO.obj.FGlobe.CSWidgets.editVertexWidget.style.visibility&&(this.UO.obj.FGlobe.CSWidgets.editVertexWidget.style.visibility="hidden",this.UO.obj.FGlobe.CSWidgets.spanAppendYukseklik.style.visibility="hidden",this.UO.obj.FGlobe.CSWidgets.pYukseklik.style.visibility="hidden")}},{key:"createMidSubVertex",value:function(t){var e=this.gl,i=this.UO.obj.FGlobe.FCamera.FArcBall,r=this.UO.coords;i.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(r[2*t]),u.b.DegreeToRadyan(r[2*t+1]),u.b.DegreeToRadyan(r[2*(t+1)]),u.b.DegreeToRadyan(r[2*(t+1)+1])),this.subCoords.splice(2*t,0,this.tempp2d.x,this.tempp2d.y),this.subCoordsZ.splice(t,0,this.findSubZ(t));var s=this.editPolygonTypedArrSubVert.slice(0,3*t),o=this.editPolygonTypedArrSubVert.slice(3*t,this.editPolygonTypedArrSubVert.length-3),n=this.buildInputPoint(this.subCoords[2*t],this.subCoords[2*t+1],this.subCoordsZ[t],!0);this.editPolygonTypedArrSubVert.set(s,0),this.editPolygonTypedArrSubVert.set(n,s.length),this.editPolygonTypedArrSubVert.set(o,s.length+3),e.bindBuffer(e.ARRAY_BUFFER,this.editSubVertBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.editPolygonTypedArrSubVert),this.subVertCount++}},{key:"deleteCoord",value:function(t){var e=this.gl;this.UO.coords.splice(2*t,2),this.UO.coordsZ.splice(t,1);var i=this.editPolygonTypedArr.slice(0,3*t),r=this.editPolygonTypedArr.slice(3*t+3);this.editPolygonTypedArr.set(i,0),this.editPolygonTypedArr.set(r,i.length);var s=this.editPolygonTypedMainPointArr.slice(0,3*t),o=this.editPolygonTypedMainPointArr.slice(3*t+3);if(this.editPolygonTypedMainPointArr.set(s,0),this.editPolygonTypedMainPointArr.set(o,s.length),e.bindBuffer(e.ARRAY_BUFFER,this.editBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.editPolygonTypedArr),e.bindBuffer(e.ARRAY_BUFFER,this.editBufferForMainPoint),e.bufferSubData(e.ARRAY_BUFFER,0,this.editPolygonTypedMainPointArr),this.UO.polygonTopVertBuff){i=this.editTopPolygonTypedArr.slice(0,3*t),r=this.editTopPolygonTypedArr.slice(3*t+3);this.editTopPolygonTypedArr.set(i,0),this.editTopPolygonTypedArr.set(r,i.length),e.bindBuffer(e.ARRAY_BUFFER,this.UO.polygonTopVertBuff),e.bufferSubData(e.ARRAY_BUFFER,0,this.editTopPolygonTypedArr);i=this.editSidePolygonTypedArr.slice(0,6*t),r=this.editSidePolygonTypedArr.slice(6*t+6);this.editSidePolygonTypedArr.set(i,0),this.editSidePolygonTypedArr.set(r,i.length),e.bindBuffer(e.ARRAY_BUFFER,this.editSideVertBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.editSidePolygonTypedArr)}this.deleteHeight(t),this.deleteDistance(t,null,null),this.setAreaForDelete(),"visible"===this.UO.obj.FGlobe.CSWidgets.editVertexWidget.style.visibility&&(this.UO.obj.FGlobe.CSWidgets.editVertexWidget.style.visibility="hidden",this.UO.obj.FGlobe.CSWidgets.spanAppendYukseklik.style.visibility="hidden",this.UO.obj.FGlobe.CSWidgets.pYukseklik.style.visibility="hidden")}},{key:"deleteHeight",value:function(t,e,i){this.UO.solid3D&&!this.UO.fixedHeights&&(void 0!==i?this.UO.heights.splice(e/2,i/2):this.UO.heights.splice(t,1))}},{key:"deleteDistance",value:function(t,e,i){null!==e&&null!==i?this.UO.obj.distanceOfTwoPoint.splice(e/2,i/2):(this.UO.obj.distanceOfTwoPoint.splice(t-1,1),t&&this.UO.findDistances())}},{key:"setAreaForDelete",value:function(){if((this.UO.style.showArea||this.UO.style.showVolume)&&this.UO.coordsZ.length>3){var t=this.UO.coords.slice(0,this.UO.coords.length-2);this.UO.obj.totalArea=this.UO.obj.userObj.FGlobe.Math.CalcPolyAreaM2(t,!1),this.centerCoordZ=this.UO.findCenterZ()}}},{key:"deleteSubVertex",value:function(t){var e=this.gl;if(this.UO.coordsZ.length>1&&t===this.UO.coordsZ.length-2){this.subCoords.splice(2*t,2),this.subCoordsZ.splice(t,1);var i=this.editPolygonTypedArrSubVert.slice(0,3*t),r=this.editPolygonTypedArrSubVert.slice(3*t+3);this.editPolygonTypedArrSubVert.set(i,0),this.editPolygonTypedArrSubVert.set(r,i.length),e.bindBuffer(e.ARRAY_BUFFER,this.editSubVertBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.editPolygonTypedArrSubVert),this.updateSubVertex(t)}else if(-1===t){t=0,this.subCoords.splice(2*t,2),this.subCoordsZ.splice(t,1);i=this.editPolygonTypedArrSubVert.slice(0,3*t),r=this.editPolygonTypedArrSubVert.slice(3*t+3);this.editPolygonTypedArrSubVert.set(r,i.length),e.bindBuffer(e.ARRAY_BUFFER,this.editSubVertBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.editPolygonTypedArrSubVert),this.updateSubVertex(t)}else{this.subCoords.splice(2*t,2),this.subCoordsZ.splice(t,1);i=this.editPolygonTypedArrSubVert.slice(0,3*t),r=this.editPolygonTypedArrSubVert.slice(3*t+3);this.editPolygonTypedArrSubVert.set(i,0),this.editPolygonTypedArrSubVert.set(r,i.length),e.bindBuffer(e.ARRAY_BUFFER,this.editSubVertBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.editPolygonTypedArrSubVert),this.updateSubVertex(t)}this.subVertCount&&this.subVertCount--}},{key:"numberOfVertex",value:function(){return this.UO.coordsZ.length-1}},{key:"setHeightInputPoint",value:function(t,e,i,r,s){return this.UO.fixedHeights?this.buildInputPoint(t,e,i,r,this.UO.heights[0]):this.buildInputPoint(t,e,i,r,s)}},{key:"buildInputPoint",value:function(t,e,i,r,s){var o=this.UO.obj,n=o.FGlobe,a=o.TempGeo3C,h=this.UO.style.zMode;return s?(this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),h===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+(i+s)*l.z.GLOBE_RADIUS_K,a):h!==l.u.Z_GROUND_PERVERTEX&&h!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+n.XyecYr(this.tempp2d,!1)+(i+s)*l.z.GLOBE_RADIUS_K,a),a.SetVecSub(this.UO.obj.startP,a),this.UO.tempcoord[0]=a.x,this.UO.tempcoord[1]=a.y,this.UO.tempcoord[2]=a.z,this.UO.tempcoord):(this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),h===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,a):h!==l.u.Z_GROUND_PERVERTEX&&h!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+n.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,a),a.SetVecSub(this.UO.obj.startP,a),this.UO.tempcoord[0]=a.x,this.UO.tempcoord[1]=a.y,this.UO.tempcoord[2]=a.z,this.UO.tempcoord)}},{key:"buildInputPointForMainPoint",value:function(t,e,i,r){var s=this.UO.obj,o=s.FGlobe,n=s.TempGeo3C,a=this.UO.style.zMode;return this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),a===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+i*l.z.GLOBE_RADIUS_K,n):a!==l.u.Z_GROUND_PERVERTEX&&a!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+o.XyecYr(this.tempp2d,!1)+i*l.z.GLOBE_RADIUS_K,n),n.SetVecSub(this.UO.obj.startP,n),this.UO.tempcoord2[0]=n.x,this.UO.tempcoord2[1]=n.y,this.UO.tempcoord2[2]=n.z,this.UO.tempcoord2}},{key:"groundSnap",value:function(t,e,i){var r=this.UO.obj.FGlobe,s=this.UO.style.zMode,o=this.UO,n=o.coords,a=o.coordsZ;for(i=a.length-1;i--;)if(this.tempp2d.SetV(n[2*i],n[2*i+1]),r.XG0gjf(t,e,this.tempp2d,a[i],s===l.u.Z_MSL,this.tempp2dLL))return this.lastSnapIndex=i,this.showZ=!0,!0;return!1}},{key:"topSnap",value:function(t,e,i){var r=this.UO.obj.FGlobe,s=this.UO.style.zMode,o=r.FLastEditingCallback.can_change,n=this.UO,a=n.coords,h=n.coordsZ,u=n.heights,d=h.length-1;if(o.height)if(this.UO.fixedHeights){for(i=d;i--;)if(this.tempp2d.SetV(a[2*i],a[2*i+1]),r.XG0gjf(t,e,this.tempp2d,h[i]+u[0],s===l.u.Z_MSL,this.tempp2dLL))return this.lastSnapIndex=i,this.topSnapped=!0,!0}else for(i=d;i--;)if(this.tempp2d.SetV(a[2*i],a[2*i+1]),r.XG0gjf(t,e,this.tempp2d,h[i]+u[i],s===l.u.Z_MSL,this.tempp2dLL))return this.lastSnapIndex=i,this.topSnapped=!0,!0;return!1}},{key:"subSnap",value:function(t,e,i){var r=this.UO.obj.FGlobe,s=this.UO.coordsZ;if(r.FLastEditingCallback.show_walker){if(s.length-2>0)for(i=s.length-2;i--;)if(this.tempp2d.SetV(this.subCoords[2*i],this.subCoords[2*i+1]),r.XG0gjf(t,e,this.tempp2d,this.subCoordsZ[i],!0,this.tempp2dLL))return this.lastSnapIndex=i,!0}else if(s.length-2>0){for(i=s.length-1;i--;)if(this.tempp2d.SetV(this.subCoords[2*i],this.subCoords[2*i+1]),r.XG0gjf(t,e,this.tempp2d,this.subCoordsZ[i],!0,this.tempp2dLL))return this.lastSnapIndex=i,!0}return!1}},{key:"groundDownSnap",value:function(t,e,i){var r=this.UO.obj.FGlobe,s=this.UO.style.zMode;for(i=this.UO.coordsZ.length-1;i--;)if(this.tempp2d.SetV(this.UO.coords[2*i],this.UO.coords[2*i+1]),r.XG0gjf(t,e,this.tempp2d,0,s===l.u.Z_MSL,this.tempp2dLL))return this.snapMainVertex=!0,this.prevX=this.walkerGeo.MouseLong,this.prevY=this.walkerGeo.MouseLat,this.lastSnapIndex=i,!0;return!1}},{key:"topDownSnap",value:function(t,e,i,r){var s=this.UO.obj.FGlobe,o=s.FLastEditingCallback.can_change,n=this.UO.style.zMode,a=this.UO,h=a.coords,u=a.coordsZ,d=a.heights,c=u.length-1;if(o.height)if(this.UO.fixedHeights){for(i=c;i--;)if(this.tempp2d.SetV(h[2*i],h[2*i+1]),s.XG0gjf(t,e,this.tempp2d,u[i]+d[0],n===l.u.Z_MSL,this.tempp2dLL,r))return this.topDown=!0,this.prevHeight=d[0],this.lastSnapIndex=i,!0}else for(i=c;i--;)if(this.tempp2d.SetV(h[2*i],h[2*i+1]),s.XG0gjf(t,e,this.tempp2d,u[i]+d[i],n===l.u.Z_MSL,this.tempp2dLL))return this.topDown=!0,this.UO.fixedHeights?this.prevHeight=d[0]:this.prevHeight=d[i],this.lastSnapIndex=i,!0;return!1}},{key:"subDownSnap",value:function(t,e,i,r){var s=this.UO.obj.FGlobe;for(i=this.subCoordsZ.length;i--;)if(this.tempp2d.SetV(this.subCoords[2*i],this.subCoords[2*i+1]),s.XG0gjf(t,e,this.tempp2d,this.subCoordsZ[i],!0,this.tempp2dLL))return this.lastSnapIndex=i,this.UO.solid3D&&this.setNextHeight(l.k.INSERT_VERTEX,i+1),this.insertCoord(i+1,this.subCoords[2*i],this.subCoords[2*i+1],this.UO.coordsZ[i]),this.setDistanceForInsert(i),this.setAreaForInsert(),r&&(this.prevX=this.walkerGeo.MouseLong,this.prevY=this.walkerGeo.MouseLat,this.saveOperation(l.l.ADDSV),this.UO.onChanged(this.UO,l.k.INSERT_VERTEX,this.lastSnapIndex)),!0;return!1}},{key:"groundDownSnapZ",value:function(t,e,i){var r=this.UO.obj.FGlobe,s=this.UO.style.zMode,o=this.UO,n=o.coords,a=o.coordsZ;for(i=a.length-1;i--;)if(this.tempp2d.SetV(n[2*i],n[2*i+1]),r.XG0gjf(t,e,this.tempp2d,a[i],s===l.u.Z_MSL,this.tempp2dLL))return this.prevZ=a[i],this.zPointSnapped=!0,this.lastSnapIndex=i,!0;return!1}},{key:"mouseDown",value:function(t,e,i,r){var s=this.UO.obj.FGlobe,o=s.FLastEditingCallback,n=o.can_change,a=o.show_walker,h=this.UO.style.zMode;if(this.lastfreeDrawCount=0,this.lastSnapIndex=-1,this.snapMainVertex=!1,this.zPointSnapped=!1,this.topDown=!1,this.walkerGeo.isValid){var u;if(this.x=t,this.y=e,this.UO.solid3D)if(s.keyCode===l.f.CTRL){if(this.topDownSnap(t,e,u))return!0;if(n.Z&&this.groundDownSnapZ(t,e,u))return!0;if(n.vertex&&this.groundDownSnap(t,e,u))return this.topDown=!0,this.topSnapped=!0,!0;if(n.vertex&&this.subDownSnap(t,e,u,i))return!0}else{if(n.vertex&&this.groundDownSnap(t,e,u))return!0;if(n.Z&&this.groundDownSnapZ(t,e,u))return!0;if(n.vertex&&this.subDownSnap(t,e,u,i))return!0;if(this.topDownSnap(t,e,u))return!0}else{if(this.UO.obj.FGlobe.keyCode===l.f.CTRL&&n.Z&&this.groundDownSnapZ(t,e,u))return!0;if(n.vertex&&this.groundDownSnap(t,e,u))return!0;if(n.Z&&this.groundDownSnapZ(t,e,u))return!0;if(n.vertex&&this.subDownSnap(t,e,u,i))return!0}var d=h===l.u.Z_MSL;if(s.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.center.x,this.UO.center.y),s.XG0gjf(t,e,this.tempp2d,0,d,this.tempp2dLL)&&this.editTexture))return this.prevX=this.walkerGeo.MouseLong,this.prevY=this.walkerGeo.MouseLat,this.willDrawIcon=1,this.lastSnapIndex=-2,!0;if(s.FLastEditingCallback.can_scale){if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),s.XG0gjf(t,e,this.tempp2d,0,d,this.tempp2dLL)&&this.editMoveTexture)return this.willDrawIcon=2,this.lastSnapIndex=-3,this.prevCZero=v({},this.CZero),!0;if(this.tempp2d.SetV(this.C90.x,this.C90.y),s.XG0gjf(t,e,this.tempp2d,0,d,this.tempp2dLL)&&this.editMoveTexture)return this.willDrawIcon=3,this.lastSnapIndex=-4,this.prevC90=v({},this.C90),!0}if(s.FLastEditingCallback.can_rotate&&(this.tempp2d.SetV(this.C180.x,this.C180.y),s.XG0gjf(t,e,this.tempp2d,0,d,this.tempp2dLL)&&this.editRotateTexture))return this.willDrawIcon=4,this.lastSnapIndex=-5,this.prevLimit.SetTW(this.UO.obj.Limit),this.rotDegSaved=this.rotDeg,!0;n.vertex&&r&&a&&(this.freeDrawAddCoordOndDown(),this.lastfreeDrawIndex=this.UO.coords.length-2)}return-1!==this.lastSnapIndex}},{key:"mouseDblClick",value:function(t,e){var i=this.UO.obj.FGlobe,r=i.FLastEditingCallback.can_change;if(this.lastfreeDrawCount=0,this.lastSnapIndex=-1,this.walkerGeo.isValid){var s;if(this.x=t,this.y=e,this.UO.solid3D&&r.height&&(this.groundDownSnapZ(t,e,s)||this.topDownSnap(t,e,s,!0)))return this.UO.onHeightClick?this.UO.onHeightClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidget(this.lastSnapIndex),!0;if((r.vertex||r.Z)&&(this.groundDownSnapZ(t,e,s)||this.groundDownSnap(t,e,s,!0)))return this.UO.onVertexClick?this.UO.onVertexClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidget(this.lastSnapIndex),!0}return!1}},{key:"mouseMove",value:function(t,e,i){var r=this.UO,s=r.coords,o=r.coordsZ,n=r.heights,a=this.UO.style.zMode,h=this.UO.obj.userObj.FGlobe,u=h.FLastEditingCallback.show_walker;h.CSWidgets;if(i)if(-1===this.lastSnapIndex){if(!u)return;if(h.FLastEditingCallback.can_change.vertex)if(this.freedRawPassFirst)this.freedRawPassFirst=!1,this.lastSaveX=t,this.lastSaveY=e;else{var d=Math.hypot(t-this.lastSaveX,e-this.lastSaveY);if((d>=25||isNaN(d))&&s[s.length-4]!==this.walkerGeo.MouseLong&&s[s.length-3]!==this.walkerGeo.MouseLat)return this.lastSaveX=t,this.lastSaveY=e,this.UO.solid3D&&this.setNextHeight(l.k.ADD_VERTEX,o.length),a===l.u.Z_GROUND_FOLLOW?this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,o[0]):this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.setAreaForAdd(),this.lastfreeDrawCount++,this.lastfreeDrawCount++,2===o.length&&this.createSubVertex(3*this.subVertCount),!0}}else if(-2===this.lastSnapIndex)this.translateCoords(),this.expandLimit(null,null,!0),this.buildEditIcon(0,this.UO.center,this.editGeo3C);else if(-3===this.lastSnapIndex)this.saveScaleVals(-3),this.scaleX(),this.setDistanceForScale(),this.setAreaForScale(),this.findRadius(),this.setDragPoints(),this.buildEditIcon(0,this.CZero,this.editGeo3CForCZero);else if(-4===this.lastSnapIndex)this.saveScaleVals(-4),this.scaleY(),this.setDistanceForScale(),this.setAreaForScale(),this.findRadius(),this.setDragPoints(),this.buildEditIcon(0,this.C90,this.editGeo3CForC90);else if(-5===this.lastSnapIndex)this.findStartRadius(),this.findRotDeg(),this.rotateCoords(),this.rotDegSaved=this.rotDeg,this.setDragPoints(),this.buildEditIcon(0,this.C180,this.editGeo3CForC180);else if(this.topSnapped&&this.topDown)h.FLastEditingCallback.can_change.height&&(this.UO.fixedHeights?(this.tempp2d.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),n[0]=this.UO.obj.FGlobe.X2BlMn(this.tempp2d,this.tempp2d2,o[this.lastSnapIndex],o[this.lastSnapIndex]+n[0],a===l.u.Z_MSL,n[0],t,e),this.buildEditGeometry()):(this.tempp2d.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),n[this.lastSnapIndex]=h.X2BlMn(this.tempp2d,this.tempp2d2,o[this.lastSnapIndex],o[this.lastSnapIndex]+n[this.lastSnapIndex],a===l.u.Z_MSL,n[this.lastSnapIndex],t,e),this.buildVertexHeight(this.lastSnapIndex)));else if(this.zPointSnapped)this.tempp2d.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),o[this.lastSnapIndex]=h.XyhdDQ(this.tempp2d,this.tempp2d2,0,o[this.lastSnapIndex],a===l.u.Z_MSL,o[this.lastSnapIndex],t,e),a===l.u.Z_GROUND_FOLLOW?(this.setCoordZ(this.lastSnapIndex),this.UO.solid3D&&this.buildEditGeometry()):(this.setCoord(this.lastSnapIndex,s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1],o[this.lastSnapIndex]),this.UO.solid3D&&this.buildVertexHeight(this.lastSnapIndex)),this.setDistanceForMove(this.lastSnapIndex),this.setAreaForMove();else{if(!u)return;this.setCoord(this.lastSnapIndex,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,o[this.lastSnapIndex]),this.subCoordsZ.length&&2!==o.length&&(this.setSubGeo(this.lastSnapIndex),this.setSubVertex(this.lastSnapIndex)),this.setDistanceForMove(this.lastSnapIndex),this.setAreaForMove(),this.expandLimit(null,null,!0),this.findStartRadius(),this.setDragPoints(),this.UO.buildEditIcons(this)}else if(-1!==this.lastSnapIndex)if(-2===this.lastSnapIndex)this.translateCoords(),this.expandLimit(null,null,!0),this.buildEditIcon(0,this.UO.center,this.editGeo3C);else if(-3===this.lastSnapIndex)this.saveScaleVals(-3),this.scaleX(),this.setDistanceForScale(),this.setAreaForScale(),this.findRadius(),this.setDragPoints(),this.buildEditIcon(0,this.CZero,this.editGeo3CForCZero);else if(-4===this.lastSnapIndex)this.saveScaleVals(-4),this.scaleY(),this.setDistanceForScale(),this.setAreaForScale(),this.findRadius(),this.setDragPoints(),this.buildEditIcon(0,this.C90,this.editGeo3CForC90);else if(-5===this.lastSnapIndex)this.findStartRadius(),this.findRotDeg(),this.rotateCoords(),this.rotDegSaved=this.rotDeg,this.setDragPoints(),this.buildEditIcon(0,this.C180,this.editGeo3CForC180);else if(this.topSnapped&&this.topDown)this.UO.obj.userObj.FGlobe.FLastEditingCallback.can_change.height&&(this.UO.fixedHeights?(this.tempp2d.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),n[0]=h.X2BlMn(this.tempp2d,this.tempp2d2,o[this.lastSnapIndex],o[this.lastSnapIndex]+n[0],a===l.u.Z_MSL,n[0],t,e),this.buildEditGeometry()):(this.tempp2d.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),n[this.lastSnapIndex]=h.X2BlMn(this.tempp2d,this.tempp2d2,o[this.lastSnapIndex],o[this.lastSnapIndex]+n[this.lastSnapIndex],a===l.u.Z_MSL,n[this.lastSnapIndex],t,e),this.buildVertexHeight(this.lastSnapIndex)));else if(this.zPointSnapped)this.tempp2d.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),this.tempp2d2.SetV(s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1]),o[this.lastSnapIndex]=h.XyhdDQ(this.tempp2d,this.tempp2d2,0,o[this.lastSnapIndex],a===l.u.Z_MSL,o[this.lastSnapIndex],t,e),a===l.u.Z_GROUND_FOLLOW?(this.setCoordZ(this.lastSnapIndex),this.UO.solid3D&&this.buildEditGeometry()):(this.setCoord(this.lastSnapIndex,s[2*this.lastSnapIndex],s[2*this.lastSnapIndex+1],o[this.lastSnapIndex]),this.UO.solid3D&&this.buildVertexHeight(this.lastSnapIndex)),this.setDistanceForMove(this.lastSnapIndex),this.setAreaForMove();else{if(this.setCoord(this.lastSnapIndex,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,o[this.lastSnapIndex]),this.subCoordsZ.length&&2!==o.length&&(this.setSubGeo(this.lastSnapIndex),this.setSubVertex(this.lastSnapIndex)),u)this.setDistanceForMove(this.lastSnapIndex);else switch(this.UO.style.showDistances){case l.s.SHOW2D:for(var c=0;c<this.UO.coordsZ.length-2;c++)this.UO.obj.distanceOfTwoPoint[c]=this.UO.find2DDistance(this.UO.coords[2*(c+1)],this.UO.coords[2*(c+1)+1],this.UO.coords[2*c],this.UO.coords[2*c+1],c);this.UO.coordsZ.length-2!==this.lastSnapIndex&&0!==this.lastSnapIndex||(this.UO.obj.distanceOfTwoPoint[this.UO.obj.distanceOfTwoPoint.length-1]=this.UO.find2DDistance(this.UO.coords[2*(this.UO.coordsZ.length-2)],this.UO.coords[2*(this.UO.coordsZ.length-2)+1],this.UO.coords[0],this.UO.coords[1],this.UO.obj.distanceOfTwoPoint.length-1)),this.UO.obj.distanceOfTwoPoint[this.UO.obj.distanceOfTwoPoint.length-2]=0;break;case l.s.SHOW3D:for(c=0;c<this.UO.coordsZ.length-2;c++)this.UO.obj.distanceOfTwoPoint[c]=this.UO.find3DDistance(this.UO.coords[2*(c+1)],this.UO.coords[2*(c+1)+1],this.UO.coordsZ[c+1],this.UO.coords[2*c],this.UO.coords[2*c+1],this.UO.coordsZ[c]);this.UO.coordsZ.length-2!==this.lastSnapIndex&&0!==this.lastSnapIndex||(this.UO.obj.distanceOfTwoPoint[this.UO.obj.distanceOfTwoPoint.length-1]=this.UO.find3DDistance(this.UO.coords[2*(this.UO.coordsZ.length-2)],this.UO.coords[2*(this.UO.coordsZ.length-2)+1],this.UO.coordsZ[this.UO.coordsZ.length-2],this.UO.coords[0],this.UO.coords[1],this.UO.coordsZ[0])),this.UO.obj.distanceOfTwoPoint[this.UO.obj.distanceOfTwoPoint.length-2]=0}this.setAreaForMove(),this.expandLimit(null,null,!0),this.findStartRadius(),this.setDragPoints(),this.UO.buildEditIcons(this)}return this.checkWidget(),!1}},{key:"checkWidget",value:function(){var t=this.UO.obj.userObj.FGlobe.CSWidgets;"visible"===t.editVertexWidget.style.visibility&&(this.lastSnapIndex===t.vertexIndex?(t.textBoxVertexEnlem.value=this.UO.coords[2*this.lastSnapIndex],t.textBoxVertexBoylam.value=this.UO.coords[2*this.lastSnapIndex+1]):this.lastSnapIndex<-1&&(t.textBoxVertexEnlem.value=this.UO.coords[2*t.vertexIndex],t.textBoxVertexBoylam.value=this.UO.coords[2*t.vertexIndex+1]),!this.zPointSnapped||this.lastSnapIndex!==t.vertexIndex&&this.UO.style.zMode!==l.u.Z_GROUND_FOLLOW||(t.textBoxVertexKot.value=this.UO.coordsZ[this.lastSnapIndex]),this.UO.solid3D&&(this.UO.fixedHeights?t.textBoxVertexYukseklik.value=this.UO.heights[0]:this.lastSnapIndex===t.vertexIndex&&(t.textBoxVertexYukseklik.value=this.UO.heights[this.lastSnapIndex])))}},{key:"setCoordZ",value:function(t){for(var e=this.UO,i=e.coords,r=e.coordsZ,s=0,o=0;o<r.length;o++)s=2*o,r[o]=r[t],this.editPolygonTypedArr.set(this.buildInputPoint(i[s],i[s+1],r[o]),3*o);var n=this.UO.obj.gl;n.bindBuffer(n.ARRAY_BUFFER,this.editBuffer),n.bufferData(n.ARRAY_BUFFER,this.editPolygonTypedArr,n.DYNAMIC_DRAW)}},{key:"mouseUp",value:function(t,e){this.isFreeDrawing&&-1===this.lastSnapIndex&&(this.UO.obj.userObj.FGlobe.FLastEditingCallback.show_walker&&this.saveOperation(l.l.ADDFRD));if(-5===this.lastSnapIndex)this.afterRotDeg=this.rotDegSaved,this.saveOperation(l.l.ROTATEO),this.UO.onChanged(this.UO,l.k.ROTATE_OBJ,null);else if(-2===this.lastSnapIndex)this.saveOperation(l.l.MOVEO),this.UO.onChanged(this.UO,l.k.MOVE_OBJ,null);else if(-3===this.lastSnapIndex){this.afterScaleInitialX=Math.abs(this.CZero.x-this.UO.center.x),this.afterCoords=this.UO.coords.slice(),this.afterCenter=v({},this.UO.center);for(var i=this.afterCoords.length,r=0;r<i;r+=2)this.afterCoords[r]-=this.afterCenter.x;this.afterCZero=v({},this.CZero),this.saveOperation(l.l.SCALEOX),this.UO.onChanged(this.UO,l.k.SCALE_OBJX,null)}else if(-4===this.lastSnapIndex){this.afterScaleInitialY=Math.abs(this.C90.y-this.UO.center.y),this.afterCoords=this.UO.coords.slice(),this.afterCenter=v({},this.UO.center);for(i=this.afterCoords.length,r=0;r<i;r+=2)this.afterCoords[r+1]-=this.afterCenter.y;this.afterC90=v({},this.C90),this.saveOperation(l.l.SCALEOY),this.UO.onChanged(this.UO,l.k.SCALE_OBJY,null)}else this.zPointSnapped?(this.afterZ=this.UO.coordsZ[this.lastSnapIndex],this.zPointSnapped=!1,this.saveOperation(l.l.MOVEZ)):this.lastSnapIndex>=0&&(this.topSnapped&&this.UO.solid3D?(this.UO.fixedHeights?this.lastHeight=this.UO.heights[0]:this.lastHeight=this.UO.heights[this.lastSnapIndex],this.saveOperation(l.l.MOVEVH)):this.saveOperation(l.l.MOVEV),this.UO.onChanged(this.UO,l.k.MOVE_VERTEX,this.lastSnapIndex));this.rotDeg=0,this.expandWithoutWalker(),this.findStartRadius(),this.UO.buildEditIcons(this),this.willDrawIcon=0,this.lastSnapIndex=-1,this.topSnapped=!1,this.topDown=!1}},{key:"setHeightForADDFRD",value:function(t,e){if(this.UO.solid3D)for(var i=this.UO.obj.userObj.FGlobe.FLastEditingCallback,r=e;r--;)this.UO.coordsZ.length&&!this.UO.fixedHeights?this.UO.heights[t+r]=i.next_height:this.UO.fixedHeights&&(this.UO.heights[0]=i.next_height)}},{key:"setHeightToBuffer",value:function(t,e,i,r){if(this.UO.polygonTopVertBuff){var s=this.gl,o=this.setHeightInputPoint(t,e,i,!1,this.UO.heights[r]);this.editTopPolygonTypedArr.set(o,3*r),s.bindBuffer(s.ARRAY_BUFFER,this.UO.polygonTopVertBuff),s.bufferSubData(s.ARRAY_BUFFER,4*r*3,o),this.buildPointForSide[0]=this.editPolygonTypedArr[3*r],this.buildPointForSide[1]=this.editPolygonTypedArr[3*r+1],this.buildPointForSide[2]=this.editPolygonTypedArr[3*r+2],this.buildPointForSide[3]=this.editTopPolygonTypedArr[3*r],this.buildPointForSide[4]=this.editTopPolygonTypedArr[3*r+1],this.buildPointForSide[5]=this.editTopPolygonTypedArr[3*r+2],this.editSidePolygonTypedArr.set(this.buildPointForSide,6*r),s.bindBuffer(s.ARRAY_BUFFER,this.editSideVertBuffer),s.bufferSubData(s.ARRAY_BUFFER,4*r*6,this.buildPointForSide)}}},{key:"setNextHeight",value:function(t,e){switch(t){case l.k.ADD_VERTEX:this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height>=0?this.UO.coordsZ.length&&!this.UO.fixedHeights?this.UO.heights[e]=this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height:this.UO.fixedHeights&&(this.UO.heights[0]=this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height):this.UO.coordsZ.length?(this.UO.fixedHeights,Array.isArray(this.UO.heights)&&"number"==typeof this.UO.heights[0]?this.UO.heights[this.UO.coordsZ.length]=this.UO.heights[0]:this.UO.heights[this.UO.coordsZ.length]=0):this.UO.fixedHeights&&(this.UO.heights[0]=0);break;case l.k.INSERT_VERTEX:this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height?this.UO.heights.splice(e,0,this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height):this.UO.heights.splice(e,0,0)}}},{key:"setDistanceForAdd",value:function(){this.UO.findDistances()}},{key:"setAreaForAdd",value:function(){if((this.UO.style.showArea||this.UO.style.showVolume)&&this.UO.coordsZ.length>3){var t=this.UO.coords.slice(0,this.UO.coords.length-2);this.UO.obj.totalArea=this.UO.obj.userObj.FGlobe.Math.CalcPolyAreaM2(t,!1),this.centerCoordZ=this.UO.findCenterZ()}}},{key:"setDistanceForwalkers",value:function(t,e,i,r,s){var o=this.UO.obj.distanceOfTwoPoint;switch(this.UO.style.showDistances){case l.s.SHOW2D:o[s]=this.UO.find2DDistance(t,e,i,r);break;case l.s.SHOW3D:o[s]=this.UO.find3DDistance(t,e,0,i,r,0);break;case l.s.NOTSHOW:}}},{key:"setDistanceForWalkerRight",value:function(){var t=this.UO,e=t.coords,i=t.coordsZ;0===this.lastSnapIndex?this.setDistanceForwalkers(e[0],e[1],e[e.length-4],e[e.length-3],i.length-2):-1===this.lastSnapIndex&&(this.walkerGeo.isValid?this.setDistanceForwalkers(e[e.length-2],e[e.length-1],e[e.length-4],e[e.length-3],i.length-2):this.setDistanceForwalkers(e[e.length-4],e[e.length-3],e[0],e[1],i.length-2))}},{key:"setDistanceForWalkerLeft",value:function(){var t=this.UO,e=t.coords,i=t.coordsZ;this.lastSnapIndex===i.length-2?this.setDistanceForwalkers(e[e.length-4],e[e.length-3],e[0],e[1],i.length-1):0===this.lastSnapIndex&&-1!==this.lastSnapIndex||(this.lastSnapIndex>0||this.lastSnapIndex<-1?this.setDistanceForwalkers(e[e.length-4],e[e.length-3],e[0],e[1],i.length-1):this.walkerGeo.isValid?this.setDistanceForwalkers(e[e.length-2],e[e.length-1],e[0],e[1],i.length-1):this.setDistanceForwalkers(e[e.length-4],e[e.length-3],e[0],e[1],i.length-1))}},{key:"setDistanceForInsert",value:function(t){this.UO.findDistances()}},{key:"setAreaForInsert",value:function(){if((this.UO.style.showArea||this.UO.style.showVolume)&&this.UO.coordsZ.length>3){var t=this.UO.coords.slice(0,this.UO.coords.length-2);this.UO.obj.totalArea=this.UO.obj.userObj.FGlobe.Math.CalcPolyAreaM2(t,!1),this.centerCoordZ=this.UO.findCenterZ()}}},{key:"setDistanceForMove",value:function(t){0===t?this.UO.findDistances():(this.UO.coordsZ.length,this.UO.findDistances())}},{key:"setAreaForMove",value:function(){if((this.UO.style.showArea||this.UO.style.showVolume)&&this.UO.coordsZ.length>3){var t=this.UO.coords.slice(0,this.UO.coords.length-2);this.UO.obj.totalArea=this.UO.obj.userObj.FGlobe.Math.CalcPolyAreaM2(t,!1),this.centerCoordZ=this.UO.findCenterZ()}}},{key:"setDistanceForScale",value:function(){this.UO.findDistances()}},{key:"setAreaForScale",value:function(){if((this.UO.style.showArea||this.UO.style.showVolume)&&this.UO.coordsZ.length>3){var t=this.UO.coords.slice(0,this.UO.coords.length-2);this.UO.obj.totalArea=this.UO.obj.userObj.FGlobe.Math.CalcPolyAreaM2(t,!1),this.centerCoordZ=this.UO.findCenterZ()}}},{key:"mouseAddCoord",value:function(t,e){return!!(this.UO.obj.userObj.FGlobe.FLastEditingCallback.can_change.vertex&&l.z.CLICK_DISTANCE>=Math.hypot(t-this.x,e-this.y))&&(this.UO.solid3D&&this.setNextHeight(l.k.ADD_VERTEX,this.UO.coordsZ.length),this.UO.style.zMode===l.u.Z_GROUND_FOLLOW?this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,this.UO.coordsZ[0]):this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.setDistanceForAdd(),this.setAreaForAdd(),2===this.UO.coordsZ.length&&this.createSubVertex(this.subVertCount),this.UO.onChanged(this.UO,l.k.ADD_VERTEX,this.UO.coordsZ.length-1),this.saveOperation(l.l.ADDV),!0)}},{key:"mouseDeleteCoord",value:function(t,e){return this.snapMainVertex=!1,!!this.mouseDown(t,e,0)&&(this.lastSnapIndex>-1&&(this.snapMainVertex&&this.saveOperation(l.l.DELETEV),this.deleteCoord(this.lastSnapIndex),this.deleteSubVertex(this.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius(),this.setDragPoints(),this.UO.buildEditIcons(this),this.UO.onChanged(this.UO,l.k.DELETE_VERTEX,this.lastSnapIndex)),!0)}},{key:"getSnapIndex",value:function(t,e){this.lastSnapIndex=-1,this.deleteScaleVals(),this.showZ=!1;var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode;if(this.walkerGeo.isValid){if(this.UO.solid3D)if(this.topSnap(t,e,s))return this.lastSnapIndex;if(i.FLastEditingCallback.can_change.vertex){var s;if(this.subSnap(t,e,s))return this.lastSnapIndex;for(s=this.UO.coordsZ.length-1;s--;)if(this.tempp2d.SetV(this.UO.coords[2*s],this.UO.coords[2*s+1]),i.XG0gjf(t,e,this.tempp2d,0,r===l.u.Z_MSL,this.tempp2dLL))return this.lastSnapIndex=s,this.lastSnapIndex}if(i.FLastEditingCallback.can_change.Z)if(this.groundSnap(t,e,s))return this.lastSnapIndex;if(this.UO.coordsZ.length>2){if(i.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.center.x,this.UO.center.y),i.XG0gjf(t,e,this.tempp2d,0,r===l.u.Z_MSL,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=-2,this.lastSnapIndex;if(i.FLastEditingCallback.can_scale){if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),i.XG0gjf(t,e,this.tempp2d,0,r===l.u.Z_MSL,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-3,this.lastSnapIndex;if(this.tempp2d.SetV(this.C90.x,this.C90.y),i.XG0gjf(t,e,this.tempp2d,0,r===l.u.Z_MSL,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-4,this.lastSnapIndex}if(i.FLastEditingCallback.can_rotate&&(this.tempp2d.SetV(this.C180.x,this.C180.y),i.XG0gjf(t,e,this.tempp2d,0,r===l.u.Z_MSL,this.tempp2dLL)&&this.editRotateTexture))return this.lastSnapIndex=-5,this.lastSnapIndex}}return this.lastSnapIndex}},{key:"freeDrawAddCoordOndDown",value:function(){this.UO.solid3D&&this.setNextHeight(l.k.ADD_VERTEX,this.UO.coordsZ.length),this.addCoord(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.setDistanceForAdd(),this.setAreaForAdd(),2===this.UO.coordsZ.length&&this.createSubVertex(this.subVertCount),this.UO.onChanged(this.UO,l.k.ADD_VERTEX,this.UO.coordsZ.length-1),this.saveOperation(l.l.ADDV),this.freedRawPassFirst=!0}},{key:"createEditCanvasPoint",value:function(t,e){t.SetVecSub(this.UO.obj.Fp2T,e);var i=this.UO.obj.userObj.FGlobe;i.Xh5WFD(t)?i.X9oM46(t,this.editCanvasPoint):this.editCanvasPoint.isValid=!1}},{key:"setWalkerPoint",value:function(t,e,i){this.walkerx=t,this.walkery=e,this.walkerGeo=i}},{key:"updateWalkerPoint",value:function(){var t=this.UO.obj.FGlobe.FLastEditingCallback.show_walker;if(this.walkerGeo.isValid){var e=this.UO.coordsZ;this.UO.obj.FGlobe.FLastEditingCallback.can_change.vertex||this.lastSnapIndex<0?(this.setCoord(e.length-1,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),this.subCoordsZ.length>0&&(this.setSubGeo(e.length-1),this.setSubVertex(e.length-1))):1===e.length&&this.setCoord(e.length-1,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat,0),t&&(e.length>1&&this.setDistanceForWalkerRight(),e.length>2&&this.setDistanceForWalkerLeft())}else t&&this.UO.coordsZ.length>2&&(this.setDistanceForWalkerRight(),this.setDistanceForWalkerLeft());!t&&this.UO.coordsZ.length>2&&this.updateLastSubVertexForNoWalker()}},{key:"expandLimit",value:function(t,e,i){var r=this.UO.obj.Limit,s=r.LL,o=r.UR;i?(this.UO.findLimitsAndCenter(),this.CZero.SetV(o.y,(s.x+o.x)/2),this.C90.SetV((s.y+o.y)/2,o.x),this.C180.SetV(s.y,(s.x+o.x)/2)):(r.ExpandXY(t,e),r.GetCenterPoint(this.UO.center),this.CZero.SetV(o.y,(s.x+o.x)/2),this.C90.SetV((s.y+o.y)/2,o.x),this.C180.SetV(s.y,(s.x+o.x)/2)),-3===this.lastSnapIndex&&-4===this.lastSnapIndex&&-5===this.lastSnapIndex||(this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y,this.C180.x=1.2*(this.C180.x-this.UO.center.x)+this.UO.center.x,this.UO.buildEditIcons(this))}},{key:"findRadius",value:function(){-3===this.lastSnapIndex?this.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat):-4===this.lastSnapIndex&&(this.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.center.x,this.UO.center.y,this.walkerGeo.MouseLong,this.walkerGeo.MouseLat))}},{key:"findStartRadius",value:function(){var t=this.UO.center;this.radius1=u.b.CSDist3DGreatCircleDegree(t.x,t.y,this.CZero.x,this.CZero.y),this.radius2=u.b.CSDist3DGreatCircleDegree(t.x,t.y,this.C90.x,this.C90.y)}},{key:"deleteScaleVals",value:function(){this.savedCoords&&(delete this.savedCoords,delete this.savedCenter,delete this.XF471FialX,delete this.XF471FialY)}},{key:"saveScaleVals",value:function(t){if(void 0===this.savedCoords){if(-3===t){this.savedCoords=this.UO.coords.slice(),this.savedCenter=v({},this.UO.center);for(var e=this.savedCoords.length,i=0;i<e;i+=2)this.savedCoords[i]-=this.savedCenter.x;this.XF471FialX=Math.abs(this.CZero.x-this.savedCenter.x),this.prevScaleInitialX=this.XF471FialX}else if(-4===t){this.savedCoords=this.UO.coords.slice(),this.savedCenter=v({},this.UO.center);for(e=this.savedCoords.length,i=0;i<e;i+=2)this.savedCoords[i+1]-=this.savedCenter.y;this.XF471FialY=Math.abs(this.C90.y-this.savedCenter.y),this.prevScaleInitialY=this.XF471FialY}this.prevCoords=this.savedCoords.slice(),this.prevCenter=v({},this.savedCenter)}}},{key:"scaleX",value:function(){for(var t=Math.abs(this.CZero.x-this.savedCenter.x)/this.XF471FialX,e=this.savedCoords.length,i=0;i<e;i+=2)this.UO.coords[i]=this.savedCoords[i]*t+this.savedCenter.x,this.setCoord(i/2,this.UO.coords[i],this.UO.coords[i+1],this.UO.coordsZ[i/2]),this.setSubGeo(i/2),this.setSubVertex(i/2)}},{key:"scaleY",value:function(){for(var t=Math.abs(this.C90.y-this.savedCenter.y)/this.XF471FialY,e=this.savedCoords.length,i=0;i<e;i+=2)this.UO.coords[i+1]=this.savedCoords[i+1]*t+this.savedCenter.y,this.setCoord(i/2,this.UO.coords[i],this.UO.coords[i+1],this.UO.coordsZ[i/2]),this.setSubGeo(i/2),this.setSubVertex(i/2)}},{key:"translateCoords",value:function(){for(var t=this.walkerGeo.MouseLong-this.UO.center.x,e=this.walkerGeo.MouseLat-this.UO.center.y,i=this.UO.coords.length,r=0;r<i;r+=2)this.UO.coords[r]+=t,this.UO.coords[r+1]+=e,this.setCoord(r/2,this.UO.coords[r],this.UO.coords[r+1],this.UO.coordsZ[r/2]),this.setSubGeo(r/2),this.setSubVertex(r/2)}},{key:"findRotDeg",value:function(){var t=new u.u(0,0),e=new u.u(0,0);t.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),t.ConvertDegreeToRadyan(),Object.assign(e,this.UO.center),e.ConvertDegreeToRadyan(),this.rotDeg=u.b.CSNormalizeAngle(270-u.b.AzimuthOf2PointsOnSphere(e,t))}},{key:"rotateCoords",value:function(){var t=new u.w(0,0,0),e=new u.u(0,0),i=new u.u(0,0),r=this.UO.coords.length;Object.assign(i,this.UO.center),i.ConvertDegreeToRadyan();for(var s=0;s<r;s+=2)e.SetV(this.UO.coords[s],this.UO.coords[s+1]),e.ConvertDegreeToRadyan(),u.b.GeoTo3D(i.x,i.y,l.z.GLOBE_RADIUS,t),t.Normalize(),e=u.b.RotatePoint(e,t,this.rotDeg-this.rotDegSaved),this.setCoord(s/2,e.x,e.y,this.UO.coordsZ[s/2]),this.setSubGeo(s/2),this.setSubVertex(s/2)}},{key:"rotateNorth",value:function(t,e,i,r){var s=new u.w(0,0,0),o=new u.u(0,0);return u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),u.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+u.b.DegreeToRadyan(r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),u.b.CarToSpher2(s,o),o}},{key:"setDragPoints",value:function(){var t,e,i,r,s=new u.u(0,0),o=new u.u(0,0),n=new u.w(0,0,0);o.SetV(u.b.DegreeToRadyan(this.UO.center.x),u.b.DegreeToRadyan(this.UO.center.y)),u.b.GeoTo3DP(o,l.z.GLOBE_RADIUS,n),n.Normalize(),t=u.b.DegreeToRadyan(180),e=this.radius1*Math.cos(t)*l.z.GLOBE_RADIUS_K,i=this.radius2*Math.sin(t)*l.z.GLOBE_RADIUS_K,r=Math.sqrt(e*e+i*i),t=u.b.DegreeToRadyan(u.b.CSAngleV2(e,i)),Object.assign(s,o),u.b.X7UX4S(s,r,l.z.GLOBE_RADIUS),this.CZero=this.rotateNorth(s,n,t,this.rotDeg),this.CZero.ConvertRadyanToDegree(),t=u.b.DegreeToRadyan(270),e=this.radius1*Math.cos(t)*l.z.GLOBE_RADIUS_K,i=this.radius2*Math.sin(t)*l.z.GLOBE_RADIUS_K,r=Math.sqrt(e*e+i*i),t=u.b.DegreeToRadyan(u.b.CSAngleV2(e,i)),Object.assign(s,o),u.b.X7UX4S(s,r,l.z.GLOBE_RADIUS),this.C90=this.rotateNorth(s,n,t,this.rotDeg),this.C90.ConvertRadyanToDegree(),t=u.b.DegreeToRadyan(0),e=this.radius1*Math.cos(t)*l.z.GLOBE_RADIUS_K,i=this.radius2*Math.sin(t)*l.z.GLOBE_RADIUS_K,r=Math.sqrt(e*e+i*i),t=u.b.DegreeToRadyan(u.b.CSAngleV2(e,i)),Object.assign(s,o),u.b.X7UX4S(s,r,l.z.GLOBE_RADIUS),this.C180=this.rotateNorth(s,n,t,this.rotDeg),this.C180.ConvertRadyanToDegree()}},{key:"setOffsetDragPoints",value:function(){this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y}},{key:"drawMainPoint",value:function(){var t=this.gl,e=this.UO.coordsZ,i=this.UO.obj.FGlobe;t.bindBuffer(t.ARRAY_BUFFER,this.editBufferForMainPoint),t.vertexAttribPointer(i.P3DvertexPos,3,t.FLOAT,!1,0,0);var r=i.FLastEditingCallback,s=r.can_change,o=r.show_walker;s.vertex&&(-1===i.cursorIndex&&this.walkerGeo.isValid?o?t.drawArrays(t.POINTS,0,e.length):t.drawArrays(t.POINTS,0,e.length-1):e.length-1>0&&t.drawArrays(t.POINTS,0,e.length-1))}},{key:"drawShadowPolygon",value:function(){var t=this.UO.obj.userObj.FGlobe,e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.editBufferForMainPoint),e.vertexAttribPointer(t.P3DvertexPos,3,e.FLOAT,!1,0,0),e.uniform4fv(t.P3DOpacityLoc,L);var i=t.FLastEditingCallback,r=i.show_walker,s=i.can_change;-1===t.cursorIndex&&this.walkerGeo.isValid?s.vertex?r?e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length):this.UO.coordsZ.length>3?e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length-1):e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length):this.UO.coordsZ.length>3&&e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length-1):s.vertex?r?e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length):this.UO.coordsZ.length>3&&e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length-1):this.UO.coordsZ.length-1>0&&e.drawArrays(e.LINE_LOOP,0,this.UO.coordsZ.length-1)}},{key:"drawZPoint",value:function(){var t=this.gl,e=this.UO.obj.FGlobe,i=this.UO.coordsZ,r=e.FLastEditingCallback,s=r.show_walker,o=r.can_change;-1===e.cursorIndex&&this.walkerGeo.isValid?(t.bindBuffer(t.ARRAY_BUFFER,this.editBuffer),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),o.Z&&(o.vertex&&s?t.drawArrays(t.POINTS,0,i.length):i.length-1>0&&t.drawArrays(t.POINTS,0,i.length-1))):(t.bindBuffer(t.ARRAY_BUFFER,this.editBuffer),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),o.Z&&t.drawArrays(t.POINTS,0,i.length-1))}},{key:"drawSubPoint",value:function(){var t=this.gl,e=this.UO.obj.FGlobe,i=e.FLastEditingCallback,r=i.show_walker,s=i.can_change;this.subVertCount>0&&(-1===e.cursorIndex&&this.walkerGeo.isValid?(t.bindBuffer(t.ARRAY_BUFFER,this.editSubVertBuffer),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),s.vertex&&(r?t.drawArrays(t.POINTS,0,this.subVertCount+1):this.subVertCount>1&&t.drawArrays(t.POINTS,0,this.subVertCount-1))):(t.bindBuffer(t.ARRAY_BUFFER,this.editSubVertBuffer),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),this.subVertCount>1&&s.vertex&&t.drawArrays(t.POINTS,0,this.subVertCount-1)))}},{key:"drawMainHeightPoint",value:function(){var t=this.gl,e=this.UO.obj.FGlobe,i=e.FLastEditingCallback.can_change;-1===e.cursorIndex&&this.walkerGeo.isValid?(t.bindBuffer(t.ARRAY_BUFFER,this.UO.polygonTopVertBuff),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),i.height&&(i.vertex?this.UO.fixedHeights?t.drawArrays(t.POINTS,0,this.UO.coordsZ.length):this.UO.heights[0]&&t.drawArrays(t.POINTS,0,this.UO.coordsZ.length):this.UO.fixedHeights?t.drawArrays(t.POINTS,0,this.UO.coordsZ.length-1):this.UO.heights[0]&&t.drawArrays(t.POINTS,0,this.UO.coordsZ.length-1))):(t.bindBuffer(t.ARRAY_BUFFER,this.UO.polygonTopVertBuff),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),this.UO.coordsZ.length-1>0&&i.height&&(this.UO.fixedHeights?t.drawArrays(t.POINTS,0,this.UO.coordsZ.length-1):this.UO.heights[0]&&t.drawArrays(t.POINTS,0,this.UO.coordsZ.length-1)))}},{key:"saveOperation",value:function(t){switch(t){case l.l.ADDV:var e={type:t,coord:[this.UO.coords[this.UO.coords.length-2],this.UO.coords[this.UO.coords.length-1]],isMSL:this.UO.style.zMode===l.u.Z_MSL,coordZ:this.UO.coordsZ[this.UO.coordsZ.length-1]};this.UO.solid3D&&(this.UO.fixedHeights?e.height=this.UO.heights[0]:e.height=this.UO.heights[this.UO.coordsZ.length-2]),this.UO.FUndoRedoEdit.SaveOpr(e);break;case l.l.ADDSV:e={type:t,coord:[this.prevX,this.prevY],lastSnapIndex:this.lastSnapIndex,isMSL:this.UO.style.zMode===l.u.Z_MSL,coordZ:this.UO.coordsZ[this.UO.coordsZ.length-1]};this.UO.solid3D&&(this.UO.fixedHeights?e.height=this.UO.heights[0]:e.height=this.UO.heights[this.lastSnapIndex]),this.UO.FUndoRedoEdit.SaveOpr(e);break;case l.l.MOVEV:this.UO.FUndoRedoEdit.SaveOpr({type:t,coord1:[this.prevX,this.prevY],coord2:[this.UO.coords[this.UO.coords.length-2],this.UO.coords[this.UO.coords.length-1]],coordZ:this.UO.coordsZ[this.UO.coordsZ.length-1],lastSnapIndex:this.lastSnapIndex});break;case l.l.MOVEZ:this.UO.FUndoRedoEdit.SaveOpr({type:t,prevZ:this.prevZ,afterZ:this.afterZ,lastSnapIndex:this.lastSnapIndex,zMode:this.UO.style.zMode,solid3D:this.UO.solid3D});break;case l.l.MOVEVH:this.UO.FUndoRedoEdit.SaveOpr({type:t,lastSnapIndex:this.lastSnapIndex,prevHeight:this.prevHeight,lastHeight:this.lastHeight});break;case l.l.DELETEV:e={type:t,coord:[this.UO.coords[this.UO.coords.length-2],this.UO.coords[this.UO.coords.length-1]],coordZ:this.UO.coordsZ[this.UO.coordsZ.length-1],lastSnapIndex:this.lastSnapIndex,isMSL:this.UO.style.zMode===l.u.Z_MSL,Z:this.UO.Z};this.UO.solid3D&&(this.UO.fixedHeights?e.height=this.UO.heights[0]:e.height=this.UO.heights[this.lastSnapIndex]),this.UO.FUndoRedoEdit.SaveOpr(e);break;case l.l.ROTATEO:var i=new u.E(0,0,0,0);i.SetTW(this.prevLimit),this.UO.FUndoRedoEdit.SaveOpr({type:t,afterRotDeg:this.afterRotDeg,prevLimit:i});break;case l.l.SCALEOX:this.UO.FUndoRedoEdit.SaveOpr({type:t,previnitialX:this.prevScaleInitialX,afterinitialX:this.afterScaleInitialX,prevCoords:this.prevCoords.slice(),afterCoords:this.afterCoords.slice(),prevCenter:this.prevCenter,afterCenter:this.afterCenter,prevCZero:this.prevCZero,afterCZero:this.afterCZero});break;case l.l.SCALEOY:this.UO.FUndoRedoEdit.SaveOpr({type:t,previnitialY:this.prevScaleInitialY,afterinitialY:this.afterScaleInitialY,prevCoords:this.prevCoords.slice(),afterCoords:this.afterCoords.slice(),prevCenter:this.prevCenter,afterCenter:this.afterCenter,prevC90:this.prevC90,afterC90:this.afterC90});break;case l.l.MOVEO:this.UO.FUndoRedoEdit.SaveOpr({type:t,deltaX:this.UO.center.x-this.prevX,deltaY:this.UO.center.y-this.prevY});break;case l.l.ADDFRD:this.lastfreeDrawCount&&this.UO.FUndoRedoEdit.SaveOpr({type:t,lastIndex:this.lastfreeDrawIndex,lastCount:this.lastfreeDrawCount,lastCoords:this.UO.coords.slice(this.lastfreeDrawIndex,this.lastfreeDrawIndex+this.lastfreeDrawCount),lastCoordsZ:this.UO.coordsZ.slice(this.lastfreeDrawIndex/2,(this.lastfreeDrawIndex+this.lastfreeDrawCount)/2)})}}},{key:"expandWithoutWalker",value:function(){if(2===this.UO.coords.length)this.expandLimit(null,null,!0);else{var t=this.UO.coords.pop(),e=this.UO.coords.pop(),i=this.UO.coordsZ.pop();this.expandLimit(null,null,!0),this.UO.coords.push(e),this.UO.coords.push(t),this.UO.coordsZ.push(i)}}},{key:"addCoordForADDFRD",value:function(t,e){var i=e.length,r=this.gl;this.UO.coords.pop(),this.UO.coords.pop(),this.UO.coordsZ.pop();var s=this.UO.coordsZ.length;n=this.buildInputPointForADDFRD(0,0,0,!1,t,e);for(var o=0;o<i;o++)this.UO.coords.push(t[2*o]),this.UO.coords.push(t[2*o+1]),this.UO.coordsZ.push(e[o]),this.setDistanceForAdd();if(this.setAreaForAdd(),this.UO.coords.push(0),this.UO.coords.push(0),this.UO.coordsZ.push(0),this.UO.solid3D&&(this.UO.coordsZ.length&&!this.UO.fixedHeights?this.UO.heights[this.UO.heights.length]=this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height:this.UO.fixedHeights&&(this.UO.heights[0]=this.UO.obj.userObj.FGlobe.FLastEditingCallback.next_height)),this.editPolygonTypedArr.set(n,3*s),r.bindBuffer(r.ARRAY_BUFFER,this.editBuffer),r.bufferSubData(r.ARRAY_BUFFER,4*s*3,n),this.UO.polygonTopVertBuff){var n=this.buildInputPointForADDFRD(0,0,0,!1,t,e,this.UO.heights[0]);this.editTopPolygonTypedArr.set(n,3*s),r.bindBuffer(r.ARRAY_BUFFER,this.UO.polygonTopVertBuff),r.bufferSubData(r.ARRAY_BUFFER,4*s*3,n);for(o=0;o<i;o++)this.buildPointForSide[0]=this.editPolygonTypedArr[3*s],this.buildPointForSide[1]=this.editPolygonTypedArr[3*s+1],this.buildPointForSide[2]=this.editPolygonTypedArr[3*s+2],this.buildPointForSide[3]=this.editTopPolygonTypedArr[3*s],this.buildPointForSide[4]=this.editTopPolygonTypedArr[3*s+1],this.buildPointForSide[5]=this.editTopPolygonTypedArr[3*s+2],this.editSidePolygonTypedArr.set(this.buildPointForSide,6*s),r.bindBuffer(r.ARRAY_BUFFER,this.editSideVertBuffer),r.bufferSubData(r.ARRAY_BUFFER,4*s*6,this.buildPointForSide),s++}}},{key:"deleteCoordForADDFRD",value:function(t,e,i){this.UO.coords.splice(e,i),this.UO.coordsZ.splice(e/2,i/2);var r=this.editPolygonTypedArr.slice(0,e/2*3),s=this.editPolygonTypedArr.slice(e/2*3+i/2*3),o=this.gl;if(this.editPolygonTypedArr.set(r,0),this.editPolygonTypedArr.set(s,r.length),o.bindBuffer(o.ARRAY_BUFFER,this.editBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.editPolygonTypedArr),this.UO.polygonTopVertBuff){r=this.editTopPolygonTypedArr.slice(0,e/2*3),s=this.editTopPolygonTypedArr.slice(e/2*3+i/2*3+3);this.editTopPolygonTypedArr.set(r,0),this.editTopPolygonTypedArr.set(s,r.length),o.bindBuffer(o.ARRAY_BUFFER,this.UO.polygonTopVertBuff),o.bufferSubData(o.ARRAY_BUFFER,0,this.editTopPolygonTypedArr);r=this.editSidePolygonTypedArr.slice(0,e/2*6),s=this.editSidePolygonTypedArr.slice(e/2*6+i/2*6+6);this.editSidePolygonTypedArr.set(r,0),this.editSidePolygonTypedArr.set(s,r.length),o.bindBuffer(o.ARRAY_BUFFER,this.editSideVertBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.editSidePolygonTypedArr)}this.deleteHeight(null,e,i)}},{key:"deleteSubVertexForADDFRD",value:function(t,e,i){this.subCoords.splice(e,i),this.subCoordsZ.splice(e/2,i/2);var r=this.editPolygonTypedArrSubVert.slice(0,e/2*3),s=this.editPolygonTypedArrSubVert.slice(e/2*3+i/2*3);this.editPolygonTypedArrSubVert.set(r,0),this.editPolygonTypedArrSubVert.set(s,r.length),this.subVertCount&&(this.subVertCount-=i/2)}},{key:"buildInputPointForADDFRD",value:function(t,e,i,r,s,o,n){var a=this.UO.obj.userObj.FGlobe,h=this.UO.obj.TempGeo3C,d=this.UO.style.zMode;if(n){for(var c=new Float32Array(3*o.length),f=o.length,p=0;p<f;p++)this.tempp2d.SetV(s[2*p],s[2*p+1]),this.tempp2d.ConvertDegreeToRadyan(),d===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+(o[p]+n)*l.z.GLOBE_RADIUS_K,this.UO.obj.TempGeo3C):d!==l.u.Z_GROUND_PERVERTEX&&d!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+a.XyecYr(this.tempp2d,!1)+(o[p]+n)*l.z.GLOBE_RADIUS_K,h),h.SetVecSub(this.UO.obj.startP,h),c[3*p]=h.x,c[3*p+1]=h.y,c[3*p+2]=h.z;return c}for(c=new Float32Array(3*o.length),f=o.length,p=0;p<f;p++)this.tempp2d.SetV(s[2*p],s[2*p+1]),this.tempp2d.ConvertDegreeToRadyan(),d===l.u.Z_MSL||r?u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+o[p]*l.z.GLOBE_RADIUS_K,h):d!==l.u.Z_GROUND_PERVERTEX&&d!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.tempp2d,l.z.GLOBE_RADIUS+a.XyecYr(this.tempp2d,!1)+o[p]*l.z.GLOBE_RADIUS_K,h),h.SetVecSub(this.UO.obj.startP,h),c[3*p]=h.x,c[3*p+1]=h.y,c[3*p+2]=h.z;return c}},{key:"buildEditGeometry",value:function(){for(var t=0,e=0;e<this.UO.coordsZ.length;e++)t=2*e,this.editPolygonTypedArr.set(this.buildInputPoint(this.UO.coords[t],this.UO.coords[t+1],this.UO.coordsZ[e]),3*e),this.editTopPolygonTypedArr.set(this.setHeightInputPoint(this.UO.coords[t],this.UO.coords[t+1],this.UO.coordsZ[e],!1,this.UO.heights[e]),3*e),this.buildPointForSide[0]=this.editPolygonTypedArr[3*e],this.buildPointForSide[1]=this.editPolygonTypedArr[3*e+1],this.buildPointForSide[2]=this.editPolygonTypedArr[3*e+2],this.buildPointForSide[3]=this.editTopPolygonTypedArr[3*e],this.buildPointForSide[4]=this.editTopPolygonTypedArr[3*e+1],this.buildPointForSide[5]=this.editTopPolygonTypedArr[3*e+2],this.editSidePolygonTypedArr.set(this.buildPointForSide,6*e);var i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this.editBuffer),i.bufferData(i.ARRAY_BUFFER,this.editPolygonTypedArr,i.DYNAMIC_DRAW),this.UO.solid3D&&(i.bindBuffer(i.ARRAY_BUFFER,this.UO.polygonTopVertBuff),i.bufferData(i.ARRAY_BUFFER,this.editTopPolygonTypedArr,i.DYNAMIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.editSideVertBuffer),i.bufferData(i.ARRAY_BUFFER,this.editSidePolygonTypedArr,i.DYNAMIC_DRAW))}},{key:"buildVertexHeight",value:function(t){var e;e=this.fixedHeights?this.UO.heights[0]:this.UO.heights[t];var i=this.setHeightInputPoint(this.UO.coords[2*t],this.UO.coords[2*t+1],this.UO.coordsZ[t],!1,e);this.editTopPolygonTypedArr.set(i,3*t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.UO.polygonTopVertBuff),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,4*t*3,i),this.buildPointForSide[0]=this.editPolygonTypedArr[3*t],this.buildPointForSide[1]=this.editPolygonTypedArr[3*t+1],this.buildPointForSide[2]=this.editPolygonTypedArr[3*t+2],this.buildPointForSide[3]=this.editTopPolygonTypedArr[3*t],this.buildPointForSide[4]=this.editTopPolygonTypedArr[3*t+1],this.buildPointForSide[5]=this.editTopPolygonTypedArr[3*t+2],this.editSidePolygonTypedArr.set(this.buildPointForSide,6*t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.editSideVertBuffer),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,4*t*6,this.buildPointForSide)}},{key:"undo",value:function(t){var e=this.UO,i=e.coordsZ,r=e.coords;switch(t.type){case l.l.ADDV:this.deleteCoord(i.length-2),this.deleteSubVertex(i.length-2),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ADDSV:this.deleteCoord(t.lastSnapIndex),this.deleteSubVertex(t.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEV:this.setCoord(t.lastSnapIndex,t.coord1[0],t.coord1[1],t.coordZ),r[r.length-2]=r[r.length-4],r[r.length-1]=r[r.length-3],this.subCoordsZ.length&&2!==i.length&&(this.setSubGeo(t.lastSnapIndex),this.setSubVertex(t.lastSnapIndex)),this.setDistanceForMove(t.lastSnapIndex),this.setAreaForMove(),this.expandLimit(null,null,!0),this.findStartRadius();break;case l.l.MOVEZ:t.zMode===l.u.Z_GROUND_FOLLOW?(i[t.lastIndex]=t.prevZ,this.setCoordZ(t.lastIndex),t.solid3D&&this.buildEditGeometry()):(this.setCoord(t.lastSnapIndex,r[2*t.lastSnapIndex],r[2*t.lastSnapIndex+1],t.prevZ),t.solid3D&&this.buildVertexHeight(t.lastSnapIndex)),this.setDistanceForMove(t.lastSnapIndex),this.setAreaForMove(),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEVH:this.UO.fixedHeights?this.UO.heights[0]=t.prevHeight:this.UO.heights[t.lastSnapIndex]=t.prevHeight,this.buildEditGeometry();break;case l.l.DELETEV:this.UO.solid3D&&!this.UO.fixedHeights&&this.UO.heights.splice(t.lastSnapIndex,0,t.height),t.lastSnapIndex?(this.insertCoord(t.lastSnapIndex,t.coord[0],t.coord[1],t.coordZ),this.setDistanceForInsert(t.lastSnapIndex-1),this.setAreaForInsert()):this.insertCoord(t.lastSnapIndex,t.coord[0],t.coord[1],t.coordZ,!0),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ROTATEO:this.rotDeg=360-t.afterRotDeg,this.rotDegSaved=0,this.rotateCoords(),this.rotDegSaved=0,this.rotDeg=0;var s=this.UO.obj.Limit,o=s.LL,n=s.UR;s.SetTW(t.prevLimit),this.CZero.SetV(n.y,(o.x+n.x)/2),this.C90.SetV((o.y+n.y)/2,n.x),this.C180.SetV(o.y,(o.x+n.x)/2),this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y,this.C180.x=1.2*(this.C180.x-this.UO.center.x)+this.UO.center.x,this.findStartRadius();break;case l.l.SCALEOX:this.XF471FialX=t.previnitialX,this.savedCoords=t.prevCoords.slice(),this.savedCenter=v({},t.prevCenter),this.CZero=v({},t.prevCZero),this.scaleX(),this.setDistanceForScale(),this.setAreaForScale(),this.findStartRadius();break;case l.l.SCALEOY:this.XF471FialY=t.previnitialY,this.savedCoords=t.prevCoords.slice(),this.savedCenter=v({},t.prevCenter),this.C90=v({},t.prevC90),this.scaleY(),this.setDistanceForScale(),this.setAreaForScale(),this.findStartRadius();break;case l.l.MOVEO:this.deltaX=-t.deltaX,this.deltaY=-t.deltaY;for(var a=r.length,h=0;h<a;h+=2)r[h]+=this.deltaX,r[h+1]+=this.deltaY,this.setCoord(h/2,r[h],r[h+1],i[h/2]),this.setSubGeo(h/2),this.setSubVertex(h/2);this.expandWithoutWalker();break;case l.l.ADDFRD:this.deleteCoordForADDFRD(i.length-1,t.lastIndex,t.lastCount),this.deleteSubVertexForADDFRD(i.length-2,t.lastIndex,t.lastCount),this.deleteDistance(null,t.lastIndex,t.lastCount),this.setAreaForDelete(),this.expandWithoutWalker(),this.findStartRadius()}this.setDragPoints(),this.UO.buildEditIcons(this)}},{key:"redo",value:function(t){var e=this.UO,i=e.coordsZ,r=e.coords;switch(t.type){case l.l.ADDV:(h=i.length-1)?(this.UO.solid3D&&!this.UO.fixedHeights&&this.UO.heights.splice(h,0,t.height),this.insertCoord(h,t.coord[0],t.coord[1],t.coordZ),this.setDistanceForInsert(h-1),this.setAreaForDelete()):(r[0]=t.coord[0],r[1]=t.coord[1],this.UO.solid3D&&this.setNextHeight(l.k.ADD_VERTEX,i.length),this.setCoord(0,t.coord[0],t.coord[1],t.coordZ),this.addCoord(t.coord[0],t.coord[1],t.coordZ),this.createSubVertex(this.subVertCount),this.setDistanceForAdd(),this.setAreaForAdd()),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ADDSV:this.UO.solid3D&&this.setNextHeight(l.k.INSERT_VERTEX,t.lastSnapIndex),t.lastSnapIndex?(this.insertCoord(t.lastSnapIndex,t.coord[0],t.coord[1],t.coordZ),this.setDistanceForInsert(t.lastSnapIndex-1),this.setAreaForInsert()):(this.addCoord(t.coord[0],t.coord[1],t.coordZ),this.setDistanceForAdd(),this.setAreaForAdd()),r[r.length-2]=r[r.length-4],r[r.length-1]=r[r.length-3],this.expandLimit(null,null,!0),this.findStartRadius();break;case l.l.MOVEV:this.setCoord(t.lastSnapIndex,t.coord2[0],t.coord2[1],t.coordZ),r[r.length-2]=r[r.length-4],r[r.length-1]=r[r.length-3],this.subCoordsZ.length&&2!==i.length&&(this.setSubGeo(t.lastSnapIndex),this.setSubVertex(t.lastSnapIndex)),this.setDistanceForMove(t.lastSnapIndex),this.setAreaForMove(),this.expandLimit(null,null,!0),this.findStartRadius();break;case l.l.MOVEZ:t.zMode===l.u.Z_GROUND_FOLLOW?(i[t.lastIndex]=t.afterZ,this.setCoordZ(t.lastIndex),t.solid3D&&this.buildEditGeometry()):(this.setCoord(t.lastSnapIndex,r[2*t.lastSnapIndex],r[2*t.lastSnapIndex+1],t.afterZ),t.solid3D&&this.buildVertexHeight(t.lastSnapIndex)),this.setDistanceForMove(t.lastSnapIndex),this.setAreaForMove(),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.MOVEVH:this.UO.fixedHeights?this.UO.heights[0]=t.lastHeight:this.UO.heights[t.lastSnapIndex]=t.lastHeight,this.buildEditGeometry();break;case l.l.DELETEV:this.deleteCoord(t.lastSnapIndex),this.deleteSubVertex(t.lastSnapIndex-1),this.expandWithoutWalker(),this.findStartRadius();break;case l.l.ROTATEO:this.rotDeg=t.afterRotDeg,this.rotDegSaved=0,this.rotateCoords(),this.rotDegSaved=0,this.rotDeg=0;var s=this.UO.obj.Limit,o=s.LL,n=s.UR;s.SetTW(t.prevLimit),this.CZero.SetV(n.y,(o.x+n.x)/2),this.C90.SetV((o.y+n.y)/2,n.x),this.C180.SetV(o.y,(o.x+n.x)/2),this.CZero.x=1.2*(this.CZero.x-this.UO.center.x)+this.UO.center.x,this.C90.y=1.2*(this.C90.y-this.UO.center.y)+this.UO.center.y,this.C180.x=1.2*(this.C180.x-this.UO.center.x)+this.UO.center.x,this.findStartRadius();break;case l.l.SCALEOX:this.XF471FialX=t.afterinitialX,this.savedCoords=t.afterCoords.slice(),this.savedCenter=v({},t.afterCenter),this.CZero=v({},t.afterCZero),this.scaleX(),this.setDistanceForScale(),this.setAreaForScale(),this.findStartRadius();break;case l.l.SCALEOY:this.XF471FialY=t.afterinitialY,this.savedCoords=t.afterCoords.slice(),this.savedCenter=v({},t.afterCenter),this.C90=v({},t.afterC90),this.scaleY(),this.setDistanceForScale(),this.setAreaForScale(),this.findStartRadius();break;case l.l.MOVEO:this.deltaX=+t.deltaX,this.deltaY=+t.deltaY;for(var a=r.length,h=0;h<a;h+=2)r[h]+=this.deltaX,r[h+1]+=this.deltaY,this.setCoord(h/2,r[h],r[h+1],i[h/2]),this.setSubGeo(h/2),this.setSubVertex(h/2);this.expandWithoutWalker();break;case l.l.ADDFRD:this.UO.solid3D&&this.setHeightForADDFRD(t.lastIndex/2,t.lastCount/2),this.addCoordForADDFRD(t.lastCoords,t.lastCoordsZ);var u=this.subVertCount;this.subCoords.splice(this.subCoords.length-2,2),this.subCoordsZ.splice(this.subCoordsZ.length-2,1),u>0&&this.subVertCount--;for(h=0;h<t.lastCount/2;h++)this.createSubVertex(this.subVertCount);this.subCoords.push(NaN),this.subCoords.push(NaN),this.subCoordsZ.push(0),u>0&&this.subVertCount++,this.expandWithoutWalker(),this.findStartRadius()}this.setDragPoints(),this.UO.buildEditIcons(this)}}]),t}(),x=function(){function t(e){n()(this,t),this.walker=!1,this.UO=e,this.FHighlight=!0,this.mainColorHigh=new Float32Array([0,0,1,1]),this.mainColorNormal=new Float32Array([1,1,0,1]),this.lastSnapIndex=-1,this.tempp2dLL=new u.v(0,0),this.tempcoord=new Float32Array(3),this.tempp2d=new u.u(0,0),this.editCanvasPoint=new u.v(0,0),this.x=0,this.y=0,this.walkerGeo=new u.F,this.editGeo3C=new u.w(0,0,0),this.editGeo3D=new u.w(0,0,0),this.editTexture=null,this.zPointSnapped=!1,this.tempp2d2=new u.u(0,0),this.editPointTypedArr=new Float32Array(3),this.editPointVertBuff=this.UO.obj.gl.createBuffer(),this.editGeo3CForZPoint=new u.w(0,0,0),this.editTempArr=new Float32Array(3)}return h()(t,[{key:"addCoord",value:function(t,e){return this.UO.coords.length?(this.buildEditModel(0),!1):(this.UO.coords[0]=t.MouseLong,this.UO.coords[1]=t.MouseLat,this.UO.coordsZ[0]=e,this.UO.center.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.build(),this.UO.findLimits(),!1)}},{key:"setCoord",value:function(t,e,i){this.UO.coords[0]=e.MouseLong,this.UO.coords[1]=e.MouseLat,this.UO.coordsZ[0]=i,this.UO.center.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.build(),this.UO.findLimits()}},{key:"setCoordForZSnap",value:function(){this.UO.build(),this.UO.findLimits()}},{key:"mouseDown",value:function(t,e){if(this.lastSnapIndex=-1,this.zPointSnapped=!1,this.walkerGeo.isValid){var i=this.UO.style.zMode===l.u.Z_MSL,r=this.UO.obj.FGlobe;if(this.x=t,this.y=e,r.keyCode===l.f.CTRL){if(r.FLastEditingCallback.can_change.Z&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],i,this.tempp2dLL)))return this.prevCoord=this.UO.coords.slice(),this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0;if(this.UO.obj.FGlobe.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,0,i,this.tempp2dLL)&&this.editTexture))return this.prevCoord=this.UO.coords.slice(),this.lastSnapIndex=0,!0}else{if(this.UO.obj.FGlobe.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,0,i,this.tempp2dLL)&&this.editTexture))return this.prevCoord=this.UO.coords.slice(),this.lastSnapIndex=0,!0;if(r.FLastEditingCallback.can_change.Z&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],i,this.tempp2dLL)))return this.prevCoord=this.UO.coords.slice(),this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0}}return-1!==this.lastSnapIndex}},{key:"mouseDblClick",value:function(t,e){if(this.lastfreeDrawCount=0,this.walkerGeo.isValid){var i=this.UO.obj.FGlobe.FLastEditingCallback.can_change;if(this.x=t,this.y=e,(i.vertex||i.Z)&&this.mouseDown(t,e))return this.UO.onVertexClick?this.UO.onVertexClick(this.UO,this.lastSnapIndex):this.UO.obj.FGlobe.CSWidgets.ShowVertexWidgetForPMAS(),!0}return!1}},{key:"mouseMove",value:function(t,e){this.UO.obj.userObj.FGlobe;-1!==this.lastSnapIndex?this.setCoord(this.lastSnapIndex,this.walkerGeo,this.UO.coordsZ[0]):this.zPointSnapped&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.tempp2d2.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.coordsZ[0]=this.UO.obj.FGlobe.XyhdDQ(this.tempp2d,this.tempp2d2,0,this.UO.coordsZ[0],this.UO.style.zMode===l.u.Z_MSL,this.UO.coordsZ[0],t,e),this.setCoordForZSnap()),this.checkWidget()}},{key:"checkWidget",value:function(){var t=this.UO.obj.userObj.FGlobe.CSWidgets;"visible"===t.editVertexWidget.style.visibility&&(-1!==this.lastSnapIndex?(t.textBoxVertexEnlem.value=this.UO.coords[0],t.textBoxVertexBoylam.value=this.UO.coords[1]):this.zPointSnapped&&(t.textBoxVertexKot.value=this.UO.coordsZ[0]))}},{key:"mouseUp",value:function(t,e){-1!==this.lastSnapIndex?(this.afterCoord=this.UO.coords.slice(),this.saveOperation(l.l.MOVEO),this.UO.onChanged(this.UO,l.k.MOVE_OBJ)):this.zPointSnapped&&(this.afterZ=this.UO.coordsZ[0],this.zPointSnapped=!1,this.saveOperation(l.l.MOVEZ)),this.lastSnapIndex=-1}},{key:"mouseAddCoord",value:function(t,e){return!0}},{key:"mouseDeleteCoord",value:function(t,e){return!1}},{key:"getSnapIndex",value:function(t,e){if(this.lastSnapIndex=-1,this.showZ=!1,this.walkerGeo.isValid){if(this.UO.obj.FGlobe.FLastEditingCallback.can_change.Z&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.obj.FGlobe.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL)))return this.lastSnapIndex=0,this.showZ=!0,this.lastSnapIndex;if(this.UO.obj.FGlobe.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.obj.FGlobe.XG0gjf(t,e,this.tempp2d,0,this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=0,this.lastSnapIndex}return this.lastSnapIndex}},{key:"setWalkerPoint",value:function(t,e,i){this.walkerGeo=i}},{key:"buildEditModel",value:function(t){var e=this.UO.obj.userObj,i=e.tempp2d,r=e.FGlobe;this.UO.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(i,l.z.GLOBE_RADIUS+t*l.z.GLOBE_RADIUS_K,this.editGeo3C):u.b.GeoTo3DP(i,l.z.GLOBE_RADIUS+r.XyecYr(i,!1)+t*l.z.GLOBE_RADIUS_K,this.editGeo3C)}},{key:"createEditCanvasPoint",value:function(t,e){var i=this.UO.obj.userObj.FGlobe;t.SetVecSub(this.UO.obj.Fp2T,e),i.Xh5WFD(t)?i.X9oM46(t,this.editCanvasPoint):this.editCanvasPoint.isValid=!1}},{key:"saveOperation",value:function(t){switch(t){case l.l.MOVEO:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEO,coord1:this.prevCoord.slice(),coord2:this.afterCoord.slice()});break;case l.l.MOVEZ:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEZ,prevZ:this.prevZ,afterZ:this.afterZ})}}},{key:"undo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord1[0],this.UO.coords[1]=t.coord1[1],this.UO.center.SetV(t.coord1[0],t.coord1[1]);break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.prevZ}this.UO.findLimits(),this.UO.build()}},{key:"redo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord2[0],this.UO.coords[1]=t.coord2[1],this.UO.center.SetV(t.coord2[0],t.coord2[1]);break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.afterZ}this.UO.build(),this.UO.findLimits()}},{key:"fillZPoint",value:function(){var t=this.UO.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.UO.obj.gl;e.SetP(this.UO.center),e.ConvertDegreeToRadyan(),this.UO.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.editGeo3CForZPoint):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K+i.XyecYr(e,!1),this.editGeo3CForZPoint),this.editTempArr[0]=this.editGeo3CForZPoint.x,this.editTempArr[1]=this.editGeo3CForZPoint.y,this.editTempArr[2]=this.editGeo3CForZPoint.z,this.editPointTypedArr.set(this.editTempArr,0),r.bindBuffer(r.ARRAY_BUFFER,this.editPointVertBuff),r.bufferData(r.ARRAY_BUFFER,this.editPointTypedArr,r.STATIC_DRAW)}},{key:"drawZPoint",value:function(){var t=this.UO.obj.userObj.FGlobe,e=this.UO.obj.gl,i=this.UO.obj;i.Geo3DS.SetVecSub(i.Fp2T,i.startP),t.GLU.pushModel(),t.GLU.Translate(i.Geo3DS.x,i.Geo3DS.y,i.Geo3DS.z),t.GLU.setModelToGL(t.P3DmodelViewMatrixLoc),e.disable(e.DEPTH_TEST),e.uniform1i(t.P3DisPoint,1),e.uniform4fv(t.P3DOpacityLoc,this.zColor),e.uniform1f(t.P3DPointSize,this.zSize),e.bindBuffer(e.ARRAY_BUFFER,this.editPointVertBuff),e.vertexAttribPointer(t.P3DvertexPos,3,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,1),t.GLU.popModel(),e.enable(e.DEPTH_TEST)}}]),t}(),O=function(){function t(e,i){n()(this,t),this.walker=!1,this.UO=e,this.editShapeTypedArr=new Float32Array(111),this.editShapeVertBuff=i.createBuffer(),this.CZero=new u.u(0,0),this.C90=new u.u(0,0),this.C180=new u.u(0,0),this.editGeo3C=new u.w(0,0,0),this.editGeo3D=new u.w(0,0,0),this.editGeo3CForCZero=new u.w(0,0,0),this.editGeo3CForCPoint=new u.w(0,0,0),this.editGeo3DForCZero=new u.w(0,0,0),this.editGeo3CForC90=new u.w(0,0,0),this.editGeo3DForC90=new u.w(0,0,0),this.editGeo3CForC180=new u.w(0,0,0),this.editGeo3DForC180=new u.w(0,0,0),this.editCanvasPoint=new u.v(0,0),this.editTexture=null,this.FHighlight=!0,this.lastSnapIndex=-1,this.tempp2dLL=new u.v(0,0),this.tempp2d=new u.u(0,0),this.tempp2d2=new u.u(0,0),this.x=0,this.y=0,this.willDrawIcon=0,this.recStartP=new u.u(0,0),this.walkerx=0,this.walkery=0,this.tempTCoor=new u.F,this.zPointSnapped=!1,this.tempp2d2=new u.u(0,0),this.editShapeForPointTypedArr=new Float32Array(3),this.editShapeForPointVertBuff=i.createBuffer(),this.buildEditIcon=y.BuildEditIcon}return h()(t,[{key:"fillZPoint",value:function(){var t=this.UO.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.UO.obj,s=r.gl,o=this.UO.style.zMode;e.SetV(u.b.DegreeToRadyan(this.UO.coords[0]),u.b.DegreeToRadyan(this.UO.coords[1])),this.UO.solid3D?o===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+(this.UO.heights[0]+this.UO.coordsZ[0])*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+(this.UO.heights[0]+this.UO.coordsZ[0])*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint):o===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint),this.editGeo3CForCPoint.SetVecSub(r.startP,this.editGeo3CForCPoint),r.tempArr2[0]=this.editGeo3CForCPoint.x,r.tempArr2[1]=this.editGeo3CForCPoint.y,r.tempArr2[2]=this.editGeo3CForCPoint.z,this.editShapeForPointTypedArr.set(r.tempArr2,0),s.bindBuffer(s.ARRAY_BUFFER,this.editShapeForPointVertBuff),s.bufferData(s.ARRAY_BUFFER,this.editShapeForPointTypedArr,s.STATIC_DRAW)}},{key:"setDefaultValues",value:function(t){var e=this.UO.obj.userObj.FGlobe;this.UO.coords[0]=t.MouseLong,this.UO.coords[1]=t.MouseLat,this.UO.coordsZ=[0],e.XGqwp9(.45*e.FScrW,.45*e.FScrH,!1,this.tempTCoor),this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],u.b.RadyanToDegree(this.tempTCoor.MouseLong),u.b.RadyanToDegree(this.tempTCoor.MouseLat)),this.UO.radius2=this.UO.radius1,this.UO.rotDeg=0,this.UO.center.SetV(this.UO.coords[0],this.UO.coords[1])}},{key:"addCoord",value:function(t){if(!this.isFreeDrawing){if(!this.UO.coords.length)return this.setDefaultValues(t),this.UO.fillGeo(),this.UO.shapeType===l.r.ELLIPSE&&this.editBuildTriangle(),this.UO.findLimitsAndCenter(),this.UO.build(),!1;var e=!1,i=this.UO.obj.userObj.FGlobe;return this.UO.radius1&&this.UO.radius2||(i.XGqwp9(.45*i.FScrW,.45*i.FScrH,!1,this.tempTCoor),this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],u.b.RadyanToDegree(this.tempTCoor.MouseLong),u.b.RadyanToDegree(this.tempTCoor.MouseLat)),this.UO.radius2=this.UO.radius1,e=!0),void 0!==this.UO.rotDeg&&null!==this.UO.rotDeg||(this.UO.rotDeg=0,e=!0),e&&this.UO.fillGeo(),this.UO.shapeType===l.r.ELLIPSE&&this.editBuildTriangle(),this.UO.findLimitsAndCenter(),this.UO.build(),!1}return!1}},{key:"editBuildTriangle",value:function(){var t=this.UO._coords.length-1,e=0;for(e=this.UO._coords.length;e--;)this.UO._coords[e]*=1e4;for(e=0;e<t;e+=2)this.UO._coords[e]===this.UO._coords[e+2]&&this.UO._coords[e+1]===this.UO._coords[e+3]&&this.UO._coords.splice(e,2);var i=Math.sqrt((this.UO._coords[0]-this.UO._coords[this.UO._coords.length-2])*(this.UO._coords[0]-this.UO._coords[this.UO._coords.length-2])+(this.UO._coords[1]-this.UO._coords[this.UO._coords.length-1])*(this.UO._coords[1]-this.UO._coords[this.UO._coords.length-1]))<u.f;for(this.UO.obj.TriIndexCnt=this.UO.obj.mPoly2Tri.Triangulate(this.UO._coords,i),e=this.UO._coords.length;e--;)this.UO._coords[e]/=1e4;if(this.UO.obj.TriIndexCnt&&this.UO.style.filled){var r=this.UO.obj.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.editShapeIndexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.UO.obj.mPoly2Tri.TriIndex),r.STATIC_DRAW)}}},{key:"mouseDown",value:function(t,e){if(this.lastSnapIndex=-1,this.zPointSnapped=!1,this.isFreeDrawing)return this.UO.coords[0]=this.walkerGeo.MouseLong,this.UO.coords[1]=this.walkerGeo.MouseLat,this.recStartP.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.coordsZ=[0],this.UO.radius1=.001,this.UO.radius2=.001,this.UO.rotDeg=0,this.UO.center.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.fillGeo(),this.UO.findLimitsAndCenter(),this.UO.build(),!1;if(this.walkerGeo.isValid){this.x=t,this.y=e;var i=this.UO.obj.userObj.FGlobe;if(this.UO.solid3D)if(i.keyCode===l.f.CTRL){if(i.FLastEditingCallback.can_change.height&&this.topDownSnap(t,e))return!0;if(i.FLastEditingCallback.can_change.Z&&this.groundDownSnapZ(t,e))return!0;if(this.groundDownSnap(t,e))return this.topDown=!0,this.topSnapped=!0,!0}else{if(this.groundDownSnap(t,e))return this.topDown=!0,this.topSnapped=!0,!0;if(i.FLastEditingCallback.can_change.height&&this.topDownSnap(t,e))return!0;if(i.FLastEditingCallback.can_change.Z&&this.groundDownSnapZ(t,e))return!0}else if(i.keyCode===l.f.CTRL){if(i.FLastEditingCallback.can_change.Z&&this.groundDownSnapZ(t,e))return!0;if(this.groundDownSnap(t,e))return!0}else{if(this.groundDownSnap(t,e))return!0;if(i.FLastEditingCallback.can_change.Z&&this.groundDownSnapZ(t,e))return!0}}return-1!==this.lastSnapIndex}},{key:"mouseDblClick",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=i.FLastEditingCallback.can_change;if(this.lastSnapIndex=-1,this.walkerGeo.isValid){if(this.x=t,this.y=e,this.UO.solid3D&&r.height&&(r.Z&&this.groundDownSnapZ(t,e)||this.topDownSnap(t,e,void 0,!0)))return this.UO.onHeightClick?this.UO.onHeightClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidgetForPMAS(),!0;if((r.vertex||r.Z)&&(r.Z&&this.groundDownSnapZ(t,e)||this.centerSnapForDblClick(t,e)))return this.UO.onVertexClick?this.UO.onVertexClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidgetForPMAS(),!0}return!1}},{key:"centerSnapForDblClick",value:function(t,e){if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.obj.FGlobe.XG0gjf(t,e,this.tempp2d,0,this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL)&&this.editTexture)return this.lastSnapIndex=-2,this.prevCoord=this.UO.coords.slice(),this.willDrawIcon=1,!0}},{key:"topDownSnap",value:function(t,e,i){return!(!this.UO.obj.FGlobe.FLastEditingCallback.can_change.height||(this.tempp2d.SetV(this.UO._coords[0],this.UO._coords[1]),!this.UO.obj.FGlobe.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL,i)))&&(this.topDown=!0,this.prevHeight=this.UO.heights[0],this.lastSnapIndex=-7,!0)}},{key:"groundDownSnap",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode===l.u.Z_MSL;if(i.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=-2,this.prevCoord=this.UO.coords.slice(),this.willDrawIcon=1,!0;if(i.FLastEditingCallback.can_scale){if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-3,this.prevRadius1=this.UO.radius1,this.willDrawIcon=2,!0;if(this.tempp2d.SetV(this.C90.x,this.C90.y),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-4,this.prevRadius2=this.UO.radius2,this.willDrawIcon=3,!0}return!!(i.FLastEditingCallback.can_rotate&&(this.tempp2d.SetV(this.C180.x,this.C180.y),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editRotateTexture))&&(this.lastSnapIndex=-5,this.prevRotDeg=this.UO.rotDeg,this.willDrawIcon=4,!0)}},{key:"groundDownSnapZ",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode===l.u.Z_MSL;if(this.UO.solid3D){if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],r,this.tempp2dLL))return this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0}else if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],r,this.tempp2dLL))return this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0}},{key:"groundSnapZ",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode===l.u.Z_MSL;if(this.UO.solid3D){if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],r,this.tempp2dLL))return!0}else if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],r,this.tempp2dLL))return!0}},{key:"mouseMove",value:function(t,e,i){var r=this.UO.obj.userObj.FGlobe,s=this.UO.style.zMode;if(i)this.findRadiusFreeDraw();else if(-1!==this.lastSnapIndex){if(-7===this.lastSnapIndex)this.topSnapped&&this.topDown&&(this.tempp2d.SetV(this.UO._coords[0],this.UO._coords[1]),this.tempp2d2.SetV(this.UO._coords[0],this.UO._coords[1]),this.UO.heights[0]=r.X2BlMn(this.tempp2d,this.tempp2d2,this.UO.coordsZ[0],this.UO.coordsZ[0]+this.UO.heights[0],s===l.u.Z_MSL,this.UO.heights[0],t,e));else if(-2===this.lastSnapIndex)this.UO.coords[0]=this.walkerGeo.MouseLong,this.UO.coords[1]=this.walkerGeo.MouseLat;else if(-5===this.lastSnapIndex){var o=new u.u(0,0),n=new u.u(0,0);o.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),o.ConvertDegreeToRadyan(),n.x=this.UO.coords[0],n.y=this.UO.coords[1],n.ConvertDegreeToRadyan(),this.UO.rotDeg=u.b.CSNormalizeAngle(u.b.AzimuthOf2PointsOnSphere(n,o)+90)}else this.findRadius();this.UO.fillGeo(),this.UO.findLimitsAndCenter(),this.UO.build()}else this.zPointSnapped&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.tempp2d2.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.solid3D?this.UO.coordsZ[0]=r.XyhdDQ(this.tempp2d,this.tempp2d2,this.UO.heights[0],this.UO.coordsZ[0]+this.UO.heights[0],s===l.u.Z_MSL,this.UO.coordsZ[0],t,e):this.UO.coordsZ[0]=r.XyhdDQ(this.tempp2d,this.tempp2d2,0,this.UO.coordsZ[0],s===l.u.Z_MSL,this.UO.coordsZ[0],t,e),this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build());this.checkWidget()}},{key:"checkWidget",value:function(){var t=this.UO.obj.userObj.FGlobe.CSWidgets;"visible"===t.editVertexWidget.style.visibility&&(-2===this.lastSnapIndex?(t.textBoxVertexEnlem.value=this.UO.coords[0],t.textBoxVertexBoylam.value=this.UO.coords[1]):this.zPointSnapped?t.textBoxVertexKot.value=this.UO.coordsZ[0]:this.UO.solid3D&&-7===this.lastSnapIndex&&(t.textBoxVertexYukseklik.value=this.UO.heights[0]))}},{key:"mouseUp",value:function(t,e){-2===this.lastSnapIndex?(this.afterCoord=this.UO.coords.slice(),this.saveOperation(l.l.MOVEO),this.UO.onChanged(this.UO,l.k.MOVE_OBJ)):-3===this.lastSnapIndex?(this.afterRadius1=this.UO.radius1,this.saveOperation(l.l.SCALEOX),this.UO.onChanged(this.UO,l.k.SCALE_OBJX)):-4===this.lastSnapIndex?(this.afterRadius2=this.UO.radius2,this.saveOperation(l.l.SCALEOY),this.UO.onChanged(this.UO,l.k.SCALE_OBJY)):-7===this.lastSnapIndex?this.topSnapped&&this.UO.solid3D&&(this.lastHeight=this.UO.heights[0],this.saveOperation(l.l.MOVEVH)):-5===this.lastSnapIndex?(this.saveOperation(l.l.ROTATEO),this.UO.onChanged(this.UO,l.k.ROTATE_OBJ)):this.zPointSnapped&&(this.afterZ=this.UO.coordsZ[0],this.zPointSnapped=!1,this.saveOperation(l.l.MOVEZ)),this.willDrawIcon=0,this.lastSnapIndex=-1}},{key:"mouseAddCoord",value:function(t,e){return!0}},{key:"mouseDeleteCoord",value:function(t,e){return!!this.mouseDown(t,e)}},{key:"topSnap",value:function(t,e){return!(!this.UO.obj.FGlobe.FLastEditingCallback.can_change.height||(this.tempp2d.SetV(this.UO._coords[0],this.UO._coords[1]),!this.UO.obj.FGlobe.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL)))&&(this.lastSnapIndex=-7,this.topSnapped=!0,!0)}},{key:"getSnapIndex",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode===l.u.Z_MSL;if(this.lastSnapIndex=-1,this.walkerGeo.isValid){if(this.UO.solid3D&&i.FLastEditingCallback.can_change.height&&this.topSnap(t,e))return this.lastSnapIndex;if(this.showZ=!0,i.FLastEditingCallback.can_change.Z&&this.groundSnapZ(t,e))return!0;if(this.showZ=!1,i.FLastEditingCallback.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=2,this.lastSnapIndex;if(i.FLastEditingCallback.can_scale){if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=0,this.lastSnapIndex;if(this.tempp2d.SetV(this.C90.x,this.C90.y),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=1,this.lastSnapIndex}if(i.FLastEditingCallback.can_rotate&&(this.tempp2d.SetV(this.C180.x,this.C180.y),i.XG0gjf(t,e,this.tempp2d,0,r,this.tempp2dLL)&&this.editRotateTexture))return this.lastSnapIndex=3,this.lastSnapIndex}return this.lastSnapIndex}},{key:"setWalkerPoint",value:function(t,e,i){this.walkerx=t,this.walkery=e,this.walkerGeo=i}},{key:"createEditCanvasPoint",value:function(t,e){var i=this.UO.obj.userObj.FGlobe;t.SetVecSub(this.UO.obj.Fp2T,e),i.Xh5WFD(t)?i.X9oM46(t,this.editCanvasPoint):this.editCanvasPoint.isValid=!1}},{key:"findRadius",value:function(){this.UO.proportional?(this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.radius2=this.UO.radius1):-3===this.lastSnapIndex?this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat):-4===this.lastSnapIndex&&(this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat))}},{key:"findRadiusFreeDraw",value:function(){if(this.UO.isEditCenter)this.UO.proportional?(this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.radius2=this.UO.radius1):(this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.UO.coords[1]),this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.UO.coords[0],this.walkerGeo.MouseLat));else if(this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(this.recStartP.x),u.b.DegreeToRadyan(this.recStartP.y),u.b.DegreeToRadyan(this.walkerGeo.MouseLong),u.b.DegreeToRadyan(this.walkerGeo.MouseLat)),this.UO.coords[0]=this.tempp2d.x,this.UO.coords[1]=this.tempp2d.y,this.UO.proportional){this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.UO.coords[1]),this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.UO.coords[0],this.walkerGeo.MouseLat);var t=u.b.Min(this.UO.radius1,this.UO.radius2);this.UO.radius1=t,this.UO.radius2=t}else this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.UO.coords[1]),this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.UO.coords[0],this.walkerGeo.MouseLat);this.UO.fillGeo(),this.UO.shapeType===l.r.ELLIPSE&&this.editBuildTriangle(),this.UO.findLimitsAndCenter(),this.UO.build()}},{key:"saveOperation",value:function(t){switch(t){case l.l.MOVEO:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEO,coord1:this.prevCoord.slice(),coord2:this.afterCoord.slice()});break;case l.l.MOVEVH:this.UO.FUndoRedoEdit.SaveOpr({type:t,prevHeight:this.prevHeight,lastHeight:this.lastHeight});break;case l.l.ROTATEO:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.ROTATEO,rotDeg1:this.prevRotDeg,rotDeg2:this.UO.rotDeg});break;case l.l.SCALEOX:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.SCALEOX,prevRadius1:this.prevRadius1,afterRadius1:this.afterRadius1});break;case l.l.SCALEOY:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.SCALEOY,prevRadius2:this.prevRadius2,afterRadius2:this.afterRadius2});break;case l.l.MOVEZ:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEZ,prevZ:this.prevZ,afterZ:this.afterZ})}}},{key:"undo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord1[0],this.UO.coords[1]=t.coord1[1],this.UO.center.SetV(t.coord1[0],t.coord1[1]);break;case l.l.MOVEVH:this.UO.heights[0]=t.prevHeight;break;case l.l.ROTATEO:this.UO.rotDeg=t.rotDeg1;break;case l.l.SCALEOX:this.UO.radius1=t.prevRadius1;break;case l.l.SCALEOY:this.UO.radius2=t.prevRadius2;break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.prevZ}this.UO.fillGeo(),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build()}},{key:"redo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord2[0],this.UO.coords[1]=t.coord2[1],this.UO.center.SetV(t.coord2[0],t.coord2[1]);break;case l.l.MOVEVH:this.UO.heights[0]=t.lastHeight;break;case l.l.ROTATEO:this.UO.rotDeg=t.rotDeg2;break;case l.l.SCALEOX:this.UO.radius1=t.afterRadius1;break;case l.l.SCALEOY:this.UO.radius2=t.afterRadius2;break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.afterZ}this.UO.fillGeo(),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build()}},{key:"drawZPoint",value:function(){if(!this.isFreeDrawing&&this.FHighlight){var t=this.UO.obj.gl;t.bindBuffer(t.ARRAY_BUFFER,this.editShapeForPointVertBuff),t.vertexAttribPointer(this.UO.obj.FGlobe.P3DvertexPos,3,t.FLOAT,!1,0,0),t.drawArrays(t.POINTS,0,1)}}}]),t}(),R=function(){function t(e,i){n()(this,t),this.walker=!1,this.UO=e,this.editArcAreaTypedArr=new Float32Array(438),this.editGeo3C=new u.w(0,0,0),this.editGeo3D=new u.w(0,0,0),this.CZero=new u.u(0,0),this.C90=new u.u(0,0),this.C180=new u.u(0,0),this.C270=new u.u(0,0),this.editGeo3CForCZero=new u.w(0,0,0),this.editGeo3DForCZero=new u.w(0,0,0),this.editGeo3CForC90=new u.w(0,0,0),this.editGeo3DForC90=new u.w(0,0,0),this.editGeo3CForC180=new u.w(0,0,0),this.editGeo3DForC180=new u.w(0,0,0),this.editGeo3CForC270=new u.w(0,0,0),this.editGeo3DForC270=new u.w(0,0,0),this.editCanvasPoint=new u.v(0,0),this.editTexture=null,this.FHighlight=!0,this.lastSnapIndex=-1,this.tempp2dLL=new u.v(0,0),this.tempp2d=new u.u(0,0),this.tempp2d2=new u.u(0,0),this.x=0,this.y=0,this.willDrawIcon=0,this.recStartP=new u.u(0,0),this.walkerx=0,this.walkery=0,this.editArcAreaVertBuff=i.createBuffer(),this.editArcAreaVertBuff2=i.createBuffer(),this.editArcAreaTypedArr2=new Float32Array(9),this.tempTCoor=new u.F,this.ratioForRadius=void 0,this.zPointSnapped=!1,this.tempp2d2=new u.u(0,0),this.arcAreaCenterForZPoint=i.createBuffer(),this.arcAreaTypedArrForZPoint=new Float32Array(3),this.editGeo3CForCPoint=new u.w(0,0,0),this.buildEditIcon=y.BuildEditIcon}return h()(t,[{key:"setDefaultValues",value:function(t){var e=this.UO.obj.userObj.FGlobe;this.UO.coords[0]=t.MouseLong,this.UO.coords[1]=t.MouseLat,this.UO.coordsZ=[0],e.XGqwp9(.45*e.FScrW,.45*e.FScrH,!1,this.tempTCoor),this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],u.b.RadyanToDegree(this.tempTCoor.MouseLong),u.b.RadyanToDegree(this.tempTCoor.MouseLat)),this.UO.radius1=this.UO.radius2/2,this.UO.startAng=0,this.UO.endAng=45,this.UO.stepAng=5,this.ratioForRadius=2}},{key:"addCoord",value:function(t){var e=this.UO.coords.length&&this.UO.radius1&&this.UO.radius2&&(void 0!==this.UO.startAng||null!==this.UO.startAng)&&(void 0!==this.UO.endAng||null!==this.UO.endAng);if(!this.isFreeDrawing)return e?(this.ratioForRadius=this.UO.radius2/this.UO.radius1,this.UO.fillGeo(),this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build(),!1):(this.setDefaultValues(t),this.UO.fillGeo(),this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(0),this.UO.findLimitsAndCenter(),this.UO.build(),!1);e?this.ratioForRadius=this.UO.radius2/this.UO.radius1:this.setDefaultValues(t)}},{key:"mouseDown",value:function(t,e){if(this.lastSnapIndex=-1,this.zPointSnapped=!1,this.isFreeDrawing)return this.UO.coords[0]=this.walkerGeo.MouseLong,this.UO.coords[1]=this.walkerGeo.MouseLat,this.recStartP.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.coordsZ=[0],this.UO.radius1=.001,this.UO.radius2=.002,this.ratioForRadius=this.UO.radius2/this.UO.radius1,this.UO.fillGeo(),this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(0),this.UO.findLimitsAndCenter(),this.UO.build(),!1;if(this.walkerGeo.isValid){this.x=t,this.y=e;var i=this.UO.obj.FGlobe.FLastEditingCallback.can_change,r=this.UO.obj.userObj.FGlobe;if(this.UO.solid3D)if(r.keyCode===l.f.CTRL){if(i.height&&this.topDownSnap(t,e))return!0;if(i.Z&&this.groundDownSnapZ(t,e))return!0;if(this.groundDownSnap(t,e))return this.topDown=!0,this.topSnapped=!0,!0}else{if(this.groundDownSnap(t,e))return this.topDown=!0,this.topSnapped=!0,!0;if(i.height&&this.topDownSnap(t,e))return!0;if(i.Z&&this.groundDownSnapZ(t,e))return!0}else if(r.keyCode===l.f.CTRL){if(i.Z&&this.groundDownSnapZ(t,e))return!0;if(this.groundDownSnap(t,e))return this.topDown=!0,this.topSnapped=!0,!0}else{if(this.groundDownSnap(t,e))return this.topDown=!0,this.topSnapped=!0,!0;if(i.Z&&this.groundDownSnapZ(t,e))return!0}}return-1!==this.lastSnapIndex}},{key:"mouseDblClick",value:function(t,e){if(this.lastSnapIndex=-1,this.walkerGeo.isValid){var i=this.UO.obj.userObj.FGlobe,r=i.FLastEditingCallback.can_change;if(this.x=t,this.y=e,r.height&&this.UO.solid3D&&(r.Z&&this.groundDownSnapZ(t,e)||this.topDownSnap(t,e,void 0,!0)))return this.UO.onHeightClick?this.UO.onHeightClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidgetForPMAS(),!0;if((r.vertex||r.Z)&&(r.Z&&this.groundDownSnapZ(t,e)||this.centerSnapForDblClick(t,e)))return this.UO.onVertexClick?this.UO.onVertexClick(this.UO,this.lastSnapIndex):i.CSWidgets.ShowVertexWidgetForPMAS(),!0}return!1}},{key:"centerSnapForDblClick",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode;if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,0,r===l.u.Z_MSL,this.tempp2dLL)&&this.editTexture)return this.lastSnapIndex=-2,this.prevCoord=this.UO.coords.slice(),this.willDrawIcon=1,!0}},{key:"topDownSnap",value:function(t,e,i){var r=this.UO.obj.userObj.FGlobe,s=this.UO.style.zMode;return!(!r.FLastEditingCallback.can_change.height||(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),!r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],s===l.u.Z_MSL,this.tempp2dLL,i)))&&(this.topDown=!0,this.prevHeight=this.UO.heights[0],this.lastSnapIndex=-7,!0)}},{key:"groundDownSnap",value:function(t,e){var i=this.UO.obj.userObj.FGlobe,r=this.UO.style.zMode,s=this.UO.obj.FGlobe.FLastEditingCallback,o=r===l.u.Z_MSL;if(s.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,0,o,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=-2,this.prevCoord=this.UO.coords.slice(),this.willDrawIcon=1,!0;if(s.can_scale){if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),i.XG0gjf(t,e,this.tempp2d,0,o,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-3,this.prevRadius1=this.UO.radius1,this.prevRadius2=this.UO.radius2,this.willDrawIcon=2,!0;if(this.tempp2d.SetV(this.C90.x,this.C90.y),i.XG0gjf(t,e,this.tempp2d,0,o,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-4,this.prevRadius1=this.UO.radius1,this.prevRadius2=this.UO.radius2,this.willDrawIcon=3,!0}if(s.can_rotate){if(this.tempp2d.SetV(this.C180.x,this.C180.y),i.XG0gjf(t,e,this.tempp2d,0,o,this.tempp2dLL)&&this.editRotateTexture)return this.lastSnapIndex=-5,this.prevEndAng=this.UO.endAng,this.willDrawIcon=4,!0;if(this.tempp2d.SetV(this.C270.x,this.C270.y),i.XG0gjf(t,e,this.tempp2d,0,o,this.tempp2dLL)&&this.editRotateTexture)return this.lastSnapIndex=-6,this.prevStartAng=this.UO.startAng,this.willDrawIcon=5,!0}}},{key:"groundDownSnapZ",value:function(t,e){var i=this.UO.obj,r=i.userObj.FGlobe,s=this.UO.style.zMode;if(this.UO.solid3D){if(this.tempp2d.SetV(i.midCoord.x,i.midCoord.y),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],s===l.u.Z_MSL,this.tempp2dLL))return this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0}else if(this.tempp2d.SetV(i.midCoord.x,i.midCoord.y),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],s===l.u.Z_MSL,this.tempp2dLL))return this.zPointSnapped=!0,this.prevZ=this.UO.coordsZ[0],!0}},{key:"groundSnapZ",value:function(t,e){var i=this.UO.obj,r=i.userObj.FGlobe,s=this.UO.style.zMode;if(this.UO.solid3D){if(this.tempp2d.SetV(i.midCoord.x,i.midCoord.y),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],s===l.u.Z_MSL,this.tempp2dLL))return!0}else if(this.tempp2d.SetV(i.midCoord.x,i.midCoord.y),r.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0],s===l.u.Z_MSL,this.tempp2dLL))return!0}},{key:"mouseMove",value:function(t,e,i){var r=this.UO.obj,s=r.userObj.FGlobe,o=this.UO.style.zMode;if(i)this.findRadiusFreeDraw();else if(-1!==this.lastSnapIndex){if(-7===this.lastSnapIndex&&this.topSnapped&&this.topDown&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),this.tempp2d2.SetV(this.UO.coords[0],this.UO.coords[1]),this.UO.heights[0]=s.X2BlMn(this.tempp2d,this.tempp2d2,this.UO.coordsZ[0],this.UO.coordsZ[0]+this.UO.heights[0],o===l.u.Z_MSL,this.UO.heights[0],t,e)),-2===this.lastSnapIndex)this.UO.coords[0]=this.walkerGeo.MouseLong,this.UO.coords[1]=this.walkerGeo.MouseLat;else if(-5===this.lastSnapIndex){var n=new u.u(0,0),a=new u.u(0,0);n.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),n.ConvertDegreeToRadyan(),a.x=this.UO.coords[0],a.y=this.UO.coords[1],a.ConvertDegreeToRadyan(),this.UO.endAng=u.b.CSNormalizeAngle(u.b.AzimuthOf2PointsOnSphere(a,n))}else if(-6===this.lastSnapIndex){n=new u.u(0,0),a=new u.u(0,0);n.SetV(this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),n.ConvertDegreeToRadyan(),a.x=this.UO.coords[0],a.y=this.UO.coords[1],a.ConvertDegreeToRadyan(),this.UO.startAng=u.b.CSNormalizeAngle(u.b.AzimuthOf2PointsOnSphere(a,n))}else this.findRadius();this.UO.fillGeo(),-2!==this.lastSnapIndex&&this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build()}else this.zPointSnapped&&(this.tempp2d.SetV(r.midCoord.x,r.midCoord.y),this.tempp2d2.SetV(r.midCoord.x,r.midCoord.y),this.UO.solid3D?this.UO.coordsZ[0]=s.XyhdDQ(this.tempp2d,this.tempp2d2,this.UO.heights[0],this.UO.coordsZ[0]+this.UO.heights[0],o===l.u.Z_MSL,this.UO.coordsZ[0],t,e):this.UO.coordsZ[0]=s.XyhdDQ(this.tempp2d,this.tempp2d2,0,this.UO.coordsZ[0],o===l.u.Z_MSL,this.UO.coordsZ[0],t,e),this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build());this.checkWidget()}},{key:"checkWidget",value:function(){var t=this.UO.obj.userObj.FGlobe.CSWidgets;"visible"===t.editVertexWidget.style.visibility&&(-2===this.lastSnapIndex?(t.textBoxVertexEnlem.value=this.UO.coords[0],t.textBoxVertexBoylam.value=this.UO.coords[1]):this.zPointSnapped?t.textBoxVertexKot.value=this.UO.coordsZ[0]:this.UO.solid3D&&-7===this.lastSnapIndex&&(t.textBoxVertexYukseklik.value=this.UO.heights[0]))}},{key:"mouseUp",value:function(t,e){-2===this.lastSnapIndex?(this.afterCoord=this.UO.coords.slice(),this.saveOperation(l.l.MOVEO),this.UO.onChanged(this.UO,l.k.MOVE_OBJ)):-5===this.lastSnapIndex?(this.afterEndAng=this.UO.endAng,this.saveOperation(l.l.ROTATEOE),this.UO.onChanged(this.UO,l.k.ROTATE_OBJ)):-6===this.lastSnapIndex?(this.afterStartAng=this.UO.startAng,this.saveOperation(l.l.ROTATEOS),this.UO.onChanged(this.UO,l.k.ROTATE_OBJ)):-3===this.lastSnapIndex?(this.afterRadius1=this.UO.radius1,this.afterRadius2=this.UO.radius2,this.saveOperation(l.l.SCALEOX),this.UO.onChanged(this.UO,l.k.SCALE_OBJX)):-4===this.lastSnapIndex?(this.afterRadius1=this.UO.radius1,this.afterRadius2=this.UO.radius2,this.saveOperation(l.l.SCALEOX),this.UO.onChanged(this.UO,l.k.SCALE_OBJX)):-7===this.lastSnapIndex?this.topSnapped&&this.UO.solid3D&&(this.lastHeight=this.UO.heights[0],this.saveOperation(l.l.MOVEVH)):this.zPointSnapped&&(this.afterZ=this.UO.coordsZ[0],this.zPointSnapped=!1,this.saveOperation(l.l.MOVEZ)),this.willDrawIcon=0,this.lastSnapIndex=-1,this.topSnapped=!1,this.topDown=!1}},{key:"mouseAddCoord",value:function(t,e){return!0}},{key:"mouseDeleteCoord",value:function(t,e){return!!this.mouseDown(t,e)}},{key:"groundSnap",value:function(t,e){var i=this.UO.obj.FGlobe;if(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),i.XG0gjf(t,e,this.tempp2d,0,this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL))return this.lastSnapIndex=-2,!0}},{key:"topSnap",value:function(t,e){var i=this.UO.obj.FGlobe;return!(!i.FLastEditingCallback.can_change.height||(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),!i.XG0gjf(t,e,this.tempp2d,this.UO.coordsZ[0]+this.UO.heights[0],this.UO.style.zMode===l.u.Z_MSL,this.tempp2dLL)))&&(this.lastSnapIndex=-7,this.topSnapped=!0,!0)}},{key:"getSnapIndex",value:function(t,e){if(this.lastSnapIndex=-1,this.walkerGeo.isValid){var i=this.UO.obj.FGlobe.FLastEditingCallback;if(this.UO.solid3D&&this.UO.obj.FGlobe.FLastEditingCallback.can_change.height&&this.topSnap(t,e))return this.lastSnapIndex;if(this.showZ=!0,this.UO.obj.FGlobe.FLastEditingCallback.can_change.Z&&this.groundSnapZ(t,e))return!0;this.showZ=!1;var r=this.UO.obj.userObj.FGlobe,s=this.UO.style.zMode===l.u.Z_MSL;if(i.can_move&&(this.tempp2d.SetV(this.UO.coords[0],this.UO.coords[1]),r.XG0gjf(t,e,this.tempp2d,0,s,this.tempp2dLL)&&this.editTexture))return this.lastSnapIndex=-2,this.lastSnapIndex;if(i.can_scale){if(this.tempp2d.SetV(this.CZero.x,this.CZero.y),r.XG0gjf(t,e,this.tempp2d,0,s,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-3,this.lastSnapIndex;if(this.tempp2d.SetV(this.C90.x,this.C90.y),r.XG0gjf(t,e,this.tempp2d,0,s,this.tempp2dLL)&&this.editMoveTexture)return this.lastSnapIndex=-4,this.lastSnapIndex}if(i.can_rotate){if(this.tempp2d.SetV(this.C180.x,this.C180.y),r.XG0gjf(t,e,this.tempp2d,0,s,this.tempp2dLL)&&this.editRotateTexture)return this.lastSnapIndex=-5,this.lastSnapIndex;if(this.tempp2d.SetV(this.C270.x,this.C270.y),r.XG0gjf(t,e,this.tempp2d,0,s,this.tempp2dLL)&&this.editRotateTexture)return this.lastSnapIndex=-6,this.lastSnapIndex}}return this.lastSnapIndex}},{key:"setWalkerPoint",value:function(t,e,i){this.walkerx=t,this.walkery=e,this.walkerGeo=i}},{key:"createEditCanvasPoint",value:function(t,e){t.SetVecSub(this.UO.obj.Fp2T,e),this.UO.obj.FGlobe.Xh5WFD(t)?this.UO.obj.FGlobe.X9oM46(t,this.editCanvasPoint):this.editCanvasPoint.isValid=!1}},{key:"fillGeo",value:function(){this.UO.fixedAnglesAndFindCoordLength(),this.UO.findMidPoint(),this.UO.fillArcAreaGeo(this.UO.radius2,this.UO.radius2,!1),this.UO.fillArcAreaGeo(this.UO.radius1,this.UO.radius1,!0)}},{key:"findRadius",value:function(){if(this.UO.proportional)this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.radius2=this.UO.radius1;else if(-3===this.lastSnapIndex){if(this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.radius1===this.UO.radius2&&(this.UO.radius2=this.UO.radius1,this.UO.radius1=this.UO.radius2-.001),this.UO.radius1>this.UO.radius2){var t=this.UO.radius2;this.UO.radius2=this.UO.radius1,this.UO.radius1=t}}else if(-4===this.lastSnapIndex&&(this.UO.radius1=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.radius1===this.UO.radius2&&(this.UO.radius2=this.UO.radius1,this.UO.radius1=this.UO.radius2-.001),this.UO.radius1>this.UO.radius2)){t=this.UO.radius2;this.UO.radius2=this.UO.radius1,this.UO.radius1=t}}},{key:"findRadiusFreeDraw",value:function(){if(this.UO.isEditCenter)this.UO.radius2=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.walkerGeo.MouseLat),this.UO.radius1=this.UO.radius2/this.ratioForRadius;else{this.UO.obj.FGlobe.FCamera.FArcBall.XkHTjt(this.tempp2d,u.b.DegreeToRadyan(this.recStartP.x),u.b.DegreeToRadyan(this.recStartP.y),u.b.DegreeToRadyan(this.walkerGeo.MouseLong),u.b.DegreeToRadyan(this.walkerGeo.MouseLat)),this.UO.coords[0]=this.tempp2d.x,this.UO.coords[1]=this.tempp2d.y;var t=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.walkerGeo.MouseLong,this.UO.coords[1]),e=u.b.CSDist3DGreatCircleDegree(this.UO.coords[0],this.UO.coords[1],this.UO.coords[0],this.walkerGeo.MouseLat),i=u.b.Min(t,e);this.UO.radius2=i,this.UO.radius1=this.UO.radius2/this.ratioForRadius}this.UO.fillGeo(),this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build()}},{key:"saveOperation",value:function(t){switch(t){case l.l.MOVEO:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEO,coord1:this.prevCoord.slice(),coord2:this.afterCoord.slice()});break;case l.l.MOVEVH:this.UO.FUndoRedoEdit.SaveOpr({type:t,prevHeight:this.prevHeight,lastHeight:this.lastHeight});break;case l.l.ROTATEOS:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.ROTATEOS,prevStartAng:this.prevStartAng,afterStartAng:this.afterStartAng});break;case l.l.ROTATEOE:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.ROTATEOE,prevEndAng:this.prevEndAng,afterEndAng:this.afterEndAng});break;case l.l.SCALEOX:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.SCALEOX,prevRadius1:this.prevRadius1,afterRadius1:this.afterRadius1,prevRadius2:this.prevRadius2,afterRadius2:this.afterRadius2});break;case l.l.SCALEOY:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.SCALEOY,prevRadius2:this.prevRadius2,afterRadius2:this.afterRadius2,prevRadius1:this.prevRadius1,afterRadius1:this.afterRadius1});break;case l.l.MOVEZ:this.UO.FUndoRedoEdit.SaveOpr({type:l.l.MOVEZ,prevZ:this.prevZ,afterZ:this.afterZ})}}},{key:"undo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord1[0],this.UO.coords[1]=t.coord1[1],this.UO.center.SetV(t.coord1[0],t.coord1[1]);break;case l.l.MOVEVH:this.UO.heights[0]=t.prevHeight;break;case l.l.ROTATEOS:this.UO.startAng=t.prevStartAng;break;case l.l.ROTATEOE:this.UO.endAng=t.prevEndAng;break;case l.l.SCALEOX:case l.l.SCALEOY:this.UO.radius1=t.prevRadius1,this.UO.radius2=t.prevRadius2;break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.prevZ}this.UO.fillGeo(),this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build()}},{key:"redo",value:function(t){switch(t.type){case l.l.MOVEO:this.UO.coords[0]=t.coord2[0],this.UO.coords[1]=t.coord2[1],this.UO.center.SetV(t.coord2[0],t.coord2[1]);break;case l.l.MOVEVH:this.UO.heights[0]=t.lastHeight;break;case l.l.ROTATEOS:this.UO.startAng=t.afterStartAng;break;case l.l.ROTATEOE:this.UO.endAng=t.afterEndAng;break;case l.l.SCALEOX:case l.l.SCALEOY:this.UO.radius1=t.afterRadius1,this.UO.radius2=t.afterRadius2;break;case l.l.MOVEZ:this.UO.coordsZ[0]=t.afterZ}this.UO.fillGeo(),this.UO.style.filled&&this.UO.buildTriangle(this.editArcAreaIndexBuffer),this.UO._coordsZ.length=this.UO._coords.length/2,this.UO._coordsZ.fill(this.UO.coordsZ[0]),this.UO.findLimitsAndCenter(),this.UO.build()}},{key:"drawZPoint",value:function(){if(!this.isFreeDrawing&&this.FHighlight){var t=this.UO.obj.gl,e=this.UO.obj.userObj.FGlobe;t.bindBuffer(t.ARRAY_BUFFER,this.arcAreaCenterForZPoint),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),t.drawArrays(t.POINTS,0,1)}}},{key:"FillCenterZPoint",value:function(){var t=this.UO.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.UO.obj,s=r.gl,o=r.tempArr2,n=r.startP,a=r.midCoord,h=this.UO.style.zMode;e.SetV(a.x,a.y),e.ConvertDegreeToRadyan(),h===l.u.Z_MSL?this.UO.solid3D?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+(this.UO.coordsZ[0]+this.UO.heights[0])*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint):h!==l.u.Z_GROUND_PERVERTEX&&h!==l.u.Z_GROUND_FOLLOW||(this.UO.solid3D?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+(this.UO.coordsZ[0]+this.UO.heights[0])*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+this.UO.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.editGeo3CForCPoint)),this.editGeo3CForCPoint.SetVecSub(n,this.editGeo3CForCPoint),o[0]=this.editGeo3CForCPoint.x,o[1]=this.editGeo3CForCPoint.y,o[2]=this.editGeo3CForCPoint.z,this.arcAreaTypedArrForZPoint.set(o,0),s.bindBuffer(s.ARRAY_BUFFER,this.arcAreaCenterForZPoint),s.bufferData(s.ARRAY_BUFFER,this.arcAreaTypedArrForZPoint,s.STATIC_DRAW)}}]),t}();function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function D(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var E=new(function(){function t(){n()(this,t)}return h()(t,[{key:"SaveInfo",value:function(){this.SavedInfo={style:D({},this.style),coords:this.coords.slice(),center:D({},this.center),isMSL:this.isMSL,coordsZ:this.coordsZ.slice(),objLimit:D({},this.obj.Limit)}}},{key:"RestoreInfo",value:function(){Object.assign(this.style,this.SavedInfo.style),Object.assign(this.center,this.SavedInfo.center),Object.assign(this.obj.Limit,this.SavedInfo.objLimit),this.coords=this.SavedInfo.coords.slice(),this.coordsZ=this.SavedInfo.coordsZ.slice(),this.isMSL=this.SavedInfo.isMSL,this.updateFont()}}]),t}()),P=new(function(){function t(){n()(this,t),this.CheckHasFontIcon=y.CheckHasFontIcon,this.UpdateFont=y.UpdateFont,this.CheckFontPacket=y.CheckFontPacket,this.Rebuild=y.Rebuild,this.StyleChanged=y.StyleChanged,this.SaveInfo=E.SaveInfo,this.RestoreInfo=E.RestoreInfo}return h()(t,[{key:"Build",value:function(){var t=this.obj.userObj,e=t.tempp2d,i=t.FGlobe;e.SetP(this.center),e.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K+i.XyecYr(e,!1),this.obj.Geo3C),this.eVal&&(this.eVal.fillZPoint(),this.eVal.buildEditPoint(0))}},{key:"Draw2d",value:function(){if(this.hasFontIcon){var t=this.obj,e=t.userObj.FGlobe;t.Geo3D.SetVecSub(t.Fp2T,t.Geo3C),e.Xh5WFD(t.Geo3D)?e.X9oM46(t.Geo3D,t.CanvasPoint):t.CanvasPoint.isValid=!1,t.CanvasPoint.isValid&&this.checkFontPacket()}}},{key:"Draw3d",value:function(){if(this.CanReBuildSelf&&this.obj.FGlobe.FDRAWED_MAX_LEVEL>11&&(this.MaxObjBuildCounter++,this.MaxObjBuildCounter>l.z.VECTORLAYER_BUILD_COUNTER_LIMIT&&(this.MaxObjBuildCounter=0,this.build())),this.FEditing&&this.obj.FGlobe.FLastEditingCallback.can_change.Z){var t=this.obj,e=t.userObj.FGlobe,i=t.gl;t.Geo3DS.SetVecSub(t.Fp2T,t.startP),e.GLU.pushModel(),e.GLU.Translate(t.Geo3DS.x,t.Geo3DS.y,t.Geo3DS.z),e.GLU.setModelToGL(e.P3DmodelViewMatrixLoc),i.uniform1i(e.P3DisPoint,1),i.uniform4fv(e.P3DOpacityLoc,this.eVal.zColor),i.uniform1f(e.P3DPointSize,this.eVal.zSize),this.eVal.drawZPoint(),e.GLU.popModel()}}},{key:"FindLimits",value:function(){this.obj.Limit.Clear(),this.obj.Limit.ExpandP(this.center)}},{key:"BeginEdit",value:function(t){this.setEval(!0),this.build(),this.eVal.walker=t,this.FEditing=!0}},{key:"EndEdit",value:function(){this.eVal.walker&&(this.eVal.walker=!1),this.FEditing=!1,this.setEval(!1)}},{key:"SetEval",value:function(t){t?this.eVal=new d(this):delete this.eVal}},{key:"GetAsJSON",value:function(){var t=y.GetStyle(this.style),e={type:this.type,Fid:this.Fid,coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),style:t};return this.attribs&&(e.attribs=JSON.parse(JSON.stringify(this.attribs))),e}}]),t}()),_=i(7);function I(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function B(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?I(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):I(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var G=new(function(){function t(){n()(this,t),this.CheckHasFontIcon=y.CheckHasFontIcon,this.UpdateFont=y.UpdateFont,this.CheckFontPacket=y.CheckFontPacket,this.Rebuild=y.Rebuild,this.BuildEditIcons=y.BuildEditIcons,this.StyleChanged=y.StyleChanged,this.FindDistances=y.FindDistances,this.FindSubZ=y.FindSubZ,this.FindSavedSubCoords=y.FindSavedSubCoords,this.Find2DDistance=y.Find2DDistance,this.Find3DDistance=y.Find3DDistance,this.CoordToGeo3C=y.CoordToGeo3C,this.FindLod=y.FindLod,this.FindDistZ=y.FindDistZ}return h()(t,[{key:"Clear",value:function(){this.lineVertBuff&&(this.obj.gl.deleteBuffer(this.lineVertBuff),this.lineVertBuff=null)}},{key:"SaveInfo",value:function(){this.SavedInfo={style:B({},this.style),coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),center:B({},this.center),objLimit:B({},this.obj.Limit),lineTypedArr:this.lineTypedArr.slice(),mainCoordLen:this.obj.mainCoordLen},this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.SavedInfo.gf_coords=this.obj.gf_coords.slice(),this.SavedInfo.gf_coordsZ=this.obj.gf_coordsZ.slice())}},{key:"RestoreInfo",value:function(){Object.assign(this.style,this.SavedInfo.style),Object.assign(this.center,this.SavedInfo.center),Object.assign(this.obj.Limit,this.SavedInfo.objLimit),this.coords=this.SavedInfo.coords.slice(),this.coordsZ=this.SavedInfo.coordsZ.slice(),this.obj.mainCoordLen=this.SavedInfo.mainCoordLen,this.lineTypedArr=this.SavedInfo.lineTypedArr.slice(),this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.obj.gf_coords=this.SavedInfo.gf_coords.slice(),this.obj.gf_coordsZ=this.SavedInfo.gf_coordsZ.slice()),this.updateFont()}},{key:"Build",value:function(t){this.obj.LOD=u.b.Max(this.findLod(this.obj.Limit)-3,0),t?this.style.border&&(this.obj.gf_coords.length=0,this.findFollowGroundCoords(),this.obj.mainCoordLen=this.obj.gf_coords.length,this.lineTypedArr=new Float32Array(this.obj.mainCoordLen/2*3),this.obj.gf_coordsZ.length=this.obj.mainCoordLen/2,this.obj.gf_coordsZ.fill(this.coordsZ[0]),this.obj.buildForFollowGround=!0,this.coordBuild()):this.coords.length&&this.coordsZ.length&&(this.obj.startP=new u.w(0,0,0),this.fontBuild(),this.coordBuild())}},{key:"FontBuild",value:function(){var t=this.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.style.zMode;e.SetP(this.center),e.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.center.z*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):r!==l.u.Z_GROUND_PERVERTEX&&r!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+this.center.z*l.z.GLOBE_RADIUS_K,this.obj.Geo3C)}},{key:"CoordBuild",value:function(){var t,e,i,r,s=this.obj.userObj,o=s.FGlobe,n=s.tempp2d,a=this.style.zMode,h=this.obj,d=h.gl,c=h.TempGeo3C;if(!this.FEditing&&h.buildForFollowGround?(t=h.gf_coords.slice(),e=h.gf_coordsZ.slice()):(t=this.coords,e=this.coordsZ),this.FEditing){for(i=this.coords.length/2;i--;)n.SetV(this.coords[2*i],this.coords[2*i+1]),n.ConvertDegreeToRadyan(),a===l.u.Z_MSL?(r=l.z.GLOBE_RADIUS,u.b.GeoTo3DP(n,r+e[i]*l.z.GLOBE_RADIUS_K,c)):a===l.u.Z_GROUND_PERVERTEX?(r=l.z.GLOBE_RADIUS+o.XyecYr(n,!1),u.b.GeoTo3DP(n,r+e[i]*l.z.GLOBE_RADIUS_K,c)):a===l.u.Z_GROUND_FOLLOW&&(r=l.z.GLOBE_RADIUS+o.XyecYr(n,!1),u.b.GeoTo3DP(n,r+e[i]*l.z.GLOBE_RADIUS_K,c)),c.SetVecSub(h.startP,c),h.tempArr[0]=c.x,h.tempArr[1]=c.y,h.tempArr[2]=c.z,this.eVal.editLineTypedArr.set(h.tempArr,3*i),h.tempArr2[0]=c.x*r/(r+e[i]*l.z.GLOBE_RADIUS_K),h.tempArr2[1]=c.y*r/(r+e[i]*l.z.GLOBE_RADIUS_K),h.tempArr2[2]=c.z*r/(r+e[i]*l.z.GLOBE_RADIUS_K),this.eVal.editLineTypedMainPointArr.set(h.tempArr2,3*i);if(this.eVal&&this.eVal.walker)for(i=this.eVal.subCoordsZ.length;i--;)this.eVal.updateSubVertexRebuild(i);d.bindBuffer(d.ARRAY_BUFFER,this.eVal.editBuffer),d.bufferData(d.ARRAY_BUFFER,this.eVal.editLineTypedArr,d.STATIC_DRAW),d.bindBuffer(d.ARRAY_BUFFER,this.eVal.editBufferForMainPoint),d.bufferData(d.ARRAY_BUFFER,this.eVal.editLineTypedMainPointArr,d.STATIC_DRAW)}else if(this.lineVertBuff){var f=this.solid3D?o.FDRAWED_MIN_CELL_MESH_DELTADEG*(l.z.EXTRA_DEG_K/2):o.FDRAWED_MIN_CELL_MESH_DELTADEG*l.z.EXTRA_DEG_K,p=0,F=0,y=null;a===l.u.Z_GROUND_FOLLOW&&(y=o.XnCaoF(h.Limit));var A=0;for(this.buildStartPoint(),i=t.length/2;i--;){if(n.SetV(t[2*i],t[2*i+1]),n.ConvertDegreeToRadyan(),a===l.u.Z_MSL)u.b.GeoTo3DP(n,l.z.GLOBE_RADIUS+e[i]*l.z.GLOBE_RADIUS_K,c);else if(a===l.u.Z_GROUND_PERVERTEX)F=o.XyecYr(n,!1),u.b.GeoTo3DP(n,l.z.GLOBE_RADIUS+F+e[i]*l.z.GLOBE_RADIUS_K,c);else if(a===l.u.Z_GROUND_FOLLOW){A=2*i,F=o.XjTSzm(t[A],t[A+1],!1,y),F=u.b.Max(F,o.XjTSzm(t[A]-f,t[A+1],!1,y)),F=u.b.Max(F,o.XjTSzm(t[A]+f,t[A+1],!1,y)),F=u.b.Max(F,o.XjTSzm(t[A],t[A+1]-f,!1,y)),F=u.b.Max(F,o.XjTSzm(t[A],t[A+1]+f,!1,y)),F=u.b.Max(F,o.XjTSzm(t[A]-f,t[A+1]-f,!1,y)),F=u.b.Max(F,o.XjTSzm(t[A]+f,t[A+1]-f,!1,y)),F=u.b.Max(F,o.XjTSzm(t[A]-f,t[A+1]+f,!1,y)),F=u.b.Max(F,o.XjTSzm(t[A]+f,t[A+1]+f,!1,y)),this.style.depthTest&&!this.obj.dontUseCot&&(p=this.solid3D?o.FDRAWED_MIN_CELL_RES_METERS*(l.z.EXTRA_Z_COT_K/2):o.FDRAWED_MIN_CELL_RES_METERS*l.z.EXTRA_Z_COT_K);p=0;this.style.depthTest&&(p=o.FDRAWED_MIN_CELL_RES_METERS*l.z.EXTRA_Z_COT_K),n.SetV(t[A],t[A+1]),n.ConvertDegreeToRadyan(),u.b.GeoTo3DP(n,l.z.GLOBE_RADIUS+F+e[0]*l.z.GLOBE_RADIUS_K+p,c)}c.SetVecSub(h.startP,c),h.tempArr[0]=c.x,h.tempArr[1]=c.y,h.tempArr[2]=c.z,this.lineTypedArr.set(h.tempArr,3*i)}d.bindBuffer(d.ARRAY_BUFFER,this.lineVertBuff),d.bufferData(d.ARRAY_BUFFER,this.lineTypedArr,d.STATIC_DRAW)}}},{key:"BuildStartPoint",value:function(){this.obj.userObj.tempp2d.SetV(this.coords[0],this.coords[1]),this.obj.userObj.tempp2d.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(this.obj.userObj.tempp2d,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.TempGeo3C):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.obj.userObj.tempp2d,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(this.obj.userObj.tempp2d,!1)+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.TempGeo3C),this.obj.startP.SetP(this.obj.TempGeo3C)}},{key:"FindAngles",value:function(){if(this.style.showAngles)for(var t=0;t<this.coordsZ.length;t++)this.obj.angleOfTwoPoint[t]=u.b.AzimuthOf2PointsOnSphereForAngText(this.coords[2*t],this.coords[2*t+1],this.coords[2*(t+1)],this.coords[2*(t+1)+1])}},{key:"Draw2d",value:function(){this.style.showDistances!==l.s.SHOW2D&&this.style.showDistances!==l.s.SHOW3D||(this.totalDistance=0,this.eVal?this.obj.userObj.FGlobe.FLastEditingCallback.show_walker?(this.Dist.DrawDist2d(),this.Dist.DrawWalkerDist(),this.eVal.lastSnapIndex,this.eVal.walkerGeo.isValid?this.Dist.DrawTotalWalker():this.Dist.DrawTotal()):(this.Dist.DrawDist2d(),this.Dist.DrawTotal()):(this.Dist.DrawDist2d(),this.Dist.DrawWalkerDist(),this.Dist.DrawTotal()));if(this.style.showVertex&&this.VertexNumber.DrawText(),this.style.showAngles&&(this.Angle.DrawAngle(),this.FEditing)){var t=this.obj.userObj.FGlobe.FLastEditingCallback,e=t.show_walker,i=t.can_change;e&&i.vertex&&this.Angle.DrawWalkerAngle()}if(this.hasFontIcon&&!this.FEditing){var r=this.obj;r.Geo3D.SetVecSub(r.Fp2T,r.Geo3C),r.userObj.FGlobe.Xh5WFD(r.Geo3D)?r.userObj.FGlobe.X9oM46(r.Geo3D,r.CanvasPoint):r.CanvasPoint.isValid=!1,r.CanvasPoint.isValid&&this.checkFontPacket()}}},{key:"Draw3d",value:function(){var t=this.obj,e=this.obj.userObj.FGlobe,i=this.obj.gl;if(t.Geo3DS.SetVecSub(t.Fp2T,t.startP),e.GLU.pushModel(),e.GLU.Translate(t.Geo3DS.x,t.Geo3DS.y,t.Geo3DS.z),e.GLU.setModelToGL(e.P3DmodelViewMatrixLoc),i.uniform1i(e.P3DisPoint,0),this.style.depthTest&&i.enable(i.DEPTH_TEST),this.FEditing){if(this.eVal.drawShadowLine(),i.bindBuffer(i.ARRAY_BUFFER,this.eVal.editBuffer),i.vertexAttribPointer(e.P3DvertexPos,3,i.FLOAT,!1,0,0),t.tempBorderColor=this.style.__borderColor.slice(),t.tempBorderColor[3]*=t.userObj.opacity,i.uniform4fv(e.P3DOpacityLoc,t.tempBorderColor),this.style.border)if(-1===e.cursorIndex&&this.eVal.walkerGeo.isValid){if(this.coordsZ.length){var r=e.FLastEditingCallback,s=r.show_walker;r.can_change.vertex&&s?i.drawArrays(i.LINE_STRIP,0,this.coordsZ.length):i.drawArrays(i.LINE_STRIP,0,this.coordsZ.length-1)}}else this.coordsZ.length-1>0&&i.drawArrays(i.LINE_STRIP,0,this.coordsZ.length-1);this.eVal.walker&&this.coordsZ.length&&(this.style.depthTest&&i.disable(i.DEPTH_TEST),this.eVal.FHighlight?(i.uniform1i(e.P3DisPoint,1),i.uniform4fv(e.P3DOpacityLoc,this.eVal.subColor),i.uniform1f(e.P3DPointSize,this.eVal.subSize),this.eVal.drawSubPoint(),i.uniform4fv(e.P3DOpacityLoc,this.eVal.mainHColor),i.uniform1f(e.P3DPointSize,this.eVal.mainSize),this.eVal.drawMainPoint(),e.FLastEditingCallback.can_change.Z&&(i.uniform4fv(e.P3DOpacityLoc,this.eVal.zColor),i.uniform1f(e.P3DPointSize,this.eVal.zSize),this.eVal.drawZPoint())):(i.uniform1i(e.P3DisPoint,1),i.uniform4fv(e.P3DOpacityLoc,this.eVal.mainNColor),i.uniform1f(e.P3DPointSize,this.eVal.mainSize),this.eVal.drawMainPoint()))}else this.lineVertBuff&&this.style.border&&(i.bindBuffer(i.ARRAY_BUFFER,this.lineVertBuff),i.vertexAttribPointer(e.P3DvertexPos,3,i.FLOAT,!1,0,0),t.tempBorderColor=this.style.__borderColor.slice(),t.tempBorderColor[3]*=t.userObj.opacity,i.uniform4fv(e.P3DOpacityLoc,t.tempBorderColor),this.coordsZ.length&&i.drawArrays(i.LINE_STRIP,0,t.mainCoordLen/2)),this.style.depthTest&&i.disable(i.DEPTH_TEST);e.GLU.popModel()}},{key:"FindLimitsAndCenter",value:function(){if(this.obj.Limit.Clear(),this.obj.Limit.ExpandByCoords(this.coords),this.obj.Limit.GetCenterPoint(this.center),this.style.zMode===l.u.Z_GROUND_FOLLOW)this.center.z=this.coordsZ[0];else{for(var t=0,e=this.coordsZ.length;e--;)t+=this.coordsZ[e];this.center.z=t/this.coordsZ.length}}},{key:"FindFollowGroundCoords",value:function(){for(var t,e,i,r,s=this.obj.userObj.FGlobe.FDRAWED_MIN_CELL_MESH_DELTADEG/2,o=0;o<this.coords.length/2-1;o++){t=this.coords[2*o],e=this.coords[2*o+1],i=this.coords[2*o+2],r=this.coords[2*o+3],this.obj.gf_coords.push(t),this.obj.gf_coords.push(e);var n=u.b.Dist2DV(t,e,i,r),a=n/s;a>l.z.FOLLOW_GROUND_STEP_LIMIT&&(a=l.z.FOLLOW_GROUND_STEP_LIMIT,s=n/l.z.FOLLOW_GROUND_STEP_LIMIT);for(var h=1;h<a-1;h++){var d=u.b.CalcPositionV(n,t,e,i,r,h*s,0);this.obj.gf_coords.push(d[0]),this.obj.gf_coords.push(d[1])}this.obj.gf_coords.push(i),this.obj.gf_coords.push(r)}}},{key:"ReBuildReq",value:function(){if(this.style.zMode===l.u.Z_GROUND_FOLLOW&&this.obj.userObj.FGlobe.FDrawedWorldDeg.CSIsCommonRegionT(this.obj.Limit)&&this.obj.userObj.FGlobe.FDRAWED_MAX_LEVEL>=l.z.FBUILD_REQLOD){this.build(!0)}}},{key:"PrepareFollowGround",value:function(){if(this.style.zMode===l.u.Z_GROUND_FOLLOW){this.obj.cdt2dWorker&&(this.obj.cdt2dWorker.terminate(),delete this.obj.cdt2dWorker),this.obj.buildForFollowGround=!1;this.build(!1),this.obj.TriIndex=_(this.coords,null,2),this.obj.TriIndexCnt=this.obj.TriIndex.length,this.obj.beginEditTriangle=!0}}},{key:"BeginEdit",value:function(t,e){this.prepareFollowGround(),this.setEval(!0);var i=this.eVal,r=this.obj.gl;i.expandLimit(null,null,!0),i.lastMouseLong=this.center.x,i.lastMouseLat=this.center.y,i.findStartRadius(),i.setDragPoints(),i.setOffsetDragPoints(),this.buildEditIcons(i),i.walker=t,i.isFreeDrawing=e,this.FEditing=!0,this.clear(),r.bindBuffer(r.ARRAY_BUFFER,i.editSubVertBuffer),r.bufferData(r.ARRAY_BUFFER,i.editLineTypedArrSubVert,r.DYNAMIC_DRAW);for(var s=this.coordsZ.length;s--;)i.editLineTypedArr[3*s]=this.lineTypedArr[3*s],i.editLineTypedArr[3*s+1]=this.lineTypedArr[3*s+1],i.editLineTypedArr[3*s+2]=this.lineTypedArr[3*s+2],s<this.coordsZ.length-1&&i.createSubVertex(s);switch(this.style.showDistances){case l.s.SHOW2D:for(s=0;s<this.coordsZ.length;s++)this.obj.distanceOfTwoPoint[s]=this.find2DDistance(this.coords[2*(s+1)],this.coords[2*(s+1)+1],this.coords[2*s],this.coords[2*s+1],s);break;case l.s.SHOW3D:for(s=0;s<this.coordsZ.length;s++)this.obj.distanceOfTwoPoint[s-1]=this.find3DDistance(this.coords[2*s],this.coords[2*s+1],this.coordsZ[s],this.coords[2*(s-1)],this.coords[2*(s-1)+1],this.coordsZ[s-1])}if(this.style.showAngles)for(s=0;s<this.coordsZ.length;s++)this.obj.angleOfTwoPoint[s]=u.b.AzimuthOf2PointsOnSphereForAngText(this.coords[2*s],this.coords[2*s+1],this.coords[2*(s+1)],this.coords[2*(s+1)+1]);r.bindBuffer(r.ARRAY_BUFFER,i.editBuffer),r.bufferData(r.ARRAY_BUFFER,i.editLineTypedArr,r.DYNAMIC_DRAW),r.bufferSubData(r.ARRAY_BUFFER,0,this.lineTypedArr),r.bindBuffer(r.ARRAY_BUFFER,i.editBufferForMainPoint),r.bufferData(r.ARRAY_BUFFER,i.editLineTypedMainPointArr,r.DYNAMIC_DRAW),this.build()}},{key:"EndEdit",value:function(){var t=this.eVal,e=this.obj.gl;t.walker&&this.coordsZ.length&&(t.deleteCoord(this.coordsZ.length-1),t.walker=!1),this.coordsZ.length>=2?(this.lineVertBuff=this.obj.gl.createBuffer(),this.obj.buildForFollowGround||(this.lineTypedArr=t.editLineTypedArr.slice(0,3*this.coordsZ.length)),e.bindBuffer(e.ARRAY_BUFFER,this.lineVertBuff),e.bufferData(e.ARRAY_BUFFER,this.lineTypedArr,this.obj.gl.STATIC_DRAW)):(this.coords.length=0,this.coordsZ.length=0,this.hasFontIcon=!1),this.savedSubCoords=t.subCoords.slice(),this.savedSubCoordsZ.length=0;for(var i=0;i<this.coordsZ.length-1;i++)this.savedSubCoordsZ[i]=(this.findDistZ(i)+this.findDistZ(i+1))/2;this.savedSubCoordsZ[this.savedSubCoordsZ.length]=(this.findDistZ(this.coordsZ.length-1)+this.findDistZ(0))/2,t.editLineTypedArr=null,t.editLineTypedArrSubVert=null,t.isFreeDrawing=!1,this.FEditing=!1,e.deleteBuffer(t.editBuffer),e.deleteBuffer(t.editSubVertBuffer),this.setEval(!1),this.style.zMode===l.u.Z_GROUND_FOLLOW&&this.style.border?this.obj.userObj.FGlobe.FDRAWED_MAX_LEVEL>l.z.FBUILD_REQLOD?(this.fontBuild(),this.reBuildReq()):(this.obj.mainCoordLen=this.coords.length,this.build(!1)):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_MSL||(this.obj.mainCoordLen=this.coords.length,this.build(!1))}},{key:"SetEval",value:function(t){t?this.eVal=new b(this,this.obj.gl):delete this.eVal}},{key:"GetAsJSON",value:function(){var t=y.GetStyle(this.style),e={type:this.type,Fid:this.Fid,coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),style:t};return this.attribs&&(e.attribs=JSON.parse(JSON.stringify(this.attribs))),this.FEditing&&(e.coords.pop(),e.coords.pop(),e.coordsZ.pop()),e}}]),t}()),w=i(19);function M(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function U(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?M(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):M(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var k=new(function(){function t(){n()(this,t),this.CheckHasFontIcon=y.CheckHasFontIcon,this.UpdateFont=y.UpdateFont,this.CheckFontPacket=y.CheckFontPacket,this.Rebuild=y.Rebuild,this.BuildEditIcons=y.BuildEditIcons,this.StyleChanged=y.StyleChanged,this.FindDistances=y.FindDistances,this.FindCenterZ=y.FindCenterZ,this.FindSubZ=y.FindSubZ,this.FindSavedSubCoords=y.FindSavedSubCoords,this.Find2DDistance=y.Find2DDistance,this.Find3DDistance=y.Find3DDistance,this.CoordToGeo3C=y.CoordToGeo3C,this.FindLod=y.FindLod,this.FindDistZ=y.FindDistZ,this.DrawWalker=y.DrawWalker}return h()(t,[{key:"Clear",value:function(t){this.polygonVertBuff&&(this.obj.gl.deleteBuffer(this.polygonVertBuff),this.polygonVertBuff=null),this.polygonIndexBuffer&&(this.obj.gl.deleteBuffer(this.polygonIndexBuffer),this.polygonIndexBuffer=null),t&&this.polygonSideVertBuff&&(this.obj.gl.deleteBuffer(this.polygonSideVertBuff),this.polygonSideVertBuff=null,this.obj.gl.deleteBuffer(this.polygonTopVertBuff),this.polygonTopVertBuff=null)}},{key:"SaveInfo",value:function(){this.SavedInfo={style:U({},this.style),coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),_coords:this._coords.slice(),_coordsZ:this._coordsZ.slice(),center:U({},this.center),sideBorderCoordLen:this.obj.sideBorderCoordLen,surfaceBorderCoordLen:this.obj.surfaceBorderCoordLen,objLimit:U({},this.obj.Limit),polygonTypedArr:this.polygonTypedArr.slice()},this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.SavedInfo.gf_mainCoordLen=this.obj.gf_mainCoordLen,this.SavedInfo.indexSideMainCoords=this.obj.indexSideMainCoords.slice())}},{key:"RestoreInfo",value:function(){Object.assign(this.style,this.SavedInfo.style),Object.assign(this.obj.Limit,this.SavedInfo.objLimit),Object.assign(this.center,this.SavedInfo.center),this.coords=this.SavedInfo.coords.slice(),this.coordsZ=this.SavedInfo.coordsZ.slice(),this._coords=this.SavedInfo._coords.slice(),this._coordsZ=this.SavedInfo._coordsZ.slice(),this.obj.sideBorderCoordLen=this.SavedInfo.sideBorderCoordLen,this.obj.surfaceBorderCoordLen=this.SavedInfo.surfaceBorderCoordLen,this.polygonTypedArr=this.SavedInfo.polygonTypedArr.slice(),this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.obj.indexSideMainCoords=this.SavedInfo.indexSideMainCoords.slice(),this.obj.gf_mainCoordLen=this.SavedInfo.gf_mainCoordLen),this.style.filled&&(this.polygonIndexBuffer||(this.polygonIndexBuffer=this.obj.gl.createBuffer()),this.buildTriangle()),this.updateFont()}},{key:"ReBuildReq",value:function(){for(var t=this.obj.FGlobe,e=this.obj,i=t.FDrawedCells.slice(),r=[],s=i.length;s--;)e.Limit.CSIsCommonRegionT(i[s].FCellTGW)&&r.push(i[s]);e.lastOverlapedCells&&r.length===e.lastOverlapedCells.length&&e.userObj.CellSames(e.lastOverlapedCells,r)||(e.cdt2dWorker?(e.cdt2dWorker.terminate(),e.cdt2dWorker=null,delete e.cdt2dWorker,e.lastOverlapedCells=r.slice(),e.cdt2dWorker=new Worker(w.a),e.cdt2dWorker.onmessage=this.cdt2dWorkerOnMessage):t.currentWorkerCount<=l.z.MAX_WORKER_COUNT&&(this.setCoordLenForDraw(l.q.lowLod),e.lastOverlapedCells=r.slice(),e.cdt2dWorker=new Worker(w.a),e.cdt2dWorker.onmessage=this.cdt2dWorkerOnMessage,t.currentWorkerCount++,e.userObj.currentWorkerCount++))}},{key:"Build",value:function(t){var e=this.obj;if(e.LOD=u.b.Max(this.findLod(e.Limit)-3,0),t){if(e.buildForFollowGround=!0,this.style.filled){if(e.gf_coords.length=0,this.findFollowGroundCoords(),e.gf_mainCoordLen=e.gf_coords.length,this.addSteiners(),this.polygonTypedArr=new Float32Array(e.gf_coords.length/2*3),e.gf_coordsZ.length=e.gf_coords.length/2,this.solid3D){if(this.polygonTopTypedArr=new Float32Array(e.gf_coords.length/2*3),this.polygonSideTypeArr=new Float32Array(3*(e.gf_mainCoordLen/2*2+2)),e.gf_coordsZ.fill(this.coordsZ[0]),this.obj.ccw)var i=this._heights[this._heights.length-1];else i=this._heights[0];this._heights.length=e.gf_coordsZ.length,this._heights.fill(i)}else e.gf_coordsZ.fill(this.coordsZ[0]);this.coordBuild(!0),this.buildTriangle(e.gf_coords)}else if(this.style.border){if(e.gf_coords.length=0,this.findFollowGroundCoords(),e.gf_mainCoordLen=e.gf_coords.length,this.polygonTypedArr=new Float32Array(e.gf_mainCoordLen/2*3),e.gf_coordsZ.length=e.gf_coords.length/2,this.solid3D){if(this.polygonTopTypedArr=new Float32Array(e.gf_mainCoordLen/2*3),this.polygonSideTypeArr=new Float32Array(3*(e.gf_mainCoordLen/2*2+2)),e.gf_coordsZ.fill(this.coordsZ[0]),this.obj.ccw)i=this._heights[this._heights.length-1];else i=this._heights[0];this._heights.length=e.gf_coordsZ.length,this._heights.fill(i)}else e.gf_coordsZ.fill(this.coordsZ[0]);this.coordBuild(!1),e.BuffDataisOk=!0}}else if(this.coords.length&&this.coordsZ.length){this.polygonTypedArr=new Float32Array(this.coords.length/2*3),e.startP=new u.w(0,0,0),this.fontBuild();this.coordBuild(!1)}}},{key:"FindFollowGroundCoords",value:function(){var t,e,i,r,s=this.obj.FGlobe.FDRAWED_MIN_CELL_MESH_DELTADEG/2,o=this.obj,n=this._coords,a=o.gf_coords;o.gf_indexSideMainCoords=[];for(var h=0;h<this._coords.length/2-1;h++){t=n[2*h],e=n[2*h+1],i=n[2*h+2],r=n[2*h+3],a.push(t),a.push(e),(p=(f=u.b.Dist2DV(t,e,i,r))/s)>l.z.FOLLOW_GROUND_STEP_LIMIT&&(p=l.z.FOLLOW_GROUND_STEP_LIMIT,s=f/l.z.FOLLOW_GROUND_STEP_LIMIT);for(var d=1;d<p-1;d++){var c=u.b.CalcPositionV(f,t,e,i,r,d*s,0);a.push(c[0]),a.push(c[1])}o.gf_indexSideMainCoords.push(a.length/2)}t=n[n.length-2],e=n[n.length-1],i=n[0],r=n[1],a.push(t),a.push(e),o.gf_indexSideMainCoords.push((a.length-2)/2);var f,p=(f=u.b.Dist2DV(t,e,i,r))/s;for(d=1;d<p-1;d++){c=u.b.CalcPositionV(f,t,e,i,r,d*s,0);a.push(c[0]),a.push(c[1])}}},{key:"AddSteiners",value:function(){for(var t,e=0,i=0,r={},s=this.obj,o=s.lastOverlapedCells.length;o--;)for(var n=s.lastOverlapedCells[o],a=n.FCellTGW.LL.y,h=n.FCellTGW.LL.x,l=n.FMeshDeltaDegW,u=n.FMeshDeltaDegH,d=0;d<5;d++){e=a+l*d;for(var c=0;c<5;c++)i=h+u*c,r[t="".concat(e.toFixed(12),",").concat(i.toFixed(12))]||(r[t]=!0,s.gf_coords.push(e),s.gf_coords.push(i))}}},{key:"BuildTriangle",value:function(t){var e=this.obj,i=this.obj.gl;t?e.cdt2dWorker&&e.cdt2dWorker.postMessage([t.slice(),e.gf_mainCoordLen]):(e.TriIndex=_(this._coords,null,2),e.TriIndexCnt=e.TriIndex.length,e.TriIndexCnt&&(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.polygonIndexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.TriIndex),i.STATIC_DRAW)))}},{key:"Cdt2dWorkerOnMessage",value:function(t){if("loaded"==t.data[0]){this.build(!0)}else if("catch error"===t.data[0])this.obj.cdt2dWorker.terminate(),this.obj.cdt2dWorker=null,delete this.obj.cdt2dWorker,--this.obj.FGlobe.currentWorkerCount,--this.obj.userObj.currentWorkerCount,l.z.DEBUG_MODE&&alert("catch error");else{var e=this.obj;e.TriIndex=t.data.slice(),e.TriIndexCnt=e.TriIndex.length,e.sideBorderCoordLen=e.gf_mainCoordLen,e.cdt2dWorker.terminate(),e.cdt2dWorker=null,delete e.cdt2dWorker,--e.FGlobe.currentWorkerCount,--e.userObj.currentWorkerCount,e.BuffDataisOk=!0,e.FGlobe.DrawRender()}}},{key:"FontBuild",value:function(){var t=this.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.style.zMode,s=this.obj.Geo3C;e.SetP(this.center),e.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?this.solid3D?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+(this.heights[0]+this.center.z)*l.z.GLOBE_RADIUS_K,s):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.center.z*l.z.GLOBE_RADIUS_K,s):r!==l.u.Z_GROUND_PERVERTEX&&r!==l.u.Z_GROUND_FOLLOW||(this.solid3D?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+(this.center.z+this.heights[0])*l.z.GLOBE_RADIUS_K,s):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+this.center.z*l.z.GLOBE_RADIUS_K,s))}},{key:"CoordBuild",value:function(t){this.FEditing?this.fillBuffers(this.eVal.editPolygonTypedArr,this.eVal.editBuffer):this.polygonVertBuff&&(this.buildStartPoint(),this.fillBuffers(this.polygonTypedArr,this.polygonVertBuff,t))}},{key:"FillBuffers",value:function(t,e,i){var r=this.obj.gl,s=0;if(this.solid3D){if(this.fillTypeArrays(t,!0),r.bindBuffer(r.ARRAY_BUFFER,this.polygonTopVertBuff),this.FEditing?r.bufferData(r.ARRAY_BUFFER,this.eVal.editTopPolygonTypedArr,r.STATIC_DRAW):i||r.bufferData(r.ARRAY_BUFFER,this.polygonTopTypedArr,r.STATIC_DRAW),this.eVal&&this.eVal.walker)for(s=this.eVal.subCoordsZ.length;s--;)this.eVal.updateSubVertexRebuild(s);this.fillSideTypeArray(t),this.FEditing?(r.bindBuffer(r.ARRAY_BUFFER,this.eVal.editSideVertBuffer),r.bufferData(r.ARRAY_BUFFER,this.eVal.editSidePolygonTypedArr,r.STATIC_DRAW)):i||(r.bindBuffer(r.ARRAY_BUFFER,this.polygonSideVertBuff),r.bufferData(r.ARRAY_BUFFER,this.polygonSideTypeArr,r.STATIC_DRAW)),i||(r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW))}else{if(this.eVal&&this.eVal.walker){this.obj.userObj.FGlobe.FLastEditingCallback.show_walker;for(s=this.eVal.subCoordsZ.length;s--;)this.eVal.updateSubVertexRebuild(s)}this.fillTypeArrays(t,!1),i||(r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW))}}},{key:"FillTypeArrays",value:function(t,e){var i,r,s=0;!this.FEditing&&this.obj.buildForFollowGround?(i=this.obj.gf_coords.slice(),r=this.obj.gf_coordsZ.slice()):this.FEditing?(i=this.coords,r=this.coordsZ):(i=this._coords,r=this._coordsZ);var o=this.obj,n=o.tempArr,a=o.tempArr2,h=o.TempGeo3C,d=o.gl,c=this.style.zMode,f=o.userObj,p=f.FGlobe,F=f.tempp2d,y=this.solid3D?p.FDRAWED_MIN_CELL_MESH_DELTADEG*(l.z.EXTRA_DEG_K/2):p.FDRAWED_MIN_CELL_MESH_DELTADEG*l.z.EXTRA_DEG_K,A=!this.FEditing&&this.fixedTop;A&&this.findFixedTopMax(i,r);var g=0,C=0;if(this.FEditing){for(var b=r.length;b--;)s=2*b,F.SetV(i[s],i[s+1]),F.ConvertDegreeToRadyan(),c===l.u.Z_MSL?(C=l.z.GLOBE_RADIUS,u.b.GeoTo3DP(F,C+r[b]*l.z.GLOBE_RADIUS_K,h)):c===l.u.Z_GROUND_PERVERTEX?(C=p.XyecYr(F,!1)+l.z.GLOBE_RADIUS,u.b.GeoTo3DP(F,C+r[b]*l.z.GLOBE_RADIUS_K,h)):c===l.u.Z_GROUND_FOLLOW&&(C=p.XyecYr(F,!1)+l.z.GLOBE_RADIUS,u.b.GeoTo3DP(F,C+r[b]*l.z.GLOBE_RADIUS_K,h)),h.SetVecSub(o.startP,h),n[0]=h.x,n[1]=h.y,n[2]=h.z,t.set(n,3*b),a[0]=h.x*C/(C+r[b]*l.z.GLOBE_RADIUS_K),a[1]=h.y*C/(C+r[b]*l.z.GLOBE_RADIUS_K),a[2]=h.z*C/(C+r[b]*l.z.GLOBE_RADIUS_K),this.eVal.editPolygonTypedMainPointArr.set(a,3*b),e&&(A?u.b.GeoTo3DP(F,o.fixedTopMax+g,h):this.fixedHeights?u.b.GeoTo3DP(F,C+(r[b]+this.heights[0])*l.z.GLOBE_RADIUS_K+g,h):u.b.GeoTo3DP(F,C+(r[b]+this.heights[b])*l.z.GLOBE_RADIUS_K+g,h),h.SetVecSub(o.startP,h),n[0]=h.x,n[1]=h.y,n[2]=h.z,this.eVal.editTopPolygonTypedArr.set(n,3*b));d.bindBuffer(d.ARRAY_BUFFER,this.eVal.editBufferForMainPoint),d.bufferData(d.ARRAY_BUFFER,this.eVal.editPolygonTypedMainPointArr,d.STATIC_DRAW)}else{var T=null;c===l.u.Z_GROUND_FOLLOW&&(T=p.XnCaoF(o.Limit));for(b=r.length;b--;)s=2*b,F.SetV(i[s],i[s+1]),F.ConvertDegreeToRadyan(),c===l.u.Z_MSL?u.b.GeoTo3DP(F,l.z.GLOBE_RADIUS+r[b]*l.z.GLOBE_RADIUS_K,h):c===l.u.Z_GROUND_PERVERTEX?(C=p.XyecYr(F,!1),u.b.GeoTo3DP(F,C+l.z.GLOBE_RADIUS+r[b]*l.z.GLOBE_RADIUS_K,h)):c===l.u.Z_GROUND_FOLLOW&&(C=p.XjTSzm(i[s],i[s+1],!1,T),s>=o.gf_mainCoordLen&&(C=u.b.Max(C,p.XjTSzm(i[s]-y,i[s+1],!1,T)),C=u.b.Max(C,p.XjTSzm(i[s]+y,i[s+1],!1,T)),C=u.b.Max(C,p.XjTSzm(i[s],i[s+1]-y,!1,T)),C=u.b.Max(C,p.XjTSzm(i[s],i[s+1]+y,!1,T)),C=u.b.Max(C,p.XjTSzm(i[s]-y,i[s+1]-y,!1,T)),C=u.b.Max(C,p.XjTSzm(i[s]+y,i[s+1]-y,!1,T)),C=u.b.Max(C,p.XjTSzm(i[s]-y,i[s+1]+y,!1,T)),C=u.b.Max(C,p.XjTSzm(i[s]+y,i[s+1]+y,!1,T))),g=this.style.depthTest&&!o.dontUseCot&&s>=o.gf_mainCoordLen?this.solid3D?p.FDRAWED_MIN_CELL_RES_METERS*(l.z.EXTRA_Z_COT_K/2):p.FDRAWED_MIN_CELL_RES_METERS*l.z.EXTRA_Z_COT_K:0,F.SetV(i[s],i[s+1]),F.ConvertDegreeToRadyan(),u.b.GeoTo3DP(F,l.z.GLOBE_RADIUS+C+r[0]*l.z.GLOBE_RADIUS_K+g,h)),h.SetVecSub(o.startP,h),n[0]=h.x,n[1]=h.y,n[2]=h.z,t.set(n,3*b),e&&(A?u.b.GeoTo3DP(F,l.z.GLOBE_RADIUS+o.fixedTopMax+g,h):this.fixedHeights?u.b.GeoTo3DP(F,l.z.GLOBE_RADIUS+C+(r[b]+this._heights[0])*l.z.GLOBE_RADIUS_K+g,h):u.b.GeoTo3DP(F,l.z.GLOBE_RADIUS+C+(r[b]+this._heights[b])*l.z.GLOBE_RADIUS_K+g,h),h.SetVecSub(o.startP,h),n[0]=h.x,n[1]=h.y,n[2]=h.z,this.polygonTopTypedArr.set(n,3*b))}}},{key:"FillSideTypeArray",value:function(t){var e;if(this.FEditing){var i=this.eVal;e=this.coordsZ.length;for(var r=0;r<e;r++)i.editSidePolygonTypedArr[6*r]=t[3*r],i.editSidePolygonTypedArr[6*r+1]=t[3*r+1],i.editSidePolygonTypedArr[6*r+2]=t[3*r+2],i.editSidePolygonTypedArr[6*r+3]=i.editTopPolygonTypedArr[3*r],i.editSidePolygonTypedArr[6*r+4]=i.editTopPolygonTypedArr[3*r+1],i.editSidePolygonTypedArr[6*r+5]=i.editTopPolygonTypedArr[3*r+2];i.editSidePolygonTypedArr[i.editSidePolygonTypedArr.length-6]=t[0],i.editSidePolygonTypedArr[i.editSidePolygonTypedArr.length-5]=t[1],i.editSidePolygonTypedArr[i.editSidePolygonTypedArr.length-4]=t[2],i.editSidePolygonTypedArr[i.editSidePolygonTypedArr.length-3]=i.editTopPolygonTypedArr[0],i.editSidePolygonTypedArr[i.editSidePolygonTypedArr.length-2]=i.editTopPolygonTypedArr[1],i.editSidePolygonTypedArr[i.editSidePolygonTypedArr.length-1]=i.editTopPolygonTypedArr[2]}else{e=this.obj.buildForFollowGround?this.obj.gf_mainCoordLen/2:this.coordsZ.length;for(r=0;r<e;r++)this.polygonSideTypeArr[6*r]=t[3*r],this.polygonSideTypeArr[6*r+1]=t[3*r+1],this.polygonSideTypeArr[6*r+2]=t[3*r+2],this.polygonSideTypeArr[6*r+3]=this.polygonTopTypedArr[3*r],this.polygonSideTypeArr[6*r+4]=this.polygonTopTypedArr[3*r+1],this.polygonSideTypeArr[6*r+5]=this.polygonTopTypedArr[3*r+2];this.polygonSideTypeArr[this.polygonSideTypeArr.length-6]=t[0],this.polygonSideTypeArr[this.polygonSideTypeArr.length-5]=t[1],this.polygonSideTypeArr[this.polygonSideTypeArr.length-4]=t[2],this.polygonSideTypeArr[this.polygonSideTypeArr.length-3]=this.polygonTopTypedArr[0],this.polygonSideTypeArr[this.polygonSideTypeArr.length-2]=this.polygonTopTypedArr[1],this.polygonSideTypeArr[this.polygonSideTypeArr.length-1]=this.polygonTopTypedArr[2]}}},{key:"FindFixedTopMax",value:function(t,e){var i=this.obj,r=this.style.zMode,s=i.userObj,o=s.FGlobe,n=s.tempp2d,a=0,h=0,d=0,c=0,f=0,p=this._heights.slice();if(r===l.u.Z_GROUND_FOLLOW){for(c=e.length;c--;)f=2*c,n.SetV(t[f],t[f+1]),n.ConvertDegreeToRadyan(),h=u.b.Max(h,o.XyecYr(n,!1)),d=p[0];a=e[0]}else if(r===l.u.Z_GROUND_PERVERTEX)for(c=e.length;c--;)f=2*c,n.SetV(t[f],t[f+1]),a=u.b.Max(a,e[c]),n.ConvertDegreeToRadyan(),h=u.b.Max(h,o.XyecYr(n,!1)),d=u.b.Max(d,p[c]);else if(r===l.u.Z_MSL)for(c=e.length;c--;)f=2*c,n.SetV(t[f],t[f+1]),a=u.b.Max(a,e[c]),n.ConvertDegreeToRadyan(),d=u.b.Max(d,p[c]);i.fixedTopMax=h+(a+d)*l.z.GLOBE_RADIUS_K}},{key:"BuildStartPoint",value:function(){var t=this.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.style.zMode;e.SetV(this.coords[0],this.coords[1]),e.ConvertDegreeToRadyan(),r===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.TempGeo3C):r!==l.u.Z_GROUND_PERVERTEX&&r!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.TempGeo3C),this.obj.startP.SetP(this.obj.TempGeo3C)}},{key:"RepairHeights",value:function(){if(this.fixedHeights)this.heights?0===this.heights.length?this.heights.push(0):this.heights.length>1&&(this.heights.length=1):this.heights=[0];else if(this.heights)if(this.coordsZ.length>this.heights.length)for(var t=this.heights.length;t<this.coordsZ.length;t++)this.heights.push(0);else this.coordsZ.length<this.heights.length&&(this.heights.length=this.coordsZ.length);else this.heights=[],this.heights.length=this.coordsZ.length,this.heights.fill(0)}},{key:"Draw2d",value:function(){this.style.showDistances!==l.s.SHOW2D&&this.style.showDistances!==l.s.SHOW3D||(this.totalDistance=0,this.eVal&&this.obj.userObj.FGlobe.FLastEditingCallback.show_walker?(this.Dist.DrawDist2d(),this.Dist.DrawWalkerDist(),this.eVal.lastSnapIndex,this.eVal.walkerGeo.isValid?this.Dist.DrawTotalWalker():this.Dist.DrawTotal()):(this.Dist.DrawDist2d(),this.Dist.DrawWalkerDist(),this.Dist.DrawTotal()));this.solid3D&&this.style.showHeights&&this.Height.DrawText(),this.style.showVertex&&this.VertexNumber.DrawText(),(this.style.showArea||this.style.showVolume)&&(this.FEditing&&this.coordsZ.length>3?this.AreaVolume.DrawAreaVolume():!this.FEditing&&this.coordsZ.length>=3&&this.AreaVolume.DrawAreaVolume());var t=this.obj,e=this.obj.FGlobe;this.hasFontIcon&&!this.FEditing&&(t.Geo3D.SetVecSub(t.Fp2T,t.Geo3C),e.Xh5WFD(t.Geo3D)?e.X9oM46(t.Geo3D,t.CanvasPoint):t.CanvasPoint.isValid=!1,t.CanvasPoint.isValid&&this.checkFontPacket())}},{key:"Draw3d",value:function(){var t=this.obj,e=t.gl,i=t.userObj.FGlobe;t.Geo3DS.SetVecSub(t.Fp2T,t.startP),i.GLU.pushModel(),i.GLU.Translate(t.Geo3DS.x,t.Geo3DS.y,t.Geo3DS.z),i.GLU.setModelToGL(i.P3DmodelViewMatrixLoc),e.uniform1i(i.P3DisPoint,0),this.style.depthTest&&e.enable(e.DEPTH_TEST),this.FEditing&&this.eVal.editBuffer?(this.eVal.drawShadowPolygon(),this.drawSurface(null,null,this.FEditing),this.solid3D&&this.drawSide(this.FEditing),this.eVal.walker&&this.coordsZ.length&&(this.style.depthTest&&e.disable(e.DEPTH_TEST),e.uniform1i(i.P3DisPoint,1),this.eVal.FHighlight?(e.uniform4fv(i.P3DOpacityLoc,this.eVal.mainHColor),e.uniform1f(i.P3DPointSize,this.eVal.mainSize),this.eVal.drawMainPoint(),e.uniform4fv(i.P3DOpacityLoc,this.eVal.subColor),e.uniform1f(i.P3DPointSize,this.eVal.subSize),this.eVal.drawSubPoint(),e.uniform4fv(i.P3DOpacityLoc,this.eVal.zColor),e.uniform1f(i.P3DPointSize,this.eVal.zSize),this.eVal.drawZPoint(),this.solid3D&&i.FLastEditingCallback.can_change.height&&(e.uniform4fv(i.P3DOpacityLoc,this.eVal.heightColor),e.uniform1f(i.P3DPointSize,this.eVal.heightSize),this.eVal.drawMainHeightPoint())):(e.uniform4fv(i.P3DOpacityLoc,this.eVal.mainNColor),e.uniform1f(i.P3DPointSize,this.eVal.mainSize),this.eVal.drawMainPoint()))):(this.polygonVertBuff&&(this.solid3D?(this.drawSide(),this.drawSurface(this.polygonTopVertBuff,this.polygonIndexBuffer,this.FEditing)):this.drawSurface(this.polygonVertBuff,this.polygonIndexBuffer,this.FEditing),this.style.border&&(t.BuffDataisOk&&(t.surfaceBorderCoordLen=t.gf_mainCoordLen/2),t.tempborderColor=this.style.__borderColor.slice(),t.tempborderColor[3]*=t.userObj.opacity,e.uniform4fv(i.P3DOpacityLoc,t.tempborderColor),e.drawArrays(e.LINE_LOOP,0,t.surfaceBorderCoordLen)),t.BuffDataisOk=!1),this.style.depthTest&&e.disable(e.DEPTH_TEST)),i.GLU.popModel()}},{key:"DrawSurface",value:function(t,e,i){var r=this.obj,s=this.obj.gl,o=r.userObj.FGlobe;if(i){var n=o.FLastEditingCallback,a=n.show_walker,h=n.can_change;s.bindBuffer(s.ARRAY_BUFFER,this.eVal.editBuffer),s.vertexAttribPointer(o.P3DvertexPos,3,s.FLOAT,!1,0,0),r.tempborderColor=this.style.__borderColor.slice(),r.tempborderColor[3]*=r.userObj.opacity,s.uniform4fv(o.P3DOpacityLoc,r.tempborderColor),this.style.border&&(-1===o.cursorIndex&&this.eVal.walkerGeo.isValid?this.coordsZ.length&&(h.vertex?a?s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length):s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length-1):this.coordsZ.length>3&&s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length-1)):this.coordsZ.length-1>0&&s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length-1)),this.polygonTopVertBuff&&(s.bindBuffer(s.ARRAY_BUFFER,this.polygonTopVertBuff),s.vertexAttribPointer(o.P3DvertexPos,3,s.FLOAT,!1,0,0),this.style.border&&(-1===o.cursorIndex&&this.eVal.walkerGeo.isValid?this.coordsZ.length&&(h.vertex?a?s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length):s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length-1):this.coordsZ.length>3&&s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length-1)):this.coordsZ.length-1>0&&s.drawArrays(s.LINE_LOOP,0,this.coordsZ.length-1)))}else this.style.cullFace||s.disable(s.CULL_FACE),s.bindBuffer(s.ARRAY_BUFFER,t),r.BuffDataisOk&&(this.solid3D?s.bufferData(s.ARRAY_BUFFER,this.polygonTopTypedArr,s.STATIC_DRAW):s.bufferData(s.ARRAY_BUFFER,this.polygonTypedArr,s.STATIC_DRAW)),s.vertexAttribPointer(o.P3DvertexPos,3,s.FLOAT,!1,0,0),r.TriIndexCnt&&this.polygonIndexBuffer&&(s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e),r.BuffDataisOk?s.bufferData(s.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.TriIndex),s.STATIC_DRAW):r.beginEditTriangle&&(s.bufferData(s.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.TriIndex),s.STATIC_DRAW),r.beginEditTriangle=!1),r.tempFillColor=this.style.__fillColor.slice(),r.tempFillColor[3]*=r.userObj.opacity,s.uniform4fv(o.P3DOpacityLoc,r.tempFillColor),o.polyWireFrameMode?s.drawElements(s.LINES,2*r.TriIndexCnt,s.UNSIGNED_SHORT,0):s.drawElements(s.TRIANGLES,r.TriIndexCnt,s.UNSIGNED_SHORT,0)),this.style.cullFace||s.enable(s.CULL_FACE)}},{key:"DrawSide",value:function(t){var e=this.obj,i=this.obj.gl,r=e.userObj.FGlobe;if(i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(1,1),t){var s=r.FLastEditingCallback.can_change;i.bindBuffer(i.ARRAY_BUFFER,this.eVal.editSideVertBuffer),i.vertexAttribPointer(r.P3DvertexPos,3,i.FLOAT,!1,0,0),this.style.border&&(-1===r.cursorIndex&&this.eVal.walkerGeo.isValid?this.coordsZ.length&&(s.vertex?i.drawArrays(i.LINES,0,2*this.coordsZ.length):i.drawArrays(i.LINES,0,2*this.coordsZ.length-2)):this.coordsZ.length-1>0&&i.drawArrays(i.LINES,0,2*this.coordsZ.length-2))}else{var o;if(i.bindBuffer(i.ARRAY_BUFFER,this.polygonSideVertBuff),e.BuffDataisOk&&i.bufferData(i.ARRAY_BUFFER,this.polygonSideTypeArr,i.STATIC_DRAW),i.vertexAttribPointer(r.P3DvertexPos,3,i.FLOAT,!1,0,0),e.TriIndexCnt&&this.polygonIndexBuffer&&(this.style.cullFace?i.cullFace(i.FRONT):i.disable(i.CULL_FACE),e.tempSideColor=this.style.__sideColor.slice(),e.tempSideColor[3]*=e.userObj.opacity,i.uniform4fv(r.P3DOpacityLoc,e.tempSideColor),e.BuffDataisOk&&this.setCoordLenForDraw(l.q.drawSide),this.style.zMode===l.u.Z_GROUND_FOLLOW?i.drawArrays(i.TRIANGLE_STRIP,0,this.obj.sideBorderCoordLen+2):i.drawArrays(i.TRIANGLE_STRIP,0,2*this._coordsZ.length+2)),e.tempborderColor=this.style.__borderColor.slice(),e.tempborderColor[3]*=e.userObj.opacity,i.uniform4fv(r.P3DOpacityLoc,e.tempborderColor),this.style.border)if(this.style.zMode===l.u.Z_GROUND_FOLLOW){e.BuffDataisOk&&this.setCoordLenForDraw(l.q.drawSideBorder),o=e.indexSideMainCoords.length;for(var n=0;n<=o;n++)i.drawArrays(i.LINES,2*e.indexSideMainCoords[n],2)}else{o=this.coordsZ.length;for(n=0;n<=o;n++)i.drawArrays(i.LINES,2*n,2)}this.style.cullFace?i.cullFace(i.BACK):i.enable(i.CULL_FACE)}i.disable(i.POLYGON_OFFSET_FILL)}},{key:"FindLimitsAndCenter",value:function(){this.obj.Limit.Clear(),this.obj.Limit.ExpandByCoords(this.coords),this.obj.Limit.GetCenterPoint(this.center);for(var t=0,e=this.coordsZ.length;e--;)t+=this.coordsZ[e];this.center.z=t/this.coordsZ.length}},{key:"BeginEdit",value:function(t,e){this.prepareFollowGround(),this.setEval(!0);var i=this.eVal,r=this.obj.gl,s=this.obj.userObj.FGlobe.FLastEditingCallback.show_walker;if(i.expandLimit(null,null,!0),i.lastMouseLong=this.center.x,i.lastMouseLat=this.center.y,i.findStartRadius(),i.setDragPoints(),i.setOffsetDragPoints(),this.buildEditIcons(i),s)this.coordsZ.length&&this.findDistances();else switch(this.style.showDistances){case l.s.SHOW2D:for(var o=0;o<this.coordsZ.length;o++)this.obj.distanceOfTwoPoint[o]=this.find2DDistance(this.coords[2*(o+1)],this.coords[2*(o+1)+1],this.coords[2*o],this.coords[2*o+1],o);this.coordsZ.length>1&&(this.obj.distanceOfTwoPoint[this.coordsZ.length]=this.find2DDistance(this.coords[2*(this.coordsZ.length-1)],this.coords[2*(this.coordsZ.length-1)+1],this.coords[0],this.coords[1],this.coordsZ.length-1),this.obj.distanceOfTwoPoint[this.obj.distanceOfTwoPoint.length-2]=0);break;case l.s.SHOW3D:for(o=0;o<this.coordsZ.length;o++)this.obj.distanceOfTwoPoint[o-1]=this.find3DDistance(this.coords[2*o],this.coords[2*o+1],this.coordsZ[o],this.coords[2*(o-1)],this.coords[2*(o-1)+1],this.coordsZ[o-1]);this.coordsZ.length>1&&(this.obj.distanceOfTwoPoint[this.coordsZ.length]=this.find3DDistance(this.coords[2*(this.coordsZ.length-1)],this.coords[2*(this.coordsZ.length-1)+1],this.coordsZ[this.coordsZ.length-1],this.coords[0],this.coords[1],this.coordsZ[0]),this.obj.distanceOfTwoPoint[this.obj.distanceOfTwoPoint.length-2]=0)}this.solid3D?this.repairHeights():this.heights=null,this.style.filled&&(i.editPolygonIndexBuffer=this.obj.gl.createBuffer()),i.walker=t,this.FEditing=!0,i.isFreeDrawing=e,this.clear(),r.bindBuffer(r.ARRAY_BUFFER,i.editSubVertBuffer),r.bufferData(r.ARRAY_BUFFER,i.editPolygonTypedArrSubVert,r.DYNAMIC_DRAW);for(o=this.coordsZ.length;o--;)i.editPolygonTypedArr[3*o]=this.polygonTypedArr[3*o],i.editPolygonTypedArr[3*o+1]=this.polygonTypedArr[3*o+1],i.editPolygonTypedArr[3*o+2]=this.polygonTypedArr[3*o+2],o<this.coordsZ.length-1&&i.createSubVertex(o);if(s||(this.eVal.addSubCoordForNoWalker(),this.eVal.addSubVertBuffer(3*this.eVal.subVertCount,this.eVal.subCoords[2*this.eVal.subVertCount],this.eVal.subCoords[2*this.eVal.subVertCount+1],this.eVal.subCoordsZ[this.eVal.subVertCount],!0),this.eVal.subVertCount++),(this.style.showArea||this.style.showVolume)&&this.coordsZ.length>=3&&(i.centerCoordZ=this.savedCenterZ),this.polygonTopVertBuff){for(o=this.coordsZ.length;o--;)i.editTopPolygonTypedArr[3*o]=this.polygonTopTypedArr[3*o],i.editTopPolygonTypedArr[3*o+1]=this.polygonTopTypedArr[3*o+1],i.editTopPolygonTypedArr[3*o+2]=this.polygonTopTypedArr[3*o+2];for(r.bindBuffer(r.ARRAY_BUFFER,this.polygonTopVertBuff),r.bufferData(r.ARRAY_BUFFER,i.editTopPolygonTypedArr,r.DYNAMIC_DRAW),r.bufferSubData(r.ARRAY_BUFFER,0,i.editTopPolygonTypedArr),o=2*this._coordsZ.length;o--;)i.editSidePolygonTypedArr[3*o]=this.polygonSideTypeArr[3*o],i.editSidePolygonTypedArr[3*o+1]=this.polygonSideTypeArr[3*o+1],i.editSidePolygonTypedArr[3*o+2]=this.polygonSideTypeArr[3*o+2];r.bindBuffer(r.ARRAY_BUFFER,i.editSideVertBuffer),r.bufferData(r.ARRAY_BUFFER,i.editSidePolygonTypedArr,r.DYNAMIC_DRAW),r.bufferSubData(r.ARRAY_BUFFER,0,i.editSidePolygonTypedArr)}r.bindBuffer(r.ARRAY_BUFFER,i.editBuffer),r.bufferData(r.ARRAY_BUFFER,i.editPolygonTypedArr,r.DYNAMIC_DRAW),r.bufferSubData(r.ARRAY_BUFFER,0,this.polygonTypedArr),r.bindBuffer(r.ARRAY_BUFFER,i.editBufferForMainPoint),r.bufferData(r.ARRAY_BUFFER,i.editPolygonTypedMainPointArr,r.DYNAMIC_DRAW);this.build(!1)}},{key:"PrepareFollowGround",value:function(){if(this.style.zMode===l.u.Z_GROUND_FOLLOW){this.obj.cdt2dWorker&&(this.obj.cdt2dWorker.terminate(),delete this.obj.cdt2dWorker),this.obj.buildForFollowGround=!1,this.obj.FGlobe.FDRAWED_MAX_LEVEL<l.z.FBUILD_REQLOD?this.setCoordLenForDraw(l.q.lowLod):this.setCoordLenForDraw(l.q.initial);this.obj.dontUseCot=!0,this.build(!1),this.obj.TriIndex=_(this._coords,null,2),this.obj.TriIndexCnt=this.obj.TriIndex.length,this.obj.beginEditTriangle=!0}}},{key:"EndEdit",value:function(){var t=this.eVal,e=this.obj.gl;t.walker&&this.coordsZ.length&&(t.deleteCoord(this.coordsZ.length-1),t.walker=!1,t.setDistanceForWalkerLeft()),(this.style.showArea||this.style.showVolume)&&this.coordsZ.length>=3&&(this.style.zMode===l.u.Z_MSL?this.obj.totalArea=this.obj.userObj.FGlobe.Math.CalcPolyAreaM2(this.coords,!1):this.obj.totalArea=this.obj.userObj.FGlobe.Math.CalcPolyAreaM2(this.coords,!0,50),this.savedCenterZ=t.centerCoordZ),this._coords=this.coords.slice(),this._coordsZ=this.coordsZ.slice(),this.polygonVertBuff||(this.polygonVertBuff=this.obj.gl.createBuffer()),this._coordsZ.length>=3?(this.style.filled&&!this.polygonIndexBuffer&&(this.polygonIndexBuffer=e.createBuffer()),this.solid3D&&(this.heights.length===this._coordsZ.length+1&&this.heights.pop(),this._heights=this.heights.slice(),this.polygonTopTypedArr=t.editTopPolygonTypedArr.slice(0,3*this._coordsZ.length),this.polygonSideTypeArr=t.editSidePolygonTypedArr.slice(0,3*(this._coordsZ.length+1)*2),u.b.PolyMakeCCW(this._coords)?(this.obj.ccw=!0,this._coordsZ.reverse(),this._coordsZ.length===this._heights.length&&this._heights.reverse()):this.obj.ccw=!1)):(this.coords.length=0,this.coordsZ.length=0,this._coords.length=0,this._coordsZ.length=0,this.hasFontIcon=!1),t.subCoords.pop(),t.subCoords.pop(),t.subCoordsZ.pop(),this.savedSubCoords=t.subCoords.slice(),this.savedSubCoordsZ.length=0;for(var i=0;i<this.coordsZ.length-1;i++)this.savedSubCoordsZ[i]=(this.findDistZ(i)+this.findDistZ(i+1))/2;if(this.savedSubCoordsZ[this.savedSubCoordsZ.length]=(this.findDistZ(this._coordsZ.length-1)+this.findDistZ(0))/2,t.editPolygonTypedArr=null,t.editPolygonTypedArrSubVert=null,t.editTopPolygonTypedArr=null,t.editSidePolygonTypedArr=null,t.isFreeDrawing=!1,this.FEditing=!1,this.obj.dontUseCot&&delete this.obj.dontUseCot,e.deleteBuffer(t.editBuffer),e.deleteBuffer(t.editSubVertBuffer),e.deleteBuffer(t.editSideVertBuffer),this.setEval(!1),this._coordsZ.length>=3){this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.style.border||this.style.filled)&&this.obj.FGlobe.FDrawedWorldDeg.CSIsCommonRegionT(this.obj.Limit)?(this.setCoordLenForDraw(l.q.lowLod),this.build(!1),this.style.filled&&(this.buildTriangle(),e.bindBuffer(e.ARRAY_BUFFER,this.polygonVertBuff),e.bufferData(e.ARRAY_BUFFER,this.polygonTypedArr,e.STATIC_DRAW)),this.obj.lastOverlapedCells=null,this.reBuildReq(),this.fontBuild()):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_MSL||(this.setCoordLenForDraw(l.q.lowLod),this.build(!1),this.style.filled&&(this.buildTriangle(),e.bindBuffer(e.ARRAY_BUFFER,this.polygonVertBuff),e.bufferData(e.ARRAY_BUFFER,this.polygonTypedArr,e.STATIC_DRAW)))}}},{key:"SetCoordLenForDraw",value:function(t){switch(this.obj.indexSideMainCoords=[],t){case l.q.initial:this.obj.surfaceBorderCoordLen=0,this.obj.sideBorderCoordLen=0;break;case l.q.lowLod:this.obj.gf_mainCoordLen=this.coords.length,this.obj.surfaceBorderCoordLen=this.coords.length/2,this.obj.sideBorderCoordLen=this.coords.length;for(var e=0;e<this.coordsZ.length;e++)this.obj.indexSideMainCoords.push(e);break;case l.q.drawSide:this.obj.sideBorderCoordLen=this.obj.gf_mainCoordLen;break;case l.q.drawSideBorder:this.obj.indexSideMainCoords=this.obj.gf_indexSideMainCoords.slice()}}},{key:"SetEval",value:function(t){t?this.eVal=new S(this,this.obj.gl):delete this.eVal}},{key:"GetAsJSON",value:function(){var t=y.GetStyle(this.style),e={type:this.type,Fid:this.Fid,coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),style:t,solid3D:this.solid3D};return this.attribs&&(e.attribs=JSON.parse(JSON.stringify(this.attribs))),e.heights=Array.isArray(this.heights)?this.heights.slice():null,this.FEditing&&(e.coords.pop(),e.coords.pop(),e.coordsZ.pop()),e}}]),t}()),V=new(function(){function t(){n()(this,t),this.CheckHasFontIcon=y.CheckHasFontIcon,this.UpdateFont=y.UpdateFont,this.CheckFontPacket=y.CheckFontPacket,this.Rebuild=y.Rebuild,this.StyleChanged=y.StyleChanged,this.SaveInfo=E.SaveInfo,this.RestoreInfo=E.RestoreInfo,this.DrawEditTexture=E.DrawEditTexture}return h()(t,[{key:"CreateCanvasPoint",value:function(t,e){t.SetVecSub(this.obj.Fp2T,e),this.obj.userObj.FGlobe.Xh5WFD(t)?this.obj.userObj.FGlobe.X9oM46(t,this.obj.CanvasPoint):this.obj.CanvasPoint.isValid=!1}},{key:"Build",value:function(){var t=this.obj.userObj,e=t.tempp2d,i=t.FGlobe,r=this.style.zMode;e.SetP(this.center),e.ConvertDegreeToRadyan(),r===l.u.Z_MSL?u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.Geo3C):u.b.GeoTo3DP(e,l.z.GLOBE_RADIUS+i.XyecYr(e,!1)+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.Geo3C),this.eVal&&(this.eVal.fillZPoint(),this.eVal.buildEditModel(0))}},{key:"Draw2d",value:function(){this.eVal?(this.createCanvasPoint(this.Geo3D,this.Geo3C),this.obj.CanvasPoint.isValid&&this.checkFontPacket()):this.hasFontIcon&&(this.createCanvasPoint(this.Geo3D,this.Geo3C),this.obj.CanvasPoint.isValid&&this.checkFontPacket())}},{key:"Draw3d",value:function(){var t=this.obj,e=t.userObj.FGlobe;this.Geo3D.SetVecSub(t.Fp2T,this.Geo3C),e.Xh5WFD(this.Geo3D)?e.X9oM46(this.Geo3D,t.CanvasPoint):t.CanvasPoint.isValid=!1,t.CanvasPoint.isValid&&this.checkModelPacket()}},{key:"CheckModelPacket",value:function(t,e){null!==this.obj.ModelPacket&&this.obj.ModelPacket.Owner===this||(this.obj.ModelPacket=this.obj.ModelDrawer.GetNewModelPacket(this)),this.obj.ModelPacket.Update()}},{key:"FindLimits",value:function(){this.obj.Limit.Clear(),this.obj.Limit.ExpandP(this.center)}},{key:"Update",value:function(t,e,i,r,s,o,n,a){"number"!=typeof t[0]||isNaN(t[0])||(this.coords[0]=t[0]),"number"!=typeof t[1]||isNaN(t[1])||(this.coords[1]=t[1]),this.center.x=this.coords[0],this.center.y=this.coords[1],"number"!=typeof e||isNaN(e)||(this.sx=e*l.z.GLOBE_RADIUS_K),"number"!=typeof i||isNaN(i)||(this.sy=i*l.z.GLOBE_RADIUS_K),"number"!=typeof r||isNaN(r)||(this.sz=r*l.z.GLOBE_RADIUS_K),"number"!=typeof s||isNaN(s)||(this.rotXY=s),"number"!=typeof o||isNaN(o)||(this.rotZ=o),"number"!=typeof n||isNaN(n)||(this.rotRoll=n),"number"!=typeof a||isNaN(a)||(this.coordsZ[0]=a),this.build(),this.findLimits(),this.obj.userObj.FGlobe.DrawRender()}},{key:"BeginEdit",value:function(t){this.setEval(!0),this.eVal.walker=t,this.FEditing=!0,this.build()}},{key:"EndEdit",value:function(){this.eVal.walker&&(this.eVal.walker=!1),this.FEditing=!1,this.setEval(!1)}},{key:"SetEval",value:function(t){t?this.eVal=new x(this):delete this.eVal}},{key:"GetAsJSON",value:function(){var t=y.GetStyle(this.style),e={type:this.type,coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),Fid:this.Fid,style:t,rotRoll:this.rotRoll,rotXY:this.rotXY,rotZ:this.rotZ,sx:this.sx,sy:this.sy,sz:this.sz};return this.attribs&&(e.attribs=JSON.parse(JSON.stringify(this.attribs))),e}}]),t}());function j(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var z=new(function(){function t(){n()(this,t),this.CheckHasFontIcon=y.CheckHasFontIcon,this.UpdateFont=y.UpdateFont,this.CheckFontPacket=y.CheckFontPacket,this.Rebuild=y.Rebuild,this.BuildEditIcons=y.BuildEditIcons,this.StyleChanged=y.StyleChanged,this.RepairHeightsSingle=y.RepairHeightsSingle,this.FindLod=y.FindLod}return h()(t,[{key:"Clear",value:function(t){this.shapeVertBuff&&(this.obj.gl.deleteBuffer(this.shapeVertBuff),this.shapeVertBuff=null),this.shapeIndexBuffer&&(this.obj.gl.deleteBuffer(this.shapeIndexBuffer),this.shapeIndexBuffer=null),t&&this.obj.shapeSideVertBuff&&(this.obj.gl.deleteBuffer(this.obj.shapeSideVertBuff),this.obj.gl.deleteBuffer(this.obj.shapeTopVertBuff))}},{key:"SaveInfo",value:function(){this.SavedInfo={style:N({},this.style),coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),_coords:this._coords.slice(),_coordsZ:this._coordsZ.slice(),objLimit:N({},this.obj.Limit),shapeTypedArr:this.shapeTypedArr.slice()}}},{key:"RestoreInfo",value:function(){Object.assign(this.style,this.SavedInfo.style),Object.assign(this.obj.Limit,this.SavedInfo.objLimit),this.coords=this.SavedInfo.coords.slice(),this.coordsZ=this.SavedInfo.coordsZ.slice(),this._coords=this.SavedInfo._coords.slice(),this._coordsZ=this.SavedInfo._coordsZ.slice(),this.shapeTypedArr=this.SavedInfo.shapeTypedArr.slice(),this.updateFont()}},{key:"ReBuildReq",value:function(){for(var t=this.obj.userObj.FGlobe,e=this.obj.userObj.FGlobe.FDrawedCells.slice(),i=[],r=this.obj,s=e.length;s--;)r.Limit.CSIsCommonRegionT(e[s].FCellTGW)&&i.push(e[s]);r.lastOverlapedCells&&i.length===r.lastOverlapedCells.length&&r.userObj.CellSames(r.lastOverlapedCells,i)||(r.cdt2dWorker?(r.start=new Date,r.cdt2dWorker.terminate(),r.cdt2dWorker=null,delete r.cdt2dWorker,r.lastOverlapedCells=i.slice(),r.cdt2dWorker=new Worker(w.a),r.cdt2dWorker.onmessage=this.cdt2dWorkerOnMessage):t.currentWorkerCount<=l.z.MAX_WORKER_COUNT&&(this.setCoordLenForDraw(l.q.lowLod),r.start=new Date,r.lastOverlapedCells=i.slice(),r.cdt2dWorker=new Worker(w.a),r.cdt2dWorker.onmessage=this.cdt2dWorkerOnMessage,t.currentWorkerCount++,this.obj.userObj.currentWorkerCount++))}},{key:"Build",value:function(t){if(this.obj.LOD=u.b.Max(this.findLod(this.obj.Limit)-3,0),t){var e=this.obj;this.style.filled?(e.gf_coords.length=0,this.findFollowGroundCoords(),e.gf_mainCoordLen=e.gf_coords.length,this.addSteiners(),this.shapeTypedArr=new Float32Array(e.gf_coords.length/2*3),e.gf_coordsZ.length=e.gf_coords.length/2,this.solid3D?(this.shapeTopTypedArr=new Float32Array(e.gf_coords.length/2*3),this.shapeSideTypeArr=new Float32Array(3*(e.gf_mainCoordLen/2*2+2)),e.gf_coordsZ.fill(this._coordsZ[0])):e.gf_coordsZ.fill(this.coordsZ[0]),e.buildForFollowGround=!0,this.coordBuild(!0),this.buildTriangle(e.gf_coords)):this.style.border&&(e.gf_coords.length=0,this.findFollowGroundCoords(),e.gf_mainCoordLen=e.gf_coords.length,this.shapeTypedArr=new Float32Array(e.gf_mainCoordLen/2*3),e.gf_coordsZ.length=e.gf_mainCoordLen/2,this.solid3D?(this.shapeTopTypedArr=new Float32Array(e.gf_mainCoordLen/2*3),this.shapeSideTypeArr=new Float32Array(3*(e.gf_mainCoordLen/2*2+2)),e.gf_coordsZ.fill(this._coordsZ[0])):e.gf_coordsZ.fill(this.coordsZ[0]),e.buildForFollowGround=!0,this.coordBuild(!1),e.BuffDataisOk=!0)}else this._coords.length&&this._coordsZ.length&&(this.obj.startP=new u.w(0,0,0),this.fontBuild(),this.coordBuild(!1),this.eVal&&this.buildEditIcons(this.eVal))}},{key:"BuildTriangle",value:function(t){var e=this.obj,i=this.obj.gl;t?e.cdt2dWorker&&(this.start2=new Date,e.cdt2dWorker.postMessage([t,e.gf_mainCoordLen])):(u.b.PolyMakeCCW(this._coords),e.TriIndex=_(this._coords,null,2),e.TriIndexCnt=e.TriIndex.length,e.TriIndexCnt&&(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.shapeIndexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.TriIndex),e.gl.STATIC_DRAW)))}},{key:"Cdt2dWorkerOnMessage",value:function(t){var e=this.obj;if("loaded"==t.data[0]){this.build(!0)}else e.TriIndex=t.data.slice(),e.TriIndexCnt=e.TriIndex.length,e.sideBorderCoordLen=e.gf_mainCoordLen,e.cdt2dWorker.terminate(),e.cdt2dWorker=null,delete e.cdt2dWorker,--e.userObj.FGlobe.currentWorkerCount,--e.userObj.currentWorkerCount,e.BuffDataisOk=!0,e.userObj.FGlobe.DrawRender()}},{key:"FindFollowGroundCoords",value:function(){var t,e,i,r,s=this.obj.userObj.FGlobe.FDRAWED_MIN_CELL_MESH_DELTADEG/2,o=this.obj;o.gf_indexSideMainCoords=[];for(var n=0;n<this._coords.length/2-1;n++){t=this._coords[2*n],e=this._coords[2*n+1],i=this._coords[2*n+2],r=this._coords[2*n+3],o.gf_coords.push(t),o.gf_coords.push(e),(c=(d=u.b.Dist2DV(t,e,i,r))/s)>l.z.FOLLOW_GROUND_STEP_LIMIT&&(c=l.z.FOLLOW_GROUND_STEP_LIMIT,s=d/l.z.FOLLOW_GROUND_STEP_LIMIT);for(var a=1;a<c-1;a++){var h=u.b.CalcPositionV(d,t,e,i,r,a*s,0);o.gf_coords.push(h[0]),o.gf_coords.push(h[1])}o.gf_indexSideMainCoords.push(o.gf_coords.length/2)}if(this.shapeType!==l.r.ELLIPSE){t=this._coords[this._coords.length-2],e=this._coords[this._coords.length-1],i=this._coords[0],r=this._coords[1],this.obj.gf_coords.push(t),this.obj.gf_coords.push(e);var d,c=(d=u.b.Dist2DV(t,e,i,r))/s;for(a=1;a<c-1;a++){h=u.b.CalcPositionV(d,t,e,i,r,a*s,0);this.obj.gf_coords.push(h[0]),this.obj.gf_coords.push(h[1])}}}},{key:"AddSteiners",value:function(){for(var t,e=0,i=0,r={},s=this.obj,o=s.lastOverlapedCells.length;o--;)for(var n=s.lastOverlapedCells[o],a=n.FCellTGW.LL.y,h=n.FCellTGW.LL.x,l=n.FMeshDeltaDegW,u=n.FMeshDeltaDegH,d=0;d<5;d++){e=a+l*d;for(var c=0;c<5;c++)i=h+u*c,r[t="".concat(e.toFixed(12),",").concat(i.toFixed(12))]||(r[t]=!0,this.obj.gf_coords.push(e),this.obj.gf_coords.push(i))}}},{key:"FillEllipseGeo",value:function(t,e,i,r,s){var o=new u.u(0,0),n=new u.u(0,0),a=new u.w(0,0,0);this._coords=u.b.FillEllipseGeo(t,e,i,r,s,o,n,a),this.FEditing&&this.setDragPoints(o,n,a)}},{key:"SetDragPoints",value:function(t,e,i){var r,s,o,n;r=u.b.DegreeToRadyan(180),s=this.radius1*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius2*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.CZero=this.rotateNorth(e,i,r,this.rotDeg),this.eVal.CZero.ConvertRadyanToDegree(),r=u.b.DegreeToRadyan(270),s=this.radius1*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius2*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.C90=this.rotateNorth(e,i,r,this.rotDeg),this.eVal.C90.ConvertRadyanToDegree(),r=u.b.DegreeToRadyan(0),s=this.radius1*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius2*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.C180=this.rotateNorth(e,i,r,this.rotDeg),this.eVal.C180.ConvertRadyanToDegree()}},{key:"ConvertShapePnt",value:function(t,e){var i,r,s=new u.u(0,0),o=new u.u(0,0),n=new u.w(0,0,0),a=new u.F,h=new u.u(0,0);return s.x=t*this.radius1*l.z.GLOBE_RADIUS_K,s.y=e*this.radius2*l.z.GLOBE_RADIUS_K,u.b.CSRotate(u.b.DegreeToRadyan(-this.rotDeg),0,0,s.x,s.y,a),Object.assign(s,a),r=s.Dist2DV(0,0),i=u.b.CSAngleV2(s.x,s.y),o.x=this.coords[0],o.y=this.coords[1],o.ConvertDegreeToRadyan(),u.b.GeoTo3D(o.x,o.y,l.z.GLOBE_RADIUS,n),n.Normalize(),Object.assign(h,o),u.b.X7UX4S(h,r,l.z.GLOBE_RADIUS),(o=this.rotateNorthOther(h,n,-i)).ConvertRadyanToDegree(),o}},{key:"FillShapeGeo",value:function(){var t,e=this.obj.FGlobe.Shapes.Definitions[this.shapeType].vert.slice(),i=new u.u(0,0),r=new u.w(0,0,0);this._coords.length=0;for(var s=e.length/2;s--;)t=this.convertShapePnt(e[2*s],e[2*s+1]),this._coords[2*s]=t.x,this._coords[2*s+1]=t.y;i.SetV(u.b.DegreeToRadyan(this.coords[0]),u.b.DegreeToRadyan(this.coords[1])),u.b.GeoTo3DP(i,l.z.GLOBE_RADIUS,r),r.Normalize(),this.FEditing&&this.setDragPoints(i,t,r)}},{key:"FillGeo",value:function(){this.shapeType===l.r.ELLIPSE?this.fillEllipseGeo(this.coords,this.radius1,this.radius2,this.rotDeg,l.z.SHAPE_DIVISION):this.fillShapeGeo()}},{key:"RotateNorthOther",value:function(t,e,i){var r=new u.w(0,0,0),s=new u.u(0,0);return u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,r),r.Normalize(),u.b.RotatePointAroundVector(r,e.x,e.y,e.z,u.b.DegreeToRadyan(i)),r.DotProductSetP(r,l.z.GLOBE_RADIUS),u.b.CarToSpher2(r,s),s}},{key:"RotateNorth",value:function(t,e,i,r){var s=new u.w(0,0,0),o=new u.u(0,0);return u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),u.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+u.b.DegreeToRadyan(-r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),u.b.CarToSpher2(s,o),o}},{key:"FontBuild",value:function(){var t=this.obj.userObj.tempp2d;t.SetV(this.coords[0],this.coords[1]),t.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?this.obj.shapeSideVertBuff?u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+(this.coordsZ[0]+this.heights[0])*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_GROUND_FOLLOW||(this.obj.shapeSideVertBuff?u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(t,!1)+(this.coordsZ[0]+this.heights[0])*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(t,!1)+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.Geo3C))}},{key:"CoordBuild",value:function(t){this.buildStartPoint(),this.FEditing?(this.fillBuffers(this.eVal.editShapeTypedArr,this.eVal.editShapeVertBuff),this.obj.FGlobe.FLastEditingCallback.can_change.Z&&this.eVal.fillZPoint()):this.shapeVertBuff&&this.fillBuffers(this.shapeTypedArr,this.shapeVertBuff,t)}},{key:"FillTypeArrays",value:function(t,e){var i,r,s=0;!this.FEditing&&this.obj.buildForFollowGround?(i=this.obj.gf_coords.slice(),r=this.obj.gf_coordsZ.slice()):(i=this._coords,r=this._coordsZ);var o=this.obj,n=this.style.zMode,a=o.userObj,h=a.FGlobe,d=a.tempp2d,c=o.TempGeo3C,f=h.FDRAWED_MIN_CELL_MESH_DELTADEG*l.z.EXTRA_DEG_K,p=!this.FEditing&&this.fixedTop&&this.solid3D;p&&this.findFixedTopMax(i,r);var F=0,y=0,A=null;n===l.u.Z_GROUND_FOLLOW&&(A=h.XnCaoF(o.Limit));for(var g=i.length/2;g--;)s=2*g,d.SetV(i[s],i[s+1]),d.ConvertDegreeToRadyan(),n===l.u.Z_MSL?u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+r[g]*l.z.GLOBE_RADIUS_K,c):n===l.u.Z_GROUND_PERVERTEX?(y=h.XyecYr(d,!1),u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+y+r[g]*l.z.GLOBE_RADIUS_K,c)):n===l.u.Z_GROUND_FOLLOW&&(this.FEditing?y=h.XjTSzm(i[s],i[s+1],!1,A):(y=h.XjTSzm(i[s],i[s+1],!1,A),s>=o.gf_mainCoordLen&&(y=u.b.Max(y,h.XjTSzm(i[s]-f,i[s+1],!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]+f,i[s+1],!1,A)),y=u.b.Max(y,h.XjTSzm(i[s],i[s+1]-f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s],i[s+1]+f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]-f,i[s+1]-f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]+f,i[s+1]-f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]-f,i[s+1]+f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]+f,i[s+1]+f,!1,A))),this.style.depthTest&&s>=o.gf_mainCoordLen&&(F=h.FDRAWED_MIN_CELL_RES_METERS*l.z.EXTRA_Z_COT_K)),d.SetV(i[s],i[s+1]),d.ConvertDegreeToRadyan(),u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+y+r[0]*l.z.GLOBE_RADIUS_K+F,c)),c.SetVecSub(o.startP,c),o.tempArr[0]=c.x,o.tempArr[1]=c.y,o.tempArr[2]=c.z,t.set(o.tempArr,3*g),e&&(p?u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+o.fixedTopMax+F,c):u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+y+(r[g]+this.heights[0])*l.z.GLOBE_RADIUS_K+F,c),c.SetVecSub(o.startP,c),o.tempArr[0]=c.x,o.tempArr[1]=c.y,o.tempArr[2]=c.z,this.shapeTopTypedArr.set(o.tempArr,3*g))}},{key:"FillSideTypeArray",value:function(t){var e;e=this.obj.buildForFollowGround?this.obj.gf_mainCoordLen/2:this._coordsZ.length,this.shapeSideTypeArr=new Float32Array(3*(2*e+2));for(var i=0;i<e;i++)this.shapeSideTypeArr[6*i]=t[3*i],this.shapeSideTypeArr[6*i+1]=t[3*i+1],this.shapeSideTypeArr[6*i+2]=t[3*i+2],this.shapeSideTypeArr[6*i+3]=this.shapeTopTypedArr[3*i],this.shapeSideTypeArr[6*i+4]=this.shapeTopTypedArr[3*i+1],this.shapeSideTypeArr[6*i+5]=this.shapeTopTypedArr[3*i+2];this.shapeSideTypeArr[this.shapeSideTypeArr.length-6]=t[0],this.shapeSideTypeArr[this.shapeSideTypeArr.length-5]=t[1],this.shapeSideTypeArr[this.shapeSideTypeArr.length-4]=t[2],this.shapeSideTypeArr[this.shapeSideTypeArr.length-3]=this.shapeTopTypedArr[0],this.shapeSideTypeArr[this.shapeSideTypeArr.length-2]=this.shapeTopTypedArr[1],this.shapeSideTypeArr[this.shapeSideTypeArr.length-1]=this.shapeTopTypedArr[2]}},{key:"FillBuffers",value:function(t,e,i){this.solid3D?(this.shapeTopTypedArr=new Float32Array(this.shapeTypedArr.length),this.fillTypeArrays(t,!0),i||(this.obj.gl.bindBuffer(this.obj.gl.ARRAY_BUFFER,this.obj.shapeTopVertBuff),this.obj.gl.bufferData(this.obj.gl.ARRAY_BUFFER,this.shapeTopTypedArr,this.obj.gl.STATIC_DRAW)),this.fillSideTypeArray(t),i||(this.obj.gl.bindBuffer(this.obj.gl.ARRAY_BUFFER,this.obj.shapeSideVertBuff),this.obj.gl.bufferData(this.obj.gl.ARRAY_BUFFER,this.shapeSideTypeArr,this.obj.gl.STATIC_DRAW))):(this.fillTypeArrays(t,!1),i||(this.obj.gl.bindBuffer(this.obj.gl.ARRAY_BUFFER,e),this.obj.gl.bufferData(this.obj.gl.ARRAY_BUFFER,t,this.obj.gl.STATIC_DRAW)))}},{key:"FindFixedTopMax",value:function(t,e){var i=this.obj,r=this.style.zMode,s=i.userObj.FGlobe,o=i.userObj.tempp2d,n=0,a=0,h=0,d=0,c=0,f=this.heights.slice();if(r===l.u.Z_GROUND_FOLLOW){for(d=e.length;d--;)c=2*d,o.SetV(t[c],t[c+1]),o.ConvertDegreeToRadyan(),a=u.b.Max(a,s.XyecYr(o,!1));n=e[0]}else if(r===l.u.Z_GROUND_PERVERTEX)for(d=e.length;d--;)c=2*d,o.SetV(t[c],t[c+1]),o.ConvertDegreeToRadyan(),a=u.b.Max(a,s.XyecYr(o,!1)),n=u.b.Max(n,e[d]);else if(r===l.u.Z_MSL)for(d=e.length;d--;)c=2*d,o.SetV(t[c],t[c+1]),n=u.b.Max(n,e[d]),o.ConvertDegreeToRadyan();h=u.b.Max(h,f[0]),i.fixedTopMax=a+(n+h)*l.z.GLOBE_RADIUS_K}},{key:"BuildStartPoint",value:function(){this.obj.userObj.tempp2d.SetV(this._coords[0],this._coords[1]),this.obj.userObj.tempp2d.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(this.obj.userObj.tempp2d,l.z.GLOBE_RADIUS+this._coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.TempGeo3C):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(this.obj.userObj.tempp2d,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(this.obj.userObj.tempp2d,!1)+this._coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.TempGeo3C),this.obj.startP.SetP(this.obj.TempGeo3C)}},{key:"Draw2d",value:function(){this.hasFontIcon&&(this.obj.Geo3D.SetVecSub(this.obj.Fp2T,this.obj.Geo3C),this.obj.userObj.FGlobe.Xh5WFD(this.obj.Geo3D)?this.obj.userObj.FGlobe.X9oM46(this.obj.Geo3D,this.obj.CanvasPoint):this.obj.CanvasPoint.isValid=!1,this.obj.CanvasPoint.isValid&&this.checkFontPacket()),this.solid3D&&this.style.showHeights&&this.Height.DrawHeights()}},{key:"DrawSide",value:function(){var t=this.obj,e=t.gl,i=t.userObj.FGlobe,r=this._coordsZ.length;if(this.style.cullFace?e.cullFace(e.FRONT):e.disable(e.CULL_FACE),e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(1,1),e.bindBuffer(e.ARRAY_BUFFER,t.shapeSideVertBuff),e.vertexAttribPointer(i.P3DvertexPos,3,e.FLOAT,!1,0,0),this.style.filled&&(t.tempSideColor=this.style.__sideColor.slice(),t.tempSideColor[3]*=t.userObj.opacity,e.uniform4fv(i.P3DOpacityLoc,t.tempSideColor),this.FEditing||this.style.zMode!==l.u.Z_GROUND_FOLLOW?e.drawArrays(e.TRIANGLE_STRIP,0,2*this._coordsZ.length+2):(t.BuffDataisOk&&(e.bufferData(e.ARRAY_BUFFER,this.shapeSideTypeArr,e.STATIC_DRAW),this.setCoordLenForDraw(l.q.drawSide)),e.drawArrays(e.TRIANGLE_STRIP,0,this.obj.sideBorderCoordLen+2)),t.tempBorderColor=this.style.__borderColor.slice(),t.tempBorderColor[3]*=t.userObj.opacity,e.uniform4fv(i.P3DOpacityLoc,t.tempBorderColor)),this.style.border)if(this.FEditing||this.style.zMode!==l.u.Z_GROUND_FOLLOW){r=this._coordsZ.length;for(s=0;s<=r;s++)e.drawArrays(e.LINES,2*s,2)}else{t.BuffDataisOk&&this.setCoordLenForDraw(l.q.drawSideBorder),r=t.indexSideMainCoords.length;for(var s=0;s<=r;s++)e.drawArrays(e.LINES,2*t.indexSideMainCoords[s],2)}e.disable(e.POLYGON_OFFSET_FILL),this.style.cullFace?e.cullFace(e.BACK):e.enable(e.CULL_FACE)}},{key:"DrawSurface",value:function(t,e){var i=this.obj,r=i.gl,s=i.userObj.FGlobe;this.style.cullFace||r.disable(r.CULL_FACE),r.bindBuffer(r.ARRAY_BUFFER,t),i.BuffDataisOk&&(this.solid3D?r.bufferData(r.ARRAY_BUFFER,this.shapeTopTypedArr,r.STATIC_DRAW):r.bufferData(r.ARRAY_BUFFER,this.shapeTypedArr,r.STATIC_DRAW)),r.vertexAttribPointer(s.P3DvertexPos,3,r.FLOAT,!1,0,0),i.TriIndexCnt&&this.style.filled&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),i.BuffDataisOk&&r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(i.TriIndex),r.STATIC_DRAW),i.tempFillColor=this.style.__fillColor.slice(),i.tempFillColor[3]*=i.userObj.opacity,r.uniform4fv(s.P3DOpacityLoc,i.tempFillColor),r.drawElements(r.TRIANGLES,i.TriIndexCnt,r.UNSIGNED_SHORT,0)),this.style.cullFace||r.enable(r.CULL_FACE)}},{key:"Draw3d",value:function(){var t=this.obj,e=t.gl,i=t.userObj.FGlobe;e.uniform1i(this.obj.FGlobe.P3DisPoint,0),t.Geo3DS.SetVecSub(t.Fp2T,t.startP),i.GLU.pushModel(),i.GLU.Translate(t.Geo3DS.x,t.Geo3DS.y,t.Geo3DS.z),i.GLU.setModelToGL(i.P3DmodelViewMatrixLoc),this.style.depthTest&&e.enable(e.DEPTH_TEST),this.FEditing&&this.eVal.editShapeVertBuff?this.solid3D?(this.drawSide(),this.drawSurface(t.shapeTopVertBuff,this.eVal.editShapeIndexBuffer),this.style.border&&(t.BuffDataisOk&&(t.surfaceBorderCoordLen=t.gf_mainCoordLen/2),t.tempBorderColor=this.style.__borderColor.slice(),t.tempBorderColor[3]*=t.userObj.opacity,e.uniform4fv(i.P3DOpacityLoc,t.tempBorderColor),this.FEditing||this.style.zMode!==l.u.Z_GROUND_FOLLOW?this.obj.gl.drawArrays(this.obj.gl.LINE_LOOP,0,this._coordsZ.length):this.obj.gl.drawArrays(this.obj.gl.LINE_LOOP,0,t.surfaceBorderCoordLen)),e.uniform1i(this.obj.FGlobe.P3DisPoint,1),i.FLastEditingCallback.can_change.height&&(e.uniform4fv(i.P3DOpacityLoc,this.eVal.heightColor),e.uniform1f(i.P3DPointSize,this.eVal.heightSize),this.drawHeightPoint()),i.FLastEditingCallback.can_change.Z&&(e.uniform4fv(i.P3DOpacityLoc,this.eVal.zColor),e.uniform1f(i.P3DPointSize,this.eVal.zSize),this.eVal.drawZPoint())):(this.drawSurface(this.eVal.editShapeVertBuff,this.eVal.editShapeIndexBuffer),this.style.border&&(t.BuffDataisOk&&(t.surfaceBorderCoordLen=t.gf_mainCoordLen/2),t.tempBorderColor=this.style.__borderColor.slice(),t.tempBorderColor[3]*=t.userObj.opacity,e.uniform4fv(i.P3DOpacityLoc,t.tempBorderColor),this.FEditing||this.style.zMode!==l.u.Z_GROUND_FOLLOW?this.obj.gl.drawArrays(this.obj.gl.LINE_LOOP,0,this._coordsZ.length):this.obj.gl.drawArrays(this.obj.gl.LINE_LOOP,0,t.surfaceBorderCoordLen)),e.uniform1i(this.obj.FGlobe.P3DisPoint,1),i.FLastEditingCallback.can_change.Z&&(e.uniform4fv(i.P3DOpacityLoc,this.eVal.zColor),e.uniform1f(i.P3DPointSize,this.eVal.zSize),this.eVal.drawZPoint())):this.shapeVertBuff&&(this.solid3D?(this.drawSide(),this.drawSurface(t.shapeTopVertBuff,this.shapeIndexBuffer)):this.drawSurface(this.shapeVertBuff,this.shapeIndexBuffer),this.style.border&&(t.BuffDataisOk&&(t.surfaceBorderCoordLen=t.gf_mainCoordLen/2),t.tempBorderColor=this.style.__borderColor.slice(),t.tempBorderColor[3]*=t.userObj.opacity,e.uniform4fv(i.P3DOpacityLoc,t.tempBorderColor),this.FEditing||this.style.zMode!==l.u.Z_GROUND_FOLLOW?this.obj.gl.drawArrays(this.obj.gl.LINE_LOOP,0,this._coordsZ.length):this.obj.gl.drawArrays(this.obj.gl.LINE_LOOP,0,t.surfaceBorderCoordLen))),t.BuffDataisOk&&(t.BuffDataisOk=!1),this.style.depthTest&&e.disable(e.DEPTH_TEST),i.GLU.popModel()}},{key:"DrawHeightPoint",value:function(){if(this.eVal.FHighlight){var t=this.obj.gl;t.bindBuffer(t.ARRAY_BUFFER,this.obj.shapeTopVertBuff),t.vertexAttribPointer(this.obj.FGlobe.P3DvertexPos,3,t.FLOAT,!1,0,0),t.drawArrays(t.POINTS,0,1)}}},{key:"FindLimitsAndCenter",value:function(){this.obj.Limit.Clear(),this.obj.Limit.ExpandByCoords(this._coords)}},{key:"FilledChanged",value:function(){if(this.style.filled){var t=this.obj.gl;this.FEditing?this.eVal.editShapeIndexBuffer||(this.eVal.editShapeIndexBuffer=this.obj.gl.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.eVal.editShapeIndexBuffer),this.shapeType===l.r.ELLIPSE?t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.obj.mPoly2Tri.TriIndex),t.STATIC_DRAW):t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.obj.triIndis,t.STATIC_DRAW)):this.shapeIndexBuffer||(this.shapeIndexBuffer=t.createBuffer(),this.buildTriangle(),this.obj.TriIndexCnt&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.shapeIndexBuffer),this.shapeType===l.r.ELLIPSE?t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.obj.mPoly2Tri.TriIndex),t.STATIC_DRAW):t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.obj.triIndis,t.STATIC_DRAW)))}}},{key:"BeginEdit",value:function(t,e){this.prepareFollowGround(),this.setEval(!0);var i=this.eVal,r=this.obj.gl,s=this.obj;this.style.filled&&(i.editShapeIndexBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.editShapeIndexBuffer),this.shapeType===l.r.ELLIPSE?r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(s.TriIndex),r.STATIC_DRAW):r.bufferData(r.ELEMENT_ARRAY_BUFFER,s.triIndis,r.STATIC_DRAW)),i.walker=t,i.isFreeDrawing=e,this.FEditing=!0,this.fillGeo(),this.clear()}},{key:"PrepareFollowGround",value:function(){var t=this.obj;if(this.style.zMode===l.u.Z_GROUND_FOLLOW){t.cdt2dWorker&&(t.cdt2dWorker.terminate(),delete t.cdt2dWorker),t.buildForFollowGround=!1,t.userObj.FGlobe.FDRAWED_MAX_LEVEL<l.z.FBUILD_REQLOD?this.setCoordLenForDraw(l.q.initial):this.setCoordLenForDraw(l.q.lowLod);this.build(!1),t.TriIndex=_(this._coords,null,2),t.TriIndexCnt=t.TriIndex.length,t.beginEditTriangle=!0}}},{key:"EndEdit",value:function(){var t=this.eVal,e=this.obj.gl;if(this.shapeVertBuff||(this.shapeVertBuff=e.createBuffer()),this.shapeTypedArr=this.eVal.editShapeTypedArr.slice(0,3*this._coordsZ.length),t.editShapeTypedArr=null,e.bindBuffer(e.ARRAY_BUFFER,this.shapeVertBuff),e.bufferData(e.ARRAY_BUFFER,this.shapeTypedArr,e.STATIC_DRAW),this.FEditing=!1,e.deleteBuffer(t.editShapeVertBuff),e.deleteBuffer(t.editShapeIndexBuffer),this.setEval(!1),this.style.filled){this.shapeIndexBuffer||(this.shapeIndexBuffer=e.createBuffer());this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.style.border||this.style.filled)&&this.obj.userObj.FGlobe.FDrawedWorldDeg.CSIsCommonRegionT(this.obj.Limit)?this.obj.userObj.FGlobe.FDRAWED_MAX_LEVEL>l.z.FBUILD_REQLOD?(this.setCoordLenForDraw(l.q.lowLod),this.build(!1),this.style.filled&&this.buildTriangle(),this.obj.lastOverlapedCells=null,this.reBuildReq(),this.fontBuild()):(this.setCoordLenForDraw(l.q.lowLod),this.build(!1),this.style.filled&&(this.buildTriangle(),e.bindBuffer(e.ARRAY_BUFFER,this.shapeVertBuff),e.bufferData(e.ARRAY_BUFFER,this.shapeTypedArr,e.STATIC_DRAW))):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_MSL||(this.setCoordLenForDraw(l.q.lowLod),this.buildTriangle(!1),this.obj.TriIndexCnt&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.shapeIndexBuffer),this.shapeType===l.r.ELLIPSE?e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.obj.TriIndex),e.STATIC_DRAW):e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.obj.triIndis,e.STATIC_DRAW)),this.build())}}},{key:"SetCoordLenForDraw",value:function(t){switch(this.obj.indexSideMainCoords=[],t){case l.q.initial:this.obj.surfaceBorderCoordLen=0,this.obj.sideBorderCoordLen=0;break;case l.q.lowLod:this.obj.gf_mainCoordLen=this._coords.length,this.obj.surfaceBorderCoordLen=this._coords.length/2,this.obj.sideBorderCoordLen=this._coords.length;for(var e=0;e<this._coordsZ.length;e++)this.obj.indexSideMainCoords.push(e);break;case l.q.drawSide:this.obj.sideBorderCoordLen=this.obj.gf_mainCoordLen;break;case l.q.drawSideBorder:this.obj.indexSideMainCoords=this.obj.gf_indexSideMainCoords.slice()}}},{key:"SetEval",value:function(t){t?this.eVal=new O(this,this.obj.gl):delete this.eVal}},{key:"GetAsJSON",value:function(){var t=y.GetStyle(this.style),e={type:this.type,Fid:this.Fid,coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),_coords:this._coords.slice(),_coordsZ:this._coordsZ.slice(),style:t,isEditCenter:this.isEditCenter,proportional:this.proportional,radius1:this.radius1,radius2:this.radius2,rotDeg:this.rotDeg,shapeType:this.shapeType,solid3D:this.solid3D};return this.attribs&&(e.attribs=JSON.parse(JSON.stringify(this.attribs))),e.heights=Array.isArray(this.heights)?this.heights.slice():null,e}}]),t}());function Z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function W(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Z(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var Y=new(function(){function t(){n()(this,t),this.CheckHasFontIcon=y.CheckHasFontIcon,this.UpdateFont=y.UpdateFont,this.CheckFontPacket=y.CheckFontPacket,this.Rebuild=y.Rebuild,this.BuildEditIcons=y.BuildEditIcons,this.StyleChanged=y.StyleChanged,this.RepairHeightsSingle=y.RepairHeightsSingle,this.FindLod=y.FindLod}return h()(t,[{key:"Clear",value:function(t){var e=this.obj;e.arcAreaVertBuff&&(e.gl.deleteBuffer(e.arcAreaVertBuff),e.arcAreaVertBuff=null),e.arcAreaVertBuff2&&(e.gl.deleteBuffer(e.arcAreaVertBuff2),e.arcAreaVertBuff2=null),e.arcAreaIndexBuffer&&(e.gl.deleteBuffer(e.arcAreaIndexBuffer),e.arcAreaIndexBuffer=null),t&&e.arcAreaSideVertBuff&&(e.gl.deleteBuffer(e.arcAreaSideVertBuff),e.arcAreaSideVertBuff=null,e.gl.deleteBuffer(e.arcAreaTopVertBuff),e.arcAreaTopVertBuff=null,e.gl.deleteBuffer(e.arcAreaCenterLineBuff),e.arcAreaCenterLineBuff=null)}},{key:"SaveInfo",value:function(){this.SavedInfo={style:W({},this.style),coords:this.coords.slice(),_coords:this._coords.slice(),_coordsZ:this._coordsZ.slice(),coordsZ:this.coordsZ.slice(),objLimit:W({},this.obj.Limit),radius1:this.radius1,radius2:this.radius2,stepAng:this.stepAng,startAng:this.startAng,endAng:this.endAng,arcAreaTypedArr:this.obj.arcAreaTypedArr.slice(),arcAreaTypedArr2:this.obj.arcAreaTypedArr2.slice(),triIndex:this.obj.TriIndex?this.obj.TriIndex.slice():null,triIndexCnt:this.obj.TriIndexCnt},this.solid3D&&(this.SavedInfo.heights=this.heights.slice()),this.SavedInfo.midCoord=new u.u(0,0),this.SavedInfo.midCoord.SetP(this.obj.midCoord)}},{key:"RestoreInfo",value:function(){Object.assign(this.style,this.SavedInfo.style),Object.assign(this.obj.Limit,this.SavedInfo.objLimit),this.coords=this.SavedInfo.coords.slice(),this._coords=this.SavedInfo._coords.slice(),this._coordsZ=this.SavedInfo._coordsZ.slice(),this.coordsZ=this.SavedInfo.coordsZ.slice(),this.radius1=this.SavedInfo.radius1,this.radius2=this.SavedInfo.radius2,this.stepAng=this.SavedInfo.stepAng,this.startAng=this.SavedInfo.startAng,this.endAng=this.SavedInfo.endAng,this.obj.arcAreaTypedArr=this.SavedInfo.arcAreaTypedArr.slice(),this.obj.arcAreaTypedArr2=this.SavedInfo.arcAreaTypedArr2.slice(),this.obj.TriIndex=this.SavedInfo.triIndex.slice(),this.obj.TriIndexCnt=this.SavedInfo.triIndexCnt,this.solid3D&&(this.heights=this.SavedInfo.heights.slice()),this.obj.TriIndexCnt&&(this.obj.gl.bindBuffer(this.obj.gl.ELEMENT_ARRAY_BUFFER,this.obj.arcAreaIndexBuffer),this.obj.gl.bufferData(this.obj.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.obj.TriIndex),this.obj.gl.STATIC_DRAW)),this.obj.midCoord.SetP(this.SavedInfo.midCoord),this.updateFont()}},{key:"ReBuildReq",value:function(){for(var t=this.obj.userObj.FGlobe,e=this.obj.userObj.FGlobe.FDrawedCells.slice(),i=[],r=this.obj,s=e.length;s--;)r.Limit.CSIsCommonRegionT(e[s].FCellTGW)&&i.push(e[s]);r.lastOverlapedCells&&i.length===r.lastOverlapedCells.length&&r.userObj.CellSames(r.lastOverlapedCells,i)||(r.cdt2dWorker?(r.cdt2dWorker.terminate(),delete r.cdt2dWorker,r.lastOverlapedCells=i.slice(),r.cdt2dWorker=new Worker(w.a),r.cdt2dWorker.onmessage=this.cdt2dWorkerOnMessage):t.currentWorkerCount<=l.z.MAX_WORKER_COUNT&&(this.setCoordLenForDraw(l.q.lowLod),r.lastOverlapedCells=i.slice(),r.cdt2dWorker=new Worker(w.a),r.cdt2dWorker.onmessage=this.cdt2dWorkerOnMessage,t.currentWorkerCount++,this.obj.userObj.currentWorkerCount++))}},{key:"Build",value:function(t){var e=this.obj,i=this.eVal;e.LOD=u.b.Max(this.findLod(e.Limit)-3,0),t?this.style.filled?(e.gf_coords.length=0,this.findFollowGroundCoords(),e.gf_mainCoordLen=e.gf_coords.length,this.addSteiners(),e.arcAreaTypedArr=new Float32Array(e.gf_coords.length/2*3),e.gf_coordsZ.length=e.gf_coords.length/2,this.solid3D?(this.arcAreaTopTypedArr=new Float32Array(e.gf_coords.length/2*3),this.arcAreaSideTypedArr=new Float32Array(3*(e.gf_mainCoordLen/2*2+2)),e.gf_coordsZ.fill(this._coordsZ[0])):e.gf_coordsZ.fill(this.coordsZ[0]),e.gf_lineCoords.length=0,this.findFollowGroundCoordsForCenterLines(),e.gf_mainCoordLenForCenterLines=e.gf_lineCoords.length,e.arcAreaTypedArr2=new Float32Array(e.gf_mainCoordLenForCenterLines/2*3),e.gf_lineCoordsZ.length=e.gf_mainCoordLenForCenterLines/2,e.gf_lineCoordsZ.fill(this.coordsZ[0]),e.buildForFollowGround=!0,this.coordBuild(!0),this.buildTriangle(e.arcAreaIndexBuffer,e.gf_coords)):this.style.border&&(e.gf_coords.length=0,this.findFollowGroundCoords(),e.gf_mainCoordLen=e.gf_coords.length,this.addSteiners(),e.arcAreaTypedArr=new Float32Array(e.gf_coords.length/2*3),e.gf_coordsZ.length=e.gf_coords.length/2,this.solid3D?(this.arcAreaTopTypedArr=new Float32Array(e.gf_coords.length/2*3),this.arcAreaSideTypedArr=new Float32Array(3*(e.gf_mainCoordLen/2*2+2)),e.gf_coordsZ.fill(this.coordsZ[0])):e.gf_coordsZ.fill(this.coordsZ[0]),e.gf_lineCoords.length=0,this.findFollowGroundCoordsForCenterLines(),e.gf_mainCoordLenForCenterLines=e.gf_lineCoords.length,e.arcAreaTypedArr2=new Float32Array(e.gf_mainCoordLenForCenterLines/2*3),e.gf_lineCoordsZ.length=e.gf_mainCoordLenForCenterLines/2,e.gf_lineCoordsZ.fill(this.coordsZ[0]),e.gf_lineCoords.length=0,this.findFollowGroundCoordsForCenterLines(),e.gf_mainCoordLenForCenterLines=e.gf_lineCoords.length,e.arcAreaTypedArr2=new Float32Array(e.gf_mainCoordLenForCenterLines/2*3),e.gf_lineCoordsZ.length=e.gf_mainCoordLenForCenterLines/2,e.gf_lineCoordsZ.fill(this.coordsZ[0]),e.buildForFollowGround=!0,this.coordBuild(!1),e.BuffDataisOk=!0):this._coords.length&&this._coordsZ.length&&(this.obj.startP=new u.w(0,0,0),this.fontBuild(),this.coordBuild(!1),i&&this.buildEditIcons(i))}},{key:"BuildTriangle",value:function(t,e){var i=this.obj,r=this.obj.gl;e?i.cdt2dWorker&&(this.start2=new Date,i.cdt2dWorker.postMessage([e,i.gf_mainCoordLen])):(u.b.PolyMakeCCW(this._coords),i.TriIndex=_(this._coords,null,2),i.TriIndexCnt=i.TriIndex.length,i.TriIndexCnt&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(i.TriIndex),i.gl.STATIC_DRAW)))}},{key:"Cdt2dWorkerOnMessage",value:function(t){var e=this.obj;if("loaded"==t.data[0]){e.canDrawCenterOrSide=!1;this.build(!0)}else e.TriIndex=t.data.slice(),e.TriIndexCnt=e.TriIndex.length,e.sideBorderCoordLen=e.gf_mainCoordLen,e.cdt2dWorker.terminate(),delete e.cdt2dWorker,--e.userObj.FGlobe.currentWorkerCount,--e.userObj.currentWorkerCount,e.BuffDataisOk=!0,e.canDrawCenterOrSide=!0,e.userObj.FGlobe.DrawRender()}},{key:"FixedAnglesAndFindCoordLength",value:function(){Math.abs(this.endAng-this.startAng)%360==0&&(this.endAng-=1e-7,this.fixedEAng=this.endAng),this.startAng>0&&this.endAng<0?(this.fixedSAng=this.startAng%360,this.fixedEAng=this.endAng%360+360):this.startAng<0&&this.endAng>0?(this.fixedSAng=this.startAng%360+360,this.fixedEAng=this.endAng%360):this.startAng<0&&this.endAng<0?(this.fixedSAng=this.startAng%360+360,this.fixedEAng=this.endAng%360+360):(this.fixedSAng=this.startAng%360,this.fixedEAng=this.endAng%360),this.fixedSAng>this.fixedEAng&&(this.fixedEAng+=360),this.fixedSAng+=90,this.fixedEAng+=90,this.stepCount=Math.floor((this.fixedEAng-this.fixedSAng)/this.stepAng),this.overageAng=(this.fixedEAng-this.fixedSAng)%this.stepAng,isNaN(this.stepCount)||"number"!=typeof this.stepCount||(this.overageAng?this._coords.length=2*(this.stepCount+1)+2:this._coords.length=2*(this.stepCount+1))}},{key:"FillMidGeo",value:function(t,e){var i,r,s,o,n=new u.u(0,0),a=new u.w(0,0,0),h=new u.u(0,0),d=new u.u(0,0);t*=l.z.GLOBE_RADIUS_K,e*=l.z.GLOBE_RADIUS_K,n.SetV(u.b.DegreeToRadyan(this.coords[0]),u.b.DegreeToRadyan(this.coords[1])),u.b.GeoTo3DP(n,l.z.GLOBE_RADIUS,a),a.Normalize(),i=u.b.DegreeToRadyan(this.obj.midAng),r=t*Math.cos(i),s=e*Math.sin(i),o=Math.sqrt(r*r+s*s),i=u.b.DegreeToRadyan(-u.b.CSAngleV2(r,s)),Object.assign(d,n),u.b.X7UX4S(d,o,l.z.GLOBE_RADIUS),h=this.rotateNorth(d,a,i,0),this.obj.midCoord.SetV(u.b.RadyanToDegree(h.x),u.b.RadyanToDegree(h.y))}},{key:"FillArcAreaGeo",value:function(t,e,i){var r,s,o,n,a;t*=l.z.GLOBE_RADIUS_K,e*=l.z.GLOBE_RADIUS_K;var h=new u.u(0,0),d=new u.w(0,0,0),c=new u.u(0,0),f=new u.u(0,0),p=[];for(h.SetV(u.b.DegreeToRadyan(this.coords[0]),u.b.DegreeToRadyan(this.coords[1])),u.b.GeoTo3DP(h,l.z.GLOBE_RADIUS,d),d.Normalize(),s=0;s<=this.stepCount;s++)r=u.b.DegreeToRadyan(s*this.stepAng+this.fixedSAng),o=t*Math.cos(r),n=e*Math.sin(r),a=Math.sqrt(o*o+n*n),r=u.b.DegreeToRadyan(-u.b.CSAngleV2(o,n)),Object.assign(f,h),u.b.X7UX4S(f,a,l.z.GLOBE_RADIUS),c=this.rotateNorth(f,d,r,0),f.SetV(u.b.RadyanToDegree(c.x),u.b.RadyanToDegree(c.y)),p[2*s]=f.x,p[2*s+1]=f.y;if(this.overageAng&&(r=u.b.DegreeToRadyan((s-1)*this.stepAng+this.fixedSAng+this.overageAng),o=t*Math.cos(r),n=e*Math.sin(r),a=Math.sqrt(o*o+n*n),r=u.b.DegreeToRadyan(-u.b.CSAngleV2(o,n)),Object.assign(f,h),u.b.X7UX4S(f,a,l.z.GLOBE_RADIUS),c=this.rotateNorth(f,d,r,0),f.SetV(u.b.RadyanToDegree(c.x),u.b.RadyanToDegree(c.y)),p[2*s]=f.x,p[2*s+1]=f.y),i){for(s=0;s<p.length-1;s+=2)this._coords[p.length+s]=p[s],this._coords[p.length+s+1]=p[s+1];this.FEditing&&this.setDragPoints(h,f,d)}else for(s=p.length-1;s>0;s-=2)this._coords[p.length-s-1]=p[s-1],this._coords[p.length-s]=p[s]}},{key:"FillGeo",value:function(){this.fixedAnglesAndFindCoordLength(),this.findMidPoint(),this.fillArcAreaGeo(this.radius2,this.radius2,!1),this.fillArcAreaGeo(this.radius1,this.radius1,!0)}},{key:"SetDragPoints",value:function(t,e,i){var r,s,o,n;r=u.b.DegreeToRadyan((this.fixedEAng-this.fixedSAng)/2+this.fixedSAng),s=this.radius2*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius2*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(-u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.CZero=this.rotateNorth(e,i,r,0),this.eVal.CZero.ConvertRadyanToDegree(),r=u.b.DegreeToRadyan((this.fixedEAng-this.fixedSAng)/2+this.fixedSAng),s=this.radius1*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius1*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(-u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.C90=this.rotateNorth(e,i,r,0),this.eVal.C90.ConvertRadyanToDegree(),r=u.b.DegreeToRadyan(this.fixedEAng),s=this.radius2*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius2*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(-u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.C180=this.rotateNorth(e,i,r,0),this.eVal.C180.ConvertRadyanToDegree(),r=u.b.DegreeToRadyan(this.fixedSAng),s=this.radius2*Math.cos(r)*l.z.GLOBE_RADIUS_K,o=this.radius2*Math.sin(r)*l.z.GLOBE_RADIUS_K,n=Math.sqrt(s*s+o*o),r=u.b.DegreeToRadyan(-u.b.CSAngleV2(s,o)),Object.assign(e,t),u.b.X7UX4S(e,n,l.z.GLOBE_RADIUS),this.eVal.C270=this.rotateNorth(e,i,r,0),this.eVal.C270.ConvertRadyanToDegree()}},{key:"FindMidPoint",value:function(){this.obj.midPRad=(this.radius2-this.radius1)/2+this.radius1,this.obj.midAng=(this.fixedEAng-this.fixedSAng)/2+this.fixedSAng,this.fillMidGeo(this.obj.midPRad,this.obj.midPRad)}},{key:"BuildStartPoint",value:function(){var t=this.obj.userObj.tempp2d,e=this.obj.TempGeo3C;t.SetV(this.obj.midCoord.x,this.obj.midCoord.y),t.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,e):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_GROUND_FOLLOW||u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(t,!1)+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,e),this.obj.startP.SetP(e)}},{key:"FontBuild",value:function(){var t=this.obj.userObj.tempp2d;t.SetV(this.obj.midCoord.x,this.obj.midCoord.y),t.ConvertDegreeToRadyan(),this.style.zMode===l.u.Z_MSL?this.obj.arcAreaSideVertBuff?u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+(this.coordsZ[0]+this.heights[0])*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_GROUND_FOLLOW||(this.obj.arcAreaSideVertBuff?u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(t,!1)+(this.coordsZ[0]+this.heights[0])*l.z.GLOBE_RADIUS_K,this.obj.Geo3C):u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS+this.obj.userObj.FGlobe.XyecYr(t,!1)+this.coordsZ[0]*l.z.GLOBE_RADIUS_K,this.obj.Geo3C))}},{key:"CoordBuild",value:function(t){this.FEditing?(this.buildStartPoint(),this.fillBuffers(this.eVal.editArcAreaTypedArr,this.eVal.editArcAreaVertBuff),this.fillBufferForCenterLines(this.eVal.editArcAreaTypedArr2,this.eVal.editArcAreaVertBuff2),this.eVal.FillCenterZPoint()):this.obj.arcAreaVertBuff&&(this.buildStartPoint(),this.fillBuffers(this.obj.arcAreaTypedArr,this.obj.arcAreaVertBuff,t),this.fillBufferForCenterLines(this.obj.arcAreaTypedArr2,this.obj.arcAreaVertBuff2))}},{key:"FindLimitsAndCenter",value:function(){this.obj.Limit.Clear(),this.obj.Limit.ExpandByCoords(this._coords),this.obj.Limit.GetCenterPoint(this.center)}},{key:"RotateNorthOther",value:function(t,e,i){var r=new u.w(0,0,0),s=new u.u(0,0);return u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,r),r.Normalize(),u.b.RotatePointAroundVector(r,e.x,e.y,e.z,u.b.DegreeToRadyan(i)),r.DotProductSetP(r,l.z.GLOBE_RADIUS),u.b.CarToSpher2(r,s),s}},{key:"RotateNorth",value:function(t,e,i,r){var s=new u.w(0,0,0),o=new u.u(0,0);return u.b.GeoTo3DP(t,l.z.GLOBE_RADIUS,s),s.Normalize(),u.b.RotatePointAroundVector(s,e.x,e.y,e.z,Math.PI/2+u.b.DegreeToRadyan(r)+i),s.DotProductSetP(s,l.z.GLOBE_RADIUS),u.b.CarToSpher2(s,o),o}},{key:"FillTypeArrays",value:function(t,e){var i,r,s=0;!this.FEditing&&this.obj.buildForFollowGround?(i=this.obj.gf_coords.slice(),r=this.obj.gf_coordsZ.slice()):(i=this._coords,r=this._coordsZ);var o=this.obj,n=this.style.zMode,a=o.userObj,h=a.FGlobe,d=a.tempp2d,c=o.TempGeo3C,f=h.FDRAWED_MIN_CELL_MESH_DELTADEG*l.z.EXTRA_DEG_K,p=!this.FEditing&&this.fixedTop&&this.solid3D;p&&this.findFixedTopMax(i,r);var F=0,y=0,A=null;n===l.u.Z_GROUND_FOLLOW&&(A=h.XnCaoF(o.Limit));for(var g=i.length/2;g--;)s=2*g,d.SetV(i[s],i[s+1]),d.ConvertDegreeToRadyan(),n===l.u.Z_MSL?u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+r[g]*l.z.GLOBE_RADIUS_K,c):n===l.u.Z_GROUND_PERVERTEX?(y=h.XyecYr(d,!1),u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+y+r[g]*l.z.GLOBE_RADIUS_K,c)):n===l.u.Z_GROUND_FOLLOW&&(this.FEditing?y=h.XjTSzm(i[s],i[s+1],!1,A):(y=h.XjTSzm(i[s],i[s+1],!1,A),s>=o.gf_mainCoordLen&&(y=u.b.Max(y,h.XjTSzm(i[s]-f,i[s+1],!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]+f,i[s+1],!1,A)),y=u.b.Max(y,h.XjTSzm(i[s],i[s+1]-f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s],i[s+1]+f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]-f,i[s+1]-f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]+f,i[s+1]-f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]-f,i[s+1]+f,!1,A)),y=u.b.Max(y,h.XjTSzm(i[s]+f,i[s+1]+f,!1,A))),F=this.style.depthTest&&s>=o.gf_mainCoordLen?h.FDRAWED_MIN_CELL_RES_METERS*l.z.EXTRA_Z_COT_K:0),d.SetV(i[s],i[s+1]),d.ConvertDegreeToRadyan(),u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+y+r[g]*l.z.GLOBE_RADIUS_K+F,c)),c.SetVecSub(o.startP,c),o.tempArr[0]=c.x,o.tempArr[1]=c.y,o.tempArr[2]=c.z,t.set(o.tempArr,3*g),e&&(p?u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+o.fixedTopMax+F,c):u.b.GeoTo3DP(d,l.z.GLOBE_RADIUS+y+(r[g]+this.heights[0])*l.z.GLOBE_RADIUS_K+F,c),c.SetVecSub(o.startP,c),o.tempArr[0]=c.x,o.tempArr[1]=c.y,o.tempArr[2]=c.z,this.arcAreaTopTypedArr.set(o.tempArr,3*g))}},{key:"FindFixedTopMax",value:function(t,e){var i=this.obj,r=this.style.zMode,s=i.userObj.FGlobe,o=i.userObj.tempp2d,n=0,a=0,h=0,d=0,c=0,f=this.heights.slice();if(r===l.u.Z_GROUND_FOLLOW){for(d=e.length;d--;)c=2*d,o.SetV(t[c],t[c+1]),o.ConvertDegreeToRadyan(),a=u.b.Max(a,s.XyecYr(o,!1));n=e[0]}else if(r===l.u.Z_GROUND_PERVERTEX)for(d=e.length;d--;)c=2*d,o.SetV(t[c],t[c+1]),o.ConvertDegreeToRadyan(),a=u.b.Max(a,s.XyecYr(o,!1)),n=u.b.Max(n,e[d]);else if(r===l.u.Z_MSL)for(d=e.length;d--;)c=2*d,o.SetV(t[c],t[c+1]),n=u.b.Max(n,e[d]),o.ConvertDegreeToRadyan();h=u.b.Max(h,f[0]),i.fixedTopMax=a+(n+h)*l.z.GLOBE_RADIUS_K}},{key:"FillSideTypeArray",value:function(t){var e;e=this.obj.buildForFollowGround?this.obj.gf_mainCoordLen/2:this._coordsZ.length,this.arcAreaSideTypedArr=new Float32Array(3*(2*e+2));for(var i=0;i<e;i++)this.arcAreaSideTypedArr[6*i]=t[3*i],this.arcAreaSideTypedArr[6*i+1]=t[3*i+1],this.arcAreaSideTypedArr[6*i+2]=t[3*i+2],this.arcAreaSideTypedArr[6*i+3]=this.arcAreaTopTypedArr[3*i],this.arcAreaSideTypedArr[6*i+4]=this.arcAreaTopTypedArr[3*i+1],this.arcAreaSideTypedArr[6*i+5]=this.arcAreaTopTypedArr[3*i+2];this.arcAreaSideTypedArr[this.arcAreaSideTypedArr.length-6]=t[0],this.arcAreaSideTypedArr[this.arcAreaSideTypedArr.length-5]=t[1],this.arcAreaSideTypedArr[this.arcAreaSideTypedArr.length-4]=t[2],this.arcAreaSideTypedArr[this.arcAreaSideTypedArr.length-3]=this.arcAreaTopTypedArr[0],this.arcAreaSideTypedArr[this.arcAreaSideTypedArr.length-2]=this.arcAreaTopTypedArr[1],this.arcAreaSideTypedArr[this.arcAreaSideTypedArr.length-1]=this.arcAreaTopTypedArr[2]}},{key:"FillBuffers",value:function(t,e,i){var r=this.obj.gl;this.solid3D?(this.FEditing?this.arcAreaTopTypedArr=new Float32Array(this.eVal.editArcAreaTypedArr.length):this.arcAreaTopTypedArr=new Float32Array(this.obj.arcAreaTypedArr.length),this.fillTypeArrays(t,!0),i||(r.bindBuffer(r.ARRAY_BUFFER,this.obj.arcAreaTopVertBuff),r.bufferData(r.ARRAY_BUFFER,this.arcAreaTopTypedArr,r.STATIC_DRAW)),this.fillSideTypeArray(t),i||(r.bindBuffer(r.ARRAY_BUFFER,this.obj.arcAreaSideVertBuff),r.bufferData(r.ARRAY_BUFFER,this.arcAreaSideTypedArr,r.STATIC_DRAW))):(this.fillTypeArrays(t,!1),i||(r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW)))}},{key:"Draw2d",value:function(){var t=this.obj;this.hasFontIcon&&(t.Geo3D.SetVecSub(t.Fp2T,t.Geo3C),t.userObj.FGlobe.Xh5WFD(t.Geo3D)?t.userObj.FGlobe.X9oM46(t.Geo3D,t.CanvasPoint):t.CanvasPoint.isValid=!1,t.CanvasPoint.isValid&&this.checkFontPacket()),this.solid3D&&this.style.showHeights&&this.Height.DrawHeights(),this.style.showDistances&&this.Dist.DrawDist2d(),this.style.showAngles&&this.Angle.DrawAngle()}},{key:"DrawSide",value:function(){var t=this.obj.gl,e=this.obj.userObj.FGlobe,i=this.obj;this.style.cullFace?t.cullFace(t.FRONT):t.disable(t.CULL_FACE),t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(1,1),t.bindBuffer(t.ARRAY_BUFFER,i.arcAreaSideVertBuff),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),this.style.filled&&(i.tempSideColor=this.style.__sideColor.slice(),i.tempSideColor[3]*=i.userObj.opacity,t.uniform4fv(e.P3DOpacityLoc,i.tempSideColor),this.style.zMode!==l.u.Z_GROUND_FOLLOW||this.FEditing?t.drawArrays(t.TRIANGLE_STRIP,0,2*this._coordsZ.length+2):(i.BuffDataisOk&&(t.bufferData(t.ARRAY_BUFFER,this.arcAreaSideTypedArr,t.STATIC_DRAW),this.setCoordLenForDraw(l.q.drawSide)),t.drawArrays(t.TRIANGLE_STRIP,0,i.sideBorderCoordLen+2))),this.style.border&&(i.tempBorderColor=this.style.__borderColor.slice(),i.tempBorderColor[3]*=i.userObj.opacity,t.uniform4fv(e.P3DOpacityLoc,i.tempBorderColor),this.style.zMode!==l.u.Z_GROUND_FOLLOW||this.FEditing?(t.drawArrays(t.LINES,0,2),t.drawArrays(t.LINES,this._coordsZ.length-2,2),t.drawArrays(t.LINES,this._coordsZ.length,2),t.drawArrays(t.LINES,this._coords.length-2,2)):i.canDrawCenterOrSide&&(t.drawArrays(t.LINES,0,2),t.drawArrays(t.LINES,i.gf_sideIndex[0],2),t.drawArrays(t.LINES,i.gf_sideIndex[1],2),t.drawArrays(t.LINES,i.gf_sideIndex[2],2)),t.bindBuffer(t.ARRAY_BUFFER,i.arcAreaCenterLineBuff),t.vertexAttribPointer(e.P3DvertexPos,3,t.FLOAT,!1,0,0),t.drawArrays(t.LINES,0,2)),t.disable(t.POLYGON_OFFSET_FILL),this.style.cullFace?t.cullFace(t.BACK):t.enable(t.CULL_FACE)}},{key:"DrawSurface",value:function(t,e){var i=this.obj.userObj.FGlobe,r=this.obj.gl,s=this.obj;this.style.cullFace||r.disable(r.CULL_FACE),r.bindBuffer(r.ARRAY_BUFFER,t),s.BuffDataisOk&&(this.solid3D?r.bufferData(r.ARRAY_BUFFER,this.arcAreaTopTypedArr,r.STATIC_DRAW):r.bufferData(r.ARRAY_BUFFER,s.arcAreaTypedArr,r.STATIC_DRAW)),r.vertexAttribPointer(i.P3DvertexPos,3,r.FLOAT,!1,0,0),s.TriIndexCnt&&this.style.filled&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),s.BuffDataisOk&&r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(s.TriIndex),r.STATIC_DRAW),s.tempFillColor=this.style.__fillColor.slice(),s.tempFillColor[3]*=s.userObj.opacity,r.uniform4fv(i.P3DOpacityLoc,s.tempFillColor),r.drawElements(r.TRIANGLES,s.TriIndexCnt,r.UNSIGNED_SHORT,0)),this.style.cullFace||r.enable(r.CULL_FACE),this.style.border&&(this.FEditing?(r.bindBuffer(r.ARRAY_BUFFER,this.eVal.editArcAreaVertBuff2),r.vertexAttribPointer(i.P3DvertexPos,3,r.FLOAT,!1,0,0),s.tempBorderColor=this.style.__borderColor.slice(),s.tempBorderColor[3]*=s.userObj.opacity,r.uniform4fv(i.P3DOpacityLoc,s.tempBorderColor),r.drawArrays(r.LINE_STRIP,0,3)):(r.bindBuffer(r.ARRAY_BUFFER,s.arcAreaVertBuff2),r.vertexAttribPointer(i.P3DvertexPos,3,r.FLOAT,!1,0,0),s.tempBorderColor=this.style.__borderColor.slice(),s.tempBorderColor[3]*=s.userObj.opacity,r.uniform4fv(i.P3DOpacityLoc,s.tempBorderColor),this.style.zMode===l.u.Z_GROUND_FOLLOW?s.canDrawCenterOrSide?r.drawArrays(r.LINE_STRIP,0,s.gf_lineCoordsZ.length):r.drawArrays(r.LINE_STRIP,0,s.arcAreaTypedArr2.length/3):r.drawArrays(r.LINE_STRIP,0,3)),s.BuffDataisOk&&(s.surfaceBorderCoordLen=s.gf_mainCoordLen/2),r.bindBuffer(r.ARRAY_BUFFER,t),r.vertexAttribPointer(i.P3DvertexPos,3,r.FLOAT,!1,0,0),s.tempBorderColor=this.style.__borderColor.slice(),s.tempBorderColor[3]*=s.userObj.opacity,r.uniform4fv(i.P3DOpacityLoc,s.tempBorderColor),this.FEditing||this.style.zMode!==l.u.Z_GROUND_FOLLOW?r.drawArrays(r.LINE_LOOP,0,this._coordsZ.length):r.drawArrays(r.LINE_LOOP,0,s.surfaceBorderCoordLen))}},{key:"DrawHeightPoint",value:function(){if(this.eVal.FHighlight){var t=this.obj.gl;t.bindBuffer(t.ARRAY_BUFFER,this.obj.arcAreaCenterLineBuff),t.vertexAttribPointer(this.obj.FGlobe.P3DvertexPos,3,t.FLOAT,!1,0,0),t.drawArrays(t.POINTS,0,1)}}},{key:"Draw3d",value:function(){var t=this.obj.userObj.FGlobe,e=this.obj.gl,i=this.obj,r=this.eVal;e.uniform1i(this.obj.FGlobe.P3DisPoint,0),i.Geo3DS.SetVecSub(i.Fp2T,i.startP),t.GLU.pushModel(),t.GLU.Translate(i.Geo3DS.x,i.Geo3DS.y,i.Geo3DS.z),t.GLU.setModelToGL(t.P3DmodelViewMatrixLoc),this.style.depthTest&&e.enable(e.DEPTH_TEST),this.FEditing&&r.editArcAreaVertBuff?this.solid3D?(this.drawSide(),this.drawSurface(i.arcAreaTopVertBuff,r.editArcAreaIndexBuffer),e.uniform1i(this.obj.FGlobe.P3DisPoint,1),t.FLastEditingCallback.can_change.Z&&(e.uniform4fv(t.P3DOpacityLoc,r.zColor),e.uniform1f(t.P3DPointSize,r.zSize),r.drawZPoint()),t.FLastEditingCallback.can_change.height&&(e.uniform4fv(t.P3DOpacityLoc,r.heightColor),e.uniform1f(t.P3DPointSize,r.heightSize),this.drawHeightPoint())):(this.drawSurface(r.editArcAreaVertBuff,r.editArcAreaIndexBuffer),e.uniform1i(this.obj.FGlobe.P3DisPoint,1),t.FLastEditingCallback.can_change.Z&&(e.uniform4fv(t.P3DOpacityLoc,r.zColor),e.uniform1f(t.P3DPointSize,r.zSize),r.drawZPoint())):i.arcAreaVertBuff&&(this.solid3D?(this.drawSide(),this.drawSurface(i.arcAreaTopVertBuff,i.arcAreaIndexBuffer)):this.drawSurface(i.arcAreaVertBuff,i.arcAreaIndexBuffer),i.BuffDataisOk=!1,this.style.depthTest&&e.disable(e.DEPTH_TEST)),t.GLU.popModel()}},{key:"FindFollowGroundCoords",value:function(){for(var t,e,i,r,s=this.obj.userObj.FGlobe.FDRAWED_MIN_CELL_MESH_DELTADEG/2,o=0;o<this._coordsZ.length/2-1;o++){t=this._coords[2*o],e=this._coords[2*o+1],i=this._coords[2*o+2],r=this._coords[2*o+3],this.obj.gf_coords.push(t),this.obj.gf_coords.push(e),(l=(h=u.b.Dist2DV(t,e,i,r))/s)>50&&(l=50,s=h/50);for(var n=1;n<l-1;n++){var a=u.b.CalcPositionV(h,t,e,i,r,n*s,0);this.obj.gf_coords.push(a[0]),this.obj.gf_coords.push(a[1])}}this.obj.gf_sideIndex[0]=this.obj.gf_coords.length,t=this._coords[2*(this._coordsZ.length/2-1)],e=this._coords[2*(this._coordsZ.length/2-1)+1],i=this._coords[2*(this._coordsZ.length/2-1)+2],r=this._coords[2*(this._coordsZ.length/2-1)+3],this.obj.gf_coords.push(t),this.obj.gf_coords.push(e),(l=(h=u.b.Dist2DV(t,e,i,r))/s)>50&&(l=50,s=h/50);for(n=1;n<l-1;n++){a=u.b.CalcPositionV(h,t,e,i,r,n*s,0);this.obj.gf_coords.push(a[0]),this.obj.gf_coords.push(a[1])}this.obj.gf_sideIndex[1]=this.obj.gf_coords.length;for(o=this._coordsZ.length/2;o<this._coords.length/2-1;o++){t=this._coords[2*o],e=this._coords[2*o+1],i=this._coords[2*o+2],r=this._coords[2*o+3],this.obj.gf_coords.push(t),this.obj.gf_coords.push(e),(l=(h=u.b.Dist2DV(t,e,i,r))/s)>50&&(l=50,s=h/50);for(n=1;n<l-1;n++){a=u.b.CalcPositionV(h,t,e,i,r,n*s,0);this.obj.gf_coords.push(a[0]),this.obj.gf_coords.push(a[1])}}this.obj.gf_sideIndex[2]=this.obj.gf_coords.length,t=this._coords[this._coords.length-2],e=this._coords[this._coords.length-1],i=this._coords[0],r=this._coords[1],this.obj.gf_coords.push(t),this.obj.gf_coords.push(e);var h,l=(h=u.b.Dist2DV(t,e,i,r))/s;for(n=1;n<l-1;n++){a=u.b.CalcPositionV(h,t,e,i,r,n*s,0);this.obj.gf_coords.push(a[0]),this.obj.gf_coords.push(a[1])}}},{key:"findFollowGroundCoordsForCenterLines",value:function(){var t,e,i,r,s=this.obj.userObj.FGlobe.FDRAWED_MIN_CELL_MESH_DELTADEG/2;t=this._coords[this._coordsZ.length],e=this._coords[this._coordsZ.length+1],i=this.coords[0],r=this.coords[1],this.obj.gf_lineCoords.push(t),this.obj.gf_lineCoords.push(e);for(var o=(h=u.b.Dist2DV(t,e,i,r))/s,n=1;n<o-1;n++){var a=u.b.CalcPositionV(h,t,e,i,r,n*s,0);this.obj.gf_lineCoords.push(a[0]),this.obj.gf_lineCoords.push(a[1])}t=this.coords[0],e=this.coords[1],i=this._coords[this._coords.length-2],r=this._coords[this._coords.length-1],this.obj.gf_lineCoords.push(t),this.obj.gf_lineCoords.push(e);var h;for(o=(h=u.b.Dist2DV(t,e,i,r))/s,n=1;n<o-1;n++){a=u.b.CalcPositionV(h,t,e,i,r,n*s,0);this.obj.gf_lineCoords.push(a[0]),this.obj.gf_lineCoords.push(a[1])}this.obj.gf_lineCoords.push(this._coords[this._coords.length-2]),this.obj.gf_lineCoords.push(this._coords[this._coords.length-1])}},{key:"AddSteiners",value:function(){for(var t,e=0,i=0,r={},s=this.obj,o=s.lastOverlapedCells.length;o--;)for(var n=s.lastOverlapedCells[o],a=n.FCellTGW.LL.y,h=n.FCellTGW.LL.x,l=n.FMeshDeltaDegW,u=n.FMeshDeltaDegH,d=0;d<5;d++){e=a+l*d;for(var c=0;c<5;c++)i=h+u*c,r[t="".concat(e.toFixed(12),",").concat(i.toFixed(12))]||(r[t]=!0,this.obj.gf_coords.push(e),this.obj.gf_coords.push(i))}}},{key:"PrepareFollowGround",value:function(){var t=this.obj;if(this.style.zMode===l.u.Z_GROUND_FOLLOW){t.cdt2dWorker&&(t.cdt2dWorker.terminate(),delete t.cdt2dWorker),t.buildForFollowGround=!1,t.userObj.FGlobe.FDRAWED_MAX_LEVEL<l.z.FBUILD_REQLOD?this.setCoordLenForDraw(l.q.initial):this.setCoordLenForDraw(l.q.lowLod);this.build(!1),t.TriIndex=_(this._coords,null,2),t.TriIndexCnt=t.TriIndex.length}}},{key:"BeginEdit",value:function(t,e){this.obj.canDrawCenterOrSide=!1,this.prepareFollowGround(),this.setEval(!0),this.style.filled&&(this.eVal.editArcAreaIndexBuffer=this.obj.gl.createBuffer(),this.obj.gl.bindBuffer(this.obj.gl.ELEMENT_ARRAY_BUFFER,this.eVal.editArcAreaIndexBuffer),this.obj.gl.bufferData(this.obj.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.obj.TriIndex),this.obj.gl.STATIC_DRAW)),this.solid3D&&this.repairHeightsSingle(),this.eVal.walker=t,this.eVal.isFreeDrawing=e,this.FEditing=!0,this.clear()}},{key:"EndEdit",value:function(){var t=this.obj,e=this.obj.gl;t.canDrawCenterOrSide=!1,t.arcAreaVertBuff=t.gl.createBuffer(),t.arcAreaTypedArr=this.eVal.editArcAreaTypedArr.slice(0,3*this._coordsZ.length),this.eVal.editArcAreaTypedArr=null,e.bindBuffer(e.ARRAY_BUFFER,t.arcAreaVertBuff),e.bufferData(e.ARRAY_BUFFER,t.arcAreaTypedArr,e.STATIC_DRAW),t.arcAreaVertBuff2=e.createBuffer(),t.arcAreaTypedArr2=this.eVal.editArcAreaTypedArr2.slice(),this.eVal.editArcAreaTypedArr2=null,e.bindBuffer(e.ARRAY_BUFFER,t.arcAreaVertBuff2),e.bufferData(e.ARRAY_BUFFER,t.arcAreaTypedArr2,e.STATIC_DRAW),this.FEditing=!1,e.deleteBuffer(this.eVal.editArcAreaVertBuff),e.deleteBuffer(this.eVal.editArcAreaIndexBuffer),e.deleteBuffer(this.eVal.editArcAreaVertBuff2),this.setEval(!1),this.style.filled&&(t.arcAreaIndexBuffer=e.createBuffer(),this.style.zMode===l.u.Z_GROUND_FOLLOW&&(this.style.border||this.style.filled)&&t.userObj.FGlobe.FDrawedWorldDeg.CSIsCommonRegionT(t.Limit)?(t.userObj.FGlobe.FDRAWED_MAX_LEVEL,l.z.FBUILD_REQLOD,this.setCoordLenForDraw(l.q.lowLod),this.style.filled&&(this.buildTriangle(t.arcAreaIndexBuffer,null),e.bindBuffer(e.ARRAY_BUFFER,t.arcAreaVertBuff),e.bufferData(e.ARRAY_BUFFER,t.arcAreaTypedArr,e.STATIC_DRAW)),t.lastOverlapedCells=null,this.reBuildReq(),this.build(!0)):this.style.zMode!==l.u.Z_GROUND_PERVERTEX&&this.style.zMode!==l.u.Z_MSL||(this.setCoordLenForDraw(l.q.lowLod),this.style.filled&&(this.buildTriangle(t.arcAreaIndexBuffer,null),e.bindBuffer(e.ARRAY_BUFFER,t.arcAreaVertBuff),e.bufferData(e.ARRAY_BUFFER,t.arcAreaTypedArr,e.STATIC_DRAW)),this.build()))}},{key:"BuildCenterPoints",value:function(t,e,i,r,s,o,n,a){var h=this.obj,d=h.TempGeo3C,c=h.userObj,f=c.FGlobe,p=c.tempp2d,F=this.style.zMode;p.SetV(e,i),p.ConvertDegreeToRadyan();var y=0;if(F===l.u.Z_MSL)u.b.GeoTo3DP(p,l.z.GLOBE_RADIUS+(r+s)*l.z.GLOBE_RADIUS_K,d);else if(F===l.u.Z_GROUND_PERVERTEX)y=f.XyecYr(p,!1),a?u.b.GeoTo3DP(p,l.z.GLOBE_RADIUS+h.fixedTopMax+0,d):u.b.GeoTo3DP(p,l.z.GLOBE_RADIUS+y+(r+s)*l.z.GLOBE_RADIUS_K+0,d);else if(F===l.u.Z_GROUND_FOLLOW){var A;A=f.XnCaoF(h.Limit);var g=f.FDRAWED_MIN_CELL_MESH_DELTADEG*l.z.EXTRA_DEG_K;y=f.XjTSzm(e,i,!1,A),n&&!this.FEditing&&(y=u.b.Max(y,f.XjTSzm(e-g,i,!1,A)),y=u.b.Max(y,f.XjTSzm(e+g,i,!1,A)),y=u.b.Max(y,f.XjTSzm(e,i-g,!1,A)),y=u.b.Max(y,f.XjTSzm(e,i+g,!1,A)),y=u.b.Max(y,f.XjTSzm(e-g,i-g,!1,A)),y=u.b.Max(y,f.XjTSzm(e+g,i-g,!1,A)),y=u.b.Max(y,f.XjTSzm(e-g,i+g,!1,A)),y=u.b.Max(y,f.XjTSzm(e+g,i+g,!1,A))),a?u.b.GeoTo3DP(p,l.z.GLOBE_RADIUS+h.fixedTopMax+0,d):u.b.GeoTo3DP(p,l.z.GLOBE_RADIUS+y+(r+s)*l.z.GLOBE_RADIUS_K+0,d)}d.SetVecSub(h.startP,d),h.tempArr[0]=d.x,h.tempArr[1]=d.y,h.tempArr[2]=d.z,o.set(h.tempArr,t)}},{key:"BuildFollowGroundPoints",value:function(t,e){var i,r=this.obj.userObj.tempp2d,s=this.obj.userObj.FGlobe,o=this.obj,n=!this.FEditing&&this.fixedTop&&this.solid3D,a=0,h=0;i=s.XnCaoF(o.Limit);for(var d=o.gf_lineCoords.length/2;d--;)h=2*d,a=(this.FEditing,s.XjTSzm(o.gf_lineCoords[h],o.gf_lineCoords[h+1],!1,i)),r.SetV(o.gf_lineCoords[h],o.gf_lineCoords[h+1]),r.ConvertDegreeToRadyan(),n?u.b.GeoTo3DP(r,l.z.GLOBE_RADIUS+o.fixedTopMax+0,o.TempGeo3C):u.b.GeoTo3DP(r,l.z.GLOBE_RADIUS+a+(o.gf_lineCoordsZ[0]+e)*l.z.GLOBE_RADIUS_K+0,o.TempGeo3C),o.TempGeo3C.SetVecSub(o.startP,o.TempGeo3C),o.tempArr[0]=o.TempGeo3C.x,o.tempArr[1]=o.TempGeo3C.y,o.tempArr[2]=o.TempGeo3C.z,t.set(o.tempArr,3*d)}},{key:"FillCenterHeightLine",value:function(){this.obj.arcAreaTypedArr3=new Float32Array(6);var t=!this.FEditing&&this.fixedTop&&this.solid3D,e=this.obj.gl;this.buildCenterPoints(0,this.coords[0],this.coords[1],this.coordsZ[0],this.heights[0],this.obj.arcAreaTypedArr3,!1,t),this.buildCenterPoints(3,this.coords[0],this.coords[1],this.coordsZ[0],0,this.obj.arcAreaTypedArr3,!1,!1),e.bindBuffer(e.ARRAY_BUFFER,this.obj.arcAreaCenterLineBuff),e.bufferData(e.ARRAY_BUFFER,this.obj.arcAreaTypedArr3,this.obj.gl.STATIC_DRAW)}},{key:"FillBufferForCenterLines",value:function(t,e){var i=this.style.zMode;this.obj;if(this.solid3D){var r=!this.FEditing&&this.fixedTop;i!==l.u.Z_GROUND_FOLLOW||this.FEditing?(this.buildCenterPoints(0,this._coords[this._coordsZ.length],this._coords[this._coordsZ.length+1],this._coordsZ[this._coordsZ.length-1],this.heights[0],t,!1,r),this.buildCenterPoints(3,this.coords[0],this.coords[1],this.coordsZ[0],this.heights[0],t,!1,r),this.buildCenterPoints(6,this._coords[this._coords.length-2],this._coords[this._coords.length-1],this._coordsZ[this._coordsZ.length-1],this.heights[0],t,!1,r)):this.buildFollowGroundPoints(t,this.heights[0]),this.fillCenterHeightLine()}else i!==l.u.Z_GROUND_FOLLOW||this.FEditing?(this.buildCenterPoints(0,this._coords[this._coordsZ.length],this._coords[this._coordsZ.length+1],this._coordsZ[this._coordsZ.length-1],0,t),this.buildCenterPoints(3,this.coords[0],this.coords[1],this.coordsZ[0],0,t),this.buildCenterPoints(6,this._coords[this._coords.length-2],this._coords[this._coords.length-1],this._coordsZ[this._coordsZ.length-1],0,t)):this.buildFollowGroundPoints(t,0);var s=this.obj.gl;s.bindBuffer(s.ARRAY_BUFFER,e),s.bufferData(s.ARRAY_BUFFER,t,s.STATIC_DRAW)}},{key:"SetCoordLenForDraw",value:function(t){switch(this.obj.indexSideMainCoords=[],t){case l.q.initial:this.obj.surfaceBorderCoordLen=0,this.obj.sideBorderCoordLen=0;break;case l.q.lowLod:this.obj.gf_mainCoordLen=this._coords.length,this.obj.surfaceBorderCoordLen=this._coords.length/2,this.obj.sideBorderCoordLen=this._coords.length;for(var e=0;e<this._coordsZ.length;e++)this.obj.indexSideMainCoords.push(e);this.obj.gf_lineCoordsZ.length=3;break;case l.q.drawSide:this.obj.sideBorderCoordLen=this.obj.gf_mainCoordLen;break;case l.q.drawSideBorder:this.obj.indexSideMainCoords=this.obj.gf_indexSideMainCoords.slice()}}},{key:"SetEval",value:function(t){t?this.eVal=new R(this,this.obj.gl):delete this.eVal}},{key:"GetAsJSON",value:function(){var t=y.GetStyle(this.style),e={type:this.type,Fid:this.Fid,coords:this.coords.slice(),coordsZ:this.coordsZ.slice(),_coords:this._coords.slice(),_coordsZ:this._coordsZ.slice(),style:t,radius1:this.radius1,radius2:this.radius2,startAng:this.startAng,endAng:this.endAng,stepAng:this.stepAng,solid3D:this.solid3D};return this.attribs&&(e.attribs=JSON.parse(JSON.stringify(this.attribs))),e.heights=Array.isArray(this.heights)?this.heights.slice():null,e}}]),t}()),H=i(14),X=i.n(H),K=i(15),q=i.n(K),J=i(16),Q=i.n(J),$=function(){function t(){n()(this,t)}return h()(t,[{key:"Find2dPixelAndDraw",value:function(t,e){var i=this.distObj,r=i.eVal,s=i.savedSubCoords,o=i.savedSubCoordsZ,n=i.style;this.distObj.FEditing?this.FillCanvasPoint(r.subCoords[2*t],r.subCoords[2*t+1],r.subCoordsZ[t]):this.FillCanvasPoint(s[2*t],s[2*t+1],o[t]);var a=this.distObj.obj,h=a.CanvasPoint,l=a.distanceOfTwoPoint;h.isValid&&l[t]&&this.DrawToCanvas2d(e.vertexDist+this.Units.GetDistAsString(l[t]),n.distanceFont.hollow)}},{key:"Find2dLinkEdgeAndDraw",value:function(t,e,i){var r,s=this.distObj.obj,o=s.distanceOfTwoPoint,n=s.CanvasPoint,a=s.tempp2d,h=this.distObj.style.distanceFont.hollow;e?(a.ConvertDegreeToRadyan(),r=this.distObj.savedSubCoordsZ[this.distObj.savedSubCoordsZ.length-1],this.FGlobe.XsbPmI(a,r,n),n.isValid&&o[o.length-t/2]&&this.DrawToCanvas2d(i.vertexDist+this.Units.GetDistAsString(o[o.length-t/2]),h)):(a.ConvertDegreeToRadyan(),this.distObj.style.zMode===l.u.Z_MSL?this.distObj.coordsZ[0]&&(r=this.distObj.coordsZ[0]/2):r=this.FindZ(t),this.FGlobe.XsbPmI(a,r,n),n.isValid&&"number"==typeof o[o.length-t/2]&&this.DrawToCanvas2d(i.vertexDist+this.Units.GetDistAsString(o[o.length-t/2]),h))}},{key:"FillCanvasPoint",value:function(t,e,i){var r=this.distObj.obj.tempp2d;r.SetV(t,e),r.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(r,i,this.distObj.obj.CanvasPoint)}},{key:"DrawToCanvas2d",value:function(t,e){var i=this.FGlobe.ctxForDistAndHeight,r=this.distObj.obj.CanvasPoint,s=this.distObj.style,o=s.__distanceTextColor;if(e){var n=s.__distanceFontStr[1]*l.z.GLOBE_TEXT_SCALE;i.font=s.__distanceFontStr[0]+n+"pt "+s.__distanceFontStr[2],i.lineJoin="round",i.textBaseline="middle",i.lineWidth=3,i.strokeStyle="rgba(0,0,0, ".concat(s.opacity/2,")"),i.strokeText(t,r.x,r.y-10),i.lineWidth=1.5,i.strokeStyle="rgba(0,0,0,".concat(s.opacity,")"),i.strokeText(t,r.x,r.y-10),i.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),i.fillText(t,r.x,r.y-10)}else{n=s.__distanceFontStr[1]*l.z.GLOBE_TEXT_SCALE;i.font=s.__distanceFontStr[0]+n+"pt "+s.__distanceFontStr[2],i.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),i.fillText(t,r.x,r.y-10)}}},{key:"FindZ",value:function(t){return this.distObj.style.zMode===l.u.Z_MSL?this.distObj.coordsZ[t]:this.distObj.FEditing?this.FGlobe.XyecYr(this.distObj.obj.tempp2d,!0):this.FGlobe.XyecYr(this.distObj.obj.tempp2d,!0)+this.distObj.coordsZ[t]}}]),t}(),tt=function(t){function e(t){var i;return n()(this,e),(i=X()(this,q()(e).call(this))).distObj=t,i.FGlobe=t.obj.FGlobe,i.Units=i.FGlobe.Units,i.Lang=i.FGlobe.Lang,i.totalDistance=0,i}return Q()(e,t),h()(e,[{key:"DrawDist2d",value:function(){var t,e=this.distObj.obj.distanceOfTwoPoint;this.totalDistance=0,t=this.distObj.FEditing?e.length-2:e.length>2?e.length-1:0;for(var i=this.Lang[l.z.LANG].userObj.polygon,r=0;r<t;r++)this.Find2dPixelAndDraw(r,i),this.totalDistance+=e[r]}},{key:"DrawTotal",value:function(){var t=this.distObj.obj,e=t.distanceOfTwoPoint,i=t.tempp2d,r=t.CanvasPoint,s=this.distObj,o=s.coords,n=s.coordsZ,a=s.eVal;if(n.length>2){if(a)this.FGlobe.FLastEditingCallback.show_walker?-1===a.lastSnapIndex?a.walkerGeo.isValid?(this.totalDistance+=e[e.length-1],this.totalDistance+=e[e.length-2]):this.totalDistance+=e[e.length-1]:0===a.lastSnapIndex?this.totalDistance+=e[e.length-2]:a.lastSnapIndex===n.length-2?this.totalDistance+=e[e.length-1]:-1!==a.lastSnapIndex&&(this.totalDistance+=e[e.length-1]):(this.totalDistance+=e[e.length-1],this.totalDistance+=e[e.length-2]),i.SetV(o[o.length-4],o[o.length-3]),i.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(i,this.FindZ(n.length-2),r);else this.totalDistance+=e[e.length-1],i.SetV(o[o.length-2],o[o.length-1]),i.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(i,this.FindZ(n.length-1),r);this.distObj.obj.CanvasPoint.isValid&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.polygon.totalDistL+this.Units.GetDistAsString(this.totalDistance),this.distObj.style.distanceFont.hollow)}}},{key:"GetLastDistance",value:function(t){var e=this.distObj.coords;this.FGlobe.FCamera.FArcBall.XkHTjt(this.distObj.obj.tempp2d,u.b.DegreeToRadyan(e[e.length-t]),u.b.DegreeToRadyan(e[e.length-(t-1)]),u.b.DegreeToRadyan(e[0]),u.b.DegreeToRadyan(e[1]))}},{key:"DrawTotalWalker",value:function(){var t=this.distObj.obj,e=t.distanceOfTwoPoint,i=t.tempp2d,r=t.CanvasPoint,s=this.distObj,o=s.coords;if(s.coordsZ.length>2){var n,a=o.length;if(i.SetV(o[a-2],o[a-1]),i.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(i,this.FindZ(a/2-1),r),r.isValid)n=e.length>1?this.totalDistance+e[e.length-1]+e[e.length-2]:e[0]?this.totalDistance+e[0]:this.totalDistance,this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.polygon.totalDistL+this.Units.GetDistAsString(n),this.distObj.style.distanceFont.hollow)}}},{key:"DrawWalkerDist",value:function(){var t=this.distObj.obj.distanceOfTwoPoint,e=this.Lang[l.z.LANG].userObj.polygon;this.distObj.FEditing?this.FGlobe.FLastEditingCallback.show_walker?this.distObj.eVal.walkerGeo.isValid?t.length>2?-1===this.distObj.eVal.lastSnapIndex?(this.Find2dPixelAndDraw(t.length-2,e),this.GetLastDistance(2),this.Find2dLinkEdgeAndDraw(2,!1,e)):0===this.distObj.eVal.lastSnapIndex?(this.GetLastDistance(4),this.Find2dLinkEdgeAndDraw(4,!1,e)):this.distObj.eVal.lastSnapIndex===this.distObj.coordsZ.length-2?(this.GetLastDistance(2),this.Find2dLinkEdgeAndDraw(2,!1,e)):(this.distObj.eVal.lastSnapIndex<-1||this.distObj.eVal.lastSnapIndex>0)&&(this.GetLastDistance(4),this.Find2dLinkEdgeAndDraw(2,!1,e)):2===t.length?(this.Find2dPixelAndDraw(t.length-2,e),this.GetLastDistance(2),this.Find2dLinkEdgeAndDraw(2,!1,e)):1===t.length&&this.Find2dPixelAndDraw(0,e):t.length>2&&(this.GetLastDistance(4),this.Find2dLinkEdgeAndDraw(2,!1,e)):this.distObj.eVal.lastSnapIndex>-1?(this.GetLastDistance(4),this.Find2dLinkEdgeAndDraw(2,!1,e)):(t[t.length-2]=0,this.GetLastDistance(4),this.Find2dLinkEdgeAndDraw(2,!1,e)):t.length>2&&(this.GetLastDistance(2),this.Find2dLinkEdgeAndDraw(2,!0,e))}}]),e}($),et=function(t){function e(t){var i;return n()(this,e),(i=X()(this,q()(e).call(this))).distObj=t,i.FGlobe=t.obj.FGlobe,i.Units=i.FGlobe.Units,i.Lang=i.FGlobe.Lang,i.totalDistance=0,i}return Q()(e,t),h()(e,[{key:"DrawDist2d",value:function(){var t;this.totalDistance=0,t=this.distObj.FEditing?this.distObj.obj.distanceOfTwoPoint.length-1:this.distObj.obj.distanceOfTwoPoint.length>=1?this.distObj.obj.distanceOfTwoPoint.length-1:0;for(var e=this.Lang[l.z.LANG].userObj.line,i=0;i<t;i++)this.Find2dPixelAndDraw(i,e),this.totalDistance+=this.distObj.obj.distanceOfTwoPoint[i]}},{key:"DrawTotal",value:function(){var t=this.distObj.obj,e=t.distanceOfTwoPoint,i=t.tempp2d,r=t.CanvasPoint,s=this.distObj,o=s.coords,n=s.coordsZ;if(n.length>2&&(this.distObj.FEditing?(i.SetV(o[o.length-4],o[o.length-3]),i.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(i,this.FindZ(n.length-2),r)):(this.totalDistance+=e[e.length-1],i.SetV(o[o.length-2],o[o.length-1]),i.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(i,this.FindZ(n.length-1),r)),r.isValid)){var a=this.Lang[l.z.LANG].userObj.line.totalDistL,h=this.distObj.style.distanceFont.hollow;this.DrawToCanvas2d(a+this.Units.GetDistAsString(this.totalDistance),h)}}},{key:"DrawTotalWalker",value:function(){if(this.distObj.coordsZ.length>1){var t=this.distObj.obj,e=t.distanceOfTwoPoint,i=t.tempp2d,r=t.CanvasPoint,s=this.distObj,o=s.coords,n=s.coordsZ;if(i.SetV(o[o.length-2],o[o.length-1]),i.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(i,this.FindZ(n.length-1),r),r.isValid){var a;a=e.length>1?this.totalDistance+e[e.length-1]:e[0]?this.totalDistance+e[0]:this.totalDistance;var h=this.Lang[l.z.LANG].userObj.line.totalDistL,u=this.distObj.style.distanceFont.hollow;this.DrawToCanvas2d(h+this.Units.GetDistAsString(a),u)}}}},{key:"DrawWalkerDist",value:function(){var t=this.distObj.obj.distanceOfTwoPoint,e=this.Lang[l.z.LANG].userObj.line;if(this.distObj.FEditing){var i=this.distObj.eVal,r=i.walkerGeo,s=i.lastSnapIndex;r.isValid&&t.length>=1&&-1===s&&this.Find2dPixelAndDraw(t.length-1,e)}else t.length>=1&&this.Find2dPixelAndDraw(t.length-1,e)}}]),e}($),it=function(){function t(e){n()(this,t),this.angleObj=e,this.FGlobe=e.obj.FGlobe,this.Units=this.FGlobe.Units,this.Lang=this.FGlobe.Lang}return h()(t,[{key:"DrawAngle",value:function(){var t;t=this.angleObj.FEditing?this.angleObj.obj.angleOfTwoPoint.length-1:this.angleObj.obj.angleOfTwoPoint.length>=1?this.angleObj.obj.angleOfTwoPoint.length:0;for(var e=0;e<t;e++)this.FindAngleAndDraw(e)}},{key:"FindAngleAndDraw",value:function(t){var e=this.angleObj,i=e.eVal,r=e.savedSubCoords,s=e.savedSubCoordsZ,o=e.style;this.angleObj.FEditing?this.FillCanvasPoint(i.subCoords[2*t],i.subCoords[2*t+1],i.subCoordsZ[t]):this.FillCanvasPoint(r[2*t],r[2*t+1],s[t]);var n=this.angleObj.obj,a=n.CanvasPoint,h=n.angleOfTwoPoint;a.isValid&&h[t]&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.line.angle+this.Units.GetAngleAsString(h[t]),o.angleFont.hollow)}},{key:"FillCanvasPoint",value:function(t,e,i){var r=this.angleObj.obj.tempp2d;r.SetV(t,e),r.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(r,i,this.angleObj.obj.CanvasPoint)}},{key:"DrawWalkerAngle",value:function(){var t=this.angleObj.obj.angleOfTwoPoint;this.angleObj.eVal.walkerGeo.isValid&&t.length>=1&&-1===this.angleObj.eVal.lastSnapIndex&&this.FindAngleAndDraw(t.length-1)}},{key:"DrawToCanvas2d",value:function(t,e){var i,r=this.FGlobe.ctxForDistAndHeight,s=this.angleObj.obj.CanvasPoint,o=this.angleObj.style,n=o.__angleTextColor;e?(i=o.__angleFontStr[1]*l.z.GLOBE_TEXT_SCALE,r.font=o.__angleFontStr[0]+i+"pt "+o.__angleFontStr[2],r.lineJoin="round",r.textBaseline="middle",r.lineWidth=3,r.strokeStyle="rgba(0,0,0, ".concat(o.opacity/2,")"),r.strokeText(t,s.x,s.y+10),r.lineWidth=1.5,r.strokeStyle="rgba(0,0,0,".concat(o.opacity,")"),r.strokeText(t,s.x,s.y+10),r.fillStyle="rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(n[3],")"),r.fillText(t,s.x,s.y+10)):(i=o.__angleFontStr[1]*l.z.GLOBE_TEXT_SCALE,r.font=o.__angleFontStr[0]+i+"pt "+o.__angleFontStr[2],r.fillStyle="rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(n[3],")"),r.fillText(t,s.x,s.y+10))}}]),t}(),rt=function(){function t(e){n()(this,t),this.angleObj=e,this.FGlobe=e.obj.FGlobe,this.Units=this.FGlobe.Units,this.Lang=this.FGlobe.Lang}return h()(t,[{key:"DrawAngle",value:function(){var t=this.angleObj.style,e=this.angleObj.obj.CanvasPoint,i=Math.abs(Math.abs(this.angleObj.fixedEAng)-Math.abs(this.angleObj.fixedSAng));e.isValid&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.arc.angle+this.Units.GetAngleAsString(i),t.angleFont.hollow,e.x,e.y+16)}},{key:"FillCanvasPoint",value:function(t,e,i){var r=this.angleObj.obj.tempp2d;r.SetV(t,e),r.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(r,i,this.angleObj.obj.CanvasPoint)}},{key:"DrawWalkerAngle",value:function(){var t=this.angleObj.obj.angleOfTwoPoint;this.angleObj.eVal.walkerGeo.isValid&&t.length>=1&&-1===this.angleObj.eVal.lastSnapIndex&&this.FindAngleAndDraw(t.length-1)}},{key:"DrawToCanvas2d",value:function(t,e,i,r){var s,o=this.FGlobe.ctxForDistAndHeight,n=this.angleObj.style,a=n.__angleTextColor;e?(s=n.__angleFontStr[1]*l.z.GLOBE_TEXT_SCALE,o.font=n.__angleFontStr[0]+s+"pt "+n.__angleFontStr[2],o.lineJoin="round",o.textBaseline="middle",o.lineWidth=3,o.strokeStyle="rgba(0,0,0, ".concat(n.opacity/2,")"),o.strokeText(t,i,r+10),o.lineWidth=1.5,o.strokeStyle="rgba(0,0,0,".concat(n.opacity,")"),o.strokeText(t,i,r+10),o.fillStyle="rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat(a[3],")"),o.fillText(t,i,r+10)):(s=n.__angleFontStr[1]*l.z.GLOBE_TEXT_SCALE,o.font=n.__angleFontStr[0]+s+"pt "+n.__angleFontStr[2],o.fillStyle="rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat(a[3],")"),o.fillText(t,i,r+10))}}]),t}(),st=function(){function t(e){n()(this,t),this.areaObj=e,this.FGlobe=e.obj.FGlobe,this.Units=this.FGlobe.Units,this.Lang=this.FGlobe.Lang}return h()(t,[{key:"DrawAreaVolume",value:function(){var t=this.areaObj,e=t.eVal,i=t.style,r=t.center,s=t.savedCenterZ,o=t.heights,n=this.areaObj.obj.CanvasPoint;this.areaObj.FEditing?this.FillCanvasPoint(r.x,r.y,e.centerCoordZ):this.areaObj.solid3D?this.FillCanvasPoint(r.x,r.y,s+o[0]):this.FillCanvasPoint(r.x,r.y,s);var a=this.areaObj.obj.totalArea;n.isValid&&a&&(i.showArea&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.polygon.area+this.Units.GetAreaAsString(a),i.areaFont.hollow,n.x,n.y+32,i.__areaFontStr,i.__areaTextColor),this.areaObj.solid3D&&this.areaObj.heights[0]>0&&this.areaObj.fixedHeights&&i.showVolume&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.polygon.volume+this.Units.GetVolumeAsString(a*this.areaObj.heights[0]),i.volumeFont.hollow,n.x,n.y+32+16*l.z.GLOBE_TEXT_SCALE,i.__volumeFontStr,i.__volumeTextColor))}},{key:"FillCanvasPoint",value:function(t,e,i){var r=this.areaObj.obj.tempp2d;r.SetV(t,e),r.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(r,i,this.areaObj.obj.CanvasPoint)}},{key:"DrawToCanvas2d",value:function(t,e,i,r,s,o){var n,a=this.FGlobe.ctxForDistAndHeight,h=this.areaObj.style;e?(n=s[1]*l.z.GLOBE_TEXT_SCALE,a.font=s[0]+n+"pt "+s[2],a.lineJoin="round",a.textBaseline="middle",a.lineWidth=3,a.strokeStyle="rgba(0,0,0, ".concat(h.opacity/2,")"),a.strokeText(t,i,r),a.lineWidth=1.5,a.strokeStyle="rgba(0,0,0,".concat(h.opacity,")"),a.strokeText(t,i,r),a.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),a.fillText(t,i,r)):(n=h.__areaFontStr[1]*l.z.GLOBE_TEXT_SCALE,a.font=h.__areaFontStr[0]+n+"pt "+h.__areaFontStr[2],a.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),a.fillText(t,i,r))}}]),t}(),ot=function(){function t(e,i,r,s){n()(this,t),this.pl=e,this.FGlobe=e.obj.FGlobe,this.offsetX=i,this.offsetY=r,this.drawMain=s,this.Units=this.FGlobe.Units,this.Lang=this.FGlobe.Lang}return h()(t,[{key:"DrawText",value:function(){var t,e;if(t=this.pl.FEditing?this.pl.coordsZ.length-1:this.pl.coordsZ.length,this.drawMain)if(this.pl.obj.ccw){for(e=0;e<t;e++)this.CalcAndDrawOneText(t-e,0);this.CalcAndDrawOneText(0,0)}else for(e=0;e<t;e++)this.CalcAndDrawOneText(e,0);else if(this.pl.fixedTop&&!this.pl.FEditing)this.CalcAndDrawOneText(0,this.pl.heights[0]);else if(this.pl.fixedHeights)for(e=0;e<t;e++)this.CalcAndDrawOneText(e,this.pl.heights[0]);else for(e=0;e<t;e++)this.CalcAndDrawOneText(e,this.pl.heights[e]);this.CalcAndDrawWalkerText()}},{key:"CalcAndDrawOneText",value:function(t,e){var i=this.pl.obj,r=i.tempp2d,s=i.CanvasPoint,o=this.pl.style;this.pl.FEditing?this.pl.coordsZ.length:this.pl.coordsZ.length,r.SetV(this.pl.coords[2*t],this.pl.coords[2*t+1]),r.ConvertDegreeToRadyan(),this.pl.fixedTop&&!this.pl.FEditing?this.FGlobe.XsbPmI(r,this.pl.obj.fixedTopMax/l.z.GLOBE_RADIUS_K,s):this.FGlobe.XsbPmI(r,this.FindZ(t)+e,s),s.isValid&&void 0!==e&&(this.drawMain?this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.polygon.vertex+(t+1),o.vertexFont,o.__vertexFontStr,o.vertexFont.hollow,o.__vertexTextColor):this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.polygon.height+this.Units.GetDistAsString(e),o.heightFont,o.__heightFontStr,o.heightFont.hollow,o.__heightTextColor))}},{key:"CalcAndDrawWalkerText",value:function(){var t=this.pl,e=t.coordsZ,i=t.heights;this.pl.FEditing&&this.pl.eVal.walkerGeo.isValid&&-1===this.pl.eVal.lastSnapIndex&&(this.FGlobe.FLastEditingCallback.show_walker&&(this.drawMain?(this.pl.fixedHeights,this.CalcAndDrawOneText(e.length-1,0)):this.pl.fixedHeights?this.CalcAndDrawOneText(e.length-1,i[0]):this.CalcAndDrawOneText(e.length-1,i[e.length-1])))}},{key:"DrawToCanvas2d",value:function(t,e,i,r,s){var o,n=this.FGlobe.ctxForDistAndHeight,a=this.pl.obj.CanvasPoint,h=this.pl.style;r?(n.lineJoin="round",n.textBaseline="middle",o=i[1]*l.z.GLOBE_TEXT_SCALE,n.font=i[0]+o+"pt "+i[2],n.lineWidth=3,n.strokeStyle="rgba(0,0,0, ".concat(h.opacity/2,")"),n.strokeText(t,a.x+this.offsetX,a.y+this.offsetY),n.lineWidth=1.5,n.strokeStyle="rgba(0,0,0,".concat(h.opacity,")"),n.strokeText(t,a.x+this.offsetX,a.y+this.offsetY),n.fillStyle=e.color,n.fillStyle="rgba(".concat(s[0],",").concat(s[1],",").concat(s[2],",").concat(s[3],")"),n.fillText(t,a.x+this.offsetX,a.y+this.offsetY)):(o=i[1]*l.z.GLOBE_TEXT_SCALE,n.font=i[0]+o+"pt "+i[2],n.fillStyle="rgba(".concat(s[0],",").concat(s[1],",").concat(s[2],",").concat(s[3],")"),n.fillText(t,a.x+this.offsetX,a.y+this.offsetY))}},{key:"FindZ",value:function(t){return this.pl.style.zMode===l.u.Z_MSL?this.pl.coordsZ[t]:this.FGlobe.XyecYr(this.pl.obj.tempp2d,!0)+this.pl.coordsZ[t]}}]),t}(),nt=function(){function t(e){n()(this,t),this.sa=e,this.FGlobe=e.obj.FGlobe,this.Units=this.FGlobe.Units,this.Lang=this.FGlobe.Lang}return h()(t,[{key:"DrawHeights",value:function(){this.CalcAndDrawOneHegiht()}},{key:"CalcAndDrawOneHegiht",value:function(){var t=this.sa.obj.tempp2d;this.sa.type===l.j.SHAPE?t.SetV(this.sa._coords[0],this.sa._coords[1]):this.sa.type===l.j.ARCAREA&&t.SetV(this.sa.coords[0],this.sa.coords[1]),t.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(t,this.FindZ()+this.sa.heights[0],this.sa.obj.CanvasPoint2),this.sa.obj.CanvasPoint2.isValid&&void 0!==this.sa.heights[0]&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.arc.height+this.Units.GetDistAsString(this.sa.heights[0]),this.sa.style.heightFont.hollow)}},{key:"DrawToCanvas2d",value:function(t,e){var i,r=this.FGlobe.ctxForDistAndHeight,s=this.sa.style,o=this.sa.obj.CanvasPoint2,n=s.__heightTextColor;e?(r.lineJoin="round",r.textBaseline="middle",i=s.__heightFontStr[1]*l.z.GLOBE_TEXT_SCALE,r.font=s.__heightFontStr[0]+i+"pt "+s.__heightFontStr[2],r.lineWidth=3,r.strokeStyle="rgba(0,0,0, ".concat(s.opacity/2,")"),r.strokeText(t,o.x,o.y-10),r.lineWidth=1.5,r.strokeStyle="rgba(0,0,0, ".concat(s.opacity,")"),r.strokeText(t,o.x,o.y-10),r.fillStyle="rgba(".concat(s.__heightTextColor[0],",").concat(n[1],",").concat(n[2],",").concat(n[3],")"),r.fillText(t,o.x,o.y-10)):(i=s.__heightFontStr[1]*l.z.GLOBE_TEXT_SCALE,r.font=s.__heightFontStr[0]+i+"pt "+s.__heightFontStr[2],r.fillStyle="rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(n[3],")"),r.fillText(t,o.x,o.y-10))}},{key:"FindZ",value:function(){return this.sa.style.zMode===l.u.Z_MSL?this.sa.coordsZ[0]:this.FGlobe.XyecYr(this.sa.obj.tempp2d,!0)+this.sa.coordsZ[0]}}]),t}(),at=function(){function t(e){n()(this,t),this.distObj=e,this.FGlobe=e.obj.FGlobe,this.Units=this.FGlobe.Units,this.Lang=this.FGlobe.Lang}return h()(t,[{key:"DrawDist2d",value:function(){var t;t=this.distObj.solid3D?this.distObj.heights[0]:0;var e=this.distObj.obj.CanvasPoint2,i=this.distObj._coords;this.FillCanvasPoint(i[i.length-2],i[i.length-1],t),e.isValid&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.arc.rad1+this.Units.GetDistAsString(this.distObj.radius1),!0),this.FillCanvasPoint(i[0],i[1],t),e.isValid&&this.DrawToCanvas2d(this.Lang[l.z.LANG].userObj.arc.rad2+this.Units.GetDistAsString(this.distObj.radius2),!0)}},{key:"FillCanvasPoint",value:function(t,e,i){var r=this.distObj.obj,s=r.tempp2d,o=r.CanvasPoint2;s.SetV(t,e),s.ConvertDegreeToRadyan(),this.FGlobe.XsbPmI(s,i+this.FindZ(),o)}},{key:"DrawToCanvas2d",value:function(t,e){var i,r=this.distObj.obj.CanvasPoint2,s=this.distObj.style,o=s.__distanceTextColor,n=this.FGlobe.ctxForDistAndHeight;e?(i=s.__distanceFontStr[1]*l.z.GLOBE_TEXT_SCALE,n.font=s.__distanceFontStr[0]+i+"pt "+s.__distanceFontStr[2],n.lineJoin="round",n.textBaseline="middle",n.lineWidth=3,n.strokeStyle="rgba(0,0,0, ".concat(s.opacity/2,")"),n.strokeText(t,r.x,r.y-10),n.lineWidth=1.5,n.strokeStyle="rgba(0,0,0, ".concat(s.opacity,")"),n.strokeText(t,r.x,r.y-10),n.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),n.fillText(t,r.x,r.y-10)):(i=s.__distanceFontStr[1]*l.z.GLOBE_TEXT_SCALE,n.font=s.__distanceFontStr[0]+i+"pt "+s.__distanceFontStr[2],n.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),n.fillText(t,r.x,r.y-10))}},{key:"FindZ",value:function(){return this.distObj.style.zMode===l.u.Z_MSL?this.distObj.coordsZ[0]:this.FGlobe.XyecYr(this.distObj.obj.tempp2d,!0)+this.distObj.coordsZ[0]}}]),t}();function ht(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function lt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ht(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ht(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}i.d(e,"a",function(){return ut});var ut=function(){function t(e,i,r){n()(this,t),this.name=i,this.id=r,this.opacity=1,this.FGlobe=e,this.GLU=this.FGlobe.GLU,this.gl=this.FGlobe.gl,this.FActive=!0,this.TotalObjArr=[],this.tempp2d=new u.u(0,0),this.tempp3d=new u.u(0,0,0),this.polyWireFrame=!1,this.shapeWireFrame=!1,this.CheckMeshAndGrounFollow=this.CheckMeshAndGrounFollow.bind(this),this.IntervalCheckMeshAndGrounFollow=null,this.currentWorkerCount=0}return h()(t,[{key:"ClearObj",value:function(t,e){t===l.j.POINT||t===l.j.MODEL?(delete this.TotalObjArr[e],this.TotalObjArr.splice(e,1)):(this.TotalObjArr[e].clear(!0),delete this.TotalObjArr[e],this.TotalObjArr.splice(e,1)),this.FGlobe.DrawRender()}},{key:"Delete",value:function(){return this.FGlobe.api_DeleteObjectBufferById(this.id)}},{key:"CheckMeshAndGrounFollow",value:function(){var t=this.FGlobe;if(this.FActive){if(t.FCamera.Xdsj2p()||t.MouseMode!==l.D)return;for(var e=t.FDrawedWorldDeg,i=t.FDrawedCells,r=l.z.MAX_WORKER_COUNT,s=t.FDRAWED_MAX_LEVEL,o=[],n=this.TotalObjArr.length;n--;){var a=this.TotalObjArr[n];if(a.type!==l.j.POINT&&a.type!==l.j.MODEL&&!(a.type===l.j.POLYGON&&a.coordsZ.length<3||a.type===l.j.LINE&&a.coordsZ.length<2)){var h=a.style,u=a.obj.Limit;if(a.FActive&&!a.FEditing&&s>=a.startLod&&s<=a.endLod&&(h.filled||h.border)&&h.zMode===l.u.Z_GROUND_FOLLOW&&s>=a.obj.LOD&&e.CSIsCommonRegionT(u)){o.length=0;for(var d=i.length;d--;)u.CSIsCommonRegionT(i[d].FCellTGW)&&o.push(i[d]);a.obj.lastOverlapedCells&&a.obj.lastOverlapedCells.length===o.length&&this.CellSames(a.obj.lastOverlapedCells,o)||(a.obj.mesChanged=!1,a.type===l.j.LINE?a.build(!0,o):a.obj.cdt2dWorker?(a.obj.cdt2dWorker.terminate(),a.obj.cdt2dWorker=null,delete a.obj.cdt2dWorker,a.obj.lastOverlapedCells=o.slice(),a.obj.cdt2dWorker=new Worker(w.a),a.obj.cdt2dWorker.onmessage=a.cdt2dWorkerOnMessage,a.obj.cdt2dWorker.onerror=function(e){t.XR5XAl("worker error",!0)}):t.currentWorkerCount<r&&(a.obj.lastOverlapedCells=o.slice(),a.obj.cdt2dWorker=new Worker(w.a),a.obj.cdt2dWorker.onmessage=a.cdt2dWorkerOnMessage,a.obj.cdt2dWorker.onerror=function(e){t.XR5XAl("worker error",!0)},t.currentWorkerCount++,this.currentWorkerCount++))}}}for(n=this.TotalObjArr.length;n--;){var c=this.TotalObjArr[n];if(c.obj.meshChanged&&(c.mesChanged=!1,c.FActive&&c.style.zMode===l.u.Z_GROUND_PERVERTEX&&s>=c.startLod&&s<=c.endLod))switch(c.type){case l.j.POLYGON:c.hasFontIcon&&c.fontBuild(),c.coordBuild(),c.style.showDistances===l.s.SHOW3D&&c.findDistances();break;case l.j.SHAPE:case l.j.ARCAREA:c.hasFontIcon&&c.fontBuild(),c.coordBuild();break;case l.j.LINE:c.hasFontIcon&&c.fontBuild(),c.style.showDistances===l.s.SHOW3D&&c.findDistances();break;case l.j.MODEL:c.build();break;case l.j.POINT:c.hasFontIcon&&c.build()}}this.FGlobe.DrawRender()}else if(this.currentWorkerCount>0)for(n=this.TotalObjArr.length;n--;){var f=this.TotalObjArr[n];f.obj.cdt2dWorker&&(f.obj.cdt2dWorker.terminate(),this.TotalObjArr[n].obj.cdt2dWorker=null,delete this.TotalObjArr[n].obj.cdt2dWorker,this.currentWorkerCount--,t.currentWorkerCount--)}}},{key:"CheckMeshChanged",value:function(t){for(var e=this.FGlobe.FDRAWED_MAX_LEVEL,i=this.TotalObjArr.length;i--;)e>=this.TotalObjArr[i].startLod&&e<=this.TotalObjArr[i].endLod&&t.CSIsCommonRegionT(this.TotalObjArr[i].obj.Limit)&&(this.TotalObjArr[i].obj.meshChanged=!0)}},{key:"CellSames",value:function(t,e){for(var i=t.length;i--;)if(t[i]!==e[i])return!1;return!0}},{key:"CkeckLenForLOD",value:function(t,e){t.style.zMode===l.u.Z_GROUND_FOLLOW&&(t.style.border||t.style.filled)?this.FGlobe.FDRAWED_MAX_LEVEL>t.obj.LOD?t.setCoordLenForDraw(l.q.initial):t.setCoordLenForDraw(l.q.lowLod):t.style.zMode!==l.u.Z_GROUND_PERVERTEX&&t.style.zMode!==l.u.Z_MSL||!e||(t.obj.gf_mainCoordLen=e.length)}},{key:"AddObjectsAsJSON",value:function(t){for(var e=t.length,i=0;i<e;i++)this.AddObj(t[i].type,t[i])}},{key:"GetObjectsAsJSON",value:function(){for(var t=[],e=this.TotalObjArr.length,i=0;i<e;i++)t.push(this.TotalObjArr[i].getAsJSON());return t}},{key:"GetObjStyleAsJSON",value:function(t){var e=this.GetObj(t).style,i={style:{},coords:[],coordsZ:[]};return i.style.titleRT=e.titleRT,i.style.titleRB=e.titleRB,i.style.titleLT=e.titleLT,i.style.titleLB=e.titleLB,i.style.titleCN=e.titleCN,e.titleFont&&(i.style.titleFont=lt({},e.titleFont)),e.distanceFont&&(i.style.distanceFont=lt({},e.distanceFont)),e.heightFont&&(i.style.heightFont=lt({},e.heightFont)),e.vertexFont&&(i.style.vertexFont=lt({},e.vertexFont)),e.angleFont&&(i.style.angleFont=lt({},e.angleFont)),e.icon&&(i.style.icon=lt({},e.icon)),i.style.opacity=e.opacity,i.style.border=e.border,i.style.borderColor=e.borderColor,i.style.filled=e.filled,i.style.fillColor=e.fillColor,i.style.sideColor=e.sideColor,i.style.cullFace=e.cullFace,i.style.depthTest=e.depthTest,i.style.showDistances=e.showDistances,i.style.showHeights=e.showHeights,i.style.showVertex=e.showVertex,i.style.showAngles=e.showAngles,i.style.showArea=e.showArea,i.style.showVolume=e.showVolume,i.style.zMode=e.zMode,i}},{key:"AddObj",value:function(t,e){e.objectBuffer=this,e.delete=this.DeleteObj.bind(e),this.IntervalCheckMeshAndGrounFollow||(this.IntervalCheckMeshAndGrounFollow=setInterval(this.CheckMeshAndGrounFollow,1e3));var i=c.a.checkFonts(e.style);if(i&&(i.createDistances&&(e.style.distanceFont=c.a.createFontStyle()),i.createHeights&&(e.style.heightFont=c.a.createFontStyle()),i.createVertex&&(e.style.vertexFont=c.a.createFontStyle()),i.createAngles&&(e.style.angleFont=c.a.createFontStyle()),i.createArea&&(e.style.areaFont=c.a.createFontStyle()),i.createVolume&&(e.style.volumeFont=c.a.createFontStyle())),c.a.FillColor(e.style),e.FUndoRedoEdit=this.FGlobe.FUndoRedoEdit,!e.startLod&&(e.startLod=0),!e.endLod&&(e.endLod=25),e.startLod>e.endLod){var r=e.startLod;e.endLod=e.startLod,e.startLod=r}switch(t){case l.j.POINT:this.AddPoint(e);break;case l.j.LINE:this.AddLine(e);break;case l.j.POLYGON:this.AddPolygon(e),this.CkeckLenForLOD(e,e.coords);break;case l.j.SHAPE:this.AddShape(e),this.CkeckLenForLOD(e,e._coords);break;case l.j.ARCAREA:this.AddArcArea(e);break;case l.j.MODEL:this.AddModel(e)}e.obj.lastOverlapedCells=null,e.obj.currentOverlapedCells=[]}},{key:"AddPoint",value:function(t){t.type=l.j.POINT,this.ObjCheckStyle(t),this.ObjCheckId(t),t.FActive=!0,t.center=new u.u(t.coords[0],t.coords[1]),t.obj={};var e=t.obj;e.FGlobe=this.FGlobe,e.GLU=this.FGlobe.GLU,e.userObj=this,e.gl=this.gl,e.FontDrawer=this.FGlobe.FontDrawer,e.CanvasPoint=new u.v(0,0),e.Limit=new u.E(0,0,0,0),e.Geo3C=new u.w(0,0,0),e.Geo3D=new u.w(0,0,0),e.FontPacket=null,e.Fp2T=this.FGlobe.Fp2T,e.startP=new u.w(0,0,0),e.tempArr=new Float32Array(3),e.Geo3DS=new u.w(0,0,0),e.tempp2d=new u.u(0,0),t.draw2d=P.Draw2d,t.draw3d=P.Draw3d,t.build=P.Build,t.updateFont=P.UpdateFont,t.findLimits=P.FindLimits,t.checkFontPacket=P.CheckFontPacket,t.checkHasFontIcon=P.CheckHasFontIcon,t.beginEdit=P.BeginEdit,t.endEdit=P.EndEdit,t.setEval=P.SetEval,t.drawEditTexture=P.DrawEditTexture,t.saveInfo=P.SaveInfo,t.restoreInfo=P.RestoreInfo,t.rebuild=P.Rebuild,t.styleChanged=P.StyleChanged,t.getAsJSON=P.GetAsJSON,t.checkHasFontIcon(),t.build(),t.findLimits(),this.TotalObjArr.push(t),this.FGlobe.DrawRender()}},{key:"AddLine",value:function(t){t.type=l.j.LINE,this.ObjCheckStyle(t),this.ObjCheckId(t),t.FActive=!0,t.FEditing=!1,t.lineTypedArr=new Float32Array(3*t.coordsZ.length),t.lineVertBuff=this.gl.createBuffer(),t.tempcoord=new Float32Array(3),t.tempcoord2=new Float32Array(3),t.center=new u.w(0,0,0),t.obj={};var e=t.obj;e.userObj=this,e.FGlobe=this.FGlobe,e.gl=this.gl,e.FontDrawer=this.FGlobe.FontDrawer,e.CanvasPoint=new u.v(0,0),e.Limit=new u.E(0,0,0,0),e.Geo3C=new u.w(0,0,0),e.Geo3D=new u.w(0,0,0),e.Geo3DS=new u.w(0,0,0),e.startP=null,e.TempGeo3C=new u.w(0,0,0),e.TempGeo3C2=new u.w(0,0,0),e.FontPacket=null,e.Fp2T=this.FGlobe.Fp2T,e.tempArr=new Float32Array(3),e.tempArr2=new Float32Array(3),e.startP=new u.w(0,0,0),e.tempp2d=new u.u(0,0),e.distanceOfTwoPoint=[],e.angleOfTwoPoint=[],e.totaldistance=0,this.showZ=!0,e.gf_coords=[],e.gf_coordsZ=[],t.draw2d=G.Draw2d,t.draw3d=G.Draw3d,t.fontBuild=G.FontBuild,t.coordBuild=G.CoordBuild,t.buildStartPoint=G.BuildStartPoint,t.clear=G.Clear,t.findLimitsAndCenter=G.FindLimitsAndCenter,t.checkHasFontIcon=G.CheckHasFontIcon,t.checkFontPacket=G.CheckFontPacket,t.build=G.Build,t.beginEdit=G.BeginEdit,t.endEdit=G.EndEdit,t.setEval=G.SetEval,t.updateFont=G.UpdateFont,t.saveInfo=G.SaveInfo,t.restoreInfo=G.RestoreInfo,t.drawEditTexture=G.DrawEditTexture,t.rebuild=G.Rebuild,t.buildEditIcons=G.BuildEditIcons,t.styleChanged=G.StyleChanged,t.getAsJSON=G.GetAsJSON,t.reBuildReq=G.ReBuildReq,t.findFollowGroundCoords=G.FindFollowGroundCoords,t.findAngles=G.FindAngles,t.findDistances=G.FindDistances,t.findSubZ=G.FindSubZ,t.findSavedSubCoords=G.FindSavedSubCoords,t.find2DDistance=G.Find2DDistance,t.find3DDistance=G.Find3DDistance,t.coordToGeo3C=G.CoordToGeo3C,t.prepareFollowGround=G.PrepareFollowGround,t.findLod=G.FindLod,t.findDistZ=G.FindDistZ,t.Dist=new et(t),t.VertexNumber=new ot(t,-10,10,!0),t.Angle=new it(t),t.savedSubCoords=[],t.savedSubCoordsZ=[],t.findSavedSubCoords(),t.findDistances(),t.findAngles(),t.findLimitsAndCenter(),t.checkHasFontIcon(),t.obj.mainCoordLen=t.coords.length,t.build(),this.TotalObjArr.push(t),this.FGlobe.DrawRender()}},{key:"AddPolygon",value:function(t){t.type=l.j.POLYGON,this.ObjCheckStyle(t),this.ObjCheckId(t),t.FActive=!0,t.center=new u.w(0,0,0),t.vertex=new Float32Array(t.coords.length/2*3),t.FEditing=!1,t.polygonTypedArr=new Float32Array(3*t.coordsZ.length),t.tempcoord=new Float32Array(3),t.tempcoord2=new Float32Array(3),t._coords=t.coords.slice(),t._coordsZ=t.coordsZ.slice(),t._heights=[],t.obj={};var e=t.obj;e.userObj=this,e.FGlobe=this.FGlobe,e.gl=this.gl,e.FontDrawer=this.FGlobe.FontDrawer,e.CanvasPoint=new u.v(0,0),e.startP=null,e.Limit=new u.E(0,0,0,0),e.Geo3C=new u.w(0,0,0),e.Geo3D=new u.w(0,0,0),e.TriIndexCnt=0,e.Geo3DS=new u.w(0,0,0),e.TempGeo3C=new u.w(0,0,0),e.TempGeo3C2=new u.w(0,0,0),e.FontPacket=null,e.Fp2T=this.FGlobe.Fp2T,e.tempArr=new Float32Array(3),e.tempArr2=new Float32Array(3),e.startP=new u.w(0,0,0),e.distanceOfTwoPoint=[],e.totalArea=0,e.totaldistance=0,e.tempp2d=new u.u(0,0),e.gf_coords=[],e.gf_coordsZ=[],e.borderCoordLen=t.coords.length/2,e.LastFoundCalcZCell=null,e.fixedTopMax=0,t.draw2d=k.Draw2d,t.draw3d=k.Draw3d,t.build=k.Build,t.buildStartPoint=k.BuildStartPoint,t.fontBuild=k.FontBuild,t.coordBuild=k.CoordBuild,t.findLimitsAndCenter=k.FindLimitsAndCenter,t.checkFontPacket=k.CheckFontPacket,t.checkHasFontIcon=k.CheckHasFontIcon,t.clear=k.Clear,t.buildTriangle=k.BuildTriangle,t.beginEdit=k.BeginEdit,t.endEdit=k.EndEdit,t.setEval=k.SetEval,t.fillTypeArrays=k.FillTypeArrays,t.fillSideTypeArray=k.FillSideTypeArray,t.fillBuffers=k.FillBuffers,t.drawSide=k.DrawSide,t.drawSurface=k.DrawSurface,t.updateFont=k.UpdateFont,t.saveInfo=k.SaveInfo,t.restoreInfo=k.RestoreInfo,t.drawEditTexture=k.DrawEditTexture,t.rebuild=k.Rebuild,t.buildEditIcons=k.BuildEditIcons,t.styleChanged=k.StyleChanged,t.getAsJSON=k.GetAsJSON,t.repairHeights=k.RepairHeights,t.findDistances=k.FindDistances,t.findCenterZ=k.FindCenterZ,t.findSubZ=k.FindSubZ,t.findSavedSubCoords=k.FindSavedSubCoords,t.find2DDistance=k.Find2DDistance,t.find3DDistance=k.Find3DDistance,t.coordToGeo3C=k.CoordToGeo3C,t.reBuildReq=k.ReBuildReq,t.findFollowGroundCoords=k.FindFollowGroundCoords,t.addSteiners=k.AddSteiners,t.setCoordLenForDraw=k.SetCoordLenForDraw,t.prepareFollowGround=k.PrepareFollowGround,t.cdt2dWorkerOnMessage=k.Cdt2dWorkerOnMessage,t.cdt2dWorkerOnMessage=t.cdt2dWorkerOnMessage.bind(t),t.findLod=k.FindLod,t.findFixedTopMax=k.FindFixedTopMax,t.findDistZ=k.FindDistZ,t.Dist=new tt(t),t.Height=new ot(t,0,-10,!1),t.VertexNumber=new ot(t,-10,10,!0),t.AreaVolume=new st(t),t.savedSubCoords=[],t.savedSubCoordsZ=[],t.findSavedSubCoords(),t.findDistances(),t.checkHasFontIcon(),t.findLimitsAndCenter(),(t.style.showArea||t.style.showVolume)&&t.coordsZ.length>=3&&(t.style.zMode===l.u.Z_MSL?t.obj.totalArea=e.FGlobe.Math.CalcPolyAreaM2(t.coords,!1):t.obj.totalArea=e.FGlobe.Math.CalcPolyAreaM2(t.coords,!0,50),t.savedCenterZ=t.findCenterZ()),(t.style.border||t.style.filled)&&(t.polygonVertBuff=this.gl.createBuffer()),t.solid3D?(t.repairHeights(),t._heights=t.heights.slice(),t.polygonSideVertBuff=this.gl.createBuffer(),t.polygonTopVertBuff=this.gl.createBuffer(),t.polygonTopTypedArr=new Float32Array(3*t._coordsZ.length),t.polygonSideTypeArr=new Float32Array(3*(2*t._coordsZ.length+2)),u.b.PolyMakeCCW(t._coords)&&(t.obj.ccw=!0,t._coordsZ.reverse(),t._heights.reverse())):(t.heights=null,t._heights=null),t.style.filled&&(t.polygonIndexBuffer=this.gl.createBuffer(),t.buildTriangle()),t.obj.surfaceBorderCoordLen=t.coords.length/2,t.build(!1),this.TotalObjArr.push(t),this.FGlobe.DrawRender()}},{key:"AddModel",value:function(t){t.type=l.j.MODEL,this.ObjCheckStyle(t),this.ObjCheckId(t),t.FActive=!0,t.FEditing=!1,t.center=new u.u(t.coords[0],t.coords[1]),t.Geo3C=new u.w(0,0,0),t.Geo3D=new u.w(0,0,0),t.tempp2=new u.u(0,0),t.obj={};var e=t.obj;e.userObj=this,e.gl=this.gl,e.FGlobe=this.FGlobe,e.FontDrawer=this.FGlobe.FontDrawer,e.CanvasPoint=new u.v(0,0),e.Limit=new u.E(0,0,0,0),e.ModelDrawer=this.FGlobe.ModelDrawer,e.ModelPacket=null,e.Fp2T=this.FGlobe.Fp2T,e.FontPacket=null,e.Geo3DS=new u.w(0,0,0),e.startP=new u.w(0,0,0),e.tempp2d=new u.u(0,0),t.draw2d=V.Draw2d,t.draw3d=V.Draw3d,t.build=V.Build,t.checkModelPacket=V.CheckModelPacket,t.findLimits=V.FindLimits,t.checkHasFontIcon=V.CheckHasFontIcon,t.checkFontPacket=V.CheckFontPacket,t.update=V.Update,t.beginEdit=V.BeginEdit,t.endEdit=V.EndEdit,t.setEval=V.SetEval,t.createCanvasPoint=V.CreateCanvasPoint,t.drawEditTexture=V.DrawEditTexture,t.updateFont=V.UpdateFont,t.saveInfo=V.SaveInfo,t.restoreInfo=V.RestoreInfo,t.rebuild=V.Rebuild,t.styleChanged=V.StyleChanged,t.getAsJSON=V.GetAsJSON,t.findLimits(),t.checkHasFontIcon(),t.build(),this.TotalObjArr.push(t),this.FGlobe.DrawRender()}},{key:"AddShape",value:function(t){t.type=l.j.SHAPE,t.coordsZ&&t.coordsZ.length||(t.coordsZ=[0]),this.ObjCheckStyle(t),this.ObjCheckId(t),t.FActive=!0,t.center=new u.u(t.coords[0],t.coords[1]),t._coords=[],t._coordsZ=[],t.FEditing=!1,t.tempcoord=new Float32Array(3),t.obj={};var e=t.obj;if(e.gf_coords=[],e.gf_coordsZ=[],e.borderCoordLen=t.coords.length/2,e.userObj=this,e.FGlobe=this.FGlobe,e.gl=this.gl,e.FontDrawer=this.FGlobe.FontDrawer,e.CanvasPoint=new u.v(0,0),e.CanvasPoint2=new u.v(0,0),e.startP=null,e.Limit=new u.E(0,0,0,0),e.Geo3C=new u.w(0,0,0),e.Geo3D=new u.w(0,0,0),t.shapeType!==l.r.ELLIPSE&&(e.TriIndexCnt=this.FGlobe.Shapes.Definitions[t.shapeType].triIndexCnt,e.triIndis=this.FGlobe.Shapes.Definitions[t.shapeType].triIndis),e.Geo3DS=new u.w(0,0,0),e.TempGeo3C=new u.w(0,0,0),e.FontPacket=null,e.Fp2T=this.FGlobe.Fp2T,e.mPoly2Tri=this.FGlobe.mPoly2Tri,e.tempArr=new Float32Array(3),e.tempArr2=new Float32Array(3),e.tempp2d=new u.u(0,0),e.fixedTopMax=0,t.draw2d=z.Draw2d,t.draw3d=z.Draw3d,t.build=z.Build,t.buildStartPoint=z.BuildStartPoint,t.fontBuild=z.FontBuild,t.coordBuild=z.CoordBuild,t.findLimitsAndCenter=z.FindLimitsAndCenter,t.checkFontPacket=z.CheckFontPacket,t.checkHasFontIcon=z.CheckHasFontIcon,t.clear=z.Clear,t.buildTriangle=z.BuildTriangle,t.beginEdit=z.BeginEdit,t.endEdit=z.EndEdit,t.setEval=z.SetEval,t.fillEllipseGeo=z.FillEllipseGeo,t.rotateNorth=z.RotateNorth,t.rotateNorthOther=z.RotateNorthOther,t.drawEditTexture=z.DrawEditTexture,t.fillShapeGeo=z.FillShapeGeo,t.convertShapePnt=z.ConvertShapePnt,t.setDragPoints=z.SetDragPoints,t.fillTypeArrays=z.FillTypeArrays,t.fillSideTypeArray=z.FillSideTypeArray,t.fillBuffers=z.FillBuffers,t.drawSide=z.DrawSide,t.drawSurface=z.DrawSurface,t.fontMSL=z.FontMSL,t.updateFont=z.UpdateFont,t.filledChanged=z.FilledChanged,t.fillGeo=z.FillGeo,t.saveInfo=z.SaveInfo,t.restoreInfo=z.RestoreInfo,t.rebuild=z.Rebuild,t.buildEditIcons=z.BuildEditIcons,t.styleChanged=z.StyleChanged,t.getAsJSON=z.GetAsJSON,t.repairHeightsSingle=z.RepairHeightsSingle,t.drawHeightPoint=z.DrawHeightPoint,t.reBuildReq=z.ReBuildReq,t.findFollowGroundCoords=z.FindFollowGroundCoords,t.addSteiners=z.AddSteiners,t.setCoordLenForDraw=z.SetCoordLenForDraw,t.prepareFollowGround=z.PrepareFollowGround,t.cdt2dWorkerOnMessage=z.Cdt2dWorkerOnMessage,t.cdt2dWorkerOnMessage=t.cdt2dWorkerOnMessage.bind(t),t.findLod=z.FindLod,t.findFixedTopMax=z.FindFixedTopMax,t.checkHasFontIcon(),t.Height=new nt(t),t.shapeType===l.r.ELLIPSE)t._coordsZ.length=l.z.SHAPE_DIVISION+1,t.shapeTypedArr=new Float32Array(3*(l.z.SHAPE_DIVISION+1)),t.fillEllipseGeo(t.coords,t.radius1,t.radius2,t.rotDeg,l.z.SHAPE_DIVISION);else{var i=this.FGlobe.Shapes.Definitions[t.shapeType].vert.length;t._coordsZ.length=i/2,t.shapeTypedArr=new Float32Array(i/2*3),t.fillShapeGeo()}t._coordsZ.fill(parseFloat(t.coordsZ[0])),(t.style.border||t.style.filled)&&(t.shapeVertBuff=this.gl.createBuffer()),t.solid3D?(t.repairHeightsSingle(),t.obj.shapeSideVertBuff=this.gl.createBuffer(),t.obj.shapeTopVertBuff=this.gl.createBuffer()):t.heights=null,t.style.filled&&(!t.shapeIndexBuffer&&(t.shapeIndexBuffer=this.gl.createBuffer()),t.buildTriangle()),t.findLimitsAndCenter(),t.build(),this.TotalObjArr.push(t),this.FGlobe.DrawRender()}},{key:"AddArcArea",value:function(t){t.type=l.j.ARCAREA,this.ObjCheckStyle(t),this.ObjCheckId(t),t.FActive=!0,t.center=new u.u(0,0),t._coords=[],t._coordsZ=[],t.FEditing=!1,t.tempcoord=new Float32Array(3),t.obj={};var e=t.obj;if(e.userObj=this,e.FGlobe=this.FGlobe,e.gl=this.gl,e.FontDrawer=this.FGlobe.FontDrawer,e.CanvasPoint=new u.v(0,0),e.CanvasPoint2=new u.v(0,0),e.startP=null,e.Limit=new u.E(0,0,0,0),e.Geo3C=new u.w(0,0,0),e.Geo3D=new u.w(0,0,0),e.tempp2d=new u.u(0,0),e.Geo3DS=new u.w(0,0,0),e.TempGeo3C=new u.w(0,0,0),e.FontPacket=null,e.Fp2T=this.FGlobe.Fp2T,e.mPoly2Tri=this.FGlobe.mPoly2Tri,e.fixedTopMax=0,e.tempArr=new Float32Array(3),e.tempArr2=new Float32Array(3),e.midCoord=new u.u(0,0),e.gf_coords=[],e.gf_coordsZ=[],e.gf_sideIndex=[],e.gf_lineCoords=[],e.gf_lineCoordsZ=[],t.draw2d=Y.Draw2d,t.draw3d=Y.Draw3d,t.build=Y.Build,t.buildStartPoint=Y.BuildStartPoint,t.fontBuild=Y.FontBuild,t.coordBuild=Y.CoordBuild,t.findLimitsAndCenter=Y.FindLimitsAndCenter,t.checkFontPacket=Y.CheckFontPacket,t.checkHasFontIcon=Y.CheckHasFontIcon,t.clear=Y.Clear,t.buildTriangle=Y.BuildTriangle,t.beginEdit=Y.BeginEdit,t.endEdit=Y.EndEdit,t.setEval=Y.SetEval,t.rotateNorth=Y.RotateNorth,t.rotateNorthOther=Y.RotateNorthOther,t.drawEditTexture=Y.DrawEditTexture,t.convertShapePnt=Y.ConvertShapePnt,t.setDragPoints=Y.SetDragPoints,t.fillArcAreaGeo=Y.FillArcAreaGeo,t.fillShapeGeo=Y.FillShapeGeo,t.fillTypeArrays=Y.FillTypeArrays,t.fillSideTypeArray=Y.FillSideTypeArray,t.fillBuffers=Y.FillBuffers,t.fillCenterHeightLine=Y.FillCenterHeightLine,t.filledChanged=Y.FilledChanged,t.drawSide=Y.DrawSide,t.drawSurface=Y.DrawSurface,t.fontMSL=Y.FontMSL,t.updateFont=Y.UpdateFont,t.fillBufferForCenterLines=Y.FillBufferForCenterLines,t.fixedAnglesAndFindCoordLength=Y.FixedAnglesAndFindCoordLength,t.buildCenterPoints=Y.BuildCenterPoints,t.buildFollowGroundPoints=Y.BuildFollowGroundPoints,t.fillGeo=Y.FillGeo,t.findFollowGroundCoords=Y.FindFollowGroundCoords,t.findFollowGroundCoordsForCenterLines=Y.findFollowGroundCoordsForCenterLines,t.reBuildReq=Y.ReBuildReq,t.addSteiners=Y.AddSteiners,t.setCoordLenForDraw=Y.SetCoordLenForDraw,t.prepareFollowGround=Y.PrepareFollowGround,t.cdt2dWorkerOnMessage=Y.Cdt2dWorkerOnMessage,t.cdt2dWorkerOnMessage=t.cdt2dWorkerOnMessage.bind(t),t.findLod=Y.FindLod,t.findFixedTopMax=Y.FindFixedTopMax,t.saveInfo=Y.SaveInfo,t.restoreInfo=Y.RestoreInfo,t.rebuild=Y.Rebuild,t.buildEditIcons=Y.BuildEditIcons,t.styleChanged=Y.StyleChanged,t.getAsJSON=Y.GetAsJSON,t.findMidPoint=Y.FindMidPoint,t.fillMidGeo=Y.FillMidGeo,t.repairHeightsSingle=Y.RepairHeightsSingle,t.drawHeightPoint=Y.DrawHeightPoint,t.checkHasFontIcon(),t.Height=new nt(t),t.Dist=new at(t),t.Angle=new rt(t),t.radius1>t.radius2){var i=t.radius2;t.radius2=t.radius1,t.radius1=i}(t.stepAng<=0||"number"!=typeof t.stepAng||isNaN(t.stepAng))&&(t.stepAng=5),t.fixedAnglesAndFindCoordLength(),t.findMidPoint(),t.fillArcAreaGeo(t.radius2,t.radius2,!1),t.fillArcAreaGeo(t.radius1,t.radius1,!0),t._coordsZ.length=t._coords.length/2,t.obj.arcAreaTypedArr=new Float32Array(3*t._coords.length),t.obj.arcAreaTypedArr2=new Float32Array(9),t.coordsZ[0]?t._coordsZ.fill(parseFloat(t.coordsZ[0])):t._coordsZ.fill(0),(t.style.border||t.style.filled)&&(t.obj.arcAreaVertBuff=this.gl.createBuffer(),t.obj.arcAreaVertBuff2=this.gl.createBuffer()),t.solid3D?(t.repairHeightsSingle(),t.obj.arcAreaSideVertBuff=this.gl.createBuffer(),t.obj.arcAreaTopVertBuff=this.gl.createBuffer(),t.obj.arcAreaCenterLineBuff=this.gl.createBuffer()):t.heights=null,t.style.filled&&(t.obj.arcAreaIndexBuffer=this.gl.createBuffer(),t.buildTriangle(t.obj.arcAreaIndexBuffer,null)),t.findLimitsAndCenter(),t.build(),this.TotalObjArr.push(t),this.FGlobe.DrawRender()}},{key:"SetActive",value:function(t){this.FActive=t}},{key:"GetActive",value:function(){return this.FActive}},{key:"FindObjByRef",value:function(t){return this.TotalObjArr.indexOf(t)}},{key:"FindObjByFid",value:function(t){for(var e=this.TotalObjArr.length;e--;)if(this.TotalObjArr[e].Fid===t)return this.TotalObjArr[e];return null}},{key:"GetObj",value:function(t){return this.TotalObjArr[t]}},{key:"ObjCount",value:function(){return this.TotalObjArr.length}},{key:"DeleteObj",value:function(){this.FEditing&&this.obj.FGlobe.api_StopEditObj(!1,!1),this.objectBuffer.DeleteObjByRef(this)}},{key:"DeleteObjByRef",value:function(t){var e=this.FindObjByRef(t);return-1!==e&&(this.ClearObj(t.type,e),this.FGlobe.DrawRender(),!0)}},{key:"DeleteObjByFid",value:function(t){var e=this.FindObjByFid(t);return!!e&&(this.DeleteOneObjectOfType(e),this.FGlobe.DrawRender(),!0)}},{key:"DeleteObjByIndex",value:function(t){var e=this.TotalObjArr[t];return!!e&&(this.DeleteOneObjectOfType(e),this.FGlobe.DrawRender(),!0)}},{key:"Draw2d",value:function(){var t=this.gl,e=this.FGlobe;if(t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.gl.enableVertexAttribArray(e.P2DtextCoordLoc),e.XSl9cT(e.orthoLeft,e.FScrW,e.FScrH,e.orthoTop,-20,20),this.GLU.InitModel(),this.FActive)for(var i=0;i<this.TotalObjArr.length;i++){var r=this.TotalObjArr[i];r.FActive&&!r.FEditing&&e.FDRAWED_MAX_LEVEL>=r.startLod&&e.FDRAWED_MAX_LEVEL<=r.endLod&&r.draw2d()}}},{key:"Draw3d",value:function(){if(this.FActive){var t=this.gl,e=this.FGlobe;t.useProgram(e.Program3D),l.z.FOGGED&&e.Xwm2mb(),t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),e.GLU.setProjToGL(e.P3DprojectionMatrixLoc);for(var i=0;i<this.TotalObjArr.length;i++){var r=this.TotalObjArr[i],s=r.FActive,o=r.FEditing,n=r.startLod,a=r.endLod,h=r.style;s&&!o&&0!==h.opacity&&e.FDRAWED_MAX_LEVEL>=n&&e.FDRAWED_MAX_LEVEL<=a&&this.Xhgt22(this.TotalObjArr[i])}t.enable(t.DEPTH_TEST)}}},{key:"Xhgt22",value:function(t){switch(t.type){case l.j.POLYGON:case l.j.LINE:default:this.FGlobe.FDrawedWorldDeg.CSIsCommonRegionT(t.obj.Limit)&&t.draw3d()}}},{key:"ObjCheckStyle",value:function(t){t.style||(t.style=c.a.CreateStyle())}},{key:"ObjCheckId",value:function(t){t?t.Fid||(this.FGlobe.NewNextFutureId++,t.Fid=this.FGlobe.NewNextFutureId):(t={},this.FGlobe.NewNextFutureId++,t.Fid=this.FGlobe.NewNextFutureId)}},{key:"ObjUpdateFontPackets",value:function(){var t;for(t=this.TotalObjArr.length;t--;)this.TotalObjArr[t].updateFont()}},{key:"Clear",value:function(t){switch(t){case l.j.POINT:this.ClearObjectsOfType(l.j.POINT);break;case l.j.LINE:this.ClearObjectsOfType(l.j.LINE);break;case l.j.POLYGON:this.ClearObjectsOfType(l.j.POLYGON);break;case l.j.SHAPE:this.ClearObjectsOfType(l.j.SHAPE);break;case l.j.MODEL:this.ClearObjectsOfType(l.j.MODEL);break;case l.j.ARCAREA:this.ClearObjectsOfType(l.j.ARCAREA);break;case"":case null:case void 0:this.ClearObjectsOfType(l.j.POINT),this.ClearObjectsOfType(l.j.LINE),this.ClearObjectsOfType(l.j.POLYGON),this.ClearObjectsOfType(l.j.SHAPE),this.ClearObjectsOfType(l.j.MODEL),this.ClearObjectsOfType(l.j.ARCAREA)}clearInterval(this.IntervalCheckMeshAndGrounFollow),this.IntervalCheckMeshAndGrounFollow=null}},{key:"ClearObjectsOfType",value:function(t){for(var e=this.TotalObjArr.length;e--;)t===this.TotalObjArr[e].type&&(this.TotalObjArr[e].type!==l.j.POINT&&this.TotalObjArr[e].type!==l.j.MODEL&&this.TotalObjArr[e].clear(),this.FGlobe.FLastEditingObj&&this.TotalObjArr[e]===this.FGlobe.FLastEditingObj&&this.FGlobe.api_CancelEditObj(),delete this.TotalObjArr[e],this.TotalObjArr.splice(e,1));this.FGlobe.DrawRender()}},{key:"DeleteOneObjectOfType",value:function(t){var e;t.type===l.j.POINT||t.type===l.j.MODEL?(e=this.TotalObjArr.indexOf(t),delete this.TotalObjArr[e],this.TotalObjArr.splice(e,1)):(t.clear(),e=this.TotalObjArr.indexOf(t),delete this.TotalObjArr[e],this.TotalObjArr.splice(e,1)),this.FGlobe.DrawRender()}},{key:"SetOpacity",value:function(t){this.opacity=t,this.FGlobe.DrawRender()}},{key:"ExchangeObj",value:function(t,e){var i=this.TotalObjArr[t];this.TotalObjArr[t]=this.TotalObjArr[e],this.TotalObjArr[e]=i}},{key:"GetTotalLimit",value:function(){var t=new u.E(0,0,0,0);t.Clear();for(var e=this.TotalObjArr.length;e--;){var i=this.TotalObjArr[e].obj;t.ExpandTGW(i.Limit)}return{ll:{x:t.LL.y,y:t.LL.x},ur:{x:t.UR.y,y:t.UR.x}}}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=i(4),u=i(21),d=new(function(){function t(){s()(this,t)}return n()(t,[{key:"CoordBuffers",value:function(t,e){var i=t.gl;t.IntVerticesCounter=new Int16Array(1),t.IntNormalsCounter=new Int16Array(1),t.IntVertexCount=8*a.b.Sqr((e-1)/2)*3-3*(e-1)*4,t.VertexCount=3*(e-1),t.VertexCount2=3*(e-1)*2;var r=3*(e-1)*3,s=3*(e-1)*3*2;t.IntVertices=new Float32Array(3*t.IntVertexCount),t.IntNormals=new Float32Array(3*t.IntVertexCount),t.verticesCounter=new Int16Array(4),t.normalsCounter=new Int16Array(4),t.Vertices=[new Float32Array(r),new Float32Array(r),new Float32Array(r),new Float32Array(r)],t.Normals=[new Float32Array(r),new Float32Array(r),new Float32Array(r),new Float32Array(r)],t.vertices2Counter=new Int8Array(4),t.normals2Counter=new Int8Array(4),t.Vertices2=[new Float32Array(s),new Float32Array(s),new Float32Array(s),new Float32Array(s)],t.Normals2=[new Float32Array(s),new Float32Array(s),new Float32Array(s),new Float32Array(s)],t.IntVertexBuffer=i.createBuffer(),t.vertexBuffer=[i.createBuffer(),i.createBuffer(),i.createBuffer(),i.createBuffer()],t.vertex2Buffer=[i.createBuffer(),i.createBuffer(),i.createBuffer(),i.createBuffer()],t.IntNormalBuffer=i.createBuffer(),t.normalBuffer=[i.createBuffer(),i.createBuffer(),i.createBuffer(),i.createBuffer()],t.normal2Buffer=[i.createBuffer(),i.createBuffer(),i.createBuffer(),i.createBuffer()]}},{key:"TexTCoordBuffers",value:function(t,e,i){var r=3*(i-1)*2,s=2*r;t.IntTexCoordsCounter=new Int16Array(1),t.IntTexCoords=new Float32Array(2*(8*a.b.Sqr((i-1)/2)*3-3*(i-1)*4)),t.TexCoordsCounter=new Int16Array(4),t.TexCoords2Counter=new Int16Array(4),t.TexCoords=[new Float32Array(r),new Float32Array(r),new Float32Array(r),new Float32Array(r)],t.TexCoords2=[new Float32Array(s),new Float32Array(s),new Float32Array(s),new Float32Array(s)],t.InttexcoordBuffer=e.createBuffer(),t.texcoord1Buffer=[e.createBuffer(),e.createBuffer(),e.createBuffer(),e.createBuffer()],t.texcoord2Buffer=[e.createBuffer(),e.createBuffer(),e.createBuffer(),e.createBuffer()],t.FTextName=null,t.FParentTextID=null,t.FParenttcx=0,t.FParenttcy=0,t.FParenttwd=0}},{key:"Clear",value:function(t,e){delete t.FParenttcx,delete t.FParenttcy,delete t.FParenttwd,delete t.IntTexCoordsCounter,delete t.IntTexCoords,delete t.TexCoordsCounter,delete t.TexCoords2Counter,t.InttexcoordBuffer&&e.deleteBuffer(t.InttexcoordBuffer),delete t.InttexcoordBuffer;for(var i=0;i<4;i++)delete t.TexCoords[i],delete t.TexCoords2[i],t.texcoord1Buffer[i]&&e.deleteBuffer(t.texcoord1Buffer[i]),delete t.texcoord1Buffer[i],t.texcoord2Buffer[i]&&e.deleteBuffer(t.texcoord2Buffer[i]),delete t.texcoord2Buffer[i];delete t.TexCoords,delete t.TexCoords2,delete t.texcoord1Buffer,delete t.texcoord2Buffer}}]),t}()),c=function(){function t(e,i){s()(this,t),this.FTextName=null,this.FTextureRequested=!1,this.FTextureRequesting=!1,this.FLoadingChildTextureInfoExists=!1,this.FLoadingChildTextureList=new Int8Array(4),this.FChildTextureInfoExists=!1,this.FChildTextureList=new Int8Array(4),this.FParentTextID=0,this.FParenttcx=0,this.FParenttcy=0,this.FParenttwd=0,d.TexTCoordBuffers(this,e,i),this.textureRESULT=0}return n()(t,[{key:"ClearBuffers",value:function(t){t.deleteBuffer(this.InttexcoordBuffer),this.InttexcoordBuffer=null;for(var e=4;e--;)t.deleteBuffer(this.texcoord1Buffer[e]),this.texcoord1Buffer[e]=null,t.deleteBuffer(this.texcoord2Buffer[e]),this.texcoord2Buffer[e]=null}},{key:"ClearTypeArrays",value:function(){this.FLoadingChildTextureList=null,this.FChildTextureList=null,this.IntTexCoordsCounter=null,this.IntTexCoords=null,this.TexCoordsCounter=null,this.TexCoords2Counter=null,this.TexCoords=null,this.TexCoords2=null}},{key:"ClearTexture",value:function(t){t.deleteTexture(this.FTextName),this.FTextName=null}},{key:"ClearRequestInfo",value:function(){this.FTextureRequested=!1,this.FTextureRequesting=!1}},{key:"ClearParentInfos",value:function(){this.FParentTextID=0,this.FParenttcx=0,this.FParenttcy=0,this.FParenttwd=0}}]),t}(),f=5,p=["{z}","{x}","{y}"],F=["{llx}","{lly}","{urx}","{ury}"],y=function(){function t(e){s()(this,t),this.FRequestCount=0,this.FLevel=0,this.FLevelFloat=0,this.FChildOrder=0,this.FParent=null,this.FRootR=0,this.FRootC=0,this.FCenterLonDeg=0,this.FCenterLatDeg=0,this.FCenterLonRad=0,this.FCenterLatRad=0,this.FMercatorCenterLonDeg=0,this.FMercatorCenterLatDeg=0,this.FMercatorCenterLonRad=0,this.FMercatorCenterLatRad=0,this.FCellGeoWPs=new a.w(0,0,0),this.FLLLonRad=0,this.FLLLatRad=0,this.FURLonRad=0,this.FURLatRad=0,this.FLLLonDeg=0,this.FLLLatDeg=0,this.FURLonDeg=0,this.FURLatDeg=0,this.Fliving=!1,this.FLiving=!1,this.FVisible=!1,this.FActive=!1,this.FTextures=[],this.FCurrentRequestRasterID=-1,this.FGeoCoding="",this.FChilds=[],this.FChilds.length=4,this.FMesh=[];for(var i=0;i<f;i++)this.FMesh[i]=new Float32Array(f);this.FMB2=[new Float32Array(2*(f-1)+1),new Float32Array(2*(f-1)+1),new Float32Array(2*(f-1)+1),new Float32Array(2*(f-1)+1)],this.FMeshParent=null,this.FMeshRequested=!1,this.IntLatLongs=[],this.IntLatLongs.length=8*a.b.Sqr((f-1)/2)*3-3*(f-1)*4,this.templenArr=[],this.templenArr.length=3*(f-1),this.LatLongs=[this.templenArr.slice(),this.templenArr.slice(),this.templenArr.slice(),this.templenArr.slice()],this.templenArr2=[],this.templenArr2.length=3*(f-1)*2,this.LatLongs2=[this.templenArr2.slice(),this.templenArr2.slice(),this.templenArr2.slice(),this.templenArr2.slice()],delete this.templenArr,delete this.templenArr2,this.FMinH=0,this.FMaxH=0,this.vidx=0,this.Vertices2P=[];for(i=0;i<4;i++){this.Vertices2P[i]=[];for(var r=0;r<3*(f-1)*2;r++)this.Vertices2P[i].push(new a.w(0,0,0))}this.FRealCenter=new a.w(0,0,0),this.FRealRadius=0,this.FActivationK=0,this.FCellGeoDPs=new a.w(0,0,0),this.gl=e.gl,this.FGlobe=e,this.rasterize=e.rasterize,d.CoordBuffers(this,f),this.FCellGeoWP=new a.w(0,0,0),this.FCellDist=0,this.FCellLayers=[],this.FCellRasterOverlays=[],this.tempmc=new a.w(0,0,0),this.tempp2=new a.w(0,0,0),this.tempp3=new a.w(0,0,0),this.tempn=new a.w(0,0,0),this.temptc=new a.u(0,0),this.temptc2=new a.u(0,0),this.TempLRTB=[],this.TempLRTB.length=4,this.FLiving=!1,this.FMeshCheck=new Int8Array(4),this.FCellc=new a.w(0,0,0),this.FRealBox=[new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0)],this.FBox=[new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0),new a.w(0,0,0)],this.mercatorXYZRect=new a.E(0,0,0,0)}return n()(t,[{key:"Init",value:function(t,e,i,r,s,o,n){this.isPole=!1,this.FCellTGW=new a.E(0,0,0,0),this.mercatorRect=new a.E(0,0,0,0),this.FGlobe.mercator.getTileExtent(e,i,r,this.mercatorRect),this.FGlobe.mercator.mercatorToLonLat(this.mercatorRect.LL.y,this.mercatorRect.LL.x,this.FCellTGW.LL),this.FGlobe.mercator.mercatorToLonLat(this.mercatorRect.UR.y,this.mercatorRect.UR.x,this.FCellTGW.UR),this.MeshChangedForLayer=!1,this.FRequestCount=0,this.FTextures.length=0;for(var l=this.FGlobe.FRasters.length,u=0;u<l;u++)this.FTextures.push(new c(this.gl,f));this.FCurrentRequestRasterID=-1,this.FLevel=r,this.FLevelFloat=0,this.FChildOrder=s,this.FParent=t,this.FRootR=o,this.FRootC=n,this.FTileX=e,this.FTileY=i,this.FCenterLonDeg=(this.FCellTGW.UR.y+this.FCellTGW.LL.y)/2,this.FCenterLatDeg=(this.FCellTGW.UR.x+this.FCellTGW.LL.x)/2,this.FDegreeW=this.FCellTGW.UR.y-this.FCellTGW.LL.y,this.FDegreeH=this.FCellTGW.UR.x-this.FCellTGW.LL.x,this.FRadyanW=a.b.DegreeToRadyan(this.FDegreeW),this.FRadyanH=a.b.DegreeToRadyan(this.FDegreeH);var d=(this.mercatorRect.UR.y+this.mercatorRect.LL.y)/2,p=(this.mercatorRect.UR.x+this.mercatorRect.LL.x)/2,F=new a.u(0,0);this.FGlobe.mercator.mercatorToLonLat(d,p,F),this.FMercatorCenterLonDeg=F.y,this.FMercatorCenterLatDeg=F.x,this.FMercatorCenterLonRad=a.b.DegreeToRadyan(this.FMercatorCenterLonDeg),this.FMercatorCenterLatRad=a.b.DegreeToRadyan(this.FMercatorCenterLatDeg),this.FCenterLonRad=a.b.DegreeToRadyan(this.FCenterLonDeg),this.FCenterLatRad=a.b.DegreeToRadyan(this.FCenterLatDeg),a.b.GeoTo3D(this.FCenterLonRad,this.FCenterLatRad,h.z.GLOBE_RADIUS,this.FCellGeoWP),Object.assign(this.FCellGeoWPs,this.FCellGeoWP),this.FMeshDeltaDegW=this.FDegreeW/(f-1),this.FMeshDeltaDegH=this.FDegreeH/(f-1),this.FMeshDeltaRadW=this.FRadyanW/(f-1),this.FMeshDeltaRadH=this.FRadyanH/(f-1);var y=new a.w(0,0,0);a.b.GeoTo3D(this.FCenterLonRad+this.FMeshDeltaRadW,this.FCenterLatRad,h.z.GLOBE_RADIUS,y),this.FCellResMeters=this.FCellGeoWPs.Dist3D(y);var A=this.FMeshDeltaRadW*((f-1)/2),g=this.FMeshDeltaRadH*((f-1)/2);this.FLLLonRad=this.FCenterLonRad-A,this.FLLLatRad=this.FCenterLatRad-g,this.FURLonRad=this.FCenterLonRad+A,this.FURLatRad=this.FCenterLatRad+g;var C=this.FMeshDeltaDegW*((f-1)/2),b=this.FMeshDeltaDegH*((f-1)/2);this.FLLLonDeg=this.FCenterLonDeg-C,this.FLLLatDeg=this.FCenterLatDeg-b,this.FURLonDeg=this.FCenterLonDeg+C,this.FURLatDeg=this.FCenterLatDeg+b,this.FLiving=!1,this.FVisible=!1,this.FActive=!1,this.FGeoCoding=this.FTileX+"/"+this.FTileY+"/"+this.FLevel,this.X9O56I(),this.XeGcfA(),this.InitRasterize(),this.X1QKWb()}},{key:"InitPole",value:function(t,e,i,r,s,o,n,l,u){this.isPole=!0,this.MeshChangedForLayer=!1,this.FRequestCount=0,this.FTextures.length=0;for(var d=this.FGlobe.FRasters.length,p=0;p<d;p++)this.FTextures.push(new c(this.gl,f));this.FCurrentRequestRasterID=-1,this.FLevel=o,this.FLevelFloat=0,this.FChildOrder=n,this.FParent=t,this.FRootR=l,this.FRootC=u,this.FCenterLonDeg=e,this.FCenterLatDeg=i,this.FDegreeW=r,this.FDegreeH=s,this.FTileX=-1,this.FTileY=-1,this.FCenterLonRad=a.b.DegreeToRadyan(this.FCenterLonDeg),this.FCenterLatRad=a.b.DegreeToRadyan(this.FCenterLatDeg),this.FRadyanW=a.b.DegreeToRadyan(this.FDegreeW),this.FRadyanH=a.b.DegreeToRadyan(this.FDegreeH);var F=this.FDegreeW/2,y=this.FDegreeH/2;this.FCellTGW=new a.E(this.FCenterLonDeg-F,this.FCenterLatDeg-y,this.FCenterLonDeg+F,this.FCenterLatDeg+y),a.b.GeoTo3D(this.FCenterLonRad,this.FCenterLatRad,h.z.GLOBE_RADIUS,this.FCellGeoWP),Object.assign(this.FCellGeoWPs,this.FCellGeoWP),this.FMeshDeltaDegW=(this.FCellTGW.UR.y-this.FCellTGW.LL.y)/(f-1),this.FMeshDeltaDegH=(this.FCellTGW.UR.x-this.FCellTGW.LL.x)/(f-1),this.FMeshDeltaRadW=a.b.DegreeToRadyan(this.FCellTGW.UR.y-this.FCellTGW.LL.y)/(f-1),this.FMeshDeltaRadH=a.b.DegreeToRadyan(this.FCellTGW.UR.x-this.FCellTGW.LL.x)/(f-1);var A=new a.w(0,0,0);a.b.GeoTo3D(this.FCenterLonRad+this.FMeshDeltaRadW,this.FCenterLatRad,h.z.GLOBE_RADIUS,A),this.FCellResMeters=this.FCellGeoWPs.Dist3D(A);var g=this.FMeshDeltaRadW*((f-1)/2),C=this.FMeshDeltaRadH*((f-1)/2);this.FLLLonRad=this.FCenterLonRad-g,this.FLLLatRad=this.FCenterLatRad-C,this.FURLonRad=this.FCenterLonRad+g,this.FURLatRad=this.FCenterLatRad+C;var b=this.FMeshDeltaDegW*((f-1)/2),T=this.FMeshDeltaDegH*((f-1)/2);this.FLLLonDeg=this.FCenterLonDeg-b,this.FLLLatDeg=this.FCenterLatDeg-T,this.FURLonDeg=this.FCenterLonDeg+b,this.FURLatDeg=this.FCenterLatDeg+T,this.FLiving=!1,this.FVisible=!1,this.FActive=!1,this.FGeoCoding=this.FTileX+"/"+this.FTileY+"/"+this.FLevel,this.X9O56I(),this.XeGcfA(),this.InitRasterize(),this.X1QKWb()}},{key:"XFTTPF",value:function(t,e,i){var r,s;for(r=f;r--;)for(s=f;s--;)this.FMesh[r][s]=t[r][s]*h.z.GLOBE_RADIUS_K;this.FRequestCount--,this.FMeshParent=this,this.Xuc1D1(this.TempLRTB),this.Xztgwz(!this.TempLRTB[0],!this.TempLRTB[1],!this.TempLRTB[2],!this.TempLRTB[3]),this.XmYBdX(),this.X7N6TB(!0,!0,!0,!0,!0,!0,!0,!0),this.Xdmfz8(),this.Xqaw8R(),i&&this.XBOsbO(this.FGlobe.FCamera.FCamLongLat)&&this.FGlobe.FCamera.Xvfbh5(),this.FGlobe.FLastEditingObj&&this.FGlobe.X6LjtT(this.FCellTGW,this.FGlobe.FLastEditingObj);var o=this.FGlobe.UserObjArr;for(r=o.length;r--;)o[r].CheckMeshChanged(this.FCellTGW);this.FGlobe.FLayers.length&&this.FLevel>=h.z.VECTORLAYER_GLOBE_LOD_LEVEL&&(this.MeshChangedForLayer=!0,this.FGlobe.checkReduction=!0,this.FParent&&(this.FParent.MeshChangedForLayer||this.XGYNF5(this,this.MeshChangedForLayer)))}},{key:"XGYNF5",value:function(t,e){t.FParent&&(t.FParent.MeshChangedForLayer=e,this.XGYNF5(t.FParent,e))}},{key:"AskObject",value:function(t,e,i){for(var r=this.FCellLayers.length;r--;){var s=this.FCellLayers[r];if((!s.FCityLayer.continuousLOD||s.FCityLayer.layerType!==h.g.MVT_XYZ)&&s.FCityLayer._FActive&&s.FStateReady)if(s.FCityLayer.objectType===h.j.OBJECT_3D)for(var o=0;o<s.objects.length;o++)s.AskObject(t,e,i,s.objects[o],s.FCityLayer._style,s.FCityLayer.style,s.FCityLayer.data[o].shapeName,s.Layer.ITDrawer[o]);else s.AskObject(t,e,i,s.objects,s.FCityLayer._style,s.FCityLayer.style,s.FCityLayer.objectType,s.Layer.ITDrawer)}return!1}},{key:"AskMVTContinuousObject",value:function(t,e,i){for(var r=this.FCellLayers.length;r--;){var s=this.FCellLayers[r];if(s.FCityLayer.continuousLOD&&s.FCityLayer.layerType===h.g.MVT_XYZ&&s.FCityLayer._FActive&&s.FStateReady)if(Array.isArray(s.FCityLayer.style))for(var o=s.FCityLayer.style.length;o--;)s.FCityLayer.style[o].active&&s.AskObject(t,e,i,s.objects[o],s.FCityLayer._style[o],s.FCityLayer.style[o],s.FCityLayer.style[o].objectType,s.Layer.ITDrawer[o]);else s.AskObject(t,e,i,s.objects,s.FCityLayer._style,s.FCityLayer.style,s.FCityLayer.objectType,s.Layer.ITDrawer)}return!1}},{key:"QueryObject",value:function(t,e,i,r,s){for(var o=this.FCellLayers.length;o--;){var n=this.FCellLayers[o];if((!n.FCityLayer.continuousLOD||n.FCityLayer.layerType!==h.g.MVT_XYZ)&&n.FCityLayer._FActive&&n.FStateReady)if(n.FCityLayer.objectType===h.j.OBJECT_3D)for(var a=0;a<n.objects.length;a++)n.QueryGeometryLayerObjects(t,e,i,r,s,n.objects[a]);else n.QueryGeometryLayerObjects(t,e,i,r,s,n.objects)}return!1}},{key:"QueryMVTContinuousObject",value:function(t,e,i,r,s){for(var o=this.FCellLayers.length;o--;){var n=this.FCellLayers[o];if(n.FCityLayer.continuousLOD&&n.FCityLayer.layerType===h.g.MVT_XYZ&&n.FCityLayer._FActive&&n.FStateReady)if(Array.isArray(n.FCityLayer.style))for(var a=n.FCityLayer.style.length;a--;)n.FCityLayer.style[a].active&&n.QueryGeometryLayerObjects(t,e,i,r,s,n.objects[a]);else n.QueryGeometryLayerObjects(t,e,i,r,s,n.objects)}return!1}},{key:"ReductLayers",value:function(){for(var t=0;t<this.FCellLayers.length;t++){var e=this.FCellLayers[t],i=e.FCityLayer._style,r=i.iconType,s=i.__hasFont,o=i.symbolReduction,n=e.Layer;if((!e.FCityLayer.continuousLOD||e.FCityLayer.layerType!==h.g.MVT_XYZ)&&e.FCityLayer._FActive&&e.FStateReady&&o&&(s||r!==h.e.NOICON))if(e.FCityLayer.objectType===h.j.OBJECT_3D)for(var a=e.objects.length,l=0;l<a;l++)n.ITDrawer[l].Reduction(e.FCityLayer._style);else n.ITDrawer.Reduction(e.FCityLayer._style)}}},{key:"ReductMVTContinuousLayers",value:function(){for(var t=0;t<this.FCellLayers.length;t++){var e=this.FCellLayers[t];if(Array.isArray(e.FCityLayer.style))for(var i=e.FCityLayer.style.length,r=0;r<i;r++){var s=e.FCityLayer._style[r],o=s.iconType,n=s.__hasFont,a=s.symbolReduction,l=e.Layer;e.FCityLayer.continuousLOD&&e.FCityLayer.layerType===h.g.MVT_XYZ&&e.FCityLayer._FActive&&e.FStateReady&&a&&(n||o!==h.e.NOICON)&&l.ITDrawer[r].Reduction(e.FCityLayer._style[r])}else{var u=e.FCityLayer._style;o=u.iconType,n=u.__hasFont,a=u.symbolReduction,l=e.Layer;e.FCityLayer.continuousLOD&&e.FCityLayer.layerType===h.g.MVT_XYZ&&e.FCityLayer._FActive&&e.FStateReady&&a&&(n||o!==h.e.NOICON)&&l.ITDrawer.Reduction(e.FCityLayer._style)}}}},{key:"Xuc1D1",value:function(t){var e,i,r,s,o,n,a,h,l;e=!1,i=!1,r=!1,s=!1,o=!1,n=!1,a=!1,h=!1,(l=this.XINTgz())&&l.XHtqRe()&&(e=l.FChilds[1].FMeshParent===l.FChilds[1],i=l.FChilds[2].FMeshParent===l.FChilds[2]),(l=this.XuUZSp())&&l.XHtqRe()&&(r=l.FChilds[0].FMeshParent===l.FChilds[0],s=l.FChilds[3].FMeshParent===l.FChilds[3]),(l=this.X6ttta())&&l.XHtqRe()&&(o=l.FChilds[0].FMeshParent===l.FChilds[0],n=l.FChilds[1].FMeshParent===l.FChilds[1]),(l=this.XF3wa7())&&l.XHtqRe()&&(a=l.FChilds[3].FMeshParent===l.FChilds[3],h=l.FChilds[2].FMeshParent===l.FChilds[2]),t[0]=e||i,t[1]=r||s,t[2]=o||n,t[3]=a||h}},{key:"XHtqRe",value:function(){return this.FChilds[0]}},{key:"Xztgwz",value:function(t,e,i,r){var s,o,n,a,h,l,u=f-1,d=2*u;for(o=u;o--;)n=2*o+1,a=o+1,r&&(this.FMB2[3][2*o]=this.FMesh[0][o],this.FMB2[3][n]=(this.FMesh[0][o]+this.FMesh[0][a])/2),i&&(this.FMB2[2][2*o]=this.FMesh[u][o],this.FMB2[2][n]=(this.FMesh[u][o]+this.FMesh[u][a])/2);for(r&&(this.FMB2[3][d]=this.FMesh[0][u]),i&&(this.FMB2[2][d]=this.FMesh[u][u]),s=u;s--;)h=2*s+1,l=s+1,t&&(this.FMB2[0][2*s]=this.FMesh[s][0],this.FMB2[0][h]=(this.FMesh[s][0]+this.FMesh[l][0])/2),e&&(this.FMB2[1][2*s]=this.FMesh[s][u],this.FMB2[1][h]=(this.FMesh[s][u]+this.FMesh[l][u])/2);t&&(this.FMB2[0][d]=this.FMesh[u][0]),e&&(this.FMB2[1][d]=this.FMesh[u][u])}},{key:"XmYBdX",value:function(){var t,e,i,r,s,o,n,l=f-1;for(this.IntVerticesCounter[0]=0,this.IntNormalsCounter[0]=0,this.XVhhnP(),t=0,e=1;e<l;e++)if(1&e)for(i=1;i<l;i++)1&i&&(r=e-1,s=i-1,o=e+1,n=i+1,this.XyLhOo(this.IntLatLongs[t],e,i,this.tempmc),1!==e&&(this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],r,s,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],r,i,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0)),this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t-2],r,i,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],r,n,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0))),3!==i&&(this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],r,n,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],e,n,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0)),this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t-2],e,n,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],o,n,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0))),3!==e&&(this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],o,n,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],o,i,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0)),this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t-2],o,i,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],o,s,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0))),1!==i&&(this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],o,s,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],e,s,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0)),this.Xt4BV6(this.IntVertices,this.tempmc,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t-2],e,s,this.tempp2),this.Xt4BV6(this.IntVertices,this.tempp2,this.IntVerticesCounter,0),t++,this.XyLhOo(this.IntLatLongs[t],r,s,this.tempp3),this.Xt4BV6(this.IntVertices,this.tempp3,this.IntVerticesCounter,0),t++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0),this.Xt4BV6(this.IntNormals,this.tempn,this.IntNormalsCounter,0))));this.IntVerticesCounter[0]=0,this.IntNormalsCounter[0]=0,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.IntVertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.IntVertices,this.gl.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.IntNormalBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.IntNormals,this.gl.STATIC_DRAW))}},{key:"Xdmfz8",value:function(){var t,e,i,r=f-1,s=r/2,o=s+1;if(this.FParent)switch(this.FChildOrder){case 0:for(e=f;e--;)this.FParent.FMB2[0][e]=this.FMesh[e][0],this.FParent.FMB2[3][e]=this.FMesh[0][e];this.FParent.X7N6TB(!1,!1,!1,!1,!0,!1,!1,!0);break;case 1:for(e=f;e--;)this.FParent.FMB2[1][e]=this.FMesh[e][r],this.FParent.FMB2[3][e+r]=this.FMesh[0][e];this.FParent.X7N6TB(!1,!1,!1,!1,!1,!0,!1,!0);break;case 2:for(e=f;e--;)this.FParent.FMB2[1][e+r]=this.FMesh[e][r],this.FParent.FMB2[2][e+r]=this.FMesh[r][e];this.FParent.X7N6TB(!1,!1,!1,!1,!1,!0,!0,!1);break;case 3:for(e=f;e--;)this.FParent.FMB2[0][e+r]=this.FMesh[e][0],this.FParent.FMB2[2][e]=this.FMesh[r][e];this.FParent.X7N6TB(!1,!1,!1,!1,!0,!1,!0,!1)}if((t=this.XINTgz())&&t.FMeshParent!==t){for(e=f;e--;)t.FMesh[e][r]=this.FMesh[e][0];t.Xztgwz(!1,!0,!1,!1),t.X7N6TB(!1,!0,!1,!1,!1,!0,!1,!1)}if((0===this.FChildOrder||3===this.FChildOrder)&&this.FParent&&(t=this.FParent.XINTgz())){if(t.FMeshParent!==t){switch(this.FChildOrder){case 0:for(e=o;e--;)t.FMesh[e][r]=this.FMesh[2*e][0];break;case 3:for(e=o;e--;)t.FMesh[e+s][r]=this.FMesh[2*e][0]}t.X7N6TB(!1,!0,!1,!1,!1,!1,!1,!1)}switch(this.FChildOrder){case 0:for(e=f;e--;)t.FMB2[1][e]=this.FMesh[e][0];break;case 3:for(e=f;e--;)t.FMB2[1][e+r]=this.FMesh[e][0]}t.X7N6TB(!1,!1,!1,!1,!1,!0,!1,!1)}if((t=this.XuUZSp())&&t.FMeshParent!==t){for(e=f;e--;)t.FMesh[e][0]=this.FMesh[e][r];t.Xztgwz(!0,!1,!1,!1),t.X7N6TB(!0,!1,!1,!1,!0,!1,!1,!1)}if((1===this.FChildOrder||2===this.FChildOrder)&&this.FParent&&(t=this.FParent.XuUZSp())){if(t.FMeshParent!==t){switch(this.FChildOrder){case 1:for(e=o;e--;)t.FMesh[e][0]=this.FMesh[2*e][r];break;case 2:for(e=o;e--;)t.FMesh[e+s][0]=this.FMesh[2*e][r]}t.X7N6TB(!0,!1,!1,!1,!1,!1,!1,!1)}switch(this.FChildOrder){case 1:for(e=f;e--;)t.FMB2[0][e]=this.FMesh[e][r];break;case 2:for(e=f;e--;)t.FMB2[0][e+r]=this.FMesh[e][r]}t.X7N6TB(!1,!1,!1,!1,!0,!1,!1,!1)}if((t=this.X6ttta())&&t.FMeshParent!==t){for(i=f;i--;)t.FMesh[0][i]=this.FMesh[r][i];t.Xztgwz(!1,!1,!1,!0),t.X7N6TB(!1,!1,!1,!0,!1,!1,!1,!0)}if((2===this.FChildOrder||3===this.FChildOrder)&&this.FParent&&(t=this.FParent.X6ttta())){if(t.FMeshParent!==t){switch(this.FChildOrder){case 3:for(i=o;i--;)t.FMesh[0][i]=this.FMesh[r][2*i];break;case 2:for(i=o;i--;)t.FMesh[0][i+s]=this.FMesh[r][2*i]}t.X7N6TB(!1,!1,!1,!0,!1,!1,!1,!1)}switch(this.FChildOrder){case 3:for(i=f;i--;)t.FMB2[3][i]=this.FMesh[r][i];break;case 2:for(i=f;i--;)t.FMB2[3][i+r]=this.FMesh[r][i]}t.X7N6TB(!1,!1,!1,!1,!1,!1,!1,!0)}if((t=this.XF3wa7())&&t.FMeshParent!==t){for(i=f;i--;)t.FMesh[r][i]=this.FMesh[0][i];t.Xztgwz(!1,!1,!0,!1),t.X7N6TB(!1,!1,!0,!1,!1,!1,!0,!1)}if((0===this.FChildOrder||1===this.FChildOrder)&&this.FParent&&(t=this.FParent.XF3wa7())){if(t.FMeshParent!==t){switch(this.FChildOrder){case 0:for(i=o;i--;)t.FMesh[r][i]=this.FMesh[0][2*i];break;case 1:for(i=o;i--;)t.FMesh[r][i+s]=this.FMesh[0][2*i]}t.X7N6TB(!1,!1,!0,!1,!1,!1,!1,!1)}switch(this.FChildOrder){case 0:for(i=f;i--;)t.FMB2[2][i]=this.FMesh[0][i];break;case 1:for(i=f;i--;)t.FMB2[2][i+r]=this.FMesh[0][i]}t.X7N6TB(!1,!1,!1,!1,!1,!1,!0,!1)}}},{key:"Xqaw8R",value:function(){var t,e,i,r,s;for(this.FRealCenter.x=0,this.FRealCenter.y=0,this.FRealCenter.z=0,s=this.IntVertexCount+4*this.VertexCount,i=this.IntVertexCount;i--;)this.XfUlMf(this.FRealCenter,this.IntVertices,i);for(i=4;i--;)for(r=this.VertexCount;r--;)this.XfUlMf(this.FRealCenter,this.Vertices[i],r);for(this.FRealCenter.SetV(this.FRealCenter.x/s,this.FRealCenter.y/s,this.FRealCenter.z/s),this.FRealRadius=-1,i=this.IntVertexCount;i--;)this.X8R1OR(this.tempmc,this.IntVertices,i),(e=this.FRealCenter.LayDistance(this.tempmc))>this.FRealRadius&&(this.FRealRadius=e);for(i=4;i--;)for(r=this.VertexCount;r--;)this.X8R1OR(this.tempmc,this.Vertices[i],r),(e=this.FRealCenter.LayDistance(this.tempmc))>this.FRealRadius&&(this.FRealRadius=e);this.FRealRadius=Math.sqrt(this.FRealRadius);var o=h.z.GLOBE_RADIUS+this.FMinH,n=h.z.GLOBE_RADIUS+this.FMaxH;a.b.GeoTo3D(this.FLLLonRad,this.FLLLatRad,o,this.FRealBox[0]),a.b.GeoTo3D(this.FURLonRad,this.FLLLatRad,o,this.FRealBox[1]),a.b.GeoTo3D(this.FURLonRad,this.FURLatRad,o,this.FRealBox[2]),a.b.GeoTo3D(this.FLLLonRad,this.FURLatRad,o,this.FRealBox[3]),a.b.GeoTo3D(this.FLLLonRad,this.FLLLatRad,n,this.FRealBox[4]),a.b.GeoTo3D(this.FURLonRad,this.FLLLatRad,n,this.FRealBox[5]),a.b.GeoTo3D(this.FURLonRad,this.FURLatRad,n,this.FRealBox[6]),a.b.GeoTo3D(this.FLLLonRad,this.FURLatRad,n,this.FRealBox[7]),t=a.b.Max(this.FRealBox[0].Dist3D(this.FRealBox[1]),this.FRealBox[3].Dist3D(this.FRealBox[2])),this.FActivationK=a.b.Min(1,1.5*t/this.FRealBox[0].Dist3D(this.FRealBox[3]))}},{key:"XBOsbO",value:function(t){return t.x>=this.FLLLonRad+a.H&&t.x<=this.FURLonRad-a.H&&t.y>=this.FLLLatRad+a.H&&t.y<=this.FURLatRad-a.H}},{key:"XRNEwR",value:function(t,e){return t>=this.FLLLonDeg+a.H&&t<=this.FURLonDeg-a.H&&e>=this.FLLLatDeg+a.H&&e<=this.FURLatDeg-a.H}},{key:"XINTgz",value:function(){if(this.isPole)return null;switch(this.FChildOrder){case-1:return this.FGlobe.FCells[this.FRootR][(this.FRootC-1+this.FGlobe.FCNum)%this.FGlobe.FCNum];case 0:return(t=this.FParent.XINTgz())?t.FChilds[1]:null;case 1:return this.FParent.FChilds[0];case 2:return this.FParent.FChilds[3];case 3:var t;return(t=this.FParent.XINTgz())?t.FChilds[2]:null}return null}},{key:"XuUZSp",value:function(){if(this.isPole)return null;switch(this.FChildOrder){case-1:return this.FGlobe.FCells[this.FRootR][(this.FRootC+1+this.FGlobe.FCNum)%this.FGlobe.FCNum];case 0:return this.FParent.FChilds[1];case 1:return(t=this.FParent.XuUZSp())?t.FChilds[0]:null;case 2:var t;return(t=this.FParent.XuUZSp())?t.FChilds[3]:null;case 3:return this.FParent.FChilds[2]}return null}},{key:"X6ttta",value:function(){if(this.isPole)return null;switch(this.FChildOrder){case-1:return this.FGlobe.FCells[(this.FRootR-1+this.FGlobe.FRNum)%this.FGlobe.FRNum][this.FRootC];case 0:return this.FParent.FChilds[3];case 1:return this.FParent.FChilds[2];case 2:return(t=this.FParent.X6ttta())?t.FChilds[1]:null;case 3:var t;return(t=this.FParent.X6ttta())?t.FChilds[0]:null}return null}},{key:"XF3wa7",value:function(){if(this.isPole)return null;switch(this.FChildOrder){case-1:return this.FGlobe.FCells[(this.FRootR+1+this.FGlobe.FRNum)%this.FGlobe.FRNum][this.FRootC];case 0:return(t=this.FParent.XF3wa7())?t.FChilds[3]:null;case 1:var t;return(t=this.FParent.XF3wa7())?t.FChilds[2]:null;case 2:return this.FParent.FChilds[1];case 3:return this.FParent.FChilds[0]}return null}},{key:"X9O56I",value:function(){this.FChilds.fill(null)}},{key:"XeGcfA",value:function(){var t;for(t=f;t--;)this.FMesh[t].fill(a.B);for(t=4;t--;)this.FMB2[t].fill(a.B);if(this.FMeshParent=null,this.FMeshRequested=!1,this.X1d6Vm(),!this.FParent){this.XmYBdX(),this.X7N6TB(!0,!0,!0,!0,!0,!0,!0,!0);for(var e=0;e<this.FTextures.length;e++)this.Xp1RZJ(this.FTextures[e]),this.X31BlD(this.FTextures[e]);this.Xqaw8R()}}},{key:"InitRasterize",value:function(){this.VectorRasterize={},d.TexTCoordBuffers(this.VectorRasterize,this.gl,f)}},{key:"X1QKWb",value:function(){var t;this.X9ecQ3();var e=this.FGlobe.FLayers,i=e.length;for(t=0;t<i;t++)this.XwGBJg(e[t]);this.ClearRasterOverlays();var r=this.FGlobe.FRasterOverlays.length;for(t=0;t<r;t++)this.IsOverlayOverlap(this.FGlobe.FRasterOverlays[t])&&this.FCellRasterOverlays.push(this.FGlobe.TextureCoordsManager.CreateTextureCoords(this.gl,this,this.FGlobe.FRasterOverlays[t]))}},{key:"CheckRasterBbox",value:function(t,e){var i=this.FGlobe.FRasters[t]._fLimitsDegree,r=this.FLLLonDeg,s=this.FLLLatDeg,o=this.FURLonDeg,n=this.FURLatDeg;i&&!i.CSIsCommonRegionV(r,s,o,n)?this.FGlobe.rasterLoader.PrepareSupportPromise(this,this.FGlobe.FRasters[t],e):this.FGlobe.rasterLoader.PreparePromise(this,t,e)}},{key:"XnDXiZ",value:function(){this.RemoveRasterizeTextureInfo();var t=this.FGlobe.FTextCells.indexOf(this);-1!==t&&(this.XUlzx4(!1),this.FGlobe.FTextCells.splice(t,1)),this.X9ecQ3(),this.ClearRasterOverlays()}},{key:"ClearRasterOverlays",value:function(){for(var t=this.FCellRasterOverlays.length,e=0;e<t;e++)this.FGlobe.TextureCoordsManager.FreeTextureCoords(this.FCellRasterOverlays[e]);this.FCellRasterOverlays.length=0}},{key:"IsOverlayOverlap",value:function(t){return!(t.FRotwrad.LL.x>this.FURLatRad)&&(!(this.FLLLatRad>t.FRotwrad.UR.x)&&(!(t.FRotwrad.LL.y>this.FURLonRad)&&!(this.FLLLonRad>t.FRotwrad.UR.y)))}},{key:"XwGBJg",value:function(t){t.clusterStyle&&t.layerType===h.g.CS_OBJECT_ARRAY&&t.objectType===h.j.POINT?this.FLevel>=t.startLod&&this.FLevel<=t.endLod&&(t._fLimitsRadyan&&t._fLimitsRadyan.CSIsCommonRegionV(this.FLLLonRad,this.FLLLatRad,this.FURLonRad,this.FURLatRad)?this.FCellLayers.push(new u.a(this,t)):null!==t.bbox&&void 0!==t.bbox||this.FCellLayers.push(new u.a(this,t))):t.continuousLOD&&t.layerType===h.g.MVT_XYZ?this.FLevel>=t.startLod&&this.FLevel<=t.endLod&&(t._fLimitsRadyan&&t._fLimitsRadyan.CSIsCommonRegionV(this.FLLLonRad,this.FLLLatRad,this.FURLonRad,this.FURLatRad)?this.FCellLayers.push(new u.a(this,t)):null!==t.bbox&&void 0!==t.bbox||this.FCellLayers.push(new u.a(this,t))):this.FLevel===t.startLod&&(t._fLimitsRadyan&&t._fLimitsRadyan.CSIsCommonRegionV(this.FLLLonRad,this.FLLLatRad,this.FURLonRad,this.FURLatRad)?this.FCellLayers.push(new u.a(this,t)):null!==t.bbox&&void 0!==t.bbox||this.FCellLayers.push(new u.a(this,t)))}},{key:"XlksR8",value:function(t){for(var e=this.FCellLayers.length;e--;){var i=this.FCellLayers[e];if(i.FCityLayer===t){this.CheckCellLayerInCache(i),i.CancelRequest(),i.Clear(),i.CheckLayerType(),i.FRequested=null,i.FStateReady=null,i.Cell=null,i.FGlobe=null,i.gl=null,i.objects.length=0,i.tempp2d=null,i.IconWorld=null,i.RBush=null,i.Geo2D=null,delete this.FCellLayers[e].FCityLayer,this.FCellLayers.splice(e,1);break}}}},{key:"XRuQDv",value:function(t){for(var e=this.FCellLayers.length;e--;){var i=this.FCellLayers[e];if(i.FCityLayer===t){this.CheckCellLayerInCache(i),i.Clear(),i.FRequested=!1;break}}}},{key:"CheckCellLayerInCache",value:function(t){for(var e=this.FGlobe.vectorLayerLoader.cache,i=e.length,r=0;r<i;r++)if(e[r].cellVectorLayer===t){e.splice(r,1);break}}},{key:"X9ecQ3",value:function(){for(var t=this.FCellLayers.length;t--;)this.CheckCellLayerInCache(this.FCellLayers[t]),this.FCellLayers[t].Clear();this.FCellLayers.length=0}},{key:"Xt4BV6",value:function(t,e,i,r){t[i[r]]=e.x,i[r]++,t[i[r]]=e.y,i[r]++,t[i[r]]=e.z,i[r]++}},{key:"XA679E",value:function(t,e,i,r){t[i[r]]=e.x,i[r]++,t[i[r]]=e.y,i[r]++}},{key:"XfUlMf",value:function(t,e,i){t.SetV(t.x+e[3*i]+this.FCellGeoWPs.x,t.y+e[3*i+1]+this.FCellGeoWPs.y,t.z+e[3*i+2]+this.FCellGeoWPs.z)}},{key:"X8R1OR",value:function(t,e,i){t.SetV(e[3*i]+this.FCellGeoWPs.x,e[3*i+1]+this.FCellGeoWPs.y,e[3*i+2]+this.FCellGeoWPs.z)}},{key:"X7N6TB",value:function(t,e,i,r,s,o,n,l){var u,d,c,p,F,y,A,g,C,b,T,v=f-1,L=this.gl;if(r){for(g=(d=1)-1,u=0,this.verticesCounter[3]=0,this.normalsCounter[3]=0,p=1;p<v;p++)1&p&&(this.XyLhOo(this.LatLongs[3][u],d,p,this.tempmc),this.Xt4BV6(this.Vertices[3],this.tempmc,this.verticesCounter,3),u++,this.XyLhOo(this.LatLongs[3][u],g,p-1,this.tempp2),this.Xt4BV6(this.Vertices[3],this.tempp2,this.verticesCounter,3),u++,this.XyLhOo(this.LatLongs[3][u],g,p,this.tempp3),this.Xt4BV6(this.Vertices[3],this.tempp3,this.verticesCounter,3),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[3],this.tempn,this.normalsCounter,3),this.Xt4BV6(this.Normals[3],this.tempn,this.normalsCounter,3),this.Xt4BV6(this.Normals[3],this.tempn,this.normalsCounter,3)),this.Xt4BV6(this.Vertices[3],this.tempmc,this.verticesCounter,3),u++,this.XyLhOo(this.LatLongs[3][u-2],g,p,this.tempp2),this.Xt4BV6(this.Vertices[3],this.tempp2,this.verticesCounter,3),u++,this.XyLhOo(this.LatLongs[3][u],g,p+1,this.tempp3),this.Xt4BV6(this.Vertices[3],this.tempp3,this.verticesCounter,3),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[3],this.tempn,this.normalsCounter,3),this.Xt4BV6(this.Normals[3],this.tempn,this.normalsCounter,3),this.Xt4BV6(this.Normals[3],this.tempn,this.normalsCounter,3)));L.bindBuffer(L.ARRAY_BUFFER,this.vertexBuffer[3]),L.bufferData(L.ARRAY_BUFFER,this.Vertices[3],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normalBuffer[3]),L.bufferData(L.ARRAY_BUFFER,this.Normals[3],L.STATIC_DRAW))}if(l){for(g=(d=1)-1,u=0,this.vertices2Counter[3]=0,this.normals2Counter[3]=0,p=1;p<v;p++)1&p&&(C=p-1,b=2*p,this.XyLhOo(this.LatLongs2[3][u],d,p,this.tempmc),this.Vertices2P[3][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempmc,this.vertices2Counter,3),u++,this.XyLhOo(this.LatLongs2[3][u],g,C,this.tempp2),this.Vertices2P[3][u].SetVecAdd(this.tempp2,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp2,this.vertices2Counter,3),u++,this.X5qVfJ(this.LatLongs2[3][u],3,b-1,this.tempp3),this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3)),this.Vertices2P[3][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempmc,this.vertices2Counter,3),u++,this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[3][u],g,p+this.vidx,this.tempp3),this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3)),this.Vertices2P[3][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempmc,this.vertices2Counter,3),u++,this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,Object.assign(this.tempp2,this.tempp3),this.X5qVfJ(this.LatLongs2[3][u],3,b+1,this.tempp3),this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3)),this.Vertices2P[3][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempmc,this.vertices2Counter,3),u++,this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[3][u],g,p+1,this.tempp3),this.Vertices2P[3][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[3],this.tempp3,this.vertices2Counter,3),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3),this.Xt4BV6(this.Normals2[3],this.tempn,this.normals2Counter,3)));L.bindBuffer(L.ARRAY_BUFFER,this.vertex2Buffer[3]),L.bufferData(L.ARRAY_BUFFER,this.Vertices2[3],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normal2Buffer[3]),L.bufferData(L.ARRAY_BUFFER,this.Normals2[3],L.STATIC_DRAW))}if(i){for(y=(d=f-2)+1,u=0,this.verticesCounter[2]=0,this.normalsCounter[2]=0,p=1;p<v;p++)1&p&&(this.XyLhOo(this.LatLongs[2][u],d,p,this.tempmc),this.Xt4BV6(this.Vertices[2],this.tempmc,this.verticesCounter,2),u++,this.XyLhOo(this.LatLongs[2][u],y,p+1,this.tempp2),this.Xt4BV6(this.Vertices[2],this.tempp2,this.verticesCounter,2),u++,this.XyLhOo(this.LatLongs[2][u],y,p+this.vidx,this.tempp3),this.Xt4BV6(this.Vertices[2],this.tempp3,this.verticesCounter,2),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[2],this.tempn,this.normalsCounter,2),this.Xt4BV6(this.Normals[2],this.tempn,this.normalsCounter,2),this.Xt4BV6(this.Normals[2],this.tempn,this.normalsCounter,2)),this.Xt4BV6(this.Vertices[2],this.tempmc,this.verticesCounter,2),u++,this.Xt4BV6(this.Vertices[2],this.tempp3,this.verticesCounter,2),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs[2][u],y,p-1,this.tempp3),this.Xt4BV6(this.Vertices[2],this.tempp3,this.verticesCounter,2),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[2],this.tempn,this.normalsCounter,2),this.Xt4BV6(this.Normals[2],this.tempn,this.normalsCounter,2),this.Xt4BV6(this.Normals[2],this.tempn,this.normalsCounter,2)));L.bindBuffer(L.ARRAY_BUFFER,this.vertexBuffer[2]),L.bufferData(L.ARRAY_BUFFER,this.Vertices[2],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normalBuffer[2]),L.bufferData(L.ARRAY_BUFFER,this.Normals[2],L.STATIC_DRAW))}if(n){for(y=(d=f-2)+1,u=0,this.vertices2Counter[2]=0,this.normals2Counter[2]=0,p=1;p<v;p++)b=2*p,1&p&&(this.XyLhOo(this.LatLongs2[2][u],d,p,this.tempmc),this.Vertices2P[2][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempmc,this.vertices2Counter,2),u++,this.XyLhOo(this.LatLongs2[2][u],y,p+1,this.tempp2),this.Vertices2P[2][u].SetVecAdd(this.tempp2,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp2,this.vertices2Counter,2),u++,this.X5qVfJ(this.LatLongs2[2][u],2,b+1,this.tempp3),this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2)),this.Vertices2P[2][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempmc,this.vertices2Counter,2),u++,this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[2][u],y,p,this.tempp3),this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2)),this.Vertices2P[2][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempmc,this.vertices2Counter,2),u++,this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,Object.assign(this.tempp2,this.tempp3),this.X5qVfJ(this.LatLongs2[2][u],2,b-1,this.tempp3),this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2)),this.Vertices2P[2][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempmc,this.vertices2Counter,2),u++,this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[2][u],y,p-1,this.tempp3),this.Vertices2P[2][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[2],this.tempp3,this.vertices2Counter,2),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2),this.Xt4BV6(this.Normals2[2],this.tempn,this.normals2Counter,2)));L.bindBuffer(L.ARRAY_BUFFER,this.vertex2Buffer[2]),L.bufferData(L.ARRAY_BUFFER,this.Vertices2[2],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normal2Buffer[2]),L.bufferData(L.ARRAY_BUFFER,this.Normals2[2],L.STATIC_DRAW))}if(t){for(C=(c=1)-1,u=0,this.verticesCounter[0]=0,this.normalsCounter[0]=0,F=1;F<v;F++)1&F&&(this.XyLhOo(this.LatLongs[0][u],F,c,this.tempmc),this.Xt4BV6(this.Vertices[0],this.tempmc,this.verticesCounter,0),u++,this.XyLhOo(this.LatLongs[0][u],F+1,C,this.tempp2),this.Xt4BV6(this.Vertices[0],this.tempp2,this.verticesCounter,0),u++,this.XyLhOo(this.LatLongs[0][u],F,C,this.tempp3),this.Xt4BV6(this.Vertices[0],this.tempp3,this.verticesCounter,0),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[0],this.tempn,this.normalsCounter,0),this.Xt4BV6(this.Normals[0],this.tempn,this.normalsCounter,0),this.Xt4BV6(this.Normals[0],this.tempn,this.normalsCounter,0)),this.Xt4BV6(this.Vertices[0],this.tempmc,this.verticesCounter,0),u++,this.Xt4BV6(this.Vertices[0],this.tempp3,this.verticesCounter,0),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs[0][u],F-1,C,this.tempp3),this.Xt4BV6(this.Vertices[0],this.tempp3,this.verticesCounter,0),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[0],this.tempn,this.normalsCounter,0),this.Xt4BV6(this.Normals[0],this.tempn,this.normalsCounter,0),this.Xt4BV6(this.Normals[0],this.tempn,this.normalsCounter,0)));L.bindBuffer(L.ARRAY_BUFFER,this.vertexBuffer[0]),L.bufferData(L.ARRAY_BUFFER,this.Vertices[0],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normalBuffer[0]),L.bufferData(L.ARRAY_BUFFER,this.Normals[0],L.STATIC_DRAW))}if(s){for(C=(c=1)-1,u=0,this.vertices2Counter[0]=0,this.normals2Counter[0]=0,F=1;F<v;F++)1&F&&(T=2*F,this.XyLhOo(this.LatLongs2[0][u],F,c,this.tempmc),this.Vertices2P[0][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempmc,this.vertices2Counter,0),u++,this.XyLhOo(this.LatLongs2[0][u],F+1,C,this.tempp2),this.Vertices2P[0][u].SetVecAdd(this.tempp2,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp2,this.vertices2Counter,0),u++,this.X5qVfJ(this.LatLongs2[0][u],0,T+1,this.tempp3),this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0)),this.Vertices2P[0][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempmc,this.vertices2Counter,0),u++,this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[0][u],F,C,this.tempp3),this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0)),this.Vertices2P[0][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempmc,this.vertices2Counter,0),u++,this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,Object.assign(this.tempp2,this.tempp3),this.X5qVfJ(this.LatLongs2[0][u],0,T-1,this.tempp3),this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0)),this.Vertices2P[0][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempmc,this.vertices2Counter,0),u++,this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[0][u],F-1,C,this.tempp3),this.Vertices2P[0][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[0],this.tempp3,this.vertices2Counter,0),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0),this.Xt4BV6(this.Normals2[0],this.tempn,this.normals2Counter,0)));L.bindBuffer(L.ARRAY_BUFFER,this.vertex2Buffer[0]),L.bufferData(L.ARRAY_BUFFER,this.Vertices2[0],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normal2Buffer[0]),L.bufferData(L.ARRAY_BUFFER,this.Normals2[0],L.STATIC_DRAW))}if(e){for(A=(c=f-2)+1,u=0,this.verticesCounter[1]=0,this.normalsCounter[1]=0,F=1;F<v;F++)1&F&&(this.XyLhOo(this.LatLongs[1][u],F,c,this.tempmc),this.Xt4BV6(this.Vertices[1],this.tempmc,this.verticesCounter,1),u++,this.XyLhOo(this.LatLongs[1][u],F-1,A,this.tempp2),this.Xt4BV6(this.Vertices[1],this.tempp2,this.verticesCounter,1),u++,this.XyLhOo(this.LatLongs[1][u],F,A,this.tempp3),this.Xt4BV6(this.Vertices[1],this.tempp3,this.verticesCounter,1),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[1],this.tempn,this.normalsCounter,1),this.Xt4BV6(this.Normals[1],this.tempn,this.normalsCounter,1),this.Xt4BV6(this.Normals[1],this.tempn,this.normalsCounter,1)),this.Xt4BV6(this.Vertices[1],this.tempmc,this.verticesCounter,1),u++,this.Xt4BV6(this.Vertices[1],this.tempp3,this.verticesCounter,1),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs[1][u],F+1,A,this.tempp3),this.Xt4BV6(this.Vertices[1],this.tempp3,this.verticesCounter,1),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals[1],this.tempn,this.normalsCounter,1),this.Xt4BV6(this.Normals[1],this.tempn,this.normalsCounter,1),this.Xt4BV6(this.Normals[1],this.tempn,this.normalsCounter,1)));L.bindBuffer(L.ARRAY_BUFFER,this.vertexBuffer[1]),L.bufferData(L.ARRAY_BUFFER,this.Vertices[1],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normalBuffer[1]),L.bufferData(L.ARRAY_BUFFER,this.Normals[1],L.STATIC_DRAW))}if(o){for(A=(c=f-2)+1,u=0,this.vertices2Counter[1]=0,this.normals2Counter[1]=0,F=1;F<v;F++)1&F&&(T=2*F,this.XyLhOo(this.LatLongs2[1][u],F,c,this.tempmc),this.Vertices2P[1][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempmc,this.vertices2Counter,1),u++,this.XyLhOo(this.LatLongs2[1][u],F-1,A,this.tempp2),this.Vertices2P[1][u].SetVecAdd(this.tempp2,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp2,this.vertices2Counter,1),u++,this.X5qVfJ(this.LatLongs2[1][u],1,T-1,this.tempp3),this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1)),this.Vertices2P[1][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempmc,this.vertices2Counter,1),u++,this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[1][u],F,A,this.tempp3),this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1)),this.Vertices2P[1][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempmc,this.vertices2Counter,1),u++,this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,Object.assign(this.tempp2,this.tempp3),this.X5qVfJ(this.LatLongs2[1][u],1,T+1,this.tempp3),this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1)),this.Vertices2P[1][u].SetVecAdd(this.tempmc,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempmc,this.vertices2Counter,1),u++,this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,Object.assign(this.tempp2,this.tempp3),this.XyLhOo(this.LatLongs2[1][u],F+1,A,this.tempp3),this.Vertices2P[1][u].SetVecAdd(this.tempp3,this.FCellGeoWPs),this.Xt4BV6(this.Vertices2[1],this.tempp3,this.vertices2Counter,1),u++,h.z.GLOBE_LIGHT_ONc&&(a.b.GetNormal(this.tempmc,this.tempp2,this.tempp3,this.tempn),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1),this.Xt4BV6(this.Normals2[1],this.tempn,this.normals2Counter,1)));L.bindBuffer(L.ARRAY_BUFFER,this.vertex2Buffer[1]),L.bufferData(L.ARRAY_BUFFER,this.Vertices2[1],L.STATIC_DRAW),h.z.GLOBE_LIGHT_ONc&&(L.bindBuffer(L.ARRAY_BUFFER,this.normal2Buffer[1]),L.bufferData(L.ARRAY_BUFFER,this.Normals2[1],L.STATIC_DRAW))}this.verticesCounter.fill(0),this.vertices2Counter.fill(0),this.normalsCounter.fill(0),this.normals2Counter.fill(0)}},{key:"XVhhnP",value:function(){var t,e;for(this.FMinH=65e3,this.FMaxH=0,t=f;t--;)for(e=f;e--;)this.FMesh[t][e]>this.FMaxH?this.FMaxH=this.FMesh[t][e]:this.FMesh[t][e]<this.FMinH&&(this.FMinH=this.FMesh[t][e]);this.FMinH*=h.z.GLOBE_Z_ABART,this.FMaxH*=h.z.GLOBE_Z_ABART}},{key:"XyLhOo",value:function(t,e,i,r){a.b.GeoTo3D(t.x,t.y,h.z.GLOBE_RADIUS+this.FMesh[e][i]*h.z.GLOBE_Z_ABART,r),r.VecSub(this.FCellGeoWPs)}},{key:"X1d6Vm",value:function(){var t,e,i,r,s,o,n,a,h,l,u=f-1;for(t=0,e=1;e<u;e++)if(1&e)for(i=1;i<u;i++)1&i&&(r=this.XRwj0x(e,i),s=e-1,o=i+1,n=i-1,a=e+1,1!==e&&(this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.XRwj0x(s,n),t++,this.IntLatLongs[t]=this.XRwj0x(s,i),t++,this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.IntLatLongs[t-2],t++,this.IntLatLongs[t]=this.XRwj0x(s,o),t++),i!==f-2&&(this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.XRwj0x(s,o),t++,this.IntLatLongs[t]=this.XRwj0x(e,o),t++,this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.IntLatLongs[t-2],t++,this.IntLatLongs[t]=this.XRwj0x(a,o),t++),e!==f-2&&(this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.XRwj0x(a,o),t++,this.IntLatLongs[t]=this.XRwj0x(a,i),t++,this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.IntLatLongs[t-2],t++,this.IntLatLongs[t]=this.XRwj0x(a,n),t++),1!==i&&(this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.XRwj0x(a,n),t++,this.IntLatLongs[t]=this.XRwj0x(e,n),t++,this.IntLatLongs[t]=r,t++,this.IntLatLongs[t]=this.IntLatLongs[t-2],t++,this.IntLatLongs[t]=this.XRwj0x(s,n),t++));for(t=0,i=1;i<u;i++)1&i&&(r=this.XRwj0x(1,i),this.LatLongs[3][t]=r,t++,this.LatLongs[3][t]=this.XRwj0x(0,i-1),t++,this.LatLongs[3][t]=this.XRwj0x(0,i),t++,this.LatLongs[3][t]=r,t++,this.LatLongs[3][t]=this.LatLongs[3][t-2],t++,this.LatLongs[3][t]=this.XRwj0x(0,i+1),t++);for(t=0,i=1;i<u;i++)1&i&&(r=this.XRwj0x(1,i),this.LatLongs2[3][t]=r,t++,this.LatLongs2[3][t]=this.XRwj0x(0,i-1),t++,this.LatLongs2[3][t]=this.XRwj0x(0,i-.5),t++,this.LatLongs2[3][t]=r,t++,this.LatLongs2[3][t]=this.LatLongs2[3][t-2],t++,this.LatLongs2[3][t]=this.XRwj0x(0,i),t++,this.LatLongs2[3][t]=r,t++,this.LatLongs2[3][t]=this.LatLongs2[3][t-2],t++,this.LatLongs2[3][t]=this.XRwj0x(0,i+.5),t++,this.LatLongs2[3][t]=r,t++,this.LatLongs2[3][t]=this.LatLongs2[3][t-2],t++,this.LatLongs2[3][t]=this.XRwj0x(0,i+1),t++);for(a=(h=f-2)+1,t=0,i=1;i<u;i++)1&i&&(r=this.XRwj0x(h,i),this.LatLongs[2][t]=r,t++,this.LatLongs[2][t]=this.XRwj0x(a,i+1),t++,this.LatLongs[2][t]=this.XRwj0x(a,i),t++,this.LatLongs[2][t]=r,t++,this.LatLongs[2][t]=this.LatLongs[2][t-2],t++,this.LatLongs[2][t]=this.XRwj0x(a,i-1),t++);for(a=(h=f-2)+1,t=0,i=1;i<u;i++)1&i&&(r=this.XRwj0x(h,i),this.LatLongs2[2][t]=r,t++,this.LatLongs2[2][t]=this.XRwj0x(a,i+1),t++,this.LatLongs2[2][t]=this.XRwj0x(a,i+.5),t++,this.LatLongs2[2][t]=r,t++,this.LatLongs2[2][t]=this.LatLongs2[2][t-2],t++,this.LatLongs2[2][t]=this.XRwj0x(a,i),t++,this.LatLongs2[2][t]=r,t++,this.LatLongs2[2][t]=this.LatLongs2[2][t-2],t++,this.LatLongs2[2][t]=this.XRwj0x(a,i-.5),t++,this.LatLongs2[2][t]=r,t++,this.LatLongs2[2][t]=this.LatLongs2[2][t-2],t++,this.LatLongs2[2][t]=this.XRwj0x(a,i-1),t++);for(n=(l=1)-1,t=0,e=1;e<u;e++)1&e&&(r=this.XRwj0x(e,l),this.LatLongs[0][t]=r,t++,this.LatLongs[0][t]=this.XRwj0x(e+1,n),t++,this.LatLongs[0][t]=this.XRwj0x(e,n),t++,this.LatLongs[0][t]=r,t++,this.LatLongs[0][t]=this.LatLongs[0][t-2],t++,this.LatLongs[0][t]=this.XRwj0x(e-1,n),t++);for(n=(l=1)-1,t=0,e=1;e<u;e++)1&e&&(r=this.XRwj0x(e,l),this.LatLongs2[0][t]=r,t++,this.LatLongs2[0][t]=this.XRwj0x(e+1,n),t++,this.LatLongs2[0][t]=this.XRwj0x(e+.5,n),t++,this.LatLongs2[0][t]=r,t++,this.LatLongs2[0][t]=this.LatLongs2[0][t-2],t++,this.LatLongs2[0][t]=this.XRwj0x(e,n),t++,this.LatLongs2[0][t]=r,t++,this.LatLongs2[0][t]=this.LatLongs2[0][t-2],t++,this.LatLongs2[0][t]=this.XRwj0x(e-.5,n),t++,this.LatLongs2[0][t]=r,t++,this.LatLongs2[0][t]=this.LatLongs2[0][t-2],t++,this.LatLongs2[0][t]=this.XRwj0x(e-1,n),t++);for(o=(l=f-2)+1,t=0,e=1;e<u;e++)1&e&&(r=this.XRwj0x(e,l),this.LatLongs[1][t]=r,t++,this.LatLongs[1][t]=this.XRwj0x(e-1,o),t++,this.LatLongs[1][t]=this.XRwj0x(e,o),t++,this.LatLongs[1][t]=r,t++,this.LatLongs[1][t]=this.LatLongs[1][t-2],t++,this.LatLongs[1][t]=this.XRwj0x(e+1,o),t++);for(o=(l=f-2)+1,t=0,e=1;e<u;e++)1&e&&(r=this.XRwj0x(e,l),this.LatLongs2[1][t]=r,t++,this.LatLongs2[1][t]=this.XRwj0x(e-1,o),t++,this.LatLongs2[1][t]=this.XRwj0x(e-.5,o),t++,this.LatLongs2[1][t]=r,t++,this.LatLongs2[1][t]=this.LatLongs2[1][t-2],t++,this.LatLongs2[1][t]=this.XRwj0x(e,o),t++,this.LatLongs2[1][t]=r,t++,this.LatLongs2[1][t]=this.LatLongs2[1][t-2],t++,this.LatLongs2[1][t]=this.XRwj0x(e+.5,o),t++,this.LatLongs2[1][t]=r,t++,this.LatLongs2[1][t]=this.LatLongs2[1][t-2],t++,this.LatLongs2[1][t]=this.XRwj0x(e+1,o),t++)}},{key:"X31BlD",value:function(t){var e,i,r,s,o,n,a,h,l=this.gl;a=(e=1)-1;var u=f-1;for(t.TexCoordsCounter[3]=0,r=1;r<u;r++)1&r&&(this.XH2Ek0(t,e,r,this.temptc),this.XA679E(t.TexCoords[3],this.temptc,t.TexCoordsCounter,3),this.XA679E(t.TexCoords[3],this.XH2Ek0(t,a,r-1,this.temptc2),t.TexCoordsCounter,3),this.XA679E(t.TexCoords[3],this.XH2Ek0(t,a,r,this.temptc2),t.TexCoordsCounter,3),this.XA679E(t.TexCoords[3],this.temptc,t.TexCoordsCounter,3),this.XA679E(t.TexCoords[3],this.XH2Ek0(t,a,r,this.temptc2),t.TexCoordsCounter,3),this.XA679E(t.TexCoords[3],this.XH2Ek0(t,a,r+1,this.temptc2),t.TexCoordsCounter,3));for(t.TexCoords2Counter[3]=0,r=1;r<u;r++)1&r&&(n=r+.5,h=r-.5,this.XH2Ek0(t,e,r,this.temptc),this.XA679E(t.TexCoords2[3],this.temptc,t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,r-1,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,h,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.temptc,t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,h,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,r,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.temptc,t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,r,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,n,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.temptc,t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,n,this.temptc2),t.TexCoords2Counter,3),this.XA679E(t.TexCoords2[3],this.XH2Ek0(t,a,r+1,this.temptc2),t.TexCoords2Counter,3));for(o=(e=f-2)+1,t.TexCoordsCounter[2]=0,r=1;r<u;r++)1&r&&(this.XH2Ek0(t,e,r,this.temptc),this.XA679E(t.TexCoords[2],this.temptc,t.TexCoordsCounter,2),this.XA679E(t.TexCoords[2],this.XH2Ek0(t,o,r+1,this.temptc2),t.TexCoordsCounter,2),this.XA679E(t.TexCoords[2],this.XH2Ek0(t,o,r,this.temptc2),t.TexCoordsCounter,2),this.XA679E(t.TexCoords[2],this.temptc,t.TexCoordsCounter,2),this.XA679E(t.TexCoords[2],this.XH2Ek0(t,o,r,this.temptc2),t.TexCoordsCounter,2),this.XA679E(t.TexCoords[2],this.XH2Ek0(t,o,r-1,this.temptc2),t.TexCoordsCounter,2));for(t.TexCoords2Counter[2]=0,r=1;r<u;r++)1&r&&(n=r+.5,h=r-.5,this.XH2Ek0(t,e,r,this.temptc),this.XA679E(t.TexCoords2[2],this.temptc,t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,r+1,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,n,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.temptc,t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,n,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,r,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.temptc,t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,r,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,h,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.temptc,t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,h,this.temptc2),t.TexCoords2Counter,2),this.XA679E(t.TexCoords2[2],this.XH2Ek0(t,o,r-1,this.temptc2),t.TexCoords2Counter,2));for(h=(i=1)-1,t.TexCoordsCounter[0]=0,s=1;s<u;s++)1&s&&(this.XH2Ek0(t,s,i,this.temptc),this.XA679E(t.TexCoords[0],this.temptc,t.TexCoordsCounter,0),this.XA679E(t.TexCoords[0],this.XH2Ek0(t,s+1,h,this.temptc2),t.TexCoordsCounter,0),this.XA679E(t.TexCoords[0],this.XH2Ek0(t,s,h,this.temptc2),t.TexCoordsCounter,0),this.XA679E(t.TexCoords[0],this.temptc,t.TexCoordsCounter,0),this.XA679E(t.TexCoords[0],this.XH2Ek0(t,s,h,this.temptc2),t.TexCoordsCounter,0),this.XA679E(t.TexCoords[0],this.XH2Ek0(t,s-1,h,this.temptc2),t.TexCoordsCounter,0));for(t.TexCoords2Counter[0]=0,s=1;s<u;s++)1&s&&(o=s+.5,a=s-.5,this.XH2Ek0(t,s,i,this.temptc),this.XA679E(t.TexCoords2[0],this.temptc,t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,s+1,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,o,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.temptc,t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,o,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,s,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.temptc,t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,s,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,a,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.temptc,t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,a,h,this.temptc2),t.TexCoords2Counter,0),this.XA679E(t.TexCoords2[0],this.XH2Ek0(t,s-1,h,this.temptc2),t.TexCoords2Counter,0));for(n=(i=f-2)+1,t.TexCoordsCounter[1]=0,s=1;s<u;s++)1&s&&(this.XH2Ek0(t,s,i,this.temptc),this.XA679E(t.TexCoords[1],this.temptc,t.TexCoordsCounter,1),this.XA679E(t.TexCoords[1],this.XH2Ek0(t,s-1,n,this.temptc2),t.TexCoordsCounter,1),this.XA679E(t.TexCoords[1],this.XH2Ek0(t,s,n,this.temptc2),t.TexCoordsCounter,1),this.XA679E(t.TexCoords[1],this.temptc,t.TexCoordsCounter,1),this.XA679E(t.TexCoords[1],this.XH2Ek0(t,s,n,this.temptc2),t.TexCoordsCounter,1),this.XA679E(t.TexCoords[1],this.XH2Ek0(t,s+1,n,this.temptc2),t.TexCoordsCounter,1));for(t.TexCoords2Counter[1]=0,s=1;s<u;s++)1&s&&(o=s+.5,a=s-.5,this.XH2Ek0(t,s,i,this.temptc),this.XA679E(t.TexCoords2[1],this.temptc,t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,s-1,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,a,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.temptc,t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,a,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,s,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.temptc,t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,s,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,o,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.temptc,t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,o,n,this.temptc2),t.TexCoords2Counter,1),this.XA679E(t.TexCoords2[1],this.XH2Ek0(t,s+1,n,this.temptc2),t.TexCoords2Counter,1));t.TexCoordsCounter.fill(0),t.TexCoords2Counter.fill(0),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord1Buffer[3]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords[3],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord1Buffer[2]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords[2],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord1Buffer[0]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords[0],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord1Buffer[1]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords[1],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord2Buffer[3]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords2[3],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord2Buffer[2]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords2[2],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord2Buffer[0]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords2[0],l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.texcoord2Buffer[1]),l.bufferData(l.ARRAY_BUFFER,t.TexCoords2[1],l.STATIC_DRAW)}},{key:"X2pCsS",value:function(t){var e,i,r,s,o,n,a,h,l=(f-1)/2;switch(t){case 0:e=0,i=0;break;case 1:e=0,i=l;break;case 2:e=l,i=l;break;default:e=l,i=0}o=!0,n=e;var u=this.FChilds[t],d=u.FMesh;for(r=0;r<f;r++){for(a=i,s=!0,h=0;h<f;h++)d[r][h]=s?o?this.FMesh[n][a]:(this.FMesh[n][a]+this.FMesh[n+1][a])/2:o?(this.FMesh[n][a]+this.FMesh[n][a+1])/2:(this.FMesh[n][a]+this.FMesh[n+1][a+1])/2,(s=!s)&&a++;(o=!o)&&n++}u.Xztgwz(!0,!0,!0,!0),u.FMeshParent=this.FMeshParent,u.XzR7Y1(),u.XmYBdX(),u.X7N6TB(!0,!0,!0,!0,!0,!0,!0,!0),u.Xqaw8R(),this.FGlobe.isCheckedMeshFunctions||(this.FGlobe.isCheckedMeshFunctions=!0,this.XjDnkq(u.FMeshParent),this.XWLsa6(u.FMeshParent))}},{key:"XjDnkq",value:function(t){return h.z.GLOBE_MAX_TILTANGLE===parseInt(atob(this.FGlobe.globeCanvasText.value1))?t.Fliving=!1:t.FParentTextID=0}},{key:"XWLsa6",value:function(t){return this.FGlobe.globeCanvasText.text3Array[0]===(this.FGlobe.globeCanvasText.text3Array[1]+this.FGlobe.globeCanvasText.text3Array[2])/2&&this.FGlobe.globeCanvasText.text3.length===this.FGlobe.globeArray3.length&&this.FGlobe.globeCanvasText.text3.charCodeAt(1)===this.FGlobe.globeArray3[1]&&this.FGlobe.globeCanvasText.text3.charCodeAt(2)===this.FGlobe.globeArray3[2]?t.Fliving=!1:t.FParentTextID=0}},{key:"XHFJCE",value:function(){var t,e,i,r,s,o,n,a,h,l,u;r=!1,s=!1,o=!1,n=!1,a=!1,h=!1,l=!1,u=!1;var d=f-1,c=d/2,p=c+1;if(this.FMeshCheck[0]){if((t=this.XINTgz())&&t.FMeshParent===t){for(e=f;e--;)this.FMesh[e][0]=t.FMesh[e][d];if(r=!0,t.FChilds[1]){for(e=f;e--;)this.FMB2[0][e]=t.FChilds[1].FMesh[e][d],this.FMB2[0][e+d]=t.FChilds[2].FMesh[e][d];a=!0}}if((0===this.FChildOrder||3===this.FChildOrder)&&this.FParent&&(t=this.FParent.XINTgz())){if(t.FMeshParent!==t){if(0===this.FChildOrder)for(e=p;e--;)t.FMesh[e][d]=this.FMesh[2*e][0];else if(3===this.FChildOrder)for(e=p;e--;)t.FMesh[e+c][d]=this.FMesh[2*e][0];t.X7N6TB(!1,!0,!1,!1,!1,!1,!1,!1)}if(0===this.FChildOrder)for(e=f;e--;)t.FMB2[1][e]=this.FMesh[e][0];else if(3===this.FChildOrder)for(e=f;e--;)t.FMB2[1][e+d]=this.FMesh[e][0];t.X7N6TB(!1,!1,!1,!1,!1,!0,!1,!1)}}if(this.FMeshCheck[1]){if((t=this.XuUZSp())&&t.FMeshParent===t){for(e=f;e--;)this.FMesh[e][d]=t.FMesh[e][0];if(s=!0,t.FChilds[0]){for(e=f;e--;)this.FMB2[1][e]=t.FChilds[0].FMesh[e][0],this.FMB2[1][e+d]=t.FChilds[3].FMesh[e][0];h=!0}}if((1===this.FChildOrder||2===this.FChildOrder)&&this.FParent&&(t=this.FParent.XuUZSp())){if(t.FMeshParent!==t){if(1===this.FChildOrder)for(e=p;e--;)t.FMesh[e][0]=this.FMesh[2*e][d];else if(2===this.FChildOrder)for(e=p;e--;)t.FMesh[e+c][0]=this.FMesh[2*e][d];t.X7N6TB(!0,!1,!1,!1,!1,!1,!1,!1)}if(1===this.FChildOrder)for(e=f;e--;)t.FMB2[0][e]=this.FMesh[e][d];else if(2===this.FChildOrder)for(e=f;e--;)t.FMB2[0][e+d]=this.FMesh[e][d];t.X7N6TB(!1,!1,!1,!1,!0,!1,!1,!1)}}if(this.FMeshCheck[2]){if((t=this.X6ttta())&&t.FMeshParent===t){for(i=f;i--;)this.FMesh[d][i]=t.FMesh[0][i];if(o=!0,t.FChilds[0]){for(i=f;i--;)this.FMB2[2][i]=t.FChilds[0].FMesh[0][i],this.FMB2[2][i+d]=t.FChilds[1].FMesh[0][i];l=!0}}if((2===this.FChildOrder||3===this.FChildOrder)&&this.FParent&&(t=this.FParent.X6ttta())){if(t.FMeshParent!==t){if(3===this.FChildOrder)for(i=p;i--;)t.FMesh[0][i]=this.FMesh[d][2*i];else if(2===this.FChildOrder)for(i=p;i--;)t.FMesh[0][i+c]=this.FMesh[d][2*i];t.X7N6TB(!1,!1,!1,!0,!1,!1,!1,!1)}if(3===this.FChildOrder)for(i=f;i--;)t.FMB2[3][i]=this.FMesh[d][i];else if(2===this.FChildOrder)for(i=f;i--;)t.FMB2[3][i+d]=this.FMesh[d][i];t.X7N6TB(!1,!1,!1,!1,!1,!1,!1,!0)}}if(this.FMeshCheck[3]){if((t=this.XF3wa7())&&t.FMeshParent===t){for(i=f;i--;)this.FMesh[0][i]=t.FMesh[d][i];if(n=!0,t.FChilds[3]){for(i=f;i--;)this.FMB2[3][i]=t.FChilds[3].FMesh[d][i],this.FMB2[3][i+d]=t.FChilds[2].FMesh[d][i];u=!0}}if((0===this.FChildOrder||1===this.FChildOrder)&&this.FParent&&(t=this.FParent.XF3wa7())){if(t.FMeshParent!==t){if(0===this.FChildOrder)for(i=p;i--;)t.FMesh[d][i]=this.FMesh[0][2*i];else if(1===this.FChildOrder)for(i=p;i--;)t.FMesh[d][i+c]=this.FMesh[0][2*i];t.X7N6TB(!1,!1,!0,!1,!1,!1,!1,!1)}if(0===this.FChildOrder)for(i=f;i--;)t.FMB2[2][i]=this.FMesh[0][i];else if(1===this.FChildOrder)for(i=f;i--;)t.FMB2[2][i+d]=this.FMesh[0][i];t.X7N6TB(!1,!1,!1,!1,!1,!1,!0,!1)}}this.X7N6TB(r,s,o,n,a,h,l,u)}},{key:"Draw",value:function(t,e){this.FCellGeoDPs.SetVecSub(e,this.FCellGeoWPs),this.gl.uniform3fv(this.FGlobe.translationLoc,[this.FCellGeoDPs.x,this.FCellGeoDPs.y,this.FCellGeoDPs.z]),this.FGlobe.wireFrameMode?this.DrawWireFrame():0===this.FGlobe.FONRasterCount||this.isPole?this.DrawGlobeWhiteColor():this.DrawGlobe(),this.DrawRasterize()}},{key:"DrawGlobe",value:function(){for(var t,e,i,r=this.FGlobe,s=this.gl,o=this.FTextures.length,n=0;n<o;n++)if(-1!==this.FTextures[n].FParentTextID&&r.FRasters[n]._FActive)for(s.uniform1f(r.opacityLoc,r.FRasters[n].opacity),this.FTextures[n].FParentTextID?s.bindTexture(s.TEXTURE_2D,this.FTextures[n].FParentTextID):s.bindTexture(s.TEXTURE_2D,r.FGlobText),h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.IntNormalBuffer),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.FTextures[n].InttexcoordBuffer),s.vertexAttribPointer(r.texCoordLoc,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.IntVertexBuffer),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.IntVertexCount),t=0;t<4;t++){switch(e=!1,t){case 0:(i=this.XINTgz())&&i.FVisible&&(e=i.FChilds[1]&&(i.FChilds[1].FVisible||i.FChilds[2].FVisible));break;case 1:(i=this.XuUZSp())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[3].FVisible));break;case 2:(i=this.X6ttta())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[1].FVisible));break;case 3:(i=this.XF3wa7())&&i.FVisible&&(e=i.FChilds[2]&&(i.FChilds[2].FVisible||i.FChilds[3].FVisible))}e?(h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.normal2Buffer[t]),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.FTextures[n].texcoord2Buffer[t]),s.vertexAttribPointer(r.texCoordLoc,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.vertex2Buffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.VertexCount2)):(h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.normalBuffer[t]),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.FTextures[n].texcoord1Buffer[t]),s.vertexAttribPointer(r.texCoordLoc,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.VertexCount))}}},{key:"DrawWireFrame",value:function(){var t,e,i,r=this.FGlobe,s=this.gl;for(s.disableVertexAttribArray(r.texCoordLoc),s.uniform1f(r.opacityLoc,1),s.bindTexture(s.TEXTURE_2D,r.whitetex),h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.IntNormalBuffer),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.IntVertexBuffer),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.LINES,0,this.IntVertexCount),t=0;t<4;t++){switch(e=!1,t){case 0:(i=this.XINTgz())&&i.FVisible&&(e=i.FChilds[1]&&(i.FChilds[1].FVisible||i.FChilds[2].FVisible));break;case 1:(i=this.XuUZSp())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[3].FVisible));break;case 2:(i=this.X6ttta())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[1].FVisible));break;case 3:(i=this.XF3wa7())&&i.FVisible&&(e=i.FChilds[2]&&(i.FChilds[2].FVisible||i.FChilds[3].FVisible))}e?(h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.normal2Buffer[t]),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.vertex2Buffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.LINES,0,this.VertexCount2)):(h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.normalBuffer[t]),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.LINES,0,this.VertexCount))}s.enableVertexAttribArray(r.texCoordLoc)}},{key:"DrawGlobeWhiteColor",value:function(){var t,e,i,r=this.FGlobe,s=this.gl;for(s.disableVertexAttribArray(r.texCoordLoc),s.uniform1f(r.opacityLoc,1),s.bindTexture(s.TEXTURE_2D,r.whitetex),h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.IntNormalBuffer),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.IntVertexBuffer),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.IntVertexCount),t=0;t<4;t++){switch(e=!1,t){case 0:(i=this.XINTgz())&&i.FVisible&&(e=i.FChilds[1]&&(i.FChilds[1].FVisible||i.FChilds[2].FVisible));break;case 1:(i=this.XuUZSp())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[3].FVisible));break;case 2:(i=this.X6ttta())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[1].FVisible));break;case 3:(i=this.XF3wa7())&&i.FVisible&&(e=i.FChilds[2]&&(i.FChilds[2].FVisible||i.FChilds[3].FVisible))}e?(h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.normal2Buffer[t]),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.vertex2Buffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.VertexCount2)):(h.z.GLOBE_LIGHT_ONc&&(s.bindBuffer(s.ARRAY_BUFFER,this.normalBuffer[t]),s.vertexAttribPointer(r.normalPos,3,s.FLOAT,!1,0,0)),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.VertexCount))}s.enableVertexAttribArray(r.texCoordLoc)}},{key:"DrawRasterize",value:function(){var t,e,i,r=this.FGlobe,s=this.gl;if(this.VectorRasterize.FParentTextID){for(h.z.GLOBE_LIGHT_ONc&&r.SetSunMoonEnable(!1,!1),s.bindTexture(s.TEXTURE_2D,this.VectorRasterize.FParentTextID),s.bindBuffer(s.ARRAY_BUFFER,this.VectorRasterize.InttexcoordBuffer),s.vertexAttribPointer(r.texCoordLoc,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.IntVertexBuffer),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.IntVertexCount),t=0;t<4;t++){switch(e=!1,t){case 0:(i=this.XINTgz())&&i.FVisible&&(e=i.FChilds[1]&&(i.FChilds[1].FVisible||i.FChilds[2].FVisible));break;case 1:(i=this.XuUZSp())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[3].FVisible));break;case 2:(i=this.X6ttta())&&i.FVisible&&(e=i.FChilds[0]&&(i.FChilds[0].FVisible||i.FChilds[1].FVisible));break;case 3:(i=this.XF3wa7())&&i.FVisible&&(e=i.FChilds[2]&&(i.FChilds[2].FVisible||i.FChilds[3].FVisible))}e?(s.bindBuffer(s.ARRAY_BUFFER,this.VectorRasterize.texcoord2Buffer[t]),s.vertexAttribPointer(r.texCoordLoc,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.vertex2Buffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.VertexCount2)):(s.bindBuffer(s.ARRAY_BUFFER,this.VectorRasterize.texcoord1Buffer[t]),s.vertexAttribPointer(r.texCoordLoc,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer[t]),s.vertexAttribPointer(r.vertexPos,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,this.VertexCount))}h.z.GLOBE_LIGHT_ONc&&r.SetSunMoonEnable(h.z.GLOBE_SUN_LIGHT_ON,h.z.GLOBE_MOON_LIGHT_ON)}}},{key:"DrawOverlays",value:function(t,e){var i,r,s,o=this.FGlobe,n=this.gl;for(this.FCellGeoDPs.SetVecSub(t,this.FCellGeoWPs),this.gl.uniform3fv(o.translationLoc,[this.FCellGeoDPs.x,this.FCellGeoDPs.y,this.FCellGeoDPs.z]),h.z.GLOBE_LIGHT_ONc&&(n.bindBuffer(n.ARRAY_BUFFER,this.IntNormalBuffer),n.vertexAttribPointer(o.normalPos,3,n.FLOAT,!1,0,0)),n.bindBuffer(n.ARRAY_BUFFER,this.FCellRasterOverlays[e].OInttexcoordBuffer),n.vertexAttribPointer(o.texCoordLoc,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.IntVertexBuffer),n.vertexAttribPointer(o.vertexPos,3,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,this.IntVertexCount),i=0;i<4;i++){switch(r=!1,i){case 0:(s=this.XINTgz())&&s.FVisible&&(r=s.FChilds[1]&&(s.FChilds[1].FVisible||s.FChilds[2].FVisible));break;case 1:(s=this.XuUZSp())&&s.FVisible&&(r=s.FChilds[0]&&(s.FChilds[0].FVisible||s.FChilds[3].FVisible));break;case 2:(s=this.X6ttta())&&s.FVisible&&(r=s.FChilds[0]&&(s.FChilds[0].FVisible||s.FChilds[1].FVisible));break;case 3:(s=this.XF3wa7())&&s.FVisible&&(r=s.FChilds[2]&&(s.FChilds[2].FVisible||s.FChilds[3].FVisible))}r?(h.z.GLOBE_LIGHT_ONc&&(n.bindBuffer(n.ARRAY_BUFFER,this.normal2Buffer[i]),n.vertexAttribPointer(o.normalPos,3,n.FLOAT,!1,0,0)),n.bindBuffer(n.ARRAY_BUFFER,this.FCellRasterOverlays[e].Otexcoord2Buffer[i]),n.vertexAttribPointer(o.texCoordLoc,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.vertex2Buffer[i]),n.vertexAttribPointer(o.vertexPos,3,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,this.VertexCount2)):(h.z.GLOBE_LIGHT_ONc&&(n.bindBuffer(n.ARRAY_BUFFER,this.normalBuffer[i]),n.vertexAttribPointer(o.normalPos,3,n.FLOAT,!1,0,0)),n.bindBuffer(n.ARRAY_BUFFER,this.FCellRasterOverlays[e].Otexcoord1Buffer[i]),n.vertexAttribPointer(o.texCoordLoc,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer[i]),n.vertexAttribPointer(o.vertexPos,3,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,this.VertexCount))}}},{key:"XRwj0x",value:function(t,e){return new a.u(this.FLLLonRad+e*this.FMeshDeltaRadW,this.FLLLatRad+t*this.FMeshDeltaRadH)}},{key:"XoQrt9",value:function(t,e,i){i.SetV(1,1,1)}},{key:"XH2Ek0",value:function(t,e,i,r){if(t.FParentTextID){var s=t.FParenttwd/(f-1);r.SetV(t.FParenttcx+s*i,t.FParenttcy+s*e)}else{var o=(this.FLLLonRad+Math.PI+i*this.FMeshDeltaRadW)/(2*Math.PI),n=a.b._90to0(this.FLLLatRad+e*this.FMeshDeltaRadH)/Math.PI;r.SetV(o,n)}return r}},{key:"Xp1RZJ",value:function(t){var e,i,r,s,o,n;t.IntTexCoordsCounter[0]=0;var a=f-1;for(e=1;e<a;e++)if(1&e)for(i=1;i<a;i++)1&i&&(r=e+1,s=i+1,o=e-1,n=i-1,this.XH2Ek0(t,e,i,this.temptc),1!==e&&(this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,o,n,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,o,i,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,o,i,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,o,s,this.temptc2),t.IntTexCoordsCounter,0)),3!==i&&(this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,o,s,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,e,s,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,e,s,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,r,s,this.temptc2),t.IntTexCoordsCounter,0)),3!==e&&(this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,r,s,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,r,i,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,r,i,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,r,n,this.temptc2),t.IntTexCoordsCounter,0)),1!==i&&(this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,r,n,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,e,n,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.temptc,t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,e,n,this.temptc2),t.IntTexCoordsCounter,0),this.XA679E(t.IntTexCoords,this.XH2Ek0(t,o,n,this.temptc2),t.IntTexCoordsCounter,0)));t.IntTexCoordsCounter[0]=0,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.InttexcoordBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,t.IntTexCoords,this.gl.STATIC_DRAW)}},{key:"X7dSH1",value:function(t){return!(this.FLLLatRad>t.UR.x)&&(!(t.LL.x>this.FURLatRad)&&(!(this.FLLLonRad>t.UR.y)&&!(t.LL.y>this.FURLonRad)))}},{key:"Intersect",value:function(t,e){var i,r,s,o;return i=this.XBOsbO(t),r=this.XBOsbO(e),!(!i||!r)||(!!(i&&!r||r&&!i)||(o=a.b.Orientation(t.x,t.y,e.x,e.y,this.FLLLonRad,this.FLLLatRad),(s=a.b.Orientation(t.x,t.y,e.x,e.y,this.FLLLonRad+this.FRadyanW,this.FLLLatRad))!==o||(o=s,(s=a.b.Orientation(t.x,t.y,e.x,e.y,this.FLLLonRad+this.FRadyanW,this.FLLLatRad+this.FRadyanH))!==o||(o=s,(s=a.b.Orientation(t.x,t.y,e.x,e.y,this.FLLLonRad,this.FLLLatRad+this.FRadyanH))!==o))))}},{key:"XCvN4h",value:function(t){var e=(t.x-this.FLLLonRad)/this.FMeshDeltaRadW,i=(t.y-this.FLLLatRad)/this.FMeshDeltaRadH,r=parseInt(e),s=parseInt(i);r<0?r=0:r>f-2&&(r=f-2),s<0?s=0:s>f-2&&(s=f-2);var o=i-parseInt(i),n=e-parseInt(e),a=s+1,l=r+1,u=1-n,d=1-o;return(this.FMesh[s][r]*u*d+this.FMesh[a][r]*u*o+this.FMesh[a][l]*o*n+this.FMesh[s][l]*d*n)*h.z.GLOBE_Z_ABART}},{key:"X3SOlw",value:function(t,e){var i=(t-this.FLLLonDeg)/this.FMeshDeltaDegW,r=(e-this.FLLLatDeg)/this.FMeshDeltaDegH,s=parseInt(i),o=parseInt(r);s<0?s=0:s>f-2&&(s=f-2),o<0?o=0:o>f-2&&(o=f-2);var n=r-parseInt(r),a=i-parseInt(i),l=o+1,u=s+1,d=1-a,c=1-n;return(this.FMesh[o][s]*d*c+this.FMesh[l][s]*d*n+this.FMesh[l][u]*n*a+this.FMesh[o][u]*c*a)*h.z.GLOBE_Z_ABART}},{key:"XlGTf1",value:function(t,e){var i;for(this.FCellc.SetVecSub(t,this.FRealCenter),this.FCellDist=this.FCellc.Dist3D(e),i=8;i--;)this.FBox[i].SetVecSub(t,this.FRealBox[i])}},{key:"XKAb3U",value:function(t,e,i,r,s){var o,n,a,h,l=0;s.isValid=!1,t.mind=1e30,t.fd=!1,Object.assign(t.orj,i),t.dir2.SetV(r.x-i.x,r.y-i.y,r.z-i.z),t.orj4.VectorMake(i),t.dir24.VectorMake(t.dir2);var u=this.FCellGeoWP.x-e.x,d=this.FCellGeoWP.y-e.y,c=this.FCellGeoWP.z-e.z,f=0,p=this.IntVertices;do{t.p1.x=p[f]+u,f++,t.p1.y=p[f]+d,f++,t.p1.z=p[f]+c,f++,t.p2.x=p[f]+u,f++,t.p2.y=p[f]+d,f++,t.p2.z=p[f]+c,f++,t.p3.x=p[f]+u,f++,t.p3.y=p[f]+d,f++,t.p3.z=p[f]+c,f++,t.Ray()&&(t.rv1.SetP(this.IntLatLongs[l]),t.rv2.SetP(this.IntLatLongs[l+1]),t.rv3.SetP(this.IntLatLongs[l+2])),l+=3}while(l<this.IntVertexCount);for(f=0,a=4;a--;){switch(o=!1,a){case 0:(n=this.XINTgz())&&n.FVisible&&(o=n.FChilds[1]&&(n.FChilds[1].FVisible||n.FChilds[2].FVisible));break;case 1:(n=this.XuUZSp())&&n.FVisible&&(o=n.FChilds[0]&&(n.FChilds[0].FVisible||n.FChilds[3].FVisible));break;case 2:(n=this.X6ttta())&&n.FVisible&&(o=n.FChilds[0]&&(n.FChilds[0].FVisible||n.FChilds[1].FVisible));break;case 3:(n=this.XF3wa7())&&n.FVisible&&(o=n.FChilds[2]&&(n.FChilds[2].FVisible||n.FChilds[3].FVisible))}var F=this.Vertices2;if(o){l=0,h=0;do{t.p1.x=F[a][h]+u,h++,t.p1.y=F[a][h]+d,h++,t.p1.z=F[a][h]+c,h++,t.p2.x=F[a][h]+u,h++,t.p2.y=F[a][h]+d,h++,t.p2.z=F[a][h]+c,h++,t.p3.x=F[a][h]+u,h++,t.p3.y=F[a][h]+d,h++,t.p3.z=F[a][h]+c,h++,t.Ray()&&(t.rv1.SetP(this.LatLongs2[a][l]),t.rv2.SetP(this.LatLongs2[a][l+1]),t.rv3.SetP(this.LatLongs2[a][l+2])),l+=3}while(l<this.VertexCount2);h=0}else{l=0,h=0;var y=this.Vertices;do{t.p1.x=y[a][h]+u,h++,t.p1.y=y[a][h]+d,h++,t.p1.z=y[a][h]+c,h++,t.p2.x=y[a][h]+u,h++,t.p2.y=y[a][h]+d,h++,t.p2.z=y[a][h]+c,h++,t.p3.x=y[a][h]+u,h++,t.p3.y=y[a][h]+d,h++,t.p3.z=y[a][h]+c,h++,t.Ray()&&(t.rv1.SetP(this.LatLongs[a][l]),t.rv2.SetP(this.LatLongs[a][l+1]),t.rv3.SetP(this.LatLongs[a][l+2])),l+=3}while(l<this.VertexCount);h=0}}return t.fd&&(s.isValid=t.EnterpolateLatLong(),s.isValid?(Object.assign(s.SpacePoint,t.RShoot),s.MouseLong=t.RMouseLong,s.MouseLat=t.RMouseLat):(Object.assign(s.SpacePoint,t.RShoot),s.MouseLong=(t.rv1.x+t.rv2.x+t.rv3.x)/3,s.MouseLat=(t.rv1.y+t.rv2.y+t.rv3.y)/3,s.isValid=!0)),s.isValid}},{key:"XZdhXU",value:function(t,e,i){switch(e){case 0:this.FChilds[e].XVzwzw(t,this.FTextures[t].FParentTextID,this.FTextures[t].FParenttcx,this.FTextures[t].FParenttcy,this.FTextures[t].FParenttwd/2,i);break;case 1:this.FChilds[e].XVzwzw(t,this.FTextures[t].FParentTextID,this.FTextures[t].FParenttcx+this.FTextures[t].FParenttwd/2,this.FTextures[t].FParenttcy,this.FTextures[t].FParenttwd/2,i);break;case 2:this.FChilds[e].XVzwzw(t,this.FTextures[t].FParentTextID,this.FTextures[t].FParenttcx+this.FTextures[t].FParenttwd/2,this.FTextures[t].FParenttcy+this.FTextures[t].FParenttwd/2,this.FTextures[t].FParenttwd/2,i);break;case 3:this.FChilds[e].XVzwzw(t,this.FTextures[t].FParentTextID,this.FTextures[t].FParenttcx,this.FTextures[t].FParenttcy+this.FTextures[t].FParenttwd/2,this.FTextures[t].FParenttwd/2,i)}}},{key:"SetChildALLTexturesInfo",value:function(t,e){for(var i=this.FTextures.length,r=0;r<i;r++)this.XZdhXU(r,t,e)}},{key:"SetChildRasterizeTextureInfo",value:function(t,e){switch(t){case 0:this.FChilds[t].SetParentsRasterizeTextureInfo(this.VectorRasterize.FParentTextID,this.VectorRasterize.FParenttcx,this.VectorRasterize.FParenttcy,this.VectorRasterize.FParenttwd/2,e);break;case 1:this.FChilds[t].SetParentsRasterizeTextureInfo(this.VectorRasterize.FParentTextID,this.VectorRasterize.FParenttcx+this.VectorRasterize.FParenttwd/2,this.VectorRasterize.FParenttcy,this.VectorRasterize.FParenttwd/2,e);break;case 2:this.FChilds[t].SetParentsRasterizeTextureInfo(this.VectorRasterize.FParentTextID,this.VectorRasterize.FParenttcx+this.VectorRasterize.FParenttwd/2,this.VectorRasterize.FParenttcy+this.VectorRasterize.FParenttwd/2,this.VectorRasterize.FParenttwd/2,e);break;case 3:this.FChilds[t].SetParentsRasterizeTextureInfo(this.VectorRasterize.FParentTextID,this.VectorRasterize.FParenttcx,this.VectorRasterize.FParenttcy+this.VectorRasterize.FParenttwd/2,this.VectorRasterize.FParenttwd/2,e)}}},{key:"XzR7Y1",value:function(){switch(this.FChildOrder){case 0:this.FMeshCheck[0]=1,this.FMeshCheck[1]=0,this.FMeshCheck[2]=0,this.FMeshCheck[3]=1;break;case 1:this.FMeshCheck[0]=0,this.FMeshCheck[1]=1,this.FMeshCheck[2]=0,this.FMeshCheck[3]=1;break;case 2:this.FMeshCheck[0]=0,this.FMeshCheck[1]=1,this.FMeshCheck[2]=1,this.FMeshCheck[3]=0;break;case 3:this.FMeshCheck[0]=1,this.FMeshCheck[1]=0,this.FMeshCheck[2]=1,this.FMeshCheck[3]=0}}},{key:"XDAVIg",value:function(){this.FMeshCheck.fill(0)}},{key:"XE2LF2",value:function(t,e){this.FCellGeoDPs.SetVecSub(t,this.FCellGeoWPs),this.FGlobe.gl.uniform3fv(this.FGlobe.P3DTranslationLocForLayer,[this.FCellGeoDPs.x,this.FCellGeoDPs.y,this.FCellGeoDPs.z]);for(var i=this.FCellLayers.length,r=0;r<i;r++){var s=this.FCellLayers[r].FCityLayer,o=s.continuousLOD;s.rasterize||o||this.FCellLayers[r].Draw3d(e)}}},{key:"XCMHxX",value:function(t){for(var e=this.FCellLayers.length,i=0;i<e;i++){var r=this.FCellLayers[i].FCityLayer,s=r.clusterStyle,o=r.continuousLOD;s||o||this.FCellLayers[i].Draw2d(t)}}},{key:"DrawClusterLayers2d",value:function(t){for(var e=this.FCellLayers.length,i=0;i<e;i++){var r=this.FCellLayers[i].FCityLayer,s=r.clusterStyle,o=r.startLod,n=r.endLod;s&&t>=o&&t<=n&&this.FCellLayers[i].FStateReady&&this.FCellLayers[i].Draw2d(t)}}},{key:"DrawMVTContinuousLODLayers2d",value:function(t){for(var e=this.FCellLayers.length,i=0;i<e;i++){var r=this.FCellLayers[i].FCityLayer,s=r.continuousLOD,o=r.layerType;!r.rasterize&&s&&o===h.g.MVT_XYZ&&this.FCellLayers[i].Draw2d(t)}}},{key:"DrawMVTContinuousLODLayers3d",value:function(t,e){this.FCellGeoDPs.SetVecSub(t,this.FCellGeoWPs),this.FGlobe.gl.uniform3fv(this.FGlobe.P3DTranslationLocForLayer,[this.FCellGeoDPs.x,this.FCellGeoDPs.y,this.FCellGeoDPs.z]);for(var i=this.FCellLayers.length,r=0;r<i;r++){var s=this.FCellLayers[r].FCityLayer,o=s.continuousLOD,n=s.layerType;!s.rasterize&&o&&n===h.g.MVT_XYZ&&this.FCellLayers[r].Draw3d(e)}}},{key:"FindParentsAtMinLOD",value:function(t){for(var e=[],i=this.FGlobe.FDrawedCells.length,r=0;r<i;r++){var s=this.FGlobe.FDrawedCells[r].GetParentAtLod(t);s?-1===e.indexOf(s)&&e.push(s):alert("null parent")}return e}},{key:"XU3xVd",value:function(){return this.FParent?this.FVisible&&this.FParent.XU3xVd():this.FVisible}},{key:"X7Dx1T",value:function(){var t;if(this.XHtqRe())for(t=4;t--;)if(this.FChilds[t].FVisible)return!0;return!1}},{key:"X5Ya6M",value:function(t){var e=this.FActive&&this.X7Dx1T();if(e){var i,r,s;for(i=0,r=0,s=4;s--;)this.FChilds[s]&&this.FChilds[s].FVisible&&(i++,this.FChilds[s].FTextures[t]&&this.FChilds[s].FTextures[t].FTextName&&r++);e=i===r}return e}},{key:"HasAnyTexture",value:function(){for(var t=this.FTextures.length,e=0;e<t;e++)if(this.FTextures[e].FTextName&&-1!==this.FTextures[e].FTextName)return!0;return!1}},{key:"XAbn09",value:function(){this.FMeshRequested=!1,this.FRequestCount--}},{key:"XUlzx4",value:function(t){for(var e=this.FTextures.length,i=0;i<e;i++)this.FTextures[i].FTextName&&-1!==this.FTextures[i].FTextName&&(this.FGlobe.reUseCellTextActive?this.FGlobe.reUseCellTexture.push(this.FTextures[i].FTextName):this.gl.deleteTexture(this.FTextures[i].FTextName),delete this.FTextures[i].FTextName,this.FTextures[i].FTextureRequested=!1,this.FTextures[i].FTextureRequesting=!1,this.FParent?this.FParent.XZdhXU(i,this.FChildOrder,t):(this.FTextures[i].FParentTextID=0,this.FTextures[i].FParenttcx=0,this.FTextures[i].FParenttcy=0,this.FTextures[i].FParenttwd=0))}},{key:"RemoveRasterizeTextureInfo",value:function(){d.Clear(this.VectorRasterize,this.gl),this.VectorRasterize.FTextName&&(this.gl.deleteTexture(this.VectorRasterize.FTextName),delete this.VectorRasterize.FTextName,this.VectorRasterize.FParentTextID&&(this.gl.deleteTexture(this.VectorRasterize.FParentTextID),delete this.VectorRasterize.FParentTextID),this.VectorRasterize=null)}},{key:"RemoveRasterizeTexture",value:function(){this.VectorRasterize.FParentTextID&&(this.gl.deleteTexture(this.VectorRasterize.FParentTextID),this.VectorRasterize.FParentTextID=null),this.VectorRasterize.FTextName&&(this.gl.deleteTexture(this.VectorRasterize.FTextName),this.VectorRasterize.FTextName=null)}},{key:"GetLastTextureRequest",value:function(){var t;for(t=this.FTextures.length;t--;)if(this.FGlobe.FRasters[t]._FActive&&this.FTextures[t]&&!this.FTextures[t].FTextureRequested)return t;return-1}},{key:"AddNewTexture",value:function(){var t=this.FGlobe.FRasters.length-1;this.FTextures[t]=new c(this.gl,f),this.FParent||(this.Xp1RZJ(this.FTextures[t]),this.X31BlD(this.FTextures[t]))}},{key:"XwI52T",value:function(t,e){var i=this.FLLLonDeg,r=this.FLLLatDeg,s=this.FURLonDeg,o=this.FURLatDeg;if(!e||e.CSIsCommonRegionV(i,r,s,o)){this.FTextures[t].FTextName&&-1!==this.FTextures[t].FTextName&&this.gl.deleteTexture(this.FTextures[t].FTextName),this.FTextures[t].FTextName=null,this.FTextures[t].FTextureRequested=!1,this.FTextures[t].FTextureRequesting=!1,this.FTextures[t].FLoadingChildTextureInfoExists=!1,this.FTextures[t].FLoadingChildTextureList.fill(0),this.FTextures[t].FChildTextureInfoExists=!1,this.FTextures[t].FChildTextureList.fill(0),this.FTextures[t].FParentTextID=0,this.FTextures[t].FParenttcx=0,this.FTextures[t].FParenttcy=0,this.FTextures[t].FParenttwd=0,this.FTextures[t].IntTexCoordsCounter.fill(0),this.FTextures[t].IntTexCoords.fill(0),this.FTextures[t].TexCoordsCounter.fill(0),this.FTextures[t].TexCoords2Counter.fill(0);for(var n=0;n<4;n++)this.FTextures[t].TexCoords[n].fill(0),this.FTextures[t].TexCoords2[n].fill(0);if(this.FTextures[t].textureRESULT=0,this.FParent||(this.Xp1RZJ(this.FTextures[t]),this.X31BlD(this.FTextures[t])),!this.HasAnyTexture()){var a=this.FGlobe.FTextCells.indexOf(this);-1!==a&&this.FGlobe.FTextCells.splice(a,1)}}for(var h=0;h<this.FChilds.length;h++)this.FChilds[h]&&this.FChilds[h].XwI52T(t,e)}},{key:"X5qVfJ",value:function(t,e,i,r){a.b.GeoTo3D(t.x,t.y,h.z.GLOBE_RADIUS+this.FMB2[e][i]*h.z.GLOBE_Z_ABART,r),r.VecSub(this.FCellGeoWPs)}},{key:"Xap4xc",value:function(){for(var t=0;t<4;t++)this.FChilds[t].XnDXiZ(),this.FChilds[t]=null}},{key:"XFIiZB",value:function(t,e){var i=0;if(this.FTextures[t].FTextureRequesting=!1,this.FTextures[t].FChildTextureInfoExists=this.FTextures[t].FLoadingChildTextureInfoExists,this.FTextures[t].FChildTextureList[0]=this.FTextures[t].FLoadingChildTextureList[0],this.FTextures[t].FChildTextureList[1]=this.FTextures[t].FLoadingChildTextureList[1],this.FTextures[t].FChildTextureList[2]=this.FTextures[t].FLoadingChildTextureList[2],this.FTextures[t].FChildTextureList[3]=this.FTextures[t].FLoadingChildTextureList[3],i=e?this.FGlobe.XV6ew4(!0,!0,e):-1){-1===this.FGlobe.FTextCells.indexOf(this)&&this.FGlobe.FTextCells.push(this);var r=1/h.z.GLOBE_IMAGE_SIZE;this.XVzwzw(t,i,r,r,1-2/h.z.GLOBE_IMAGE_SIZE,!0),this.FTextures[t].FTextName=i,this.FRequestCount--}return 0!==i}},{key:"SetCellRasterizeTexture",value:function(){this.AllRasterizeLayerLoaded()&&this.ContinueToSetCellRasterizeTexture()}},{key:"SetCellRasterizeTextureForApi",value:function(){this.AllRasterizeLayerLoadedForApi()&&this.ContinueToSetCellRasterizeTexture()}},{key:"ContinueToSetCellRasterizeTexture",value:function(){this.VectorRasterize.FTextName&&(this.gl.deleteTexture(this.VectorRasterize.FTextName),this.VectorRasterize.FTextName=null);var t=this.rasterize.XNPtRY(this),e=1/h.z.GLOBE_IMAGE_SIZE;this.SetParentsRasterizeTextureInfo(t,e,e,1-2/h.z.GLOBE_IMAGE_SIZE,!0),this.VectorRasterize.FTextName=t}},{key:"AllRasterizeLayerLoaded",value:function(){for(var t=this.FCellLayers.length,e=0;e<t;e++)if(this.FCellLayers[e].FCityLayer.rasterize&&!this.FCellLayers[e].FStateReady&&this.FCellLayers[e].FCityLayer._FActive)return!1;return!0}},{key:"AllRasterizeLayerLoadedForApi",value:function(){for(var t=!1,e=this.FCellLayers.length,i=0;i<e;i++)if(this.FCellLayers[i].FCityLayer.rasterize&&(t=!0,!this.FCellLayers[i].FStateReady&&this.FCellLayers[i].FCityLayer._FActive))return!1;return!!t}},{key:"XVzwzw",value:function(t,e,i,r,s,o){var n;if(!this.FTextures[t].FTextName)for(this.FTextures[t].FParentTextID=e,this.FTextures[t].FParenttcx=i,this.FTextures[t].FParenttcy=r,this.FTextures[t].FParenttwd=s,o&&(this.Xp1RZJ(this.FTextures[t]),this.X31BlD(this.FTextures[t])),s/=2,n=4;n--;)if(this.FChilds[n])switch(n){case 0:this.FChilds[n].XVzwzw(t,e,i,r,s,o);break;case 1:this.FChilds[n].XVzwzw(t,e,i+s,r,s,o);break;case 2:this.FChilds[n].XVzwzw(t,e,i+s,r+s,s,o);break;case 3:this.FChilds[n].XVzwzw(t,e,i,r+s,s,o)}}},{key:"SetParentsRasterizeTextureInfo",value:function(t,e,i,r,s){if(!this.VectorRasterize.FTextName){this.VectorRasterize.FParentTextID=t,this.VectorRasterize.FParenttcx=e,this.VectorRasterize.FParenttcy=i,this.VectorRasterize.FParenttwd=r,s&&(this.Xp1RZJ(this.VectorRasterize),this.X31BlD(this.VectorRasterize)),r/=2;for(var o=4;o--;)if(this.FChilds[o])switch(o){case 0:this.FChilds[o].SetParentsRasterizeTextureInfo(t,e,i,r,s);break;case 1:this.FChilds[o].SetParentsRasterizeTextureInfo(t,e+r,i,r,s);break;case 2:this.FChilds[o].SetParentsRasterizeTextureInfo(t,e+r,i+r,r,s);break;case 3:this.FChilds[o].SetParentsRasterizeTextureInfo(t,e,i+r,r,s)}}}},{key:"DeleteRasterFromCell",value:function(t){this.FTextures[t].FTextName&&-1!==this.FTextures[t].FTextName&&this.gl.deleteTexture(this.FTextures[t].FTextName),this.FTextures[t].FTextName=null,this.FTextures[t].FTextureRequested=null,this.FTextures[t].FTextureRequesting=null,this.FTextures[t].FLoadingChildTextureInfoExists=null,this.FTextures[t].FLoadingChildTextureList=null,this.FTextures[t].FChildTextureInfoExists=null,this.FTextures[t].FChildTextureList=null,this.FTextures[t].FParentTextID=null,this.FTextures[t].FParenttcx=null,this.FTextures[t].FParenttcy=null,this.FTextures[t].FParenttwd=null,this.FTextures[t].IntTexCoords=null,this.FTextures[t].IntTexCoordsCounter=null,this.gl.deleteBuffer(this.FTextures[t].InttexcoordBuffer),this.FTextures[t].InttexcoordBuffer=null;for(var e=0;e<4;e++)this.gl.deleteBuffer(this.FTextures[t].texcoord1Buffer[e]),this.gl.deleteBuffer(this.FTextures[t].texcoord2Buffer[e]),this.FTextures[t].texcoord1Buffer[e]=null,this.FTextures[t].texcoord2Buffer[e]=null,this.FTextures[t].TexCoords[e]=null,this.FTextures[t].TexCoords2[e]=null;if(this.FTextures[t].TexCoordsCounter=null,this.FTextures[t].TexCoords2Counter=null,this.FTextures[t].textureRESULT=null,delete this.FTextures[t].FTextName,delete this.FTextures[t].FTextureRequested,delete this.FTextures[t].FTextureRequesting,delete this.FTextures[t].FLoadingChildTextureInfoExists,delete this.FTextures[t].FLoadingChildTextureList,delete this.FTextures[t].FChildTextureInfoExists,delete this.FTextures[t].FChildTextureList,delete this.FTextures[t].FParentTextID,delete this.FTextures[t].FParenttcx,delete this.FTextures[t].FParenttcy,delete this.FTextures[t].FParenttwd,delete this.FTextures[t].IntTexCoordsCounter,delete this.FTextures[t].IntTexCoords,delete this.FTextures[t].TexCoordsCounter,delete this.FTextures[t].TexCoords2Counter,delete this.FTextures[t].TexCoords,delete this.FTextures[t].TexCoords2,delete this.FTextures[t].InttexcoordBuffer,delete this.FTextures[t].texcoord1Buffer,delete this.FTextures[t].texcoord2Buffer,delete this.FTextures[t].textureRESULT,!this.HasAnyTexture()){var i=this.FGlobe.FTextCells.indexOf(this);-1!==i&&this.FGlobe.FTextCells.splice(i,1)}this.FTextures.splice(t,1)}},{key:"TextureCellMain_NoInternet",value:function(t){var e=this.FGlobe.FindRasterIndex(t);-1!==e&&(this.FTextures[e].textureRESULT=h.z.tr_load_NoInternet,this.FTextures[e].FTextureRequesting=!1,this.FTextures[e].FTextureRequested=!1),this.FRequestCount--,this.FGlobe.DrawRender()}},{key:"TextureCellMain_OK_NoData",value:function(t){this.FTextures[t].textureRESULT=h.z.tr_load_OK_NoData,this.FTextures[t].FTextureRequesting=!1,this.FTextures[t].FTextureRequested=!0,this.FTextures[t].FChildTextureInfoExists=!0,this.FTextures[t].FChildTextureList.fill(0),this.FRequestCount--,this.FGlobe.DrawRender()}},{key:"XYw15Q",value:function(t){var e=this.FGlobe.FindRasterIndex(t);-1!==e&&(this.FTextures[e].textureRESULT=h.z.tr_load_OK_NoData,this.FTextures[e].FTextureRequesting=!1,this.FTextures[e].FTextureRequested=!0,this.FTextures[e].FChildTextureInfoExists=!0,this.FTextures[e].FChildTextureList.fill(0)),this.FRequestCount--,this.FGlobe.DrawRender()}},{key:"XrQC2s",value:function(t){this.FTextures[t].FTextureRequesting=!1,this.FTextures[t].FTextureRequested=!1,this.FRequestCount--}},{key:"SetCellTextureRequest",value:function(t){this.FTextures[t].FTextureRequesting=!0,this.FTextures[t].FTextureRequested=!0,this.FTextures[t].textureRESULT=h.z.tr_loading,this.FTextures[t].FLoadingChildTextureInfoExists=!1,this.FTextures[t].FLoadingChildTextureList.fill(0),this.FRequestCount++}},{key:"SetRequestCount",value:function(){this.FRequestCount--,this.FGlobe.DrawRender()}},{key:"GetRasterUrlByType",value:function(t){var e;switch(t.type){case h.p.WMS:e=this.GetWMSRasterURL(t);break;case h.p.XYZ_MERCATOR:e=this.GetMercatorTileUrl()}return e}},{key:"GetSupportUrlForOutOfBbox",value:function(t,e){var i=null;if(t.supportURL&&t.supportURL.outOfBBOXSupport&&e){switch(t.type){case h.p.WMS:i=this.GetWMSRasterSupportURL(t);break;case h.p.XYZ_MERCATOR:this.CreateMercatorTileForSupportURL(t),i=this.GetMercatorSupportURL(t)}return i}return i}},{key:"GetSupportUrlByType",value:function(t){var e=null;switch(t.type){case h.p.WMS:e=this.GetWMSRasterSupportURL(t);break;case h.p.XYZ_MERCATOR:e=this.GetMercatorSupportURL(t)}return e}},{key:"GetWMSRasterURL",value:function(t){var e=this.GetNextUrl(t,this.FLevel);return null===e?null:this.ContinueToCreateWMSRasterURL(t,e)}},{key:"GetWMSRasterSupportURL",value:function(t){var e=this.GetNextSupportURL(t);return this.ContinueToCreateWMSRasterURL(t,e)}},{key:"ContinueToCreateWMSRasterURL",value:function(t,e){var i,r,s,o;return t.lowerLod&&this.FParent?(i=this.FParent.mercatorRect.LL.y,r=this.FParent.mercatorRect.LL.x,s=this.FParent.mercatorRect.UR.y,o=this.FParent.mercatorRect.UR.x):(i=this.mercatorRect.LL.y,r=this.mercatorRect.LL.x,s=this.mercatorRect.UR.y,o=this.mercatorRect.UR.x),e="".concat(e,"&WIDTH=").concat(h.z.GLOBE_IMAGE_SIZE,"&HEIGHT=").concat(h.z.GLOBE_IMAGE_SIZE),e="".concat(e,"&BBOX=").concat(i,",").concat(r,",").concat(s,",").concat(o)}},{key:"GetMercatorTileUrl",value:function(){var t=this.FGlobe.FRasters[this.FCurrentRequestRasterID],e=this.GetNextUrl(t,this.FLevel);return e?(this.FGlobe.FRasters[this.FCurrentRequestRasterID].lowerLod&&this.FParent?(this.z=this.FLevel-1,this.y=this.FGlobe.mercator.getTileY(this.FParent.FCenterLatDeg,this.z),this.x=this.FGlobe.mercator.getTileX(this.FParent.FCenterLonDeg,this.z)):(this.z=this.FLevel,this.y=this.FGlobe.mercator.getTileY(this.FCenterLatDeg,this.z),this.x=this.FGlobe.mercator.getTileX(this.FCenterLonDeg,this.z)),e=this.GetUrlByString(e,this.mercatorXYZRect,this.x,this.y,this.z)):e}},{key:"CreateMercatorTileForSupportURL",value:function(t){t.lowerLod&&this.FParent?(this.z=this.FLevel-1,this.y=this.FGlobe.mercator.getTileY(this.FParent.FCenterLatDeg,this.z),this.x=this.FGlobe.mercator.getTileX(this.FParent.FCenterLonDeg,this.z)):(this.z=this.FLevel,this.y=this.FGlobe.mercator.getTileY(this.FCenterLatDeg,this.z),this.x=this.FGlobe.mercator.getTileX(this.FCenterLonDeg,this.z))}},{key:"GetUrlByString",value:function(t,e,i,r,s){return l.c.ContainsAnyString(t,p)?t=(t=(t=t.replace("{z}",s)).replace("{x}",i)).replace("{y}",r):l.c.ContainsAnyString(t,F)?(this.FGlobe.mercator.getTileExtent(i,r,s,e),t=(t=(t=(t=t.replace("{llx}",e.LL.y)).replace("{lly}",e.LL.x)).replace("{urx}",e.UR.y)).replace("{ury}",e.UR.x)):t}},{key:"GetMercatorSupportURL",value:function(t){var e=this.GetNextSupportURL(t);return this.GetUrlByString(e,this.mercatorXYZRect,this.x,this.y,this.z)}},{key:"GetNextUrl",value:function(t,e){if(t._lodDisplayArr[e].url[t._numIndex]){var i=t._numIndex;return t._numIndex=(t._numIndex+1)%t._lodDisplayArr[e].url.length,t._lodDisplayArr[e].url[i]}return t.supportURL&&t.supportURL.notFoundLodRangeSupport?this.GetNextSupportURL(t):t._lodDisplayArr[e].url[0]}},{key:"GetNextSupportURL",value:function(t){var e=t._supportURLIndex;return t._supportURLIndex=(t._supportURLIndex+1)%t.supportURL.url.length,t.supportURL.url[e]}},{key:"GetParentAtLod",value:function(t){if(this.FLevel===t)return this;for(var e=this.FParent;e;){if(e.FLevel===t)return e;e=e.FParent}return null}}]),t}();i(17);i.d(e,"a",function(){return A});var A=function(){function t(e){s()(this,t),this.Flive=[],this.FDead=[],this.FTemp=[],this.XflUQL=function(t,e){return t.FCellDist/t.FRealRadius<e.FCellDist/e.FRealRadius?-1:t.FCellDist/t.FRealRadius>e.FCellDist/e.FRealRadius?1:0},this.FGlobe=e,this.Ftrans=new a.w(0,0,0),this.Feye=new a.w(0,0,0);for(var i=this.FGlobe.GLOBE_MAX_CELL_CREATE;i--;)this.FDead.push(new y(this.FGlobe))}return n()(t,[{key:"XZfI4L",value:function(t,e,i,r,s,o,n){var a;return a=this.FDead.length?this.FDead.pop():new y(this.FGlobe),this.Flive.push(a),a.Init(t,e,i,r,s,o,n),a.FLiving=!0,a}},{key:"CreatePoleCell",value:function(t,e,i,r,s,o,n,a,h){var l;return l=this.FDead.length?this.FDead.pop():new y(this.FGlobe),this.Flive.push(l),l.InitPole(t,e,i,r,s,o,n,a,h),l.FLiving=!0,l}},{key:"X4rDIY",value:function(t,e){this.Ftrans.SetP(t),this.Feye.SetP(e)}},{key:"X2Pqs1",value:function(t){var e,i,r,s,o;if(this.Flive.length>t)for(var n=2;n--;){this.FTemp.length=0;var a=this.Flive.length;for(i=0;i<a;i++)if((e=this.Flive[i]).XHtqRe()&&!e.XU3xVd()){var h=e.FChilds;0!==h[0].FRequestCount||0!==h[1].FRequestCount||0!==h[2].FRequestCount||0!==h[3].FRequestCount||h[0].XHtqRe()||h[1].XHtqRe()||h[2].XHtqRe()||h[3].XHtqRe()||(e.XlGTf1(this.Ftrans,this.Feye),this.FTemp.push(e))}if(this.FTemp.length>1&&this.FTemp.sort(this.XflUQL),this.FTemp.length)for((s=.1*this.FTemp.length)<1&&(s=1),o=this.FTemp.length-1-s,i=this.FTemp.length-1;i>o;i--){for(e=this.FTemp[i],r=0;r<4;r++){var l=e.FChilds[r];this.FDead.push(l),l.FLiving=!1,this.Flive.splice(this.Flive.indexOf(l),1)}e.Xap4xc()}}}},{key:"IsLiving",value:function(t){return!!t.FLiving}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=function(){function t(){s()(this,t),this.Owner=null,this.Active=!1,this.Model=null}return n()(t,[{key:"Update",value:function(){this.Active=!0}},{key:"Clear",value:function(){this.Owner=null,this.Model=null}}]),t}(),h=i(25),l=i.n(h),u=i(36),d=i.n(u),c=i(0),f=i(1),p=i(17),F=function(){function t(){s()(this,t),this.Name="",this.color=new Float32Array([1,1,1,1]),this.ambient=new Float32Array(3),this.specular=new Float32Array(3),this.illum=0,this.nS=0,this.TextFN="",this.HasTexture=!1,this.Texture=null,this.faceCount=0,this.texCoordCount=0,this.normalCount=0,this.textureCoord=null,this.vertexBuffer=null,this.normalBuffer=null,this.TriCnt=0,this.mVertexBuffer=null,this.IntTexCoords=null,this.IntNormalBuffer=null,this.MatOk=!1,this.BufferOk=!1,this.canvas=document.createElement("canvas"),this.canvas.height=2048,this.canvas.width=2048,this.ctx=this.canvas.getContext("2d"),this.tempModelColor=void 0}return n()(t,[{key:"CreateFloatArrayAndBuffer",value:function(t){this.TriCnt&&(this.mVertexBuffer=new Float32Array(3*this.TriCnt*3),this.vertexBuffer=t.createBuffer(),this.HasTexture&&(this.IntTexCoords=new Float32Array(3*this.TriCnt*2),this.textureCoord=t.createBuffer()),this.IntNormalBuffer=new Float32Array(3*this.TriCnt*3),this.normalBuffer=t.createBuffer())}},{key:"LoadTexture",value:function(t,e){var i=this;this.TextFN&&(this.xhttpForModel=new XMLHttpRequest,Object(p.c)(this.xhttpForModel,"".concat(t,"/").concat(this.TextFN),c.z.MODEL_TIMEOUT,!1,null,null,null).then(function(t){if(t.response){var r=new Image,s=new Blob([new Uint8Array(t.response)],c.A.jpeg);r.src=window.URL.createObjectURL(s),r.onload=function(){i.ctx.canvas.height=f.b.NearestPowOfUpper(r.height),i.ctx.canvas.width=f.b.NearestPowOfUpper(r.width),i.ctx.clearRect(0,0,i.ctx.width,i.ctx.height),i.ctx.drawImage(r,0,0,i.ctx.canvas.width,i.ctx.canvas.height),i.Texture=e.Xmj7Si(!0,!1,i.ctx.canvas),window.URL.revokeObjectURL(r.src)}}else i.Texture=null;delete i.xhttpForModel}))}},{key:"Opacity",set:function(t){this.color[3]=t}}]),t}(),y=function(){function t(e,i){var r=this;s()(this,t),this.allLines,this.Materyals=[],this.FV=[],this.FVT=[],this.FVN=[],this.FHasTextures=!1,this.DefMateryal=new F,this.FGlobe=e,this.gl=e.gl,this.GLU=e.GLU,this.UseInfo=!1,d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r.PrepareModel(i);case 1:case"end":return t.stop()}},t)}))()}return n()(t,[{key:"BuildTransPoint",value:function(t){t.tempp2.SetP(t.center),t.tempp2.ConvertDegreeToRadyan(),t.Geo3D.SetVecSub(this.FGlobe.Fp2T,t.Geo3C)}},{key:"PrepareModel",value:function(t){var e,i,r=this,s=this.ParseObjName(t),o=this.ParseObjRootDir(t),n=s.split(".");e="".concat(n[0],".mtl"),i=s;var a=new XMLHttpRequest;a.responseType="text",a.onload=d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:200===a.status&&4===a.readyState?(r.Materyals.push(r.DefMateryal),r.ParseMTLFile(a.response),r.LoadObjTexture(o),r.ParseObjFile(o,i)):(r.Materyals.push(r.DefMateryal),r.LoadObjTexture(o),r.ParseObjFile(o,i));case 1:case"end":return t.stop()}},t)})),a.open("GET","".concat(o,"/").concat(e)),a.send(null)}},{key:"ParseMTLFile",value:function(t){for(var e,i,r=null,s=t.split(/\r\n|\n/),o=s.length,n=0;n<o;n++)if("newmtl"===(i=(e=s[n].trim().split(/[ ]+/))[0].toLowerCase()))(r=new F).Name=e[1].toLowerCase(),this.Materyals.push(r);else if("kd"===i)r.color[0]=e[1],r.color[1]=e[2],r.color[2]=e[3];else if("ks"===i)r.specular[0]=e[1],r.specular[1]=e[2],r.specular[2]=e[3];else if("ns"===i)r.nS=e[1];else if("illum"===i)r.illum=e[1];else if("ka"===i)r.ambient[0]=e[1],r.ambient[1]=e[2],r.ambient[2]=e[3];else if("d"===i)r.Opacity=e[1];else if("map_kd"===i){if(r.TextFN=e[1],-1===r.TextFN.indexOf("/"))var a=r.TextFN.lastIndexOf("\\");else a=r.TextFN.lastIndexOf("/");-1!==a&&(r.TextFN=r.TextFN.substring(a+1,r.TextFN.length)),this.FHasTextures=!0,r.HasTexture=!0}}},{key:"ParseObjFile",value:function(t,e){var i=this,r="".concat(t,"/").concat(e),s=new XMLHttpRequest;s.responseType="text",s.onload=function(){i.allLines=s.response.split(/\r\n|\n/),i.FillMateryal(i.allLines)},s.open("GET",r),s.send(null)}},{key:"LoadObjTexture",value:function(t){for(var e=this.Materyals.length;e--;)this.Materyals[e].LoadTexture(t,this.FGlobe)}},{key:"FillMateryal",value:function(t){for(var e,i=this.DefMateryal,r=null,s=t.length,o=0;o<s;o++)if(r=t[o]){var n=(r=r.trim()).split(/[ ]+/);"usemtl"===(e=n[0].toLowerCase())?i.Name===n[1].toLowerCase()||(i=this.GetMateryal(n[1].toLowerCase())):"v"===e?(this.FV.push(n[1]),this.FV.push(n[2]),this.FV.push(n[3])):"vt"===e?(this.FVT.push(n[1]),this.FVT.push(n[2])):"vn"===e?(this.FVN.push(n[1]),this.FVN.push(n[2]),this.FVN.push(n[3])):"f"===e&&-1!==n[1].indexOf("/")&&(5===n.length&&(i.TriCnt+=2),4===n.length&&i.TriCnt++)}this.FV.length&&(this.ModelValid=!0,this.CreateMateryalArrAndBuff(),this.ReadMateryalFaces(t),this.FGlobe.ModelDrawer.inAnimation=!0),this.allLines.length=0;for(o=this.Materyals.length;o--;)this.Materyals[o].canvas=null;this.FV.length=0,this.FVT.length=0,this.FVN.length=0}},{key:"BuildTextures",value:function(){}},{key:"ReadMateryalFaces",value:function(t){for(var e,i=this.DefMateryal,r=null,s=t.length,o=0;o<s;o++)if(r=t[o]){var n=(r=r.trim()).split(/[ ]+/);if("usemtl"===(e=n[0].toLowerCase()))i.Name===n[1].toLowerCase()||((i=this.GetMateryal(n[1].toLowerCase())).MatOk=!0);else if("f"===e&&-1!==n[1].indexOf("/"))for(var a=1;a<5;a++)n[4]&&4===a?(this.SetTriangleFaceToMateryal(n[3].split(/[\/]+/),i),this.SetTriangleFaceToMateryal(n[4].split(/[\/]+/),i),this.SetTriangleFaceToMateryal(n[1].split(/[\/]+/),i)):a<4&&this.SetTriangleFaceToMateryal(n[a].split(/[\/]+/),i)}this.FillMateryalGLBuffers()}},{key:"SetTriangleFaceToMateryal",value:function(t,e){var i=parseInt(t[0])-1;if(e.mVertexBuffer.set([this.FV[3*i],this.FV[3*i+1],this.FV[3*i+2]],e.faceCount),e.faceCount+=3,e.HasTexture){var r=parseInt(t[1])-1;e.IntTexCoords.set([this.FVT[2*r],this.FVT[2*r+1]],e.texCoordCount),e.texCoordCount+=2}if(t[2]){var s=parseInt(t[2])-1;e.IntNormalBuffer.set([this.FVN[3*s],this.FVN[3*s+1],this.FVN[3*s+2]],e.normalCount),e.normalCount+=3}}},{key:"GetMateryal",value:function(t){for(var e=this.DefMateryal,i=this.Materyals.length;i--;)if(this.Materyals[i].Name===t)return this.Materyals[i];return e}},{key:"CreateMateryalArrAndBuff",value:function(){for(var t=this.Materyals.length;t--;)this.Materyals[t].CreateFloatArrayAndBuffer(this.gl)}},{key:"FillMateryalGLBuffers",value:function(){for(var t=this.Materyals.length;t--;)this.Materyals[t].MatOk&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[t].vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.Materyals[t].mVertexBuffer,this.gl.STATIC_DRAW),this.Materyals[t].HasTexture&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[t].textureCoord),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.Materyals[t].IntTexCoords,this.gl.STATIC_DRAW)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[t].normalBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.Materyals[t].IntNormalBuffer,this.gl.STATIC_DRAW),this.Materyals[t].BufferOk=!0)}},{key:"RemoveMateryalBuffers",value:function(){for(var t=this.Materyals.length;t--;)this.Materyals[t].mVertexBuffer=null,this.Materyals[t].IntTexCoords=null,this.Materyals[t].IntNormalBuffer=null,this.Materyals[t].Texture&&this.gl.deleteTexture(this.Texture),this.gl.deleteBuffer(this.Materyals[t].vertexBuffer),this.gl.deleteBuffer(this.Materyals[t].textureCoord),this.gl.deleteBuffer(this.Materyals[t].normalBuffer)}},{key:"HasTextures",value:function(){return this.FHasTextures}},{key:"Free",value:function(){this.RemoveMateryalBuffers()}},{key:"ParseObjName",value:function(t){var e=t.lastIndexOf("/");return t.substring(++e,t.length)}},{key:"ParseObjRootDir",value:function(t){var e=t.lastIndexOf("/");return t.substring(0,e)}},{key:"Draw",value:function(t,e){this.BuildTransPoint(t),this.GLU.pushModel(),this.GLU.Translate(t.Geo3D.x,t.Geo3D.y,t.Geo3D.z),this.GLU.Rotate(f.b.DegreeToRadyan(t.center.x),0,0,1),this.GLU.Rotate(f.b.DegreeToRadyan(90-t.center.y),0,1,0),this.GLU.Rotate(f.b.DegreeToRadyan(90+t.rotXY),0,0,1),this.GLU.Rotate(f.b.DegreeToRadyan(t.rotZ),1,0,0),this.GLU.Rotate(f.b.DegreeToRadyan(t.rotRoll),0,1,0),this.GLU.Scale(t.sx,t.sy,t.sz),this.GLU.setModelToGL(this.FGlobe.PModelmodelViewMatrixLoc);for(var i=this.Materyals.length;i--;)this.Materyals[i].BufferOk&&(this.FGlobe.modelWireFrameMode?(this.gl.disableVertexAttribArray(this.FGlobe.PModeltextCoordLoc),this.gl.bindTexture(this.gl.TEXTURE_2D,this.FGlobe.whitetex),this.gl.uniform1i(this.FGlobe.PModelmodelwireframe,1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[i].normalBuffer),this.gl.vertexAttribPointer(this.FGlobe.PModelnormalPos,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[i].vertexBuffer),this.gl.vertexAttribPointer(this.FGlobe.PModelvertexPos,3,this.gl.FLOAT,!1,0,0),this.gl.drawArrays(this.gl.LINES,0,3*this.Materyals[i].TriCnt)):(this.gl.uniform1i(this.FGlobe.PModelmodelwireframe,0),this.gl.uniform3fv(this.FGlobe.PModelambientColor,this.Materyals[i].ambient),this.gl.uniform3fv(this.FGlobe.PModelspecularColor,this.Materyals[i].specular),this.gl.uniform1f(this.FGlobe.PModelNS,this.Materyals[i].nS),this.tempModelColor=this.Materyals[i].color.slice(),this.tempModelColor[3]*=e,this.gl.uniform4fv(this.FGlobe.PModelColorLoc,this.tempModelColor),this.Materyals[i].HasTexture&&this.Materyals[i].Texture?(this.gl.uniform1i(this.FGlobe.PModeltexturecontrol,1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.Materyals[i].Texture),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[i].textureCoord),this.gl.vertexAttribPointer(this.FGlobe.PModeltextCoordLoc,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.FGlobe.PModeltextCoordLoc)):(this.gl.uniform1i(this.FGlobe.PModeltexturecontrol,0),this.gl.disableVertexAttribArray(this.FGlobe.PModeltextCoordLoc)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[i].normalBuffer),this.gl.vertexAttribPointer(this.FGlobe.PModelnormalPos,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Materyals[i].vertexBuffer),this.gl.vertexAttribPointer(this.FGlobe.PModelvertexPos,3,this.gl.FLOAT,!1,0,0),this.gl.drawArrays(this.gl.TRIANGLES,0,3*this.Materyals[i].TriCnt)));this.GLU.popModel()}}]),t}(),A=function(){function t(e){s()(this,t),this.ModelObjLimit=100,this.ModelCacheObj={},this.ModelArr=[],this.gl=e}return n()(t,[{key:"ClearUseInfo",value:function(){for(var t=Object.keys(this.ModelCacheObj),e=t.length;e--;)this.ModelCacheObj[t[e]].UseInfo=!1}},{key:"GetModelFromCache",value:function(t,e){if(this.ModelCacheObj.hasOwnProperty(e))return this.ModelCacheObj[e];var i=new y(t,e);return this.AddModelToCache(i,e),i}},{key:"AddModelToCache",value:function(t,e){this.ModelArr.push(t),this.ModelCacheObj[e]=t}},{key:"ActiveListSetUseInfo",value:function(t){for(var e=t.length;e--;)t[e].Model.UseInfo=!0}},{key:"DeleteUnUsedModel",value:function(){for(var t=Object.keys(this.ModelCacheObj),e=t.length;e--;)if(this.ModelCacheObj[t[e]].UseInfo);else{for(var i=this.ModelCacheObj[t[e]].Materyals.length;i--;)this.ModelCacheObj[t[e]].Materyals[i].vertexBuffer&&this.gl.deleteBuffer(this.ModelCacheObj[t[e]].Materyals[i].vertexBuffer),this.ModelArr[e].Materyals[i].HasTexture&&this.gl.deleteBuffer(this.ModelCacheObj[t[e]].Materyals[i].textureCoord);this.ModelCacheObj[t[e]]=null,delete this.ModelCacheObj[t[e]]}}}]),t}();i.d(e,"a",function(){return g});var g=function(){function t(e){var i=this;s()(this,t),this.FDead=[],this.FAlive=[],this.FGlobe=e,this.gl=this.FGlobe.gl,this.ModelCache=new A(this.gl),this.inAnimation=!1,this.ModelCacheInterval=this.ModelCacheInterval.bind(this),this.modelCacheInterval=setInterval(this.ModelCacheInterval,6e4),setTimeout(function(){if(i.FGlobe.VLD_ICON_ARR&&i.FGlobe.VLD_ICON_ARR.length>2){var t=new Uint8Array(i.FGlobe.VLD_ICON_ARR);c.z.RENDER_ICON_XYZ=t[t.length-1],c.z.RENDER_ICON_VLD=t[t.length-2]}else c.z.RENDER_ICON_XYZ=1,c.z.RENDER_ICON_VLD=0},1e3*(Math.floor(30*Math.random())+150))}return n()(t,[{key:"Clear",value:function(){for(var t=this.FAlive.length;t--;)this.FAlive[t].Active=!1}},{key:"ModelCacheInterval",value:function(){this.ModelCache.ClearUseInfo(),this.ModelCache.ActiveListSetUseInfo(this.FAlive),this.ModelCache.DeleteUnUsedModel()}},{key:"GetNewModelPacket",value:function(t){var e=null;return this.FDead.length?((e=this.FDead.pop()).Owner=t,e.Model=this.ModelCache.GetModelFromCache(this.FGlobe,e.Owner.objUrl)):((e=new a).Owner=t,e.Model=this.ModelCache.GetModelFromCache(this.FGlobe,e.Owner.objUrl)),this.FAlive.push(e),e}},{key:"CheckAlives",value:function(){for(var t=this.FAlive.length;t--;)this.FAlive[t].Active||(this.FAlive[t].Clear(),this.FDead.push(this.FAlive[t]),this.FAlive.splice(t,1))}},{key:"Draw",value:function(){if(this.FAlive.length){var t=this.FGlobe,e=this.gl;e.useProgram(t.ProgramModel),c.z.FOGGED&&t.XtsvUC(),e.enableVertexAttribArray(t.PModelnormalPos),t.GLU.pushModel(),t.GLU.setProjToGL(t.PModelprojectionMatrixLoc),e.disable(e.CULL_FACE),this.CheckAlives();for(var i=this.FAlive.length;i--;){var r=this.FAlive[i];r.Model.ModelValid&&t.FDRAWED_MAX_LEVEL>=r.Owner.startLod&&t.FDRAWED_MAX_LEVEL<=r.Owner.endLod&&r.Model.Draw(r.Owner,r.Owner.style.opacity*r.Owner.obj.userObj.opacity)}t.GLU.popModel(),e.disableVertexAttribArray(t.PModelnormalPos),e.enable(e.CULL_FACE);var s=t.FLastEditingObj;s&&s.type===c.j.MODEL&&s.eVal.FHighlight&&t.FLastEditingCallback.can_change.Z&&(e.useProgram(t.Program3D),s.eVal.drawZPoint())}}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(1),h=i(0),l=function(){function t(e){s()(this,t),this.FGlobe=e,this.ea=new a.s(0,0,0,0),this.TempMatrix44=[new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(4)],this.ab_quat=a.b.quatidentity(),this.Mid_ab_quat=a.b.quatidentity(),this.TEULTempeo=new a.D,this.ab_last=a.b.quatidentity(),this.ab_save=this.ab_quat.slice(0),this.ab_next=new Float64Array(16),this.P2Dab_cur_pix=new a.u(0,0),this.P3Dab_start=new a.w(0,0,1),this.P2Dab_start_pix=new a.u(0,0),this.ab_glm=new Float64Array(16),this.ab_glp=new Float64Array(16),this.ab_glv=new Float64Array(16),this.axyz=[],this.axyz.length=4,this.P3DTempm=new a.w(0,0,0),this.P3Dab_eye=new a.w(0,0,1),this.ab_zoom2=0,this.P3Dab_curr=new a.w(0,0,1),this.ab_sphere=0,this.ab_sphere2=0,this.ab_edge=0,this.P3Dab_eyedir=new a.w(0,0,1),this.ab_sphere2=1,this.ab_zoom=0,this.P3DTempa=new a.w(0,0,0),this.P3DTempc=new a.w(0,0,0),this.P3Dtempcross=new a.w(0,0,0),this.C13D=new a.w(0,0,0),this.C23D=new a.w(0,0,0),this.ab_zoom=1,this.ab_zoom2=1,this.ab_sphere=1,this.ab_edge=1}return n()(t,[{key:"XtJtU7",value:function(t,e,i,r,s){Object.assign(this.P3Dab_eye,e),this.ab_zoom2=this.P3Dab_eye.ScalarProduct(this.P3Dab_eye),this.ab_zoom=Math.sqrt(this.ab_zoom2),this.ab_sphere=t,this.ab_sphere2=this.ab_sphere*this.ab_sphere,this.P3Dab_eyedir.DotProductSetP(this.P3Dab_eye,1/this.ab_zoom),this.ab_edge=this.ab_sphere2/this.ab_zoom,this.ab_glp=i.slice(),this.ab_glm=r.slice(),this.ab_glv=s.slice()}},{key:"XxrRze",value:function(t,e){var i,r,s,o;i=(this.ab_edge-this.ab_zoom)/this.P3Dab_eyedir.ScalarProduct(t),this.P3DTempa.SetV(this.P3Dab_eye.x+t.x*i,this.P3Dab_eye.y+t.y*i,this.P3Dab_eye.z+t.z*i),this.P3DTempc.SetV(this.P3Dab_eyedir.x*this.ab_edge-this.P3DTempa.x,this.P3Dab_eyedir.y*this.ab_edge-this.P3DTempa.y,this.P3Dab_eyedir.z*this.ab_edge-this.P3DTempa.z),r=this.P3DTempa.ScalarProduct(this.P3DTempc),s=this.P3DTempc.ScalarProduct(this.P3DTempc),o=(0-r-Math.sqrt(r*r-s*(this.P3DTempa.ScalarProduct(this.P3DTempa)-this.ab_sphere2)))/s,e.SetV(this.P3DTempa.x+this.P3DTempc.x*o,this.P3DTempa.y+this.P3DTempc.y*o,this.P3DTempa.z+this.P3DTempc.z*o),e.Normalize()}},{key:"XAnz1o",value:function(t,e,i){var r,s,o,n,h=a.b.GluUnProject(t,e,0,this.ab_glm,this.ab_glp,this.ab_glv,0,this.axyz);h[0]?(this.axyz=h[1],this.P3DTempm.SetV(this.axyz[0]-this.P3Dab_eye.x,this.axyz[1]-this.P3Dab_eye.y,this.axyz[2]-this.P3Dab_eye.z),r=this.P3DTempm.ScalarProduct(this.P3DTempm),(o=(s=this.P3Dab_eye.ScalarProduct(this.P3DTempm))*s-r*(this.ab_zoom2-this.ab_sphere2))<=0?this.XxrRze(this.P3DTempm,i):(n=(0-s-Math.sqrt(o))/r,i.SetV(this.P3Dab_eye.x+this.P3DTempm.x*n,this.P3Dab_eye.y+this.P3DTempm.y*n,this.P3Dab_eye.z+this.P3DTempm.z*n),i.Normalize())):this.axyz=h[1]}},{key:"XQw9vR",value:function(t,e,i){var r,s,o,n,h=a.b.GluUnProject(t,e,0,this.ab_glm,this.ab_glp,this.ab_glv,0,this.axyz);this.axyz=h[1],this.P3DTempm.SetV(this.axyz[0]-this.P3Dab_eye.x,this.axyz[1]-this.P3Dab_eye.y,this.axyz[2]-this.P3Dab_eye.z),r=this.P3DTempm.ScalarProduct(this.P3DTempm);var l=!((o=(s=this.P3Dab_eye.ScalarProduct(this.P3DTempm))*s-r*(this.ab_zoom2-this.ab_sphere2))<=0);return n=(0-s-Math.sqrt(o))/r,i.SetV(this.P3Dab_eye.x+this.P3DTempm.x*n,this.P3Dab_eye.y+this.P3DTempm.y*n,this.P3Dab_eye.z+this.P3DTempm.z*n),i.Normalize(),l}},{key:"XHzajI",value:function(t){this.TempMatrix44=a.b.Quat2Matrix4(this.ab_quat),a.b.EulFromHMatrix(this.TempMatrix44,a.b.EulOrdXYZs(),this.TEULTempeo,t)}},{key:"XCCjZL",value:function(t){this.XHzajI(t),isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||!isFinite(t.x)||!isFinite(t.y)||!isFinite(t.z)?(this.ab_quat=this.ab_save.slice(),this.ab_last=this.ab_save.slice(),this.XHzajI(t)):this.ab_save=this.ab_quat.slice()}},{key:"Xoxggp",value:function(t,e){this.ab_last=this.ab_quat.slice(),this.P2Dab_start_pix.SetV(t,e),this.XAnz1o(t,e,this.P3Dab_start)}},{key:"XTuqig",value:function(t,e){var i=0;return this.P2Dab_cur_pix.SetV(t,e),this.XAnz1o(t,e,this.P3Dab_curr),this.P3Dab_curr.isEqualSp(this.P3Dab_start)||this.P2Dab_start_pix.Dist2DP(this.P2Dab_cur_pix)<2?this.ab_quat=this.ab_last.slice():(i=a.b.GetRotationMatrix(this.P3Dab_start,this.P3Dab_curr,this.ab_next,this.P3Dtempcross),a.b.quatnext(this.ab_quat,this.ab_last,this.ab_next)),i}},{key:"X6qDKp",value:function(t){a.b.GetRotationMatrixByAngle(this.P3Dab_start,this.P3Dab_curr,this.ab_next,this.P3Dtempcross,t)}},{key:"X7svDC",value:function(t,e,i,r){this.ab_last=this.ab_quat.slice(),Object.assign(this.P3Dab_curr,e);var s=a.b.FlyGetRotationMatrix(t,this.P3Dab_curr,i,r,this.ab_next,this.P3Dtempcross);return a.b.quatnext(this.ab_quat,this.ab_last,this.ab_next),s}},{key:"XEbdK1",value:function(t,e,i){this.ab_last=this.ab_quat.slice(),Object.assign(this.P3Dab_curr,e),a.b.FlyGetRotationMatrix2(t,this.P3Dab_curr,i,this.ab_next,this.P3Dtempcross),a.b.quatnext(this.ab_quat,this.ab_last,this.ab_next)}},{key:"XoSvVY",value:function(t,e,i){a.b.GeoTo3DP(e,h.z.GLOBE_RADIUS_K,this.C13D),this.C13D.Normalize(),a.b.GeoTo3DP(i,h.z.GLOBE_RADIUS_K,this.C23D),this.C23D.Normalize(),a.b.FlyGetRotationAngle(this.C13D,this.C23D,0),a.b.FlyGetRotationMatrix2(this.C23D,this.C13D,a.b.DegreeToRadyan(0),this.ab_quat,this.P3Dtempcross),a.b.EulFromHMatrix(a.b.Quat2Matrix4(this.ab_quat),a.b.EulOrdXYZs(),this.TEULTempeo,this.FGlobe.ea),a.b.Rot3D_ToGeo(this.C13D,this.FGlobe.ea,this.FGlobe.TNPoint,this.FGlobe.Tempstart,t),t.ConvertRadyanToDegree()}},{key:"XkHTjt",value:function(t,e,i,r,s){var o;a.b.GeoTo3D(e,i,h.z.GLOBE_RADIUS_K,this.C13D),this.C13D.Normalize(),a.b.GeoTo3D(r,s,h.z.GLOBE_RADIUS_K,this.C23D),this.C23D.Normalize(),o=a.b.FlyGetRotationAngle(this.C13D,this.C23D),a.b.FlyGetRotationMatrix2(this.C23D,this.C13D,a.b.DegreeToRadyan(o/2),this.Mid_ab_quat,this.P3Dtempcross),a.b.EulFromHMatrix(a.b.Quat2Matrix4(this.Mid_ab_quat),a.b.EulOrdXYZs(),this.TEULTempeo,this.ea),a.b.Rot3D_ToGeo(this.C13D,this.ea,this.FGlobe.TNPoint,this.FGlobe.Tempstart,t),t.ConvertRadyanToDegree()}},{key:"XwIltl",value:function(t,e,i){a.b.GeoTo3DP(e,h.z.GLOBE_RADIUS_K,this.C13D),this.C13D.Normalize(),a.b.GeoTo3DP(i,h.z.GLOBE_RADIUS_K,this.C23D),this.C23D.Normalize(),a.b.FlyGetRotationAngle(this.C13D,this.C23D,0),a.b.FlyGetRotationMatrix2(this.C23D,this.C13D,a.b.DegreeToRadyan(0),this.ab_quat,this.P3Dtempcross),this.TempMatrix44=a.b.Quat2Matrix4(this.ab_quat),a.b.EulFromHMatrix(this.TempMatrix44,a.b.EulOrdXYZs(),this.TEULTempeo,this.FGlobe.ea),a.b.Rot3D_ToGeo(this.C13D,this.FGlobe.ea,this.TNPoint,this.Tempstart,t)}}]),t}(),u=function(){function t(e,i){s()(this,t),this.screenLocation=[],this.curPointer=-1,this.maxSavedScrLocNmbr=100,this.FGlobe=e,this.doPrevPos=!1,this.doNextPos=!1,this.FCamera=i}return n()(t,[{key:"XF471F",value:function(){this.screenLocation.length=0,this.curPointer=-1}},{key:"goToPrevPos",value:function(){if(this.isPrevAvailable()){this.doNextPos&&(this.doNextPos=!1,this.doPrevPos=!0,this.curPointer--);var t=this.screenLocation[this.curPointer];this.screenLocation.length-1===this.curPointer&&(this.screenLocation[this.curPointer+1]=this.FCamera.GetDirectPosNatural(),this.doPrevPos=!0),this.FCamera.SetDirectPosNatural(t),this.curPointer--}}},{key:"goToNextPos",value:function(){if(this.isNextAvailable()){this.doPrevPos?(this.doPrevPos=!1,this.doNextPos=!0,this.curPointer+=2):this.curPointer++;var t=this.screenLocation[this.curPointer];this.FCamera.SetDirectPosNatural(t)}}},{key:"isPrevAvailable",value:function(){return this.curPointer>-1}},{key:"isNextAvailable",value:function(){return this.curPointer<this.screenLocation.length-1}},{key:"SaveLastScreenPosition",value:function(){this.curPointer++,this.screenLocation[this.curPointer]=this.FCamera.GetDirectPosNatural(),this.screenLocation.length-1>this.curPointer&&(this.screenLocation.length=this.curPointer+1),this.screenLocation.length>this.maxSavedScrLocNmbr&&(this.screenLocation.shift(),this.curPointer--)}}]),t}();i.d(e,"a",function(){return c});var d=0,c=function(){function t(e){s()(this,t),this.FArcBall=new l(e),this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,this.FDist=h.z.GLOBE_START_DIST_Yatay,this.TempNewPoint=new a.C(0,0),this.FCamZ=0,this.FCamLongLat=new a.u(0,0),this.tempeye=new a.w(0,0,0),this.FNewDist=0,this.FGlobe=e,this.FDeltaDist=0,this.FNewDistSmall=0,this.FOrbitFound=!1,this.FCamMode=d,this.FFLYMODE=!1,this.InTurnOrRotate=!1,this.TurnTimer=null,this.GlobalTimerPERIODms=15,this.FSAVE_FTILT_ROT_DEGREE=0,this.FSAVE_FDist=0,this.FSAVE_FCamZ=0,this.FFlyTo=new a.u(0,0),this.FDBL_CLICK_FLY_DIST=0,this.TempSpacePos=new a.w(0,0,0),this.FFlyLL=new a.u(0,0),this.FFlyUR=new a.u(0,0),this.TEST_ea=new a.s(0,0,0,0),this.TempMatrix44=[new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(4)],this.Tempeo=new a.D,this.OldPoint=new a.C(0,0),this.Tempstart=new a.w(0,0,0),this.Tempcross=new a.w(0,0,0),this.camResult=new a.w(0,0,0),this.camResult2=new a.w(0,0,0),this.FMidTurnAngle=0,this.FDistStop=!1,this.FStartTurnAngleDeg=0,this.FFLY_FINAL_DIST=0,this.FFLY_TOP_DIST=0,this.FFlyNorthAngleDeg=0,this.FlyREADY=!1,this.FlyTotalAng=0,this.FFlyStartAngleDeg=0,this.FCompassAzimutRad=0,this.FZOOM_K=0,this.FZOOM_IN=!1,this.FZOOM_MIDROTANG=0,this.OnFlyStopNatural=null,this.FDeltaPix=void 0,this.GMaxDistMul2=2*h.z.GLOBE_MAX_DIST,this.FFlyToReTried=!1,this.FScreenLocPrevNext=new u(this.FGlobe,this),this.Xsyf3Z=this.Xsyf3Z.bind(this),this.X7JdFN=this.X7JdFN.bind(this),this.XpsTND=this.XpsTND.bind(this),this.XpuBLt=this.XpuBLt.bind(this),this.X3Trux=this.X3Trux.bind(this),this.XekbHI=this.XekbHI.bind(this),this.XnVYlO=this.XnVYlO.bind(this),this.XGJFyI=this.XGJFyI.bind(this),this.Xnhytt=this.Xnhytt.bind(this),this.XZYLjj=this.XZYLjj.bind(this),this.XFy1zP=this.XFy1zP.bind(this),this.XD1cAQ=this.XD1cAQ.bind(this),this.OnToTilt3D2D=this.OnToTilt3D2D.bind(this),this.XK2Uw7=this.XK2Uw7.bind(this)}return n()(t,[{key:"XpuBLt",value:function(){this.FGlobe.checkReduction=!0,this.FStartTurnAngleDeg*=h.z.GLOBE_ROTATION_VALUE;var t=this.XcttbF()/this.GMaxDistMul2;if(this.FGlobe.CameraChanged(),Math.abs(this.FStartTurnAngleDeg)<t)return this.X9VnrD(!1),void this.FGlobe.DrawRender();this.FArcBall.X6qDKp(a.b.DegreeToRadyan(this.FStartTurnAngleDeg)),this.FArcBall.ab_last=this.FArcBall.ab_quat.slice(),a.b.quatnext(this.FArcBall.ab_quat,this.FArcBall.ab_last,this.FArcBall.ab_next),this.Xvfbh5(),this.FGlobe.DrawRender()}},{key:"X3Trux",value:function(){this.FGlobe.checkReduction=!0,this.InTurnOrRotate=!0;var t=this.FMidTurnAngle*a.I;Object.assign(this.FArcBall.P3Dab_start,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_start.Normalize(),this.Tempcross.DotProductSetP(this.FArcBall.P3Dab_start,Math.sin(t)),a.b.quaternion(this.FArcBall.ab_next,this.Tempcross.x,this.Tempcross.y,this.Tempcross.z,Math.cos(t)),this.FArcBall.ab_last=this.FArcBall.ab_quat.slice(),a.b.quatnext(this.FArcBall.ab_quat,this.FArcBall.ab_last,this.FArcBall.ab_next),this.XU8DoL(),this.FGlobe.CameraChanged(),this.FGlobe.DrawRender()}},{key:"XekbHI",value:function(){this.FGlobe.checkReduction=!0,this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize();var t=this.XcttbF()/this.GMaxDistMul2,e=!this.FArcBall.X7svDC(this.TempSpacePos,this.FArcBall.P3Dab_curr,15,t);this.FDistStop||(this.FDist>this.FDBL_CLICK_FLY_DIST?(this.FDist-=this.FDeltaDist,this.FDistStop=this.Xvfbh5()):this.FDistStop=!0),this.FGlobe.CameraChanged(),e&&this.FDistStop&&(this.Xvfbh5(),this.X9VnrD(!1)),this.Xvfbh5(),this.FGlobe.DrawRender()}},{key:"XnVYlO",value:function(){this.Xa74Bc(),this.FZOOM_IN?this.FDist+=this.FGlobe.X0hEl5()*-this.FZOOM_K/10:this.FDist+=this.FGlobe.X0hEl5()*this.FZOOM_K/10,this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulFromHMatrix(this.TempMatrix44,a.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea),this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.XcttbF()>h.z.GLOBE_MIN_DIST?this.FGlobe.X0hEl5()<h.z.GLOBE_MIN_DIST&&(this.FDist=this.FGlobe.X0hEl5()+this.FGlobe.FDistOrbit,this.X9VnrD(!1)):(this.XNiKsM(),this.X9VnrD(!1)),this.FDist>h.z.GLOBE_MAX_DIST&&(this.FDist=h.z.GLOBE_MAX_DIST,this.X9VnrD(!1)),this.FZOOM_K*=.97,this.FZOOM_K<.01&&this.X9VnrD(!1),this.FZOOM_MIDROTANG*=.94,Math.abs(this.FZOOM_MIDROTANG)>.1&&this.XaCY4d(this.FZOOM_MIDROTANG,!1),this.FGlobe.DrawRender()}},{key:"FixnorthAngle",value:function(t){return t>0?t>180&&(t=t%360==0?0:t%180-180):t<-180&&(t=t%360==0?0:180+t%180),t}},{key:"X99ZRj",value:function(t){this.X9VnrD(!1);var e=this.FGlobe;t=this.FixnorthAngle(t),e.ea.x=a.b.DegreeToRadyan(t),a.b.EulToHMatrix(e.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),this.XU8DoL(),e.DrawRender()}},{key:"TurnToNorthAngle",value:function(t){this.X9VnrD(!1),t=this.FixnorthAngle(t),this.DestinationCompassRadyan=a.b.DegreeToRadyan(t),this.TurnTimer=setInterval(this.XK2Uw7,this.GlobalTimerPERIODms)}},{key:"XK2Uw7",value:function(){var t=this.FGlobe;t.CameraChanged(),Math.abs(t.ea.x-this.DestinationCompassRadyan)>Math.PI?t.ea.x+=(t.ea.x-this.DestinationCompassRadyan)/15:t.ea.x-=(t.ea.x-this.DestinationCompassRadyan)/15,a.b.EulToHMatrix(t.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),Math.abs(a.b.RadyanToDegree(t.ea.x)-a.b.RadyanToDegree(this.DestinationCompassRadyan))<.99&&this.X9VnrD(!1),this.XU8DoL(),t.DrawRender()}},{key:"XGJFyI",value:function(){var t=this.FGlobe;this.FGlobe.CameraChanged(),Math.abs(t.ea.x-this.FCompassAzimutRad)>Math.PI?t.ea.x+=(t.ea.x-this.FCompassAzimutRad)/15:t.ea.x-=(t.ea.x-this.FCompassAzimutRad)/15,t.ea.x>Math.PI&&(t.ea.x-=2*Math.PI),t.ea.x<-Math.PI&&(t.ea.x+=2*Math.PI),a.b.EulToHMatrix(t.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),Math.abs(a.b.RadyanToDegree(t.ea.x)-a.b.RadyanToDegree(this.FCompassAzimutRad))<.99&&this.X9VnrD(!1),this.XU8DoL(),t.DrawRender()}},{key:"SetNorthAngle",value:function(t){t>0?t>180&&(t=t%180-180):t>-180&&(t=180+t%180),this.X9VnrD(!1);var e=this.FGlobe;e.ea.x=a.b.DegreeToRadyan(t),a.b.EulToHMatrix(e.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),this.XU8DoL(),e.DrawRender()}},{key:"Xnhytt",value:function(){var t,e,i,r,s,o,n,l=this.FGlobe;this.FlyREADY?(this.FGlobe.checkReduction=!0,t=!1,l.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,l.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),o=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr),this.FlyTotalAng<this.FFlyStartAngleDeg?(n=this.XcttbF()/h.z.GLOBE_RADIUS/h.z.GLOBE_FLYTO_TURN_DIV,a.b.RadyanToDegree(n)>o&&(n=a.b.DegreeToRadyan(o)),this.FArcBall.XEbdK1(this.TempSpacePos,this.FArcBall.P3Dab_curr,n),this.FlyTotalAng+=a.b.RadyanToDegree(n),a.b.CSVerySuperZero(o)&&(t=!0,this.FlyTotalAng=this.FFlyStartAngleDeg)):o>1e-4?this.FlyREADY=!1:t=!0,this.FDistStop=!0,(s=a.b.CSSuperZero(this.FFlyStartAngleDeg)?180:this.FlyTotalAng/this.FFlyStartAngleDeg*360)<180?(a.b.CSRotate(a.b.DegreeToRadyan(s),0,0,this.FFLY_TOP_DIST/2,0,this.TempNewPoint),r=this.TempNewPoint.Dist2DV(this.FFLY_TOP_DIST/2,0)+this.FCamZ,r=a.b.Min(r,h.z.GLOBE_MAX_DIST),this.FDist<r?this.FDist=r:this.FDist>this.FFLY_TOP_DIST+this.FCamZ&&(this.FDist-=(this.FDist-(this.FFLY_TOP_DIST+this.FCamZ))/10)):(a.b.CSRotate(a.b.DegreeToRadyan(s),0,0,this.FFLY_TOP_DIST/2,0,this.TempNewPoint),r=this.TempNewPoint.Dist2DV(this.FFLY_TOP_DIST/2,0)+this.FCamZ,this.FDist=a.b.Max(this.FFLY_FINAL_DIST+this.FCamZ,r),this.FDist=a.b.Min(this.FDist,h.z.GLOBE_MAX_DIST),a.b.CSZero(this.FDist-h.z.GLOBE_MAX_DIST)&&(this.FDist=this.FFLY_FINAL_DIST+this.FCamZ)),this.FTILT_ROT_DEGREE*=.9,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE?(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,e=!0):e=!1,t&&this.FDistStop&&e?(i=Math.abs(a.b.RadyanToDegree(l.ea.x)-this.FFlyNorthAngleDeg)<.5)||(a.b.RadyanToDegree(l.ea.x)>this.FFlyNorthAngleDeg?l.ea.x-=a.b.Max(Math.abs(a.b.DegreeToRadyan(a.b.RadyanToDegree(l.ea.x)-this.FFlyNorthAngleDeg))/10,a.b.DegreeToRadyan(.05)):l.ea.x+=a.b.Max(Math.abs(a.b.DegreeToRadyan(a.b.RadyanToDegree(l.ea.x)-this.FFlyNorthAngleDeg))/10,a.b.DegreeToRadyan(.05)),a.b.EulToHMatrix(l.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44)):i=!1,this.FGlobe.CameraChanged(),t&&this.FDistStop&&e&&i&&(this.FDist=a.b.Max(this.FFLY_FINAL_DIST+this.FCamZ,h.z.GLOBE_MIN_DIST),this.SetTilt3D2D(this.TiltAngleDeg,h.z.GLOBE_FLYTO_TILT3D2D))):(this.FGlobe.checkReduction=!0,l.ea.x-=l.ea.x/10,a.b.EulToHMatrix(l.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),i=Math.abs(a.b.RadyanToDegree(l.ea.x))<.3,this.FTILT_ROT_DEGREE*=.9,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE?(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,e=!0):e=!1,this.FlyREADY=e&&i,this.FlyREADY&&(l.XWWWVg(),l.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,l.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),this.FFlyStartAngleDeg=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr),this.FFLY_TOP_DIST=a.b.Min(this.FFLY_FINAL_DIST+h.z.GLOBE_RADIUS*a.b.DegreeToRadyan(this.FFlyStartAngleDeg)*2,h.z.GLOBE_MAX_DIST),this.FlyTotalAng=0)),l.DrawRender()}},{key:"SetTilt3D2D",value:function(t,e){this.X9VnrD(!1),this.FGlobe.XWWWVg(),this.FTiltToNewAngle=t,this.FTiltToNewAngle<h.z.GLOBE_MIN_TILTANGLE&&(this.FTiltToNewAngle=h.z.GLOBE_MIN_TILTANGLE),this.FTiltToNewAngle>h.z.GLOBE_MAX_TILTANGLE&&(this.FTiltToNewAngle=h.z.GLOBE_MAX_TILTANGLE),this.FTiltToNewAngle>this.FTILT_ROT_DEGREE?(this.FTiltToNewK=e,this.FTiltToNewBigger=!0):(this.FTiltToNewK=e,this.FTiltToNewBigger=!1),this.TurnTimer=setInterval(this.OnToTilt3D2D,this.GlobalTimerPERIODms)}},{key:"OnToTilt3D2D",value:function(){var t,e,i,r,s,o,n;this.FGlobe.CameraChanged(),this.FGlobe.XWWWVg(),this.FTiltToNewAngle>this.FTILT_ROT_DEGREE?this.FTiltToNewBigger=!0:this.FTiltToNewBigger=!1,a.b.CSZero(this.FGlobe.FOrbit.MouseZ)?this.CalcTilt():(o=this.GetCalcTiltAng(),a.b.CSRotate(o*a.I,0,0,this.FGlobe.FNewEye.x,this.FGlobe.FNewEye.z,this.FGlobe.TNPoint),a.b.CalcPosition(this.FGlobe.Tempp2,this.FGlobe.NullTCoor2,this.FGlobe.TNPoint,-3*h.z.GLOBE_RADIUS,0),this.FGlobe.mCircleIntersect.IntersectCircle(this.FGlobe.TNPoint.y,this.FGlobe.TNPoint.x,this.FGlobe.Tempp2.y,this.FGlobe.Tempp2.x,-h.z.GLOBE_RADIUS-this.FGlobe.FDeltaXOrbit,this.FGlobe.FDeltaYOrbit,h.z.GLOBE_RADIUS),this.FGlobe.TNPoint.x<=0&&2===this.FGlobe.mCircleIntersect.ICnt?(this.FGlobe.Tempc1.SetV(this.FGlobe.mCircleIntersect.Ix1,this.FGlobe.mCircleIntersect.Iy1),this.FGlobe.Tempc2.SetV(this.FGlobe.mCircleIntersect.Ix2,this.FGlobe.mCircleIntersect.Iy2),this.FGlobe.Tempc2.Dist2DT(this.FGlobe.NullTCoor2)<this.FGlobe.Tempc1.Dist2DT(this.FGlobe.NullTCoor2)&&Object.assign(this.FGlobe.Tempc1,this.FGlobe.Tempc2),this.FGlobe.TempNewOrbit.x=this.FGlobe.Tempc1.y+h.z.GLOBE_RADIUS+this.FGlobe.FDeltaXOrbit,this.FGlobe.TempNewOrbit.y=0,this.FGlobe.TempNewOrbit.z=this.FGlobe.Tempc1.x-this.FGlobe.FDeltaYOrbit,t=this.FGlobe.FOrbit.SpacePoint.LayMagnitude(),i=this.FGlobe.Tempc1.LayMagnitude(),e=a.b.Sqrt(i),r=h.z.GLOBE_RADIUS,(s=180-a.b.RadyanToDegree(Math.acos((t-i-r*r)/(-2*e*r))))>=0&&s<h.z.GLOBE_MAX_TILTANGLE+a.z?(this.Xa74Bc(),this.FTILT_ROT_DEGREE=s,this.FDist=this.FGlobe.Tempc1.Dist2DT(this.FGlobe.TNPoint),n=Math.abs(this.FTiltToNewAngle-this.FTILT_ROT_DEGREE)<1,this.XcttbF()>h.z.GLOBE_MIN_DIST?(this.FGlobe.TempFab_curr.x=1,this.FGlobe.TempFab_curr.y=0,this.FGlobe.TempFab_curr.z=0,this.FGlobe.TempNewOrbit.Normalize(),a.b.GetRotationMatrix(this.FGlobe.TempNewOrbit,this.FGlobe.TempFab_curr,this.FGlobe.FLast_ab_next,this.FGlobe.tempcross),this.FArcBall.ab_last=this.FArcBall.ab_quat.slice(),a.b.quatnext(this.FArcBall.ab_quat,this.FArcBall.ab_last,this.FGlobe.FLast_ab_next),n&&this.X9VnrD(!1)):(this.XNiKsM(),this.X9VnrD(!1))):this.X9VnrD(!1)):this.X9VnrD(!1)),this.FGlobe.DrawRender()}},{key:"GetCalcTiltAng",value:function(){return this.FTiltToNewBigger?-this.FTiltToNewK:this.FTiltToNewK}},{key:"CalcTilt",value:function(){var t;this.Xa74Bc(),this.FTiltToNewBigger?(this.FTILT_ROT_DEGREE+=this.FTiltToNewK,this.FTILT_ROT_DEGREE>this.FTiltToNewAngle?(this.FTILT_ROT_DEGREE=this.FTiltToNewAngle,t=!0):t=!1):(this.FTILT_ROT_DEGREE-=this.FTiltToNewK,this.FTILT_ROT_DEGREE<this.FTiltToNewAngle?(this.FTILT_ROT_DEGREE=this.FTiltToNewAngle,t=!0):t=!1),this.XcttbF()>h.z.GLOBE_MIN_DIST?t&&this.X9VnrD(!1):(this.XNiKsM(),this.X9VnrD(!1))}},{key:"XpsTND",value:function(){this.FGlobe.checkReduction=!0,this.FTILT_ROT_DEGREE*=1.15,this.XU8DoL()?(this.FTILT_ROT_DEGREE/=1.15,this.X9VnrD(!1)):(this.FTILT_ROT_DEGREE>=this.TiltAngleDeg&&(this.FTILT_ROT_DEGREE=this.TiltAngleDeg,this.X9VnrD(!1)),this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE&&(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE),this.FTILT_ROT_DEGREE>h.z.GLOBE_MAX_TILTANGLE&&(this.FTILT_ROT_DEGREE=h.z.GLOBE_MAX_TILTANGLE))}},{key:"XZYLjj",value:function(){var t,e,i,r,s,o,n;this.FGlobe.CameraChanged(),this.FlyREADY?(this.FGlobe.checkReduction=!0,t=!1,this.FlyTotalAng<this.FFlyStartAngleDeg?(o=this.XcttbF()/h.z.GLOBE_RADIUS/h.z.GLOBE_FLYTO_TURN_DIV,this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),s=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr),a.b.RadyanToDegree(o)>s&&(o=a.b.DegreeToRadyan(s)),this.FArcBall.XEbdK1(this.TempSpacePos,this.FArcBall.P3Dab_curr,o),this.FlyTotalAng+=a.b.RadyanToDegree(o),a.b.CSVerySuperZero(s)&&(t=!0,this.FlyTotalAng=this.FFlyStartAngleDeg)):s>1e-5?this.FlyReady=!1:t=!0,this.FDistStop=!0,(r=a.b.CSSuperZero(this.FFlyStartAngleDeg)?180:this.FlyTotalAng/this.FFlyStartAngleDeg*360)<180?(a.b.CSRotate(a.b.DegreeToRadyan(r),0,0,this.FFLY_TOP_DIST/2,0,this.TempNewPoint),i=this.TempNewPoint.Dist2DV(this.FFLY_TOP_DIST/2,0)+this.FCamZ,i=a.b.Min(i,h.z.GLOBE_MAX_DIST),this.FDist<i?this.FDist=i:this.FDist>this.FFLY_TOP_DIST+this.FCamZ&&(this.FDist-=(this.FDist-(this.FFLY_TOP_DIST+this.FCamZ))/10)):(a.b.CSRotate(a.b.DegreeToRadyan(r),0,0,this.FFLY_TOP_DIST/2,0,this.TempNewPoint),i=this.TempNewPoint.Dist2DV(this.FFLY_TOP_DIST/2,0)+this.FCamZ,this.FDist=a.b.Max(this.FFLY_FINAL_DIST+this.FCamZ,i),this.FDist=a.b.Min(this.FDist,h.z.GLOBE_MAX_DIST),a.b.CSZero(this.FDist-h.z.GLOBE_MAX_DIST)&&(this.FDist=this.FFLY_FINAL_DIST+this.FCamZ)),this.FTILT_ROT_DEGREE*=.8,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE?(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,e=!0):e=!1,t&&this.FDistStop&&e?(this.FGlobe.ea.x-=this.FGlobe.ea.x/10,a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),n=Math.abs(a.b.RadyanToDegree(this.FGlobe.ea.x))<.1):n=!1,t&&this.FDistStop&&e&&n&&(this.FDist=a.b.Max(this.FFLY_FINAL_DIST+this.FCamZ,h.z.GLOBE_MIN_DIST),this.X9VnrD(!1)),this.FGlobe.DrawRender()):(this.FGlobe.checkReduction=!0,this.FGlobe.ea.x-=this.FGlobe.ea.x/10,a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),n=Math.abs(a.b.RadyanToDegree(this.FGlobe.ea.x))<.5,this.FTILT_ROT_DEGREE*=.9,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE?(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,e=!0):e=!1,this.FlyREADY=e&&n,this.FlyREADY&&(this.FGlobe.XWWWVg(),this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),this.FFlyStartAngleDeg=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr),this.FFLY_TOP_DIST=a.b.Min(this.FFLY_FINAL_DIST+h.z.GLOBE_RADIUS*a.b.DegreeToRadyan(this.FFlyStartAngleDeg)*2.5,h.z.GLOBE_MAX_DIST),this.FlyTotalAng=0))}},{key:"XFy1zP",value:function(t,e,i){if(this.FGlobe.checkReduction=!0,this.Xa74Bc(),this.FDist-=this.FDeltaDist,this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.FGlobe.ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.XcttbF()>h.z.GLOBE_MIN_DIST){if(this.FNewDistSmall){if(this.FDist<this.FNewDist&&(this.FGlobe.MouseMode=h.D,this.FGlobe.CameraChanged(),this.X9VnrD(!1),this.FGlobe.UserEvents.zoomend&&this.FGlobe.X9IioP("zoomend",e,i,t)))return}else if(this.FDist>this.FNewDist&&(this.FGlobe.MouseMode=h.D,this.FGlobe.CameraChanged(),this.X9VnrD(!1),this.FGlobe.UserEvents.zoomend&&this.FGlobe.X9IioP("zoomend",e,i,t)))return}else if(this.XNiKsM(),this.FGlobe.MouseMode=h.D,this.X9VnrD(!1),this.FGlobe.UserEvents.zoomend&&this.FGlobe.X9IioP("zoomend",e,i,t))return;this.FGlobe.DrawRender()}},{key:"XD1cAQ",value:function(){this.FGlobe.checkReduction=!0,this.Xa74Bc(),this.FDist+=this.FGlobe.X0hEl5()*this.FDeltaPix/1e3,this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.FGlobe.ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.FGlobe.CameraChanged(),this.XcttbF()>h.z.GLOBE_MIN_DIST?this.FGlobe.X0hEl5()<h.z.GLOBE_MIN_DIST&&(this.FDist=this.FGlobe.FDistOrbit+this.FGlobe.X0hEl5(),this.X9VnrD(!1)):(this.XNiKsM(),this.X9VnrD(!1)),this.FDist>h.z.GLOBE_MAX_DIST&&(this.FDist=h.z.GLOBE_MAX_DIST,this.X9VnrD(!1)),this.FGlobe.DrawRender()}},{key:"Xv8FQl",value:function(){return this.OldPoint.x=1,this.OldPoint.y=0,a.b.CSRotate(-this.FFLY_TILT_DEGREE*a.I,0,0,this.OldPoint.y,this.OldPoint.x,this.TempNewPoint),this.camResult.SetV(this.TempNewPoint.y,0,this.TempNewPoint.x),this.camResult}},{key:"X1dDLB",value:function(){return this.Xv8FQl(),this.OldPoint.x=0,this.OldPoint.y=1,a.b.CSRotate(-this.FFLY_TILT_DEGREE*a.I,0,0,this.OldPoint.y,this.OldPoint.x,this.TempNewPoint),this.camResult2.SetV(this.TempNewPoint.y,0,this.TempNewPoint.x),a.b.RotatePointAroundVector(this.camResult2,this.camResult.x,this.camResult.y,this.camResult.z,this.FFLY_ROLL_DEGREE*a.I),this.camResult2}},{key:"XgSaWh",value:function(t,e,i,r,s,o){this.X4mgWW()&&this.X9VnrD(!1),this.FGlobe.ea.x=a.b.DegreeToRadyan(r),this.FGlobe.ea.y=-a.b.DegreeToRadyan(e),this.FGlobe.ea.z=a.b.DegreeToRadyan(t),this.FDist=i*h.z.GLOBE_RADIUS_K,this.FTILT_ROT_DEGREE=s||h.z.GLOBE_MIN_TILTANGLE,this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),this.FFLY_TILT_DEGREE=s,this.FFLY_ROLL_DEGREE=o,this.FFLYMODE=!0}},{key:"SetDirectPosForNoAnimation",value:function(t,e,i,r,s){var o=this;this.FScreenLocPrevNext.SaveLastScreenPosition(),this.X9VnrD(!0),this.FGlobe.ea.x=a.b.DegreeToRadyan(r),this.FGlobe.ea.y=-a.b.DegreeToRadyan(e),this.FGlobe.ea.z=a.b.DegreeToRadyan(t),this.FDist=i,this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),this.XTBKfG();var n=0,l=setInterval(function(){o.FGlobe.checkReduction=!0,o.FGlobe.CameraChanged(),n>=10?(clearInterval(l),l=null):o.XcttbF()<10*h.z.GLOBE_RADIUS_K?o.XTBKfG():(clearInterval(l),l=null,s&&o.FGlobe.api_SetTiltAngle(s)),n++},300)}},{key:"SetRegionDirectPosForNoAnimation",value:function(t,e,i){var r,s=this;this.FScreenLocPrevNext.SaveLastScreenPosition(),this.X9VnrD(!0),r=Math.abs(i)<a.b.CSBigZero(i)?1:i,this.FGlobe.ea.x=0,this.FGlobe.ea.y=-a.b.DegreeToRadyan((t.y+e.y)/2),this.FGlobe.ea.z=a.b.DegreeToRadyan((t.x+e.x)/2),t.ConvertDegreeToRadyan(),e.ConvertDegreeToRadyan(),this.FDist=h.z.GLOBE_RADIUS*t.Dist2DP(e)*.8*(1/r),this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),this.XTBKfG();var o=0,n=setInterval(function(){s.FGlobe.checkReduction=!0,s.FGlobe.CameraChanged(),o>=10?(clearInterval(n),n=null):s.XcttbF()<10*h.z.GLOBE_RADIUS_K?s.XTBKfG():(clearInterval(n),n=null),o++},300)}},{key:"XTBKfG",value:function(){this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulFromHMatrix(this.TempMatrix44,a.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea),this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.XcttbF()<h.z.GLOBE_MIN_DIST&&(this.FDist=this.FCamZ+2*h.z.GLOBE_MIN_DIST),this.FGlobe.DrawRender()}},{key:"X9GwvR",value:function(){this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),this.FArcBall.P3Dab_curr.SetP(this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize();var t=this.XcttbF()/(2*h.z.GLOBE_MAX_DIST),e=!this.FArcBall.X7svDC(this.TempSpacePos,this.FArcBall.P3Dab_curr,30,t);this.FDistStop||(this.FDist>this.FDBL_CLICK_FLY_DIST?(this.FDist-=this.FDeltaDist,this.FDistStop=this.Xvfbh5()):this.FDistStop=!0),e&&this.FDistStop&&this.X9VnrD(!1),this.FGlobe.DrawRender()}},{key:"Xuom4P",value:function(){this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),this.FArcBall.P3Dab_curr.SetP(this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize();var t=this.XcttbF()/this.GMaxDistMul2;if(this.FDistStop);else if(this.FDist<this.FDBL_CLICK_FLY_DIST&&this.FDist<=25512.538057){var e=this.FArcBall.X7svDC(this.TempSpacePos,this.FArcBall.P3Dab_curr,-30,t);this.FDist+=this.FDeltaDist,this.FDistStop=this.Xvfbh5()}else this.FDistStop=!0;e&&this.FDistStop&&this.X9VnrD(!1),this.FGlobe.DrawRender()}},{key:"XDfAc1",value:function(){this.FGlobe.CameraChanged(),this.FGlobe.checkReduction=!0,this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),this.FArcBall.P3Dab_curr.SetP(this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize();var t=this.XcttbF()/(2*h.z.GLOBE_MAX_DIST),e=!this.FArcBall.X7svDC(this.TempSpacePos,this.FArcBall.P3Dab_curr,22,t);this.FDistStop||(this.FDist>this.FDBL_CLICK_FLY_DIST?(this.FDist-=this.FDeltaDist,this.FDistStop=this.Xvfbh5()):this.FDistStop=!0),e&&this.FDistStop&&this.X9VnrD(!1),this.FGlobe.DrawRender()}},{key:"X4mIYD",value:function(){this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),this.FArcBall.P3Dab_curr.SetP(this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize();var t=this.XcttbF()/this.GMaxDistMul2;if(this.FDistStop);else if(this.FDist<this.FDBL_CLICK_FLY_DIST&&this.FDist<=25512.538057){var e=this.FArcBall.X7svDC(this.TempSpacePos,this.FArcBall.P3Dab_curr,-22,t);this.FDist+=this.FDeltaDist,this.FDistStop=this.Xvfbh5()}else this.FDistStop=!0;e&&this.FDistStop&&this.X9VnrD(!1),this.FGlobe.DrawRender()}},{key:"X4mgWW",value:function(){return 5!==this.FCamMode&&1!==this.FCamMode&&this.FCamMode!==d}},{key:"XXA8fM",value:function(){return this.FCamMode!==d}},{key:"IsScreenMoving",value:function(){return this.FCamMode!==d||this.FGlobe.MouseMode!==h.D}},{key:"XWOqNV",value:function(){return(6===this.FCamMode||4===this.FCamMode)&&this.FCamMode!==d}},{key:"XRJtwC",value:function(t,e){this.FOrbitFound=!1,this.X9VnrD(!0);var i=.75*this.FGlobe.X0hEl5();this.FFlyTo.x=t,this.FFlyTo.y=e,this.FDistStop=!1,this.FDeltaDist=i/20,this.FDBL_CLICK_FLY_DIST=this.FDist-i,this.FGlobe.MaxCellCanBeCreated=2,this.X9GwvR(),this.X9GwvR(),this.X9GwvR(),this.X9GwvR()}},{key:"XOj0rq",value:function(t,e){this.FOrbitFound=!1,this.X9VnrD(!0),this.InTurnOrRotate=!0;var i=.75*this.FGlobe.X0hEl5();this.FFlyTo.x=t,this.FFlyTo.y=e,this.FDistStop=!1,this.FDeltaDist=i/20,this.FDBL_CLICK_FLY_DIST=this.FDist+i,this.Xuom4P(),this.Xuom4P(),this.Xuom4P(),this.Xuom4P()}},{key:"Xdsj2p",value:function(){return this.FCamMode!==d}},{key:"XZdm3v",value:function(t){a.b.CSRotate(a.b.DegreeToRadyan(-this.FTILT_ROT_DEGREE),0,0,this.FDist,0,this.TempNewPoint),t.SetV(h.z.GLOBE_RADIUS+this.TempNewPoint.y,0,this.TempNewPoint.x)}},{key:"X7EPyt",value:function(t){a.b.CSRotate(a.b.DegreeToRadyan(-this.FTILT_ROT_DEGREE),0,0,this.FDist,0,this.TempNewPoint),t.SetV(this.TempNewPoint.y,0,this.TempNewPoint.x)}},{key:"XMix0q",value:function(t){a.b.CSRotate(a.b.DegreeToRadyan(-this.FTILT_ROT_DEGREE),0,0,0,1,this.TempNewPoint),t.SetV(this.TempNewPoint.y,0,this.TempNewPoint.x)}},{key:"XcttbF",value:function(){return this.XZdm3v(this.tempeye),this.tempeye.Magnitude()-h.z.GLOBE_RADIUS-this.FCamZ}},{key:"Xdo3vg",value:function(){var t=this.XcttbF(),e=Math.sqrt(2*h.z.GLOBE_RADIUS*t+t*t);return e<.0053333*h.z.GLOBE_RADIUS&&(e=.0053333*h.z.GLOBE_RADIUS),e}},{key:"XbftG0",value:function(){return this.XcttbF()/10}},{key:"Xvfbh5",value:function(){var t=!1,e=0;this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulFromHMatrix(this.TempMatrix44,a.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea);do{if(this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.XcttbF()>h.z.GLOBE_MIN_DIST)break;this.FDist<h.z.GLOBE_MIN_DIST&&(this.FDist=h.z.GLOBE_MIN_DIST),this.FDist+=this.FDist/150,t=!0,e++}while(e<h.z.MAX_REPEAT_CNT);return t}},{key:"XU8DoL",value:function(){var t,e=!1;this.TempMatrix44=a.b.Quat2Matrix4(this.FArcBall.ab_quat),a.b.EulFromHMatrix(this.TempMatrix44,a.b.EulOrdXYZs(),this.Tempeo,this.TEST_ea);do{if(this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.TEST_ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.XcttbF()>h.z.GLOBE_MIN_DIST)break;this.FTILT_ROT_DEGREE-=this.FTILT_ROT_DEGREE/50,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE&&(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE),e=!0,t++}while(t<h.z.MAX_REPEAT_CNT);return e}},{key:"XNiKsM",value:function(){this.FTILT_ROT_DEGREE=this.FSAVE_FTILT_ROT_DEGREE,this.FDist=this.FSAVE_FDist,this.FCamZ=this.FSAVE_FCamZ}},{key:"Xa74Bc",value:function(){this.FSAVE_FTILT_ROT_DEGREE=this.FTILT_ROT_DEGREE,this.FSAVE_FDist=this.FDist,this.FSAVE_FCamZ=this.FCamZ}},{key:"X9VnrD",value:function(t){this.TurnTimer&&(this.FGlobe.MaxCellCanBeCreated=5,this.InTurnOrRotate=!1,clearInterval(this.TurnTimer),delete this.TurnTimer),t&&this.FGlobe.XWWWVg(),this.FCamMode=d}},{key:"XmfOaV",value:function(t,e){this.FOrbitFound=!1,this.X9VnrD(!1),this.InTurnOrRotate=!0,this.FCamMode=1,this.FGlobe.MaxCellCanBeCreated=100,this.FArcBall.Xoxggp(t.x,t.y),this.FStartTurnAngleDeg=this.FArcBall.XTuqig(e.x,e.y),this.TurnTimer=setInterval(this.XpuBLt,this.GlobalTimerPERIODms)}},{key:"XFBdkD",value:function(t){a.b.CSZero(t)||(this.FOrbitFound=!1,this.X9VnrD(!0),this.FCamMode=2,this.FGlobe.MaxCellCanBeCreated=5,this.FMidTurnAngle=t,this.TurnTimer=setInterval(this.X3Trux,this.GlobalTimerPERIODms))}},{key:"XwGkoZ",value:function(t,e){h.y||this.FGlobe.FLastEditingObj||(this.FScreenLocPrevNext.screenLocation.length-=2,this.FScreenLocPrevNext.curPointer-=2),this.FScreenLocPrevNext.SaveLastScreenPosition(),this.FOrbitFound=!1,this.X9VnrD(!0),this.FCamMode=3;var i=.75*this.FGlobe.X0hEl5();this.FFlyTo.x=t,this.FFlyTo.y=e,this.FDistStop=!1,this.FDeltaDist=i/20*h.z.NAVIGATION_SPEED,this.FDBL_CLICK_FLY_DIST=this.FDist-i,this.TurnTimer=setInterval(this.XekbHI,this.GlobalTimerPERIODms)}},{key:"XttjLc",value:function(t,e,i){this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=6,this.FZOOM_K=t,this.FZOOM_IN=e,this.FZOOM_MIDROTANG=.3*i,this.TurnTimer=setInterval(this.XnVYlO,this.GlobalTimerPERIODms)}},{key:"XE6H07",value:function(t){var e=this;this.FScreenLocPrevNext.SaveLastScreenPosition(),this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=4,this.FCompassAzimutRad=-t,this.TurnTimer=setInterval(function(){e.XGJFyI(e.FCompassAzimutRad)},this.GlobalTimerPERIODms)}},{key:"X4GWfp",value:function(t,e){this.FOrbitFound=!1,this.X9VnrD(!0),this.FCamMode=8;var i=.75*this.FGlobe.X0hEl5();this.FFlyTo.x=t,this.FFlyTo.y=e,this.FDistStop=!1,this.FDeltaDist=i/20,this.FDBL_CLICK_FLY_DIST=this.FDist-i,this.FGlobe.MaxCellCanBeCreated=2,this.XDfAc1(),this.XDfAc1(),this.XDfAc1(),this.XDfAc1()}},{key:"SetZoomWheelOutDist",value:function(t,e){this.FOrbitFound=!1,this.X9VnrD(!0),this.FCamMode=8;var i=.75*this.FGlobe.X0hEl5();this.FFlyTo.x=t,this.FFlyTo.y=e,this.FDistStop=!1,this.FDeltaDist=i/20,this.FDBL_CLICK_FLY_DIST=this.FDist+i,this.FGlobe.MaxCellCanBeCreated=100,this.X4mIYD(),this.X4mIYD(),this.X4mIYD(),this.X4mIYD()}},{key:"X2Uggv",value:function(t,e,i,r,s,o){this.FScreenLocPrevNext.SaveLastScreenPosition(),this.X3au1n(t,e,i,r,s,o)}},{key:"X3au1n",value:function(t,e,i,r,s,o){if(this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=5,this.OnFlyStopNatural=o,this.TiltAngleDeg=s,this.FFlyToReTried=!1,this.FFlyTo.x=a.b.DegreeToRadyan(t),this.FFlyTo.y=a.b.DegreeToRadyan(e),this.FGlobe.MaxCellCanBeCreated=2,this.FFLY_FINAL_DIST=i,r<=180+a.z&&r>=-180-a.z)this.FFlyNorthAngleDeg=r;else if(r<-180)for(this.FFlyNorthAngleDeg=r;this.FFlyNorthAngleDeg<-180-a.z;)this.FFlyNorthAngleDeg+=360;else if(r>180)for(this.FFlyNorthAngleDeg=r;this.FFlyNorthAngleDeg>180+a.z;)this.FFlyNorthAngleDeg-=360;else this.FFlyNorthAngleDeg=r;this.FDistStop=!1,this.FlyREADY=!1,this.TurnTimer=setInterval(this.Xnhytt,this.GlobalTimerPERIODms)}},{key:"XKxC74",value:function(t,e,i,r){this.FScreenLocPrevNext.SaveLastScreenPosition(),t.ConvertDegreeToRadyan(),e.ConvertDegreeToRadyan(),Object.assign(this.FFlyLL,t),Object.assign(this.FFlyUR,e),this.FFlyTo.x=(this.FFlyLL.x+this.FFlyUR.x)/2,this.FFlyTo.y=(this.FFlyLL.y+this.FFlyUR.y)/2,Math.abs(i)<a.b.CSBigZero(i)?this.FFlyScale=1:this.FFlyScale=i,this.FFLY_FINAL_DIST=h.z.GLOBE_RADIUS*this.FFlyLL.Dist2DP(this.FFlyUR)*.8*(1/this.FFlyScale),this.FDistStop=!1,this.FlyREADY=!1,this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=9,this.FGlobe.MaxCellCanBeCreated=2,this.TurnTimer=setInterval(this.XZYLjj,this.GlobalTimerPERIODms)}},{key:"XNLNye",value:function(t,e,i,r,s,o){var n=this;e?(t<h.z.GLOBE_MIN_DIST&&(t=h.z.GLOBE_MIN_DIST),t>h.z.GLOBE_MAX_DIST&&(t=h.z.GLOBE_MAX_DIST),this.FNewDist=this.FGlobe.FDistOrbit+t,this.FDeltaDist=(this.FDist-this.FNewDist)/15*h.z.NAVIGATION_SPEED,this.FNewDistSmall=this.FNewDist<this.FDist,this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=8,this.FGlobe.MaxCellCanBeCreated=i<0?2:100,this.TurnTimer=setInterval(function(){n.XFy1zP(r,s,o)},this.GlobalTimerPERIODms)):(this.FGlobe.checkReduction=!0,this.FGlobe.MaxCellCanBeCreated=i<0?2:100,this.Xa74Bc(),this.FDist=this.FGlobe.FDistOrbit+t,this.FDist<h.z.GLOBE_MIN_DIST&&(this.FDist=h.z.GLOBE_MIN_DIST),this.FDist>h.z.GLOBE_MAX_DIST&&(this.FDist=h.z.GLOBE_MAX_DIST),this.XZdm3v(this.tempeye),this.tempeye.Normalize(),a.b.Rot3D_ToGeo(this.tempeye,this.FGlobe.ea,this.TempNewPoint,this.Tempstart,this.FCamLongLat),this.FCamZ=this.FGlobe.XyecYr(this.FCamLongLat,!1),this.XcttbF()<h.z.GLOBE_MIN_DIST&&this.XNiKsM(),e&&this.FGlobe.DrawRender())}},{key:"Xbku9Z",value:function(t){this.FOrbitFound=!1,this.X9VnrD(!1),this.InTurnOrRotate=!0,this.FCamMode=7,this.FDeltaPix=t,this.FDeltaPix>10&&(this.FDeltaPix=30*h.z.NAVIGATION_SPEED),this.FDeltaPix<-10&&(this.FDeltaPix=-30*h.z.NAVIGATION_SPEED),this.TurnTimer=setInterval(this.XD1cAQ,this.GlobalTimerPERIODms)}},{key:"XaCY4d",value:function(t,e){Object.assign(this.FArcBall.ab_start,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.ab_start.Normalize(),this.Tempcross.DotProductSetP(this.FArcBall.ab_start,Math.sin(t*a.I)),a.b.quaternion(this.FArcBall.ab_next,this.Tempcross.x,this.Tempcross.y,this.Tempcross.z,Math.cos(t*a.I)),this.FArcBall.ab_last=this.FArcBall.ab_quat.slice(),a.b.quatnext(this.FArcBall.ab_quat,this.FArcBall.ab_last,this.FArcBall.ab_next),this.XU8DoL(),e&&this.FGlobe.DrawRender()}},{key:"PrivateZoomInToPaperScale",value:function(){this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=5,this.TurnTimer=setInterval(this.Xsyf3Z,this.GlobalTimerPERIODms)}},{key:"Xsyf3Z",value:function(){var t;this.FGlobe.CameraChanged(),this.Xa74Bc(),t=this.FGlobe.scalebar.GetCurrentScale()*h.z.GLOBE_RADIUS_K,Math.abs(this.FFINAL_PAPER_SCALE-t)<.4?this.X9VnrD(!1):(t>this.FFINAL_PAPER_SCALE?this.FDist-=Math.abs(this.FFINAL_PAPER_SCALE-t)/20:this.FDist+=Math.abs(this.FFINAL_PAPER_SCALE-t)/20,this.XcttbF()<h.z.GLOBE_MIN_DIST&&(this.XNiKsM(),this.X9VnrD(!1))),this.FGlobe.DrawRender()}},{key:"SetFlyToPaperScale",value:function(t,e,i){this.FOrbitFound=!1,this.X9VnrD(!1),this.FCamMode=5,this.TiltAngleDeg=0,this.FFlyToReTried=!1,this.FFlyTo.x=a.b.DegreeToRadyan(t),this.FFlyTo.y=a.b.DegreeToRadyan(e),this.FGlobe.MaxCellCanBeCreated=2,this.FFINAL_PAPER_SCALE=i,this.FFLY_FINAL_DIST=i/3,0<=180+a.z&&a.z,this.FFlyNorthAngleDeg=0,this.FDistStop=!1,this.FlyREADY=!1,this.TurnTimer=setInterval(this.X7JdFN,this.GlobalTimerPERIODms)}},{key:"X7JdFN",value:function(){var t,e,i,r,s,o,n;this.FGlobe.CameraChanged(),this.FlyREADY?(t=!1,this.FFlyToReTried||this.FlyTotalAng>.5*this.FFlyStartAngleDeg&&(this.FFlyToReTried=!0,this.FlyREADY=!1),this.FlyTotalAng<this.FFlyStartAngleDeg?(n=this.XcttbF()/h.z.GLOBE_RADIUS/h.z.GLOBE_FLYTO_TURN_DIV,this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),o=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr),a.b.RadyanToDegree(n)>o&&(n=a.b.DegreeToRadyan(o)),this.FArcBall.XEbdK1(this.TempSpacePos,this.FArcBall.P3Dab_curr,n),this.FlyTotalAng+=a.b.RadyanToDegree(n),a.b.CSVerySuperZero(o)&&(t=!0,this.FlyTotalAng=this.FFlyStartAngleDeg)):(this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),(o=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr))>1e-5?this.FlyREADY=!1:t=!0),this.FDistStop=!0,(s=a.b.CSSuperZero(this.FFlyStartAngleDeg)?180:this.FlyTotalAng/this.FFlyStartAngleDeg*360)<180?(a.b.CSRotate(a.b.DegreeToRadyan(s),0,0,this.FFLY_TOP_DIST/2,0,this.TempNewPoint),r=this.TempNewPoint.Dist2DV(this.FFLY_TOP_DIST/2,0)+this.FCamZ,r=a.b.Min(r,h.z.GLOBE_MAX_DIST),this.FDist<r?this.FDist=r:this.FDist>this.FFLY_TOP_DIST+this.FCamZ&&(this.FDist-=(this.FDist-(this.FFLY_TOP_DIST+this.FCamZ))/10)):(a.b.CSRotate(a.b.DegreeToRadyan(s),0,0,this.FFLY_TOP_DIST/2,0,this.TempNewPoint),r=this.TempNewPoint.Dist2DV(this.FFLY_TOP_DIST/2,0)+this.FCamZ,this.FDist=a.b.Max(this.FFLY_FINAL_DIST+this.FCamZ,r),this.FDist=a.b.Min(this.FDist,h.z.GLOBE_MAX_DIST),a.b.CSZero(this.FDist-h.z.GLOBE_MAX_DIST)&&(this.FDist=this.FFLY_FINAL_DIST+this.FCamZ)),this.FTILT_ROT_DEGREE*=.8,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE?(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,e=!0):e=!1,t&&this.FDistStop&&e?h.z.GLOBE_LOCK_NORTH?(this.FGlobe.ea.x=0,a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),i=!0):(i=Math.abs(a.b.RadyanToDegree(this.FGlobe.ea.x)-this.FFlyNorthAngleDeg)<.5)||(a.b.RadyanToDegree(this.FGlobe.ea.x)>this.FFlyNorthAngleDeg?this.FGlobe.ea.x-=a.b.Max(Math.abs(a.b.DegreeToRadyan(a.b.RadyanToDegree(this.FGlobe.ea.x)-this.FFlyNorthAngleDeg))/h.z.GLOBE_FLYTO_NOTRH_DIV,a.b.DegreeToRadyan(.05)):this.FGlobe.ea.x+=a.b.Max(Math.abs(a.b.DegreeToRadyan(a.b.RadyanToDegree(this.FGlobe.ea.x)-this.FFlyNorthAngleDeg))/h.z.GLOBE_FLYTO_NOTRH_DIV,a.b.DegreeToRadyan(.05)),a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44)):i=!1,t&&this.FDistStop&&e&&i&&(this.FDist=a.b.Max(this.FFLY_FINAL_DIST+this.FCamZ,h.z.GLOBE_MIN_DIST),this.FTILT_ROT_DEGREE=this.TiltAngleDeg,this.PrivateZoomInToPaperScale())):(this.FGlobe.checkReduction=!0,h.z.GLOBE_LOCK_NORTH?(this.FGlobe.ea.x=0,a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),i=!0):(this.FGlobe.ea.x-=this.FGlobe.ea.x/h.z.GLOBE_FLYTO_NOTRH_DIV,a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),i=Math.abs(a.b.RadyanToDegree(this.FGlobe.ea.x))<.3),this.FTILT_ROT_DEGREE*=.9,this.FTILT_ROT_DEGREE<h.z.GLOBE_MIN_TILTANGLE?(this.FTILT_ROT_DEGREE=h.z.GLOBE_MIN_TILTANGLE,e=!0):e=!1,this.FlyREADY=e&&i,this.FlyREADY&&(this.FGlobe.XWWWVg(),this.FGlobe.X2Ak8l(this.FFlyTo.x,this.FFlyTo.y,0,this.TempSpacePos),this.TempSpacePos.Normalize(),Object.assign(this.FArcBall.P3Dab_curr,this.FGlobe.FOrbit.SpacePoint),this.FArcBall.P3Dab_curr.Normalize(),this.FFlyStartAngleDeg=a.b.FlyGetRotationAngle(this.TempSpacePos,this.FArcBall.P3Dab_curr),this.FFLY_TOP_DIST=a.b.Min(this.FFLY_FINAL_DIST+h.z.GLOBE_RADIUS*a.b.DegreeToRadyan(this.FFlyStartAngleDeg)*2,h.z.GLOBE_MAX_DIST),this.FlyTotalAng=0)),this.FGlobe.DrawRender()}},{key:"GetCamMSLZ",value:function(){this.XZdm3v(this.tempeye);var t=this.tempeye,e=t.x,i=t.y,r=t.z;return(Math.sqrt(e*e+i*i+r*r)-h.z.GLOBE_RADIUS)/h.z.GLOBE_RADIUS_K}},{key:"GetDirectPosNatural",value:function(){var t=this.FGlobe.ea;return{ea:{x:t.x,y:t.y,z:t.z},dist:this.FDist,tilt:this.FTILT_ROT_DEGREE}}},{key:"SetDirectPosNatural",value:function(t){this.X9VnrD(!1),this.FGlobe.ea.x=t.ea.x,this.FGlobe.ea.y=t.ea.y,this.FGlobe.ea.z=t.ea.z,this.FDist=t.dist,this.FTILT_ROT_DEGREE=t.tilt,a.b.EulToHMatrix(this.FGlobe.ea,this.Tempeo,this.TempMatrix44),this.FArcBall.ab_quat=a.b.Matrix4ToQuat(this.TempMatrix44),this.FGlobe.yGLOBE_DRAWING=!1,this.FGlobe.DrawRender()}}]),t}()},function(t,e,i){"use strict";var r=i(8),s=i.n(r),o=i(2),n=i.n(o),a=i(3),h=i.n(a),l=i(0),u=i(1),d=new Float32Array(18),c=new Float32Array(12),f=function(){function t(e){n()(this,t),this.Active,this.Owner=null,this.tempTextMeasure=0,this.Ctx,this.imCtx,this.fdrawer=e,this.textureCache=e.TextureCache,this.distanceHeigth=0,this.fdVal={halfIcon:0,textHeight:0,textScale:0,iconLx:0,iconLy:0,iconUx:0,iconUy:0,icon:null,TexVertexBuff:[],TexCoordBuff:[],TexBuff:[]},this.gl=e.gl,this.v1x=0,this.v1y=0,this.v2x=0,this.v2y=0,this.tempTextureMeasureCalc=0}return h()(t,[{key:"Clear",value:function(){this.Owner=null,this.gl.deleteTexture(this.fdVal.TexBuff[1]),this.gl.deleteTexture(this.fdVal.TexBuff[2]),this.gl.deleteTexture(this.fdVal.TexBuff[3]),this.gl.deleteTexture(this.fdVal.TexBuff[4]),this.gl.deleteTexture(this.fdVal.TexBuff[5]),this.fdVal.TexBuff.fill(null),this.gl.deleteBuffer(this.fdVal.TexVertexBuff[1]),this.gl.deleteBuffer(this.fdVal.TexVertexBuff[2]),this.gl.deleteBuffer(this.fdVal.TexVertexBuff[3]),this.gl.deleteBuffer(this.fdVal.TexVertexBuff[4]),this.gl.deleteBuffer(this.fdVal.TexVertexBuff[5]),this.fdVal.TexVertexBuff.fill(null),this.gl.deleteBuffer(this.fdVal.TexCoordBuff[1]),this.gl.deleteBuffer(this.fdVal.TexCoordBuff[2]),this.gl.deleteBuffer(this.fdVal.TexCoordBuff[3]),this.gl.deleteBuffer(this.fdVal.TexCoordBuff[4]),this.gl.deleteBuffer(this.fdVal.TexCoordBuff[5]),this.fdVal.TexCoordBuff.fill(null)}},{key:"Update",value:function(){this.Active=!0}},{key:"Build",value:function(){var t=this.fdVal;if(t.halfIcon=l.z.GLOBE_SYMBOL_SIZE_HALF,t.textHeight=l.z.GLOBE_SYMBOL_TEXT_SIZE*l.z.GLOBE_TEXT_SCALE*(this.style.__titleSize/32),t.textScale=l.z.GLOBE_SYMBOL_SCALE*this.style.__titleSize/32,t.iconLx=-t.halfIcon,t.iconLy=-t.halfIcon,t.iconUx=+t.halfIcon,t.iconUy=+t.halfIcon,this.distanceHeigth=8,this.titles.titleCN){var e=21*(this.titles.titleCN.length-1);this.style.icon.sizeY>=e?this.distanceHeigth=0:this.distanceHeigth=-((e-this.style.icon.sizeY)/2+4*t.textScale)}}},{key:"XH2Ek0",value:function(t){var e=this.gl,i=this.fdVal,r=i.TexVertexBuff,s=i.TexCoordBuff,o=i.TexBuff;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),r[0]=t[0],e.bindBuffer(e.ARRAY_BUFFER,r[0]),s[0]=t[1],e.bindBuffer(e.ARRAY_BUFFER,s[0]),o[0]=t[2],e.bindTexture(e.TEXTURE_2D,o[0]),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0)}},{key:"XNPtRY",value:function(t){var e=this.gl,i=this.fdVal,r=this.style,s=r.icon;r.titleFont;switch(t){case 0:if(this.fdVal.icon){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),i.TexVertexBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i.TexVertexBuff[t]),d.fill(0,0),d[0]=i.iconLx,d[1]=i.iconLy,d[3]=i.iconUx,d[4]=i.iconUy,d[6]=i.iconUx,d[7]=i.iconLy,d[9]=i.iconUx,d[10]=i.iconUy,d[12]=i.iconLx,d[13]=i.iconLy,d[15]=i.iconLx,d[16]=i.iconUy,e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW);var o=this.IconRender(i.icon,s);i.TexCoordBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i.TexCoordBuff[t]);var n=this.defaultIconWidth/o.width,a=this.orjinalIconHeight/o.height;c.fill(0,0),c[2]=n,c[3]=a,c[4]=n,c[6]=n,c[7]=a,c[11]=a,e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),i.TexBuff[t]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.fdVal.TexBuff[t]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this.fdrawer.inAnimation=!0}break;case 1:if(this.titles.titleLT){this.fdrawer.textCounter++;var h=this.TextRenderForLeftTop(this.titles.titleLT);this.tempTextureMeasureCalc=(this.tempTextMeasure.TextWidth+4)/h.width,this.v1x=-s.sizeX/2*(32/this.style.__titleSize),this.v1y=-s.sizeY/2*(32/this.style.__titleSize)+this.distanceHeigth,this.v2x=-this.tempTextMeasure.TextWidth-s.sizeX/2*(32/this.style.__titleSize),this.v2y=-h.height-s.sizeY/2*(32/this.style.__titleSize)+this.distanceHeigth,i.TexVertexBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fdVal.TexVertexBuff[t]),d.fill(0,0),d[0]=this.v1x,d[1]=this.v1y,d[3]=this.v2x,d[4]=this.v2y,d[6]=this.v2x,d[7]=this.v1y,d[9]=this.v2x,d[10]=this.v2y,d[12]=this.v1x,d[13]=this.v1y,d[15]=this.v1x,d[16]=this.v2y,e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW),i.TexCoordBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fdVal.TexCoordBuff[t]),c.fill(0,0),c[0]=this.tempTextureMeasureCalc,c[1]=1,c[5]=1,c[8]=this.tempTextureMeasureCalc,c[9]=1,c[10]=this.tempTextureMeasureCalc,e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),i.TexBuff[t]=e.createTexture(),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,i.TexBuff[t]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this.fdrawer.inAnimation=!0}break;case 2:if(this.titles.titleLB){this.fdrawer.textCounter++;h=this.TextRenderForLeftBottom(this.titles.titleLB);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.tempTextureMeasureCalc=(this.tempTextMeasure.TextWidth+4)/h.width,this.v1x=-this.tempTextMeasure.TextWidth-s.sizeX/2*(32/this.style.__titleSize),this.v1y=s.sizeY/2*(32/this.style.__titleSize)-this.distanceHeigth,this.v2x=-s.sizeX/2*(32/this.style.__titleSize),this.v2y=s.sizeY/2*(32/this.style.__titleSize)+h.height-this.distanceHeigth,i.TexVertexBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fdVal.TexVertexBuff[t]),d.fill(0,0),d[0]=this.v2x,d[1]=this.v1y,d[3]=this.v1x,d[4]=this.v2y,d[6]=this.v2x,d[7]=this.v2y,d[9]=this.v1x,d[10]=this.v2y,d[12]=this.v2x,d[13]=this.v1y,d[15]=this.v1x,d[16]=this.v1y,e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW),this.fdVal.TexCoordBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fdVal.TexCoordBuff[t]),c.fill(0,0),c[0]=this.tempTextureMeasureCalc,c[3]=1,c[4]=this.tempTextureMeasureCalc,c[5]=1,c[7]=1,c[8]=this.tempTextureMeasureCalc,e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),i.TexBuff[t]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i.TexBuff[t]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this.fdrawer.inAnimation=!0}break;case 3:if(this.titles.titleRT){this.fdrawer.textCounter++;h=this.TextRenderForRightTop(this.titles.titleRT);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.tempTextureMeasureCalc=(this.tempTextMeasure.TextWidth+4)/h.width,this.v1x=s.sizeX/2*(32/this.style.__titleSize),this.v1y=-h.height-s.sizeY/2*(32/this.style.__titleSize)+this.distanceHeigth,this.v2x=this.tempTextMeasure.TextWidth+s.sizeX/2*(32/this.style.__titleSize),this.v2y=-s.sizeY/2*(32/this.style.__titleSize)+this.distanceHeigth,i.TexVertexBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i.TexVertexBuff[t]),d.fill(0,0),d[0]=this.v1x,d[1]=this.v2y,d[3]=this.v2x,d[4]=this.v1y,d[6]=this.v1x,d[7]=this.v1y,d[9]=this.v2x,d[10]=this.v1y,d[12]=this.v1x,d[13]=this.v2y,d[15]=this.v2x,d[16]=this.v2y,e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW),i.TexCoordBuff[t]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i.TexCoordBuff[t]),c.fill(0,0),c[1]=1,c[2]=this.tempTextureMeasureCalc,c[6]=this.tempTextureMeasureCalc,c[9]=1,c[10]=this.tempTextureMeasureCalc,c[11]=1,e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),i.TexBuff[t]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i.TexBuff[t]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this.fdrawer.inAnimation=!0}break;case 4:if(this.titles.titleRB){this.fdrawer.textCounter++;h=this.TextRenderForRightBottom(this.titles.titleRB);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.tempTextureMeasureCalc=(this.tempTextMeasure.TextWidth+4)/h.width,this.v1x=s.sizeX/2*(32/this.style.__titleSize),this.v1y=s.sizeY/2*(32/this.style.__titleSize)-this.distanceHeigth,this.v2x=this.tempTextMeasure.TextWidth+s.sizeX/2*(32/this.style.__titleSize),this.v2y=h.height+s.sizeY/2*(32/this.style.__titleSize)-this.distanceHeigth,i.TexVertexBuff[4]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i.TexVertexBuff[4]),d.fill(0,0),d[0]=this.v1x,d[1]=this.v1y,d[3]=this.v2x,d[4]=this.v2y,d[6]=this.v2x,d[7]=this.v1y,d[9]=this.v2x,d[10]=this.v2y,d[12]=this.v1x,d[13]=this.v1y,d[15]=this.v1x,d[16]=this.v2y,e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW),i.TexCoordBuff[4]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fdVal.TexCoordBuff[4]),c.fill(0,0),c[2]=this.tempTextureMeasureCalc,c[3]=1,c[4]=this.tempTextureMeasureCalc,c[6]=this.tempTextureMeasureCalc,c[7]=1,c[11]=1,e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),i.TexBuff[t]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i.TexBuff[t]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this.fdrawer.inAnimation=!0}break;case 5:if(this.titles.titleCN){this.fdrawer.textCounter++;h=this.TextRenderForCenter(this.titles.titleCN);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.tempTextureMeasureCalc=(this.tempTextMeasure.TextWidth+4)/h.width,this.v1x=-this.tempTextMeasure.TextWidth/2,this.v1y=-h.height/2,this.v2x=this.tempTextMeasure.TextWidth/2,this.v2y=h.height/2,i.TexVertexBuff[5]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fdVal.TexVertexBuff[5]),d.fill(0,0),d[0]=this.v1x,d[1]=this.v1y,d[3]=this.v2x,d[4]=this.v2y,d[6]=this.v2x,d[7]=this.v1y,d[9]=this.v2x,d[10]=this.v2y,d[12]=this.v1x,d[13]=this.v1y,d[15]=this.v1x,d[16]=this.v2y,e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW),i.TexCoordBuff[5]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i.TexCoordBuff[5]),c.fill(0,0),c[2]=this.tempTextureMeasureCalc,c[3]=1,c[4]=this.tempTextureMeasureCalc,c[6]=this.tempTextureMeasureCalc,c[7]=1,c[11]=1,e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),i.TexBuff[t]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i.TexBuff[t]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),e.generateMipmap(e.TEXTURE_2D),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this.fdrawer.inAnimation=!0}}}},{key:"TextRenderForRightTop",value:function(t){this.GetMeasureValue(t),this.FindCanvasWHandFillCtxVal(t);var e=0;if(this.style.titleFont.hollow){for(var i=0;i<t.length;i++){var r=this.Ctx.canvas.height-16*t.length+16*i+e-5*(t.length-1);this.FillCtxVal(t[i],2,r),e+=5}return this.Ctx.canvas}for(i=0;i<t.length;i++)this.Ctx.fillText(t[i],2,this.Ctx.canvas.height-16*t.length+16*i+e-5*(t.length-1)),e+=5;return this.Ctx.canvas}},{key:"TextRenderForRightBottom",value:function(t){this.GetMeasureValue(t),this.FindCanvasWHandFillCtxVal(t);var e=0;if(this.style.titleFont.hollow){for(var i=0;i<t.length;i++){var r=16*(i+1)+e;this.FillCtxVal(t[i],2,r),e+=5}return this.Ctx.canvas}for(i=0;i<t.length;i++)this.Ctx.fillText(t[i],2,16*(i+1)+e),e+=5;return this.Ctx.canvas}},{key:"TextRenderForLeftTop",value:function(t){var e=[];this.GetMeasureValForLeftOrCenter(t,e),this.FindCanvasWHandFillCtxVal(t);var i=0;if(this.style.titleFont.hollow){for(var r=0;r<t.length;r++){var s=this.tempTextMeasure.TextWidth-e[r]+2,o=this.Ctx.canvas.height-16*t.length+16*r+i-5*(t.length-1);this.FillCtxVal(t[r],s,o),i+=5}return this.Ctx.canvas}for(r=0;r<t.length;r++)this.Ctx.fillText(t[r],this.tempTextMeasure.TextWidth-e[r]+2,this.Ctx.canvas.height-16*t.length+16*r+i-5*(t.length-1)),i+=5;return this.Ctx.canvas}},{key:"TextRenderForLeftBottom",value:function(t){var e=[];this.GetMeasureValForLeftOrCenter(t,e),this.FindCanvasWHandFillCtxVal(t);var i=0;if(this.style.titleFont.hollow){for(var r=0;r<t.length;r++){var s=this.tempTextMeasure.TextWidth-e[r]+2,o=16*(r+1)+i;this.FillCtxVal(t[r],s,o),i+=5}return this.Ctx.canvas}for(r=0;r<t.length;r++)this.Ctx.fillText(t[r],this.tempTextMeasure.TextWidth-e[r]+2,16*(r+1)+i),i+=5;return this.Ctx.canvas}},{key:"TextRenderForCenter",value:function(t){var e=[];this.GetMeasureValForLeftOrCenter(t,e),this.FindCanvasWHandFillCtxVal(t);var i=(this.Ctx.canvas.height-16*(t.length-1))/2-(5*t.length-1)/2,r=0;if(this.style.titleFont.hollow){for(var s=0;s<t.length;s++){var o=2+(this.tempTextMeasure.TextWidth-e[s])/2,n=i+16*s+r;this.FillCtxVal(t[s],o,n),r+=5}return this.Ctx.canvas}for(s=0;s<t.length;s++)this.Ctx.fillText(t[s],2+(this.tempTextMeasure.TextWidth-e[s])/2,i+16*s+r),r+=5;return this.Ctx.canvas}},{key:"FillCtxVal",value:function(t,e,i){this.Ctx.lineWidth=4.5,this.Ctx.strokeStyle="rgba(0,0,0,128)",this.Ctx.strokeText(t,e,i),this.Ctx.lineWidth=1.5,this.Ctx.strokeStyle="rgba(0,0,0,255)",this.Ctx.strokeText(t,e,i),this.Ctx.fillText(t,e,i)}},{key:"FindCanvasWHandFillCtxVal",value:function(t){this.Ctx.canvas.width=u.b.NearestPowOfUpper(this.tempTextMeasure.TextWidth),this.Ctx.canvas.height=u.b.NearestPowOfUpper(32*t.length+5*(t.length-1)),this.Ctx.canvas.width-this.tempTextMeasure.TextWidth<2&&this.Ctx.canvas.width<1024&&(this.Ctx.canvas.width*=2),this.Ctx.fillStyle="rgba(0,0,0,0)",this.Ctx.fillRect(0,0,this.Ctx.canvas.width,this.Ctx.canvas.height),this.Ctx.textBaseline="middle",this.Ctx.lineJoin="round",this.Ctx.font=this.style.__titleFontStr[0]+this.style.__titleFontStr[1]+"pt "+this.style.__titleFontStr[2],this.Ctx.fillStyle=this.style.titleFont.color}},{key:"IconRender",value:function(t){return t.width>1024?this.defaultIconWidth=1024:this.defaultIconWidth=t.width,t.height>1024?this.orjinalIconHeight=1024:this.orjinalIconHeight=t.height,this.imCtx.clearRect(0,0,this.imCtx.canvas.width,this.imCtx.canvas.height),this.imCtx.canvas.width=u.b.NearestPowOfUpperForImage(t.width,l.z.MAX_TEXT_SIZE_FOR_USEROBJ),this.imCtx.canvas.height=u.b.NearestPowOfUpperForImage(t.height,l.z.MAX_TEXT_SIZE_FOR_USEROBJ),this.imCtx.drawImage(t,0,0),this.imCtx.canvas}},{key:"GetMeasureValue",value:function(t){this.Ctx.font=this.style.__titleFontStr[0]+this.style.__titleFontStr[1]+"pt "+this.style.__titleFontStr[2],this.tempTextMeasure=this.Ctx.measureText(t[0]);for(var e=1;e<t.length;e++){var i=this.Ctx.measureText(t[e]);i.width>this.tempTextMeasure.width&&(this.tempTextMeasure=i)}this.tempTextMeasure.TextWidth=this.tempTextMeasure.width,this.tempTextMeasure.width>1024&&(this.tempTextMeasure.TextWidth=1024)}},{key:"GetMeasureValForLeftOrCenter",value:function(t,e){this.Ctx.font=this.style.__titleFontStr[0]+this.style.__titleFontStr[1]+"pt "+this.style.__titleFontStr[2],this.tempTextMeasure=this.Ctx.measureText(t[0]),e[0]=this.tempTextMeasure.width;for(var i=1;i<t.length;i++){var r=this.Ctx.measureText(t[i]);e[i]=r.width,r.width>this.tempTextMeasure.width&&(this.tempTextMeasure=r)}this.tempTextMeasure.TextWidth=this.tempTextMeasure.width,this.tempTextMeasure.width>1024&&(this.tempTextMeasure.TextWidth=1024)}}]),t}(),p=i(17),F=i(11),y=function(){function t(e,i){n()(this,t),this.TextureObjLimit=100,this.TextureCacheObj={},this.TextureArr=[],this.gl=e,this.FGlobe=i}return h()(t,[{key:"ClearCache",value:function(){for(var t=this.TextureArr.length;t--;)this.gl.deleteBuffer(this.TextureCacheObj[this.TextureArr[t]].data[0]),this.gl.deleteBuffer(this.TextureCacheObj[this.TextureArr[t]].data[1]),this.gl.deleteTexture(this.TextureCacheObj[this.TextureArr[t]].data[2]);this.TextureCacheObj={},this.TextureArr=[]}},{key:"GiveTextureToFontPacket",value:function(t,e){var i=t.style.icon;if(i.type===l.e.URL)this.TextureCacheObj.hasOwnProperty(i.URL)&&this.TextureCacheObj[i.URL].resolve?(this.Xt4KR0(t,!1),e.inAnimation=!0):this.OnGetIconFromUrl(t,e);else{var r=i.shapeType+i.borderColor+i.fillColor+i.borderWidth+i.backgroundColor;this.TextureCacheObj.hasOwnProperty(r)&&this.TextureCacheObj[r].resolve?(this.Xt4KR0(t,r),e.inAnimation=!0):this.OnGetIconFromMarker(t,e)}}},{key:"AfterImageReq",value:function(t){if(t){if(t.response&&"image/svg+xml"===t.response.contentType){var e;e=t.responseTextureSize?t.responseTextureSize.toString():"256",t.response.children[0].setAttribute("width",e),t.response.children[0].setAttribute("height",e);var i=(new XMLSerializer).serializeToString(t.response.children[0]);return"data:image/svg+xml;base64,".concat(window.btoa(i))}return t.responseText?null:F.h}return F.h}},{key:"OnGetIconFromUrl",value:function(t,e){var i=this;new Promise(function(e,r){if(t.Owner){i.TextureCacheObj[t.Owner.style.icon.URL]={resolve:!1};var s=new Image;s.onload=function(){e(s)},s.onerror=function(){e(F.h)},t.Owner.style.icon.URL&&(s.crossOrigin="",Object(p.d)(new XMLHttpRequest,t.Owner.style.icon.URL,l.z.USEROBJ_ICON_TIMEOUT,null,null,null,t.Owner.style.icon.textureSize,null).then(i.AfterImageReq).then(function(e){s.src=e||(t.Owner?t.Owner.style.icon.URL:null)}))}}).then(function(r){t.Owner&&(t.fdVal.icon=r,t.XNPtRY(0),i.AddTextureToCache(t,null),e.inAnimation=!0,i.TextureCacheObj[t.Owner.style.icon.URL].resolve=!0)})}},{key:"OnGetIconFromMarker",value:function(t,e){var i=this,r=t.style.icon;new Promise(function(t,e){var s=r.shapeType+r.borderColor+r.fillColor+r.borderWidth+r.backgroundColor;i.TextureCacheObj[s]={resolve:!1};var o=new Image;o.onload=function(){t(o)},"number"==typeof r.shapeType&&(o.crossOrigin="",o.src=i.FGlobe.api_GetShapeBitmap(r.shapeType,r.borderColor,r.fillColor,r.borderWidth,r.backgroundColor,l.z.MARKER_ICON_SIZE,l.z.MARKER_ICON_SIZE))}).then(function(s){var o=r.shapeType+r.borderColor+r.fillColor+r.borderWidth+r.backgroundColor;t.fdVal.icon=s,t.XNPtRY(0),i.AddTextureToCache(t,o),e.inAnimation=!0,i.TextureCacheObj[o].resolve=!0})}},{key:"TextureSizeCheck",value:function(){this.TextureObjLimit<Object.keys(this.TextureCacheObj).length&&this.ClearCache()}},{key:"AddTextureToCache",value:function(t,e){t.style.icon.type===l.e.URL?(this.TextureSizeCheck(),this.TextureArr.push(t.style.icon.URL),this.TextureCacheObj[t.style.icon.URL].data=[t.fdVal.TexVertexBuff[0],t.fdVal.TexCoordBuff[0],t.fdVal.TexBuff[0]]):(this.TextureSizeCheck(),this.TextureArr.push(e),this.TextureCacheObj[e].data=[t.fdVal.TexVertexBuff[0],t.fdVal.TexCoordBuff[0],t.fdVal.TexBuff[0]])}},{key:"Xt4KR0",value:function(t,e){e?(t.fdVal.TexVertexBuff[0]=this.TextureCacheObj[e].data[0],t.fdVal.TexCoordBuff[0]=this.TextureCacheObj[e].data[1],t.fdVal.TexBuff[0]=this.TextureCacheObj[e].data[2]):(t.fdVal.TexVertexBuff[0]=this.TextureCacheObj[t.style.icon.URL].data[0],t.fdVal.TexCoordBuff[0]=this.TextureCacheObj[t.style.icon.URL].data[1],t.fdVal.TexBuff[0]=this.TextureCacheObj[t.style.icon.URL].data[2])}}]),t}();function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}i.d(e,"a",function(){return g});var g=function(){function t(e){var i=this;n()(this,t),this.FDead=[],this.FAlive=[],this.inAnimation=!1,this.FGlobe=e,this.gl=this.FGlobe.gl,this.textCounter=0,this.OnePassCounter=6,this.canvasforText=document.createElement("canvas"),this.canvasforText.width=1024,this.canvasforText.height=32,this.TextCtx=this.canvasforText.getContext("2d"),this.TextCtx.lineWidth=4.5,this.TextCtx.lineJoin="round",this.TextCtx.textBaseline="middle",this.TextureCache=new y(this.gl,this.FGlobe),this.TextOffset=l.z.GLOBE_TEXT_SCALE,this.SymbolOffsetX=l.z.GLOBE_SYMBOL_SCALE,this.SymbolOffsetY=l.z.GLOBE_SYMBOL_SCALE,this.parentNode=this.FGlobe.parentNode,this.parentData=this.FGlobe.parentNode.getBoundingClientRect(),this.ScreenPoint=new u.u(0,0),this.IconWorld=new u.E(0,0,0,0),this.SetMouseMove(),this.GLU=this.FGlobe.GLU,this.P2DmodelViewMatrixLoc=this.FGlobe.P2DmodelViewMatrixLoc,this.P2DtextCoordLoc=this.FGlobe.P2DtextCoordLoc,this.P2DvertexPos=this.FGlobe.P2DvertexPos,this.P2DOpacityLoc=this.FGlobe.P2DOpacityLoc,this.symbolOffsetXForTranslate=0,this.symbolOffsetYForTranslate=0,this.textOffsetXForTranslate=0,this.textOffsetYForTranslate=0,this.func=function(){Object(p.c)(new XMLHttpRequest,"".concat(i.FGlobe.globedll,"/G").concat(String.fromCodePoint(69,84,73),"CON?"),15e3,!1,null,null,null).then(function(t){if(i.FGlobe.ICON_COUNT++,t.response){for(var e=new Uint8Array(t.response),r=[],s=0;s<e.length;s++)r.push(e[s]);i.FGlobe.VLD_ICON_ARR=r}else i.FGlobe.VLD_ICON_ARR=null;var o=t.timeout,n=t.err,a=t.status;(o||n||a)&&i.FGlobe.ICON_COUNT<5&&setTimeout(i.func,1e3*(Math.floor(5*Math.random())+15))})},setTimeout(this.func,1e3*(Math.floor(5*Math.random())+15)),this.canvasforImage=document.createElement("canvas"),this.canvasforImage.width=1024,this.canvasforImage.height=1024,this.imageCtx=this.canvasforImage.getContext("2d"),this.highlightPacket=new f(this),this.highlightPacket.Owner={highlight:!1},this.tempTextColor=void 0,this.tempIconColor=void 0}return h()(t,[{key:"Clear",value:function(){for(var t=this.FAlive.length;t--;)this.FAlive[t].Active=!1}},{key:"GetNewFontPacket",value:function(t,e){var i;return i=this.FDead.length?this.FDead.pop():new f(this),this.FAlive.push(i),i.Owner=t,i.style=t.style,i.titles=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(i,!0).forEach(function(e){s()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},e),i.Ctx=this.TextCtx,i.imCtx=this.imageCtx,i}},{key:"Draw",value:function(){this.inAnimation=!1,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.CheckAlives(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0);for(var t=this.FAlive.length;t--;){var e=this.FAlive[t].Owner;(e.FEditing||this.FGlobe.FDRAWED_MAX_LEVEL>=e.startLod&&this.FGlobe.FDRAWED_MAX_LEVEL<=e.endLod)&&this.DrawPacket(this.FAlive[t])}var i=this.highlightPacket.Owner;this.highlightPacket&&i&&i.highlight&&(i.FEditing||this.FGlobe.FDRAWED_MAX_LEVEL>=i.startLod&&this.FGlobe.FDRAWED_MAX_LEVEL<=i.endLod)&&this.DrawPacket(this.highlightPacket)}},{key:"DrawPacket",value:function(t){var e=t.style,i=e.icon,r=e.__fontTextColor;this.TextOffset=l.z.GLOBE_TEXT_SCALE*t.style.__titleSize/32,i.sizeX&&i.sizeY?(this.SymbolOffsetX=l.z.GLOBE_SYMBOL_SCALE*i.sizeX/32,this.SymbolOffsetY=l.z.GLOBE_SYMBOL_SCALE*i.sizeY/32):(this.SymbolOffsetX=l.z.GLOBE_SYMBOL_SCALE*l.z.GLOBE_SYMBOL_SIZE/32,this.SymbolOffsetY=l.z.GLOBE_SYMBOL_SCALE*l.z.GLOBE_SYMBOL_SIZE/32),this.DrawIcon(t,0),this.tempTextColor=r.slice(),this.tempTextColor[3]*=t.Owner.obj.userObj.opacity,this.gl.uniform4fv(this.P2DOpacityLoc,this.tempTextColor),this.symbolOffsetXForTranslate=(i.sizeX-i.sizeX*l.z.GLOBE_SYMBOL_SCALE)/2,this.symbolOffsetYForTranslate=(i.sizeY-i.sizeY*l.z.GLOBE_SYMBOL_SCALE)/2,this.textOffsetXForTranslate=(i.sizeX-i.sizeX*l.z.GLOBE_TEXT_SCALE)/2,this.textOffsetYForTranslate=(i.sizeY-i.sizeY*l.z.GLOBE_TEXT_SCALE)/2,this.DrawTitle(t,1),this.DrawTitle(t,2),this.DrawTitle(t,3),this.DrawTitle(t,4),this.DrawTitle(t,5)}},{key:"CheckAlives",value:function(){this.textCounter=0;for(var t=this.FAlive.length;t--;)this.FAlive[t].Active||(this.FAlive[t].Clear(),this.FDead.length<l.z.FONTDRAWER_DEAD_PACKET_LIMIT&&this.FDead.push(this.FAlive[t]),this.FAlive.splice(t,1));for(t=this.FAlive.length;t--;){var e=this.FAlive[t];if(e.Build(),e.fdVal.TexBuff[0])this.textCounter=0;else{var i=e.style.icon;i.type===l.e.URL&&i.URL?this.TextureCache.GiveTextureToFontPacket(e,this):i.type===l.e.MARKER&&"number"==typeof i.shapeType&&this.TextureCache.GiveTextureToFontPacket(e,this),this.textCounter++}var r=e.fdVal.TexBuff;if(r[1]?this.textCounter=0:e.XNPtRY(1),r[2]?this.textCounter=0:e.XNPtRY(2),r[3]?this.textCounter=0:e.XNPtRY(3),r[4]?this.textCounter=0:e.XNPtRY(4),r[5]?this.textCounter=0:e.XNPtRY(5),this.textCounter>=this.OnePassCounter)break}}},{key:"DrawTitle",value:function(t,e){var i=this.gl,r=t.fdVal,s=r.TexCoordBuff,o=r.TexBuff,n=r.TexVertexBuff,a=t.style.icon;switch(e){case 1:o[e]&&(this.GLU.pushModel(),this.GLU.Translate(t.Owner.obj.CanvasPoint.x+a.offsetX+this.symbolOffsetXForTranslate-this.textOffsetXForTranslate,t.Owner.obj.CanvasPoint.y+a.offsetY+this.symbolOffsetYForTranslate-this.textOffsetYForTranslate,0),this.GLU.Scale(this.TextOffset,this.TextOffset,this.TextOffset),t.Owner.highlight&&this.GLU.Scale(1.5,1.5,1.5),this.GLU.setModelToGL(this.P2DmodelViewMatrixLoc),i.bindBuffer(i.ARRAY_BUFFER,s[e]),i.vertexAttribPointer(this.P2DtextCoordLoc,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,o[e]),i.bindBuffer(i.ARRAY_BUFFER,n[e]),i.vertexAttribPointer(this.P2DvertexPos,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),this.GLU.popModel());break;case 2:o[e]&&(this.GLU.pushModel(),this.GLU.Translate(t.Owner.obj.CanvasPoint.x+a.offsetX+this.symbolOffsetXForTranslate-this.textOffsetXForTranslate,t.Owner.obj.CanvasPoint.y+a.offsetY-this.symbolOffsetYForTranslate+this.textOffsetYForTranslate,0),this.GLU.Scale(this.TextOffset,this.TextOffset,this.TextOffset),t.Owner.highlight&&this.GLU.Scale(1.5,1.5,1.5),this.GLU.setModelToGL(this.P2DmodelViewMatrixLoc),i.bindBuffer(i.ARRAY_BUFFER,s[e]),i.vertexAttribPointer(this.P2DtextCoordLoc,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,o[e]),i.bindBuffer(i.ARRAY_BUFFER,n[e]),i.vertexAttribPointer(this.P2DvertexPos,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),this.GLU.popModel());break;case 3:o[e]&&(this.GLU.pushModel(),this.GLU.Translate(t.Owner.obj.CanvasPoint.x+a.offsetX-this.symbolOffsetXForTranslate+this.textOffsetXForTranslate,t.Owner.obj.CanvasPoint.y+a.offsetY+this.symbolOffsetYForTranslate-this.textOffsetYForTranslate,0),this.GLU.Scale(this.TextOffset,this.TextOffset,this.TextOffset),t.Owner.highlight&&this.GLU.Scale(1.5,1.5,1.5),this.GLU.setModelToGL(this.P2DmodelViewMatrixLoc),i.bindBuffer(i.ARRAY_BUFFER,s[e]),i.vertexAttribPointer(this.P2DtextCoordLoc,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,o[e]),i.bindBuffer(i.ARRAY_BUFFER,n[e]),i.vertexAttribPointer(this.P2DvertexPos,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),this.GLU.popModel());break;case 4:if(o[e]){var h=t.style.icon;this.GLU.pushModel(),this.GLU.Translate(t.Owner.obj.CanvasPoint.x+h.offsetX-this.symbolOffsetXForTranslate+this.textOffsetXForTranslate,t.Owner.obj.CanvasPoint.y+h.offsetY-this.symbolOffsetYForTranslate+this.textOffsetYForTranslate,0),this.GLU.Scale(this.TextOffset,this.TextOffset,this.TextOffset),t.Owner.highlight&&this.GLU.Scale(1.5,1.5,1.5),this.GLU.setModelToGL(this.P2DmodelViewMatrixLoc),i.bindBuffer(i.ARRAY_BUFFER,s[e]),i.vertexAttribPointer(this.P2DtextCoordLoc,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,o[e]),i.bindBuffer(i.ARRAY_BUFFER,n[e]),i.vertexAttribPointer(this.P2DvertexPos,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),this.GLU.popModel()}break;case 5:o[e]&&(this.GLU.pushModel(),this.GLU.Translate(t.Owner.obj.CanvasPoint.x+t.style.icon.offsetX,t.Owner.obj.CanvasPoint.y+t.style.icon.offsetY,0),this.GLU.Scale(this.TextOffset,this.TextOffset,this.TextOffset),t.Owner.highlight&&this.GLU.Scale(1.5,1.5,1.5),this.GLU.setModelToGL(this.P2DmodelViewMatrixLoc),i.bindBuffer(i.ARRAY_BUFFER,s[e]),i.vertexAttribPointer(this.P2DtextCoordLoc,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,o[e]),i.bindBuffer(i.ARRAY_BUFFER,n[e]),i.vertexAttribPointer(this.P2DvertexPos,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),this.GLU.popModel())}}},{key:"DrawIcon",value:function(t,e){if(t.fdVal.TexBuff[e]){var i=this.gl;this.tempIconColor=t.style.__iconColor.slice(),this.tempIconColor[3]*=t.Owner.obj.userObj.opacity,this.gl.uniform4fv(this.P2DOpacityLoc,this.tempIconColor),this.GLU.pushModel(),this.GLU.Translate(t.Owner.obj.CanvasPoint.x+t.style.icon.offsetX,t.Owner.obj.CanvasPoint.y+t.style.icon.offsetY,0),this.GLU.Scale(this.SymbolOffsetX,this.SymbolOffsetY,this.SymbolOffsetX),t.style.icon.rotDeg&&this.GLU.Rotate(u.b.DegreeToRadyan(t.style.icon.rotDeg),0,0,1),t.Owner.highlight&&this.GLU.Scale(1.5,1.5,1.5),this.GLU.setModelToGL(this.P2DmodelViewMatrixLoc);var r=t.fdVal,s=r.TexCoordBuff,o=r.TexBuff,n=r.TexVertexBuff;i.bindBuffer(i.ARRAY_BUFFER,s[e]),i.vertexAttribPointer(this.P2DtextCoordLoc,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,o[e]),i.bindBuffer(i.ARRAY_BUFFER,n[e]),i.vertexAttribPointer(this.P2DvertexPos,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),this.GLU.popModel()}}},{key:"SetMouseMove",value:function(){var t=this;window.addEventListener("mousemove",function(e){if(e.target===t.FGlobe.canvas2d){t.parentData=t.FGlobe.parentNode.getBoundingClientRect(),t.ScreenPoint.x=e.clientX-t.parentData.left,t.ScreenPoint.y=e.clientY-t.parentData.top;var i=0;for(i=t.FAlive.length;i--;)t.FAlive[i].Owner.highlight=!1;for(i=t.FAlive.length;i--;){var r=t.FAlive[i],s=r.Owner.obj.CanvasPoint;if(t.IconWorld.SetV(s.x+r.fdVal.iconLx+r.style.icon.offsetX,s.y+r.fdVal.iconLy+r.style.icon.offsetY,s.x+r.fdVal.iconUx+r.style.icon.offsetX,s.y+r.fdVal.iconUy+r.style.icon.offsetY),t.IconWorld.IsPointInRegion(t.ScreenPoint)){r.Owner.highlight=!0,t.highlightPacket=r;break}}}})}},{key:"AskObject",value:function(t,e,i){this.ScreenPoint.x=t,this.ScreenPoint.y=e;for(var r=this.FAlive.length;r--;){var s=this.FAlive[r],o=s.Owner.obj.CanvasPoint;this.IconWorld.SetV(o.x+s.fdVal.iconLx+s.style.icon.offsetX,o.y+s.fdVal.iconLy+s.style.icon.offsetY,o.x+s.fdVal.iconUx+s.style.icon.offsetX,o.y+s.fdVal.iconUy+s.style.icon.offsetY),this.IconWorld.IsPointInRegion(this.ScreenPoint)&&!this.FAlive[r].Owner.eVal&&this.FGlobe.ObjectIsNotInAskObjArr(i,s.Owner)&&i.push({obj:s.Owner,owner:s.Owner.obj.userObj,ownerType:l.m.OBJECT_BUFFER})}}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(7),h=i(45),l=i(1),u=function(){function t(){s()(this,t)}return n()(t,[{key:"FindFollowGroundCoords",value:function(t,e,i){for(var r,s,o,n,a,h=t.length/2-1,u=0;u<h;u++){r=t[2*u],s=t[2*u+1],o=t[2*u+2],n=t[2*u+3],e.push(r),e.push(s);var d=l.b.Dist2DV(r,s,o,n);a=d/i;for(var c=1;c<i-1;c++){var f=l.b.CalcPositionV(d,r,s,o,n,c*a,0);e.push(f[0]),e.push(f[1])}}r=t[t.length-2],s=t[t.length-1],o=t[0],n=t[1],e.push(r),e.push(s),a=(d=l.b.Dist2DV(r,s,o,n))/i;for(c=1;c<i-1;c++){f=l.b.CalcPositionV(d,r,s,o,n,c*a,0);e.push(f[0]),e.push(f[1])}}},{key:"AddSteiners",value:function(t,e,i,r){for(var s=i.LL.y,o=i.LL.x,n=l.b.Dist2DV(i.LL.y,i.LL.x,i.UR.y,i.UR.x)/r,a=0;s<i.UR.y;a++){s=i.LL.y+n*a;for(var h=0;o<i.UR.x;h++)o=i.LL.x+n*h,l.b.CSPointInPolygon(s,o,t)&&(e.push(s),e.push(o));o=i.LL.x}}},{key:"FindLimits",value:function(t,e){e.Clear(),e.ExpandByCoords(t)}}]),t}(),d=i(0);i.d(e,"a",function(){return c});var c=function(){function t(e){s()(this,t),this.FGlobe=e,this.tempp2d=new l.u(0,0),this.Limit=new l.E(0,0,0,0),this.gf_coords=[],this.MathUtils=new u,this.distp11=new l.w(0,0,0),this.distp12=new l.w(0,0,0)}return n()(t,[{key:"TriArea",value:function(t,e,i){var r,s,o,n,a,h,l,u,d;return r=e.x-t.x,o=e.y-t.y,a=e.z-t.z,s=i.x-t.x,n=i.y-t.y,l=o*(h=i.z-t.z)-n*a,u=s*a-r*h,d=r*n-s*o,.5*Math.sqrt(l*l+u*u+d*d)}},{key:"CalcPolyAreaM2",value:function(t,e,i){var r,s,o,n=0,u=[],c=[];if(i||(i=50),e){this.MathUtils.FindLimits(t,this.Limit),this.MathUtils.FindFollowGroundCoords(t,this.gf_coords,i),r=this.gf_coords.length,this.MathUtils.AddSteiners(t,this.gf_coords,this.Limit,i),o=this.gf_coords.length/2;for(var f=[],p=0;p<o;p++)f[p]=[this.gf_coords[2*p],this.gf_coords[2*p+1]];for(var F=[],y=0;y<r/2-1;y++)F.push([y,y+1]);F.push([r/2-1,0]);var A=h(f,F,{exterior:!0});s=A.length;for(var g=0;g<s;g++){var C=A[g];u.push(C[0]),u.push(C[1]),u.push(C[2])}for(var b=0;b<o;b++)this.tempp2d.SetV(this.gf_coords[2*b],this.gf_coords[2*b+1]),this.tempp2d.ConvertDegreeToRadyan(),c[b]=new l.w(0,0,0),l.b.GeoTo3DP(this.tempp2d,(d.z.GLOBE_RADIUS+this.FGlobe.XyecYr(this.tempp2d,!1))/d.z.GLOBE_RADIUS_K,c[b]);this.gf_coords.length=0}else{u=a(t,null,2);for(b=0;b<t.length/2;b++)this.tempp2d.SetV(t[2*b],t[2*b+1]),this.tempp2d.ConvertDegreeToRadyan(),c[b]=new l.w(0,0,0),l.b.GeoTo3DP(this.tempp2d,d.z.GLOBE_RADIUS/d.z.GLOBE_RADIUS_K,c[b])}for(var T=0;T<u.length;T+=3)n+=Math.abs(this.TriArea(c[u[T]],c[u[T+1]],c[u[T+2]]));return n}},{key:"GeoDist",value:function(t,e,i,r,s,o){return this.CoordToGeo3C(t,e,i,this.distp11),this.CoordToGeo3C(r,s,o,this.distp12),this.distp11.Dist3D(this.distp12)}},{key:"CoordToGeo3C",value:function(t,e,i,r){this.tempp2d.SetV(t,e),this.tempp2d.ConvertDegreeToRadyan(),l.b.GeoTo3DP(this.tempp2d,d.z.GLOBE_RADIUS/d.z.GLOBE_RADIUS_K+i,r)}},{key:"GeoDistGreatCircle",value:function(t,e,i,r){return l.b.CSDist3DGreatCircleDegree(t,e,i,r)}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=(i(32),i(1)),h=function(){function t(e,i,r){s()(this,t),this.Fw=new a.E(0,0,0,0),this.FIW=e,this.FIH=i,this.Fw.SetTW(r),this.mdw=this.Fw.UR.y-this.Fw.LL.y,this.mdh=this.Fw.UR.x-this.Fw.LL.x,this.p={x:0,y:0},this.p2={x:0,y:0}}return n()(t,[{key:"toImage",value:function(t){return this.p.x=(t.x-this.Fw.LL.y)/this.mdw*this.FIW,this.p.y=(t.y-this.Fw.LL.x)/this.mdh*this.FIH,this.p}},{key:"toMap",value:function(t,e){return this.p2.x=this.Fw.LL.y+t*this.mdw/this.FIW,this.p2.y=this.Fw.UR.x-e*this.mdh/this.FIH,this.p2}}]),t}(),l=i(0);i.d(e,"a",function(){return c});var u=[],d=2*Math.PI,c=function(){function t(e,i){s()(this,t),this.FGlobe=e,this.gl=i,this.canvas=document.createElement("canvas"),this.canvas.width=l.z.GLOBE_IMAGE_SIZE,this.canvas.height=l.z.GLOBE_IMAGE_SIZE,this.ctx=this.canvas.getContext("2d"),this.coordsXY=new a.u(0,0),this.extAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.fb=i.createFramebuffer()}return n()(t,[{key:"ClearCanvas",value:function(){this.ctx.clearRect(0,0,l.z.GLOBE_IMAGE_SIZE,l.z.GLOBE_IMAGE_SIZE)}},{key:"SetCanvasBorderStyle",value:function(t,e){t.border&&(this.ctx.lineWidth=Math.round(t.lineType.__width*t.__lodDisplayArr[e].lineScale),this.ctx.lineCap=t.lineType.cap,this.ctx.lineJoin=t.lineType.join,this.ctx.miterLimit=t.lineType.miterLimit,this.ctx.setLineDash(t.lineType.dash),this.ctx.strokeStyle=t.borderColor,this.ctx.stroke())}},{key:"SetCanvasFillStyle",value:function(t,e){t.filled&&e!==l.j.LINE&&(this.ctx.fillStyle=t.fillColor,this.ctx.closePath(),this.ctx.fill())}},{key:"DrawIconToCanvas",value:function(t,e,i,r){if(e.iconType===l.e.MAP){var s=e.__lodDisplayArr[r].symbolScale,o=Math.ceil(e.icon.__sizeX*s),n=Math.ceil(e.icon.__sizeY*s),a=this.FGlobe.IconMap[e.icon._mapIndex].map[e.icon.name];this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fb),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.FGlobe.IconMap[e.icon._mapIndex].texture,0);var h=new Uint8Array(4*a.width*a.height);this.gl.readPixels(a.x,a.y,a.width,a.height,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null);for(var c=i.toImage(t.center),f=Math.round(c.x)-o/2,p=Math.round(c.y)-n/2,F=this.ctx.getImageData(f,p,o,n),y=a.width/o,A=a.height/n,g=0,C=0;C<n;C++)for(var b=Math.floor(C*A),T=0;T<o;T++){var v=Math.floor(T*y),L=4*(b*a.width+v),S=h[L+3]/255,x=1-S;F.data[g]=S*h[L]+x*F.data[g],F.data[g+1]=S*h[L+1]+x*F.data[g+1],F.data[g+2]=S*h[L+2]+x*F.data[g+2],F.data[g+3]=e.opacity*(S*h[L+3]+x*F.data[g+3]),g+=4}this.ctx.putImageData(F,f,p,0,0,o,n)}else if(e.iconType===l.e.CIRCLE){var O=e.__lodDisplayArr[r].symbolScale,R=Math.round(e.icon.__radius*O),m=i.toImage(t.center);this.ctx.globalAlpha=e.opacity,this.ctx.lineWidth=Math.round(e.icon.__borderWidth*O),this.ctx.setLineDash(u),this.ctx.beginPath(),this.ctx.strokeStyle=e.icon.borderColor,this.ctx.fillStyle=e.icon.fillColor,this.ctx.arc(Math.round(m.x),Math.round(m.y),R,0,d,!1),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()}}},{key:"DrawLinePolyToCanvas",value:function(t,e,i,r,s){if(i!==l.j.POINT&&(e.filled||e.border)&&e.active){var o,n=[],a=t.coords.length;for(o=0;o<a;o+=2){this.coordsXY.SetV(t.coords[o],t.coords[o+1]);var h=r.toImage(this.coordsXY);n.push(Math.round(h.x),Math.round(h.y))}this.ctx.globalAlpha=e.opacity,this.ctx.beginPath(),this.ctx.moveTo(n[0],n[1]);var u=n.length;for(o=2;o<u;o+=2)this.ctx.lineTo(n[o],n[o+1]);this.SetCanvasFillStyle(e,i),this.SetCanvasBorderStyle(e,s)}}},{key:"DrawToCanvas",value:function(t,e){for(var i=t.FCellLayers.length,r=0;r<i;r++){var s=t.FCellLayers[r];if(s.FCityLayer._FActive&&s.FCityLayer.rasterize){var o,n=s.objects.length;if(Array.isArray(s.FCityLayer.style)){for(o=0;o<n;o++)for(var a=s.objects[o].length,h=0;h<a;h++)this.DrawLinePolyToCanvas(s.objects[o][h],s.objects[o][h].style,s.objects[o][h].style.objectType,e,t.FLevel);for(o=0;o<n;o++)this.HasIcon(s.FCityLayer.style[o],s.Layer.ITDrawer[o],s.objects[o],e,t.FLevel)}else{for(o=0;o<n;o++)this.DrawLinePolyToCanvas(s.objects[o],s.objects[o].style,s.FCityLayer.objectType,e,t.FLevel);this.HasIcon(s.FCityLayer.style,s.Layer.ITDrawer,s.objects,e,t.FLevel)}}}}},{key:"HasIcon",value:function(t,e,i,r,s){if(t.iconType!==l.e.NOICON)for(var o=i.length,n=0;n<o;n++)this.DrawIconToCanvas(i[n],i[n].style,r,s)}},{key:"XNPtRY",value:function(t){var e=new h(l.z.GLOBE_IMAGE_SIZE,l.z.GLOBE_IMAGE_SIZE,t.FCellTGW);this.ClearCanvas(),this.DrawToCanvas(t,e);var i=this.gl,r=i.createTexture();return i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.bindTexture(i.TEXTURE_2D,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this.canvas),i.generateMipmap(i.TEXTURE_2D),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameterf(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameterf(i.TEXTURE_2D,this.extAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,2),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),r}}]),t}()},function(t,e,i){"use strict";var r=i(2),s=i.n(r),o=i(3),n=i.n(o),a=i(0),h=i(1),l=function(){function t(e,i,r){s()(this,t),this.FRaster=r,this.FCell=i,this.gl=e,this.OIntTexCoords=new Float32Array(96),this.OTexCoords=[new Float32Array(24),new Float32Array(24),new Float32Array(24),new Float32Array(24)],this.OTexCoords2=[new Float32Array(48),new Float32Array(48),new Float32Array(48),new Float32Array(48)],this.OInttexcoordBuffer=this.gl.createBuffer(),this.Otexcoord1Buffer=[this.gl.createBuffer(),this.gl.createBuffer(),this.gl.createBuffer(),this.gl.createBuffer()],this.Otexcoord2Buffer=[this.gl.createBuffer(),this.gl.createBuffer(),this.gl.createBuffer(),this.gl.createBuffer()],this.FillCoords()}return n()(t,[{key:"FillCoords",value:function(){var t=this.FRaster.Fwrad,e=t.UR,i=t.LL,r=this.FCell,s=r.IntLatLongs,o=r.VertexCount,n=r.VertexCount2,a=r.LatLongs,h=r.LatLongs2,l=r.IntVertexCount,u=e.y-i.y,d=e.x-i.x,c=0,f=0;for(c=0;c<l;c++){var p=this.GetLL(s[c]);this.OIntTexCoords[2*c]=(p.x-i.y)/u,this.OIntTexCoords[2*c+1]=(p.y-i.x)/d}for(f=0;f<4;f++){for(c=0;c<o;c++){var F=this.GetLL(a[f][c]);this.OTexCoords[f][2*c]=(F.x-i.y)/u,this.OTexCoords[f][2*c+1]=(F.y-i.x)/d}for(c=0;c<n;c++){var y=this.GetLL(h[f][c]);this.OTexCoords2[f][2*c]=(y.x-i.y)/u,this.OTexCoords2[f][2*c+1]=(y.y-i.x)/d}}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord1Buffer[3]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords[3],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord1Buffer[2]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords[2],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord1Buffer[0]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords[0],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord1Buffer[1]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords[1],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord2Buffer[3]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords2[3],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord2Buffer[2]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords2[2],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord2Buffer[0]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords2[0],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.Otexcoord2Buffer[1]),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OTexCoords2[1],this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.OInttexcoordBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.OIntTexCoords,this.gl.STATIC_DRAW)}},{key:"GetLL",value:function(t){if(this.FRaster.FRotateExists){var e=new h.u(0,0),i=new h.w(0,0,0);h.b.GeoTo3DP(t,a.z.GLOBE_RADIUS,i),i.Normalize();var r=this.FRaster,s=r.FRotationCenter,o=r.FRotationRad,n=s.x,l=s.y,u=s.z;return h.b.RotatePointAroundVector(i,n,l,u,-o),i.DotProductSet(a.z.GLOBE_RADIUS),h.b.CarToSpher2(i,e),e}return t}}]),t}();i.d(e,"a",function(){return u});var u=function(){function t(e){s()(this,t),this.FLive=[],this.FDead=[],this.FDeadCheckCnt=0,this.gl=e}return n()(t,[{key:"Destroy",value:function(){var t,e;for(t=0;t<this.FLive.length;t++){for(this.gl.deleteTexture(this.FLive[t].FRaster.FProjText),this.FLive[t].FRaster.FProjText=null,delete this.FLive[t].FCell,delete this.FLive[t].FRaster,delete this.FLive[t].OIntTexCoords,this.gl.deleteBuffer(this.FLive[t].OInttexcoordBuffer),this.FLive[t].OInttexcoordBuffer=null,e=0;e<4;e++)this.gl.deleteBuffer(this.FLive[t].Otexcoord1Buffer[e]),this.gl.deleteBuffer(this.FLive[t].Otexcoord2Buffer[e]),this.FLive[t].Otexcoord1Buffer[e]=null,this.FLive[t].Otexcoord2Buffer[e]=null,delete this.FLive[t].OTexCoords[e],delete this.FLive[t].OTexCoords2[e];this.FLive[t]=null}for(t=0;t<this.FDead.length;t++){for(this.gl.deleteTexture(this.FDead[t].FRaster.FProjText),this.FDead[t].FRaster.FProjText=null,delete this.FDead[t].FCell,delete this.FDead[t].FRaster,delete this.FDead[t].OIntTexCoords,this.gl.deleteBuffer(this.FDead[t].OInttexcoordBuffer),this.FDead[t].OInttexcoordBuffer=null,e=0;e<4;e++)this.gl.deleteBuffer(this.FDead[t].Otexcoord1Buffer[e]),this.gl.deleteBuffer(this.FDead[t].Otexcoord2Buffer[e]),this.FDead[t].Otexcoord1Buffer[e]=null,this.FDead[t].Otexcoord2Buffer[e]=null,delete this.FDead[t].OTexCoords[e],delete this.FDead[t].OTexCoords2[e];this.FDead[t]=null}this.FDead.length=0,this.FLive.length=0}},{key:"FreeTextureCoords",value:function(t){var e=this.FLive.indexOf(t);-1!==e&&(this.FDead.push(t),this.FLive.splice(e,1)),this.CheckAndFreeDead()}},{key:"CheckAndFreeDead",value:function(){if(this.FDeadCheckCnt++,this.FDeadCheckCnt>100&&(this.FDeadCheckCnt=0,this.FDead.length>a.z.GLOBE_MAX_DEAD_TEXTOVERLAY))for(var t=this.FDead.length-1;t>=a.z.GLOBE_MAX_DEAD_TEXTOVERLAY;t--){this.gl.deleteTexture(this.FDead[t].FRaster.FProjText),this.FDead[t].FRaster.FProjText=null,delete this.FDead[t].FCell,delete this.FDead[t].FRaster,delete this.FDead[t].OIntTexCoords,this.gl.deleteBuffer(this.FDead[t].OInttexcoordBuffer),this.FDead[t].OInttexcoordBuffer=null;for(var e=0;e<4;e++)this.gl.deleteBuffer(this.FDead[t].Otexcoord1Buffer[e]),this.gl.deleteBuffer(this.FDead[t].Otexcoord2Buffer[e]),this.FDead[t].Otexcoord1Buffer[e]=null,this.FDead[t].Otexcoord2Buffer[e]=null,delete this.FDead[t].OTexCoords[e],delete this.FDead[t].OTexCoords2[e];this.FDead.splice(t,1)}}},{key:"CreateTextureCoords",value:function(t,e,i){var r;return this.FDead.length?((r=this.FDead[this.FDead.length-1]).FCell=e,r.FRaster=i,r.FillCoords(),this.FDead.splice(this.FDead.length-1,1)):r=new l(t,e,i),this.FLive.push(r),r}}]),t}()},function(t,e,i){t.exports=i(79)},function(t,e,i){"use strict";i.r(e);var r=i(0);i.d(e,"CSGlobe",function(){return r.d}),i.d(e,"CSRasterTypes",function(){return r.p}),i.d(e,"CSObjectTypes",function(){return r.j}),i.d(e,"CSShapeTypes",function(){return r.r}),i.d(e,"CSIconTypes",function(){return r.e}),i.d(e,"CSMath",function(){return r.h}),i.d(e,"Point2d",function(){return r.w}),i.d(e,"Point3d",function(){return r.x}),i.d(e,"CSDateTypes",function(){return r.CSDateTypes}),i.d(e,"CSUtils",function(){return r.t}),i.d(e,"CSOnChangeStates",function(){return r.k}),i.d(e,"CSShowDistanceMode",function(){return r.s}),i.d(e,"CSZMode",function(){return r.u}),i.d(e,"CSCorner",function(){return r.a}),i.d(e,"CSOwnerTypes",function(){return r.m}),i.d(e,"Cluster",function(){return r.v}),i.d(e,"CSProcessType",function(){return r.o}),i.d(e,"CSObject3DShapeTypes",function(){return r.i})},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";e.byteLength=function(t){var e=l(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){for(var e,i=l(t),r=i[0],n=i[1],a=new o(function(t,e,i){return 3*(e+i)/4-i}(0,r,n)),h=0,u=n>0?r-4:r,d=0;d<u;d+=4)e=s[t.charCodeAt(d)]<<18|s[t.charCodeAt(d+1)]<<12|s[t.charCodeAt(d+2)]<<6|s[t.charCodeAt(d+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=255&e;2===n&&(e=s[t.charCodeAt(d)]<<2|s[t.charCodeAt(d+1)]>>4,a[h++]=255&e);1===n&&(e=s[t.charCodeAt(d)]<<10|s[t.charCodeAt(d+1)]<<4|s[t.charCodeAt(d+2)]>>2,a[h++]=e>>8&255,a[h++]=255&e);return a},e.fromByteArray=function(t){for(var e,i=t.length,s=i%3,o=[],n=0,a=i-s;n<a;n+=16383)o.push(u(t,n,n+16383>a?a:n+16383));1===s?(e=t[i-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],s=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,h=n.length;a<h;++a)r[a]=n[a],s[n.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function u(t,e,i){for(var s,o,n=[],a=e;a<i;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),n.push(r[(o=s)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return n.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";var r=i(26),s=i(84)[3],o=0,n=1,a=2;function h(t,e,i,r,s){this.a=t,this.b=e,this.idx=i,this.lowerIds=r,this.upperIds=s}function l(t,e,i,r){this.a=t,this.b=e,this.type=i,this.idx=r}function u(t,e){var i=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return i||(t.type!==o&&(i=s(t.a,t.b,e.b))?i:t.idx-e.idx)}function d(t,e){return s(t.a,t.b,e)}function c(t,e,i,o,n){for(var a=r.lt(e,o,d),h=r.gt(e,o,d),l=a;l<h;++l){for(var u=e[l],c=u.lowerIds,f=c.length;f>1&&s(i[c[f-2]],i[c[f-1]],o)>0;)t.push([c[f-1],c[f-2],n]),f-=1;c.length=f,c.push(n);var p=u.upperIds;for(f=p.length;f>1&&s(i[p[f-2]],i[p[f-1]],o)<0;)t.push([p[f-2],p[f-1],n]),f-=1;p.length=f,p.push(n)}}function f(t,e){var i;return(i=t.a[0]<e.a[0]?s(t.a,t.b,e.a):s(e.b,e.a,t.a))?i:(i=e.b[0]<t.b[0]?s(t.a,t.b,e.b):s(e.b,e.a,t.b))||t.idx-e.idx}function p(t,e,i){var s=r.le(t,i,f),o=t[s],n=o.upperIds,a=n[n.length-1];o.upperIds=[a],t.splice(s+1,0,new h(i.a,i.b,i.idx,[a],n))}function F(t,e,i){var s=i.a;i.a=i.b,i.b=s;var o=r.eq(t,i,f),n=t[o];t[o-1].upperIds=n.upperIds,t.splice(o,1)}t.exports=function(t,e){for(var i=t.length,r=e.length,s=[],d=0;d<i;++d)s.push(new l(t[d],null,o,d));for(var d=0;d<r;++d){var f=e[d],y=t[f[0]],A=t[f[1]];y[0]<A[0]?s.push(new l(y,A,a,d),new l(A,y,n,d)):y[0]>A[0]&&s.push(new l(A,y,a,d),new l(y,A,n,d))}s.sort(u);for(var g=s[0].a[0]-(1+Math.abs(s[0].a[0]))*Math.pow(2,-52),C=[new h([g,1],[g,0],-1,[],[],[],[])],b=[],d=0,T=s.length;d<T;++d){var v=s[d],L=v.type;L===o?c(b,C,t,v.a,v.idx):L===a?p(C,t,v):F(C,t,v)}return b}},function(t,e,i){"use strict";var r=i(31),s=i(39),o=i(40),n=i(41),a=5;function h(t,e){for(var i=new Array(t.length-1),r=1;r<t.length;++r)for(var s=i[r-1]=new Array(t.length-1),o=0,n=0;o<t.length;++o)o!==e&&(s[n++]=t[r][o]);return i}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function u(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],i=0;i<t.length;++i)e.push(["scale(",l(u(h(t,i))),",",(r=i,1&r?"-":""),t[0][i],")"].join(""));return e;var r}function d(t){for(var e=[],i=[],a=function(t){for(var e=new Array(t),i=0;i<t;++i){e[i]=new Array(t);for(var r=0;r<t;++r)e[i][r]=["m",r,"[",t-i-1,"]"].join("")}return e}(t),d=[],c=0;c<t;++c)0==(1&c)?e.push.apply(e,u(h(a,c))):i.push.apply(i,u(h(a,c))),d.push("m"+c);var f=l(e),p=l(i),F="orientation"+t+"Exact",y=["function ",F,"(",d.join(),"){var p=",f,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",F].join("");return new Function("sum","prod","scale","sub",y)(s,r,o,n)}var c=d(3),f=d(4),p=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,i){var r,s=(t[1]-i[1])*(e[0]-i[0]),o=(t[0]-i[0])*(e[1]-i[1]),n=s-o;if(s>0){if(o<=0)return n;r=s+o}else{if(!(s<0))return n;if(o>=0)return n;r=-(s+o)}var a=33306690738754716e-32*r;return n>=a||n<=-a?n:c(t,e,i)},function(t,e,i,r){var s=t[0]-r[0],o=e[0]-r[0],n=i[0]-r[0],a=t[1]-r[1],h=e[1]-r[1],l=i[1]-r[1],u=t[2]-r[2],d=e[2]-r[2],c=i[2]-r[2],p=o*l,F=n*h,y=n*a,A=s*l,g=s*h,C=o*a,b=u*(p-F)+d*(y-A)+c*(g-C),T=7771561172376103e-31*((Math.abs(p)+Math.abs(F))*Math.abs(u)+(Math.abs(y)+Math.abs(A))*Math.abs(d)+(Math.abs(g)+Math.abs(C))*Math.abs(c));return b>T||-b>T?b:f(t,e,i,r)}];function F(t){var e=p[t.length];return e||(e=p[t.length]=d(t.length)),e.apply(void 0,t)}!function(){for(;p.length<=a;)p.push(d(p.length));for(var e=[],i=["slow"],r=0;r<=a;++r)e.push("a"+r),i.push("o"+r);var s=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=a;++r)s.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");s.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),i.push(s.join(""));var o=Function.apply(void 0,i);for(t.exports=o.apply(void 0,[F].concat(p)),r=0;r<=a;++r)t.exports[r]=p[r]}()},function(t,e,i){"use strict";t.exports=function(t,e,i){var r=t+e,s=r-t,o=e-s,n=t-(r-s);if(i)return i[0]=n+o,i[1]=r,i;return[n+o,r]}},function(t,e,i){"use strict";var r=i(26);function s(t,e){this.stars=t,this.edges=e}t.exports=function(t,e){for(var i=new Array(t),r=0;r<t;++r)i[r]=[];return new s(i,e)};var o=s.prototype;function n(t,e,i){for(var r=1,s=t.length;r<s;r+=2)if(t[r-1]===e&&t[r]===i)return t[r-1]=t[s-2],t[r]=t[s-1],void(t.length=s-2)}o.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(i,s){return t[0]=Math.min(i,s),t[1]=Math.max(i,s),r.eq(this.edges,t,e)>=0}}(),o.removeTriangle=function(t,e,i){var r=this.stars;n(r[t],e,i),n(r[e],i,t),n(r[i],t,e)},o.addTriangle=function(t,e,i){var r=this.stars;r[t].push(e,i),r[e].push(i,t),r[i].push(t,e)},o.opposite=function(t,e){for(var i=this.stars[e],r=1,s=i.length;r<s;r+=2)if(i[r]===t)return i[r-1];return-1},o.flip=function(t,e){var i=this.opposite(t,e),r=this.opposite(e,t);this.removeTriangle(t,e,i),this.removeTriangle(e,t,r),this.addTriangle(t,r,i),this.addTriangle(e,i,r)},o.edges=function(){for(var t=this.stars,e=[],i=0,r=t.length;i<r;++i)for(var s=t[i],o=0,n=s.length;o<n;o+=2)e.push([s[o],s[o+1]]);return e},o.cells=function(){for(var t=this.stars,e=[],i=0,r=t.length;i<r;++i)for(var s=t[i],o=0,n=s.length;o<n;o+=2){var a=s[o],h=s[o+1];i<Math.min(a,h)&&e.push([i,a,h])}return e}},function(t,e,i){"use strict";var r=i(88)[4];i(26);function s(t,e,i,s,o,n){var a=e.opposite(s,o);if(!(a<0)){if(o<s){var h=s;s=o,o=h,h=n,n=a,a=h}e.isConstraint(s,o)||r(t[s],t[o],t[n],t[a])<0&&i.push(s,o)}}t.exports=function(t,e){for(var i=[],o=t.length,n=e.stars,a=0;a<o;++a)for(var h=n[a],l=1;l<h.length;l+=2){var u=h[l];if(!(u<a)&&!e.isConstraint(a,u)){for(var d=h[l-1],c=-1,f=1;f<h.length;f+=2)if(h[f-1]===u){c=h[f];break}c<0||r(t[a],t[u],t[d],t[c])<0&&i.push(a,u)}}for(;i.length>0;){for(var u=i.pop(),a=i.pop(),d=-1,c=-1,h=n[a],p=1;p<h.length;p+=2){var F=h[p-1],y=h[p];F===u?c=y:y===u&&(d=F)}d<0||c<0||(r(t[a],t[u],t[d],t[c])>=0||(e.flip(a,u),s(t,e,i,d,a,c),s(t,e,i,a,c,d),s(t,e,i,c,u,d),s(t,e,i,u,d,c)))}}},function(t,e,i){"use strict";var r=i(31),s=i(39),o=i(41),n=i(40),a=6;function h(t,e){for(var i=new Array(t.length-1),r=1;r<t.length;++r)for(var s=i[r-1]=new Array(t.length-1),o=0,n=0;o<t.length;++o)o!==e&&(s[n++]=t[r][o]);return i}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function u(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var i=t.split("[");return["w",e.substr(1),"m",i[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return u(e,t)}function d(t){if(2===t.length)return[["diff(",u(t[0][0],t[1][1]),",",u(t[1][0],t[0][1]),")"].join("")];for(var e=[],i=0;i<t.length;++i)e.push(["scale(",l(d(h(t,i))),",",(r=i,!0&r?"-":""),t[0][i],")"].join(""));return e;var r}function c(t,e){for(var i=[],r=0;r<e-2;++r)i.push(["prod(m",t,"[",r,"],m",t,"[",r,"])"].join(""));return l(i)}function f(t){for(var e=[],i=[],a=function(t){for(var e=new Array(t),i=0;i<t;++i){e[i]=new Array(t);for(var r=0;r<t;++r)e[i][r]=["m",r,"[",t-i-2,"]"].join("")}return e}(t),u=0;u<t;++u)a[0][u]="1",a[t-1][u]="w"+u;for(u=0;u<t;++u)0==(1&u)?e.push.apply(e,d(h(a,u))):i.push.apply(i,d(h(a,u)));var f=l(e),p=l(i),F="exactInSphere"+t,y=[];for(u=0;u<t;++u)y.push("m"+u);var A=["function ",F,"(",y.join(),"){"];for(u=0;u<t;++u){A.push("var w",u,"=",c(u,t),";");for(var g=0;g<t;++g)g!==u&&A.push("var w",u,"m",g,"=scale(w",u,",m",g,"[0]);")}return A.push("var p=",f,",n=",p,",d=diff(p,n);return d[d.length-1];}return ",F),new Function("sum","diff","prod","scale",A.join(""))(s,o,r,n)}var p=[function(){return 0},function(){return 0},function(){return 0}];function F(t){var e=p[t.length];return e||(e=p[t.length]=f(t.length)),e.apply(void 0,t)}!function(){for(;p.length<=a;)p.push(f(p.length));for(var e=[],i=["slow"],r=0;r<=a;++r)e.push("a"+r),i.push("o"+r);var s=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=a;++r)s.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");s.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),i.push(s.join(""));var o=Function.apply(void 0,i);for(t.exports=o.apply(void 0,[F].concat(p)),r=0;r<=a;++r)t.exports[r]=p[r]}()},function(t,e,i){"use strict";var r,s=i(26);function o(t,e,i,r,s,o,n){this.cells=t,this.neighbor=e,this.flags=r,this.constraint=i,this.active=s,this.next=o,this.boundary=n}function n(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}t.exports=function(t,e,i){var r=function(t,e){for(var i=t.cells(),r=i.length,s=0;s<r;++s){var a=i[s],h=a[0],l=a[1],u=a[2];l<u?l<h&&(a[0]=l,a[1]=u,a[2]=h):u<h&&(a[0]=u,a[1]=h,a[2]=l)}i.sort(n);for(var d=new Array(r),s=0;s<d.length;++s)d[s]=0;var c=[],f=[],p=new Array(3*r),F=new Array(3*r),y=null;e&&(y=[]);for(var A=new o(i,p,F,d,c,f,y),s=0;s<r;++s)for(var a=i[s],g=0;g<3;++g){var h=a[g],l=a[(g+1)%3],C=p[3*s+g]=A.locate(l,h,t.opposite(l,h)),b=F[3*s+g]=t.isConstraint(h,l);C<0&&(b?f.push(s):(c.push(s),d[s]=1),e&&y.push([l,h,-1]))}return A}(t,i);if(0===e)return i?r.cells.concat(r.boundary):r.cells;var s=1,a=r.active,h=r.next,l=r.flags,u=r.cells,d=r.constraint,c=r.neighbor;for(;a.length>0||h.length>0;){for(;a.length>0;){var f=a.pop();if(l[f]!==-s){l[f]=s;u[f];for(var p=0;p<3;++p){var F=c[3*f+p];F>=0&&0===l[F]&&(d[3*f+p]?h.push(F):(a.push(F),l[F]=s))}}}var y=h;h=a,a=y,h.length=0,s=-s}var A=function(t,e,i){for(var r=0,s=0;s<t.length;++s)e[s]===i&&(t[r++]=t[s]);return t.length=r,t}(u,l,e);if(i)return A.concat(r.boundary);return A},o.prototype.locate=(r=[0,0,0],function(t,e,i){var o=t,a=e,h=i;return e<i?e<t&&(o=e,a=i,h=t):i<t&&(o=i,a=t,h=e),o<0?-1:(r[0]=o,r[1]=a,r[2]=h,s.eq(this.cells,r,n))})},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function i(e,r){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,r)}t.exports=i},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,i){var r=function(t){"use strict";var e,i=Object.prototype,r=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",n=s.asyncIterator||"@@asyncIterator",a=s.toStringTag||"@@toStringTag";function h(t,e,i,r){var s=e&&e.prototype instanceof F?e:F,o=Object.create(s.prototype),n=new R(r||[]);return o._invoke=function(t,e,i){var r=u;return function(s,o){if(r===c)throw new Error("Generator is already running");if(r===f){if("throw"===s)throw o;return D()}for(i.method=s,i.arg=o;;){var n=i.delegate;if(n){var a=S(n,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===u)throw r=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=c;var h=l(t,e,i);if("normal"===h.type){if(r=i.done?f:d,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=f,i.method="throw",i.arg=h.arg)}}}(t,i,n),o}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var u="suspendedStart",d="suspendedYield",c="executing",f="completed",p={};function F(){}function y(){}function A(){}var g={};g[o]=function(){return this};var C=Object.getPrototypeOf,b=C&&C(C(m([])));b&&b!==i&&r.call(b,o)&&(g=b);var T=A.prototype=F.prototype=Object.create(g);function v(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(t){var e;this._invoke=function(i,s){function o(){return new Promise(function(e,o){!function e(i,s,o,n){var a=l(t[i],t,s);if("throw"!==a.type){var h=a.arg,u=h.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,n)},function(t){e("throw",t,o,n)}):Promise.resolve(u).then(function(t){h.value=t,o(h)},function(t){return e("throw",t,o,n)})}n(a.arg)}(i,s,e,o)})}return e=e?e.then(o,o):o()}}function S(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,S(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=l(r,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var o=s.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function m(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,n=function i(){for(;++s<t.length;)if(r.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return n.next=n}}return{next:D}}function D(){return{value:e,done:!0}}return y.prototype=T.constructor=A,A.constructor=y,A[a]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},v(L.prototype),L.prototype[n]=function(){return this},t.AsyncIterator=L,t.async=function(e,i,r,s){var o=new L(h(e,i,r,s));return t.isGeneratorFunction(i)?o:o.next().then(function(t){return t.done?t.value:o.next()})},v(T),T[a]="Generator",T[o]=function(){return this},T.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=m,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(r,s){return a.type="throw",a.arg=t,i.next=r,s&&(i.method="next",i.arg=e),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],a=n.completion;if("root"===n.tryLoc)return s("end");if(n.tryLoc<=this.prev){var h=r.call(n,"catchLoc"),l=r.call(n,"finallyLoc");if(h&&l){if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}else if(h){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var n=o?o.completion:{};return n.type=t,n.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),O(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;O(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:m(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,i){var r=i(97),s=i(98);function o(t){var e=new r;return function(t,e){for(var i in t.layers)e.writeMessage(3,n,t.layers[i])}(t,e),e.finish()}function n(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,a,r);var s=r.keys;for(i=0;i<s.length;i++)e.writeStringField(3,s[i]);var o=r.values;for(i=0;i<o.length;i++)e.writeMessage(4,c,o[i])}function a(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,h,t),e.writeVarintField(3,i.type),e.writeMessage(4,d,i)}function h(t,e){var i=t.feature,r=t.keys,s=t.values,o=t.keycache,n=t.valuecache;for(var a in i.properties){var h=o[a];void 0===h&&(r.push(a),h=r.length-1,o[a]=h),e.writeVarint(h);var l=i.properties[a],u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,c=n[d];void 0===c&&(s.push(l),c=s.length-1,n[d]=c),e.writeVarint(c)}}function l(t,e){return(e<<3)+(7&t)}function u(t){return t<<1^t>>31}function d(t,e){for(var i=t.loadGeometry(),r=t.type,s=0,o=0,n=i.length,a=0;a<n;a++){var h=i[a],d=1;1===r&&(d=h.length),e.writeVarint(l(1,d));for(var c=3===r?h.length-1:h.length,f=0;f<c;f++){1===f&&1!==r&&e.writeVarint(l(2,c-1));var p=h[f].x-s,F=h[f].y-o;e.writeVarint(u(p)),e.writeVarint(u(F)),s+=p,o+=F}3===r&&e.writeVarint(l(7,1))}}function c(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}t.exports=o,t.exports.fromVectorTileJs=o,t.exports.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new s(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return o({layers:i})},t.exports.GeoJSONWrapper=s},function(t,e,i){"use strict";t.exports=s;var r=i(30);function s(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;function o(t){return t.type===s.Bytes?t.readVarint()+t.pos:t.pos+1}function n(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var s=i.pos-1;s>=t;s--)i.buf[s+r]=i.buf[s]}function h(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function F(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function A(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function g(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function C(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}s.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),s=r>>3,o=this.pos;this.type=7&r,t(s,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=A(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=C(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=A(this.buf,this.pos)+4294967296*A(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=A(this.buf,this.pos)+4294967296*C(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,s,o=i.buf;if(s=o[i.pos++],r=(112&s)>>4,s<128)return n(t,r,e);if(s=o[i.pos++],r|=(127&s)<<3,s<128)return n(t,r,e);if(s=o[i.pos++],r|=(127&s)<<10,s<128)return n(t,r,e);if(s=o[i.pos++],r|=(127&s)<<17,s<128)return n(t,r,e);if(s=o[i.pos++],r|=(127&s)<<24,s<128)return n(t,r,e);if(s=o[i.pos++],r|=(1&s)<<31,s<128)return n(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){var r="",s=e;for(;s<i;){var o,n,a,h=t[s],l=null,u=h>239?4:h>223?3:h>191?2:1;if(s+u>i)break;1===u?h<128&&(l=h):2===u?128==(192&(o=t[s+1]))&&(l=(31&h)<<6|63&o)<=127&&(l=null):3===u?(o=t[s+1],n=t[s+2],128==(192&o)&&128==(192&n)&&((l=(15&h)<<12|(63&o)<<6|63&n)<=2047||l>=55296&&l<=57343)&&(l=null)):4===u&&(o=t[s+1],n=t[s+2],a=t[s+3],128==(192&o)&&128==(192&n)&&128==(192&a)&&((l=(15&h)<<18|(63&o)<<12|(63&n)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,u=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),s+=u}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==s.Bytes)return t.push(this.readVarint(e));var i=o(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==s.Bytes)return t.push(this.readSVarint());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==s.Bytes)return t.push(this.readBoolean());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==s.Bytes)return t.push(this.readFloat());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==s.Bytes)return t.push(this.readDouble());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==s.Bytes)return t.push(this.readFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==s.Bytes)return t.push(this.readSFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==s.Bytes)return t.push(this.readFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==s.Bytes)return t.push(this.readSFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===s.Varint)for(;this.buf[this.pos++]>127;);else if(e===s.Bytes)this.pos=this.readVarint()+this.pos;else if(e===s.Fixed32)this.pos+=4;else{if(e!==s.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,s,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!s){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):s=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[i++]=239,t[i++]=191,t[i++]=189,s=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&a(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,s.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,F,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writeBytesField:function(t,e){this.writeTag(t,s.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,s.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,s.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,s.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,s.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,s.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,s.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,s.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,s.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,s.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){"use strict";var r=i(42),s=i(33).VectorTileFeature;function o(t,e){this.options=e||{},this.features=t,this.length=t.length}function n(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}t.exports=o,o.prototype.feature=function(t){return new n(this.features[t],this.options.extent)},n.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],s=[],o=0;o<i.length;o++)s.push(new r(i[o][0],i[o][1]));this.geometry.push(s)}return this.geometry},n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,s=-1/0,o=0;o<t.length;o++)for(var n=t[o],a=0;a<n.length;a++){var h=n[a];e=Math.min(e,h.x),i=Math.max(i,h.x),r=Math.min(r,h.y),s=Math.max(s,h.y)}return[e,r,i,s]},n.prototype.toGeoJSON=s.prototype.toGeoJSON},function(t,e,i){"use strict";var r=i(43);function s(t,e,i){if(3===t){var s=new r(i,i.readVarint()+i.pos);s.length&&(e[s.name]=s)}}t.exports=function(t,e){this.layers=t.readFields(s,{},e)}}])});